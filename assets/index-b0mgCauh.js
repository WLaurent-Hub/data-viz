function b6(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var $_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w6={exports:{}},FE={},S6={exports:{}},Rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx=Symbol.for("react.element"),DH=Symbol.for("react.portal"),RH=Symbol.for("react.fragment"),zH=Symbol.for("react.strict_mode"),FH=Symbol.for("react.profiler"),BH=Symbol.for("react.provider"),jH=Symbol.for("react.context"),UH=Symbol.for("react.forward_ref"),VH=Symbol.for("react.suspense"),GH=Symbol.for("react.memo"),qH=Symbol.for("react.lazy"),KL=Symbol.iterator;function WH(e){return e===null||typeof e!="object"?null:(e=KL&&e[KL]||e["@@iterator"],typeof e=="function"?e:null)}var E6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C6=Object.assign,I6={};function Py(e,t,n){this.props=e,this.context=t,this.refs=I6,this.updater=n||E6}Py.prototype.isReactComponent={};Py.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Py.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function T6(){}T6.prototype=Py.prototype;function gM(e,t,n){this.props=e,this.context=t,this.refs=I6,this.updater=n||E6}var yM=gM.prototype=new T6;yM.constructor=gM;C6(yM,Py.prototype);yM.isPureReactComponent=!0;var YL=Array.isArray,P6=Object.prototype.hasOwnProperty,vM={current:null},A6={key:!0,ref:!0,__self:!0,__source:!0};function O6(e,t,n){var r,i={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)P6.call(t,r)&&!A6.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var h=Array(a),d=0;d<a;d++)h[d]=arguments[d+2];i.children=h}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Bx,type:e,key:o,ref:l,props:i,_owner:vM.current}}function HH(e,t){return{$$typeof:Bx,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _M(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bx}function XH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var JL=/\/+/g;function NI(e,t){return typeof e=="object"&&e!==null&&e.key!=null?XH(""+e.key):t.toString(36)}function Sw(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Bx:case DH:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+NI(l,0):r,YL(i)?(n="",e!=null&&(n=e.replace(JL,"$&/")+"/"),Sw(i,t,n,"",function(d){return d})):i!=null&&(_M(i)&&(i=HH(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(JL,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",YL(e))for(var a=0;a<e.length;a++){o=e[a];var h=r+NI(o,a);l+=Sw(o,t,n,h,i)}else if(h=WH(e),typeof h=="function")for(e=h.call(e),a=0;!(o=e.next()).done;)o=o.value,h=r+NI(o,a++),l+=Sw(o,t,n,h,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ib(e,t,n){if(e==null)return e;var r=[],i=0;return Sw(e,r,"","",function(o){return t.call(n,o,i++)}),r}function ZH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ja={current:null},Ew={transition:null},KH={ReactCurrentDispatcher:ja,ReactCurrentBatchConfig:Ew,ReactCurrentOwner:vM};Rn.Children={map:Ib,forEach:function(e,t,n){Ib(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ib(e,function(){t++}),t},toArray:function(e){return Ib(e,function(t){return t})||[]},only:function(e){if(!_M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rn.Component=Py;Rn.Fragment=RH;Rn.Profiler=FH;Rn.PureComponent=gM;Rn.StrictMode=zH;Rn.Suspense=VH;Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KH;Rn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=C6({},e.props),i=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=vM.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(h in t)P6.call(t,h)&&!A6.hasOwnProperty(h)&&(r[h]=t[h]===void 0&&a!==void 0?a[h]:t[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){a=Array(h);for(var d=0;d<h;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Bx,type:e.type,key:i,ref:o,props:r,_owner:l}};Rn.createContext=function(e){return e={$$typeof:jH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:BH,_context:e},e.Consumer=e};Rn.createElement=O6;Rn.createFactory=function(e){var t=O6.bind(null,e);return t.type=e,t};Rn.createRef=function(){return{current:null}};Rn.forwardRef=function(e){return{$$typeof:UH,render:e}};Rn.isValidElement=_M;Rn.lazy=function(e){return{$$typeof:qH,_payload:{_status:-1,_result:e},_init:ZH}};Rn.memo=function(e,t){return{$$typeof:GH,type:e,compare:t===void 0?null:t}};Rn.startTransition=function(e){var t=Ew.transition;Ew.transition={};try{e()}finally{Ew.transition=t}};Rn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Rn.useCallback=function(e,t){return ja.current.useCallback(e,t)};Rn.useContext=function(e){return ja.current.useContext(e)};Rn.useDebugValue=function(){};Rn.useDeferredValue=function(e){return ja.current.useDeferredValue(e)};Rn.useEffect=function(e,t){return ja.current.useEffect(e,t)};Rn.useId=function(){return ja.current.useId()};Rn.useImperativeHandle=function(e,t,n){return ja.current.useImperativeHandle(e,t,n)};Rn.useInsertionEffect=function(e,t){return ja.current.useInsertionEffect(e,t)};Rn.useLayoutEffect=function(e,t){return ja.current.useLayoutEffect(e,t)};Rn.useMemo=function(e,t){return ja.current.useMemo(e,t)};Rn.useReducer=function(e,t,n){return ja.current.useReducer(e,t,n)};Rn.useRef=function(e){return ja.current.useRef(e)};Rn.useState=function(e){return ja.current.useState(e)};Rn.useSyncExternalStore=function(e,t,n){return ja.current.useSyncExternalStore(e,t,n)};Rn.useTransition=function(){return ja.current.useTransition()};Rn.version="18.2.0";S6.exports=Rn;var D=S6.exports;const Re=hr(D),Zw=b6({__proto__:null,default:Re},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YH=D,JH=Symbol.for("react.element"),QH=Symbol.for("react.fragment"),eX=Object.prototype.hasOwnProperty,tX=YH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nX={key:!0,ref:!0,__self:!0,__source:!0};function M6(e,t,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)eX.call(t,r)&&!nX.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:JH,type:e,key:o,ref:l,props:i,_owner:tX.current}}FE.Fragment=QH;FE.jsx=M6;FE.jsxs=M6;w6.exports=FE;var Pe=w6.exports,fP={},$6={exports:{}},Ws={},k6={exports:{}},N6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ee,de){var De=Ee.length;Ee.push(de);e:for(;0<De;){var He=De-1>>>1,je=Ee[He];if(0<i(je,de))Ee[He]=de,Ee[De]=je,De=He;else break e}}function n(Ee){return Ee.length===0?null:Ee[0]}function r(Ee){if(Ee.length===0)return null;var de=Ee[0],De=Ee.pop();if(De!==de){Ee[0]=De;e:for(var He=0,je=Ee.length,et=je>>>1;He<et;){var Et=2*(He+1)-1,zt=Ee[Et],Yt=Et+1,St=Ee[Yt];if(0>i(zt,De))Yt<je&&0>i(St,zt)?(Ee[He]=St,Ee[Yt]=De,He=Yt):(Ee[He]=zt,Ee[Et]=De,He=Et);else if(Yt<je&&0>i(St,De))Ee[He]=St,Ee[Yt]=De,He=Yt;else break e}}return de}function i(Ee,de){var De=Ee.sortIndex-de.sortIndex;return De!==0?De:Ee.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var h=[],d=[],g=1,v=null,b=3,I=!1,T=!1,P=!1,$=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Ee){for(var de=n(d);de!==null;){if(de.callback===null)r(d);else if(de.startTime<=Ee)r(d),de.sortIndex=de.expirationTime,t(h,de);else break;de=n(d)}}function j(Ee){if(P=!1,R(Ee),!T)if(n(h)!==null)T=!0,Te(F);else{var de=n(d);de!==null&&Le(j,de.startTime-Ee)}}function F(Ee,de){T=!1,P&&(P=!1,O(Z),Z=-1),I=!0;var De=b;try{for(R(de),v=n(h);v!==null&&(!(v.expirationTime>de)||Ee&&!ye());){var He=v.callback;if(typeof He=="function"){v.callback=null,b=v.priorityLevel;var je=He(v.expirationTime<=de);de=e.unstable_now(),typeof je=="function"?v.callback=je:v===n(h)&&r(h),R(de)}else r(h);v=n(h)}if(v!==null)var et=!0;else{var Et=n(d);Et!==null&&Le(j,Et.startTime-de),et=!1}return et}finally{v=null,b=De,I=!1}}var U=!1,G=null,Z=-1,ne=5,oe=-1;function ye(){return!(e.unstable_now()-oe<ne)}function fe(){if(G!==null){var Ee=e.unstable_now();oe=Ee;var de=!0;try{de=G(!0,Ee)}finally{de?$e():(U=!1,G=null)}}else U=!1}var $e;if(typeof k=="function")$e=function(){k(fe)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,be=ae.port2;ae.port1.onmessage=fe,$e=function(){be.postMessage(null)}}else $e=function(){$(fe,0)};function Te(Ee){G=Ee,U||(U=!0,$e())}function Le(Ee,de){Z=$(function(){Ee(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ee){Ee.callback=null},e.unstable_continueExecution=function(){T||I||(T=!0,Te(F))},e.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<Ee?Math.floor(1e3/Ee):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(Ee){switch(b){case 1:case 2:case 3:var de=3;break;default:de=b}var De=b;b=de;try{return Ee()}finally{b=De}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ee,de){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var De=b;b=Ee;try{return de()}finally{b=De}},e.unstable_scheduleCallback=function(Ee,de,De){var He=e.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?He+De:He):De=He,Ee){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=De+je,Ee={id:g++,callback:de,priorityLevel:Ee,startTime:De,expirationTime:je,sortIndex:-1},De>He?(Ee.sortIndex=De,t(d,Ee),n(h)===null&&Ee===n(d)&&(P?(O(Z),Z=-1):P=!0,Le(j,De-He))):(Ee.sortIndex=je,t(h,Ee),T||I||(T=!0,Te(F))),Ee},e.unstable_shouldYield=ye,e.unstable_wrapCallback=function(Ee){var de=b;return function(){var De=b;b=de;try{return Ee.apply(this,arguments)}finally{b=De}}}})(N6);k6.exports=N6;var rX=k6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L6=D,Ls=rX;function ht(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D6=new Set,c0={};function Lp(e,t){Eg(e,t),Eg(e+"Capture",t)}function Eg(e,t){for(c0[e]=t,e=0;e<t.length;e++)D6.add(t[e])}var af=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hP=Object.prototype.hasOwnProperty,iX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QL={},eD={};function oX(e){return hP.call(eD,e)?!0:hP.call(QL,e)?!1:iX.test(e)?eD[e]=!0:(QL[e]=!0,!1)}function aX(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sX(e,t,n,r){if(t===null||typeof t>"u"||aX(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ua(e,t,n,r,i,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var Ho={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ho[e]=new Ua(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ho[t]=new Ua(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ho[e]=new Ua(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ho[e]=new Ua(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ho[e]=new Ua(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ho[e]=new Ua(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ho[e]=new Ua(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ho[e]=new Ua(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ho[e]=new Ua(e,5,!1,e.toLowerCase(),null,!1,!1)});var xM=/[\-:]([a-z])/g;function bM(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xM,bM);Ho[t]=new Ua(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xM,bM);Ho[t]=new Ua(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xM,bM);Ho[t]=new Ua(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ho[e]=new Ua(e,1,!1,e.toLowerCase(),null,!1,!1)});Ho.xlinkHref=new Ua("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ho[e]=new Ua(e,1,!1,e.toLowerCase(),null,!0,!0)});function wM(e,t,n,r){var i=Ho.hasOwnProperty(t)?Ho[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sX(t,n,i,r)&&(n=null),r||i===null?oX(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Of=L6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tb=Symbol.for("react.element"),Zm=Symbol.for("react.portal"),Km=Symbol.for("react.fragment"),SM=Symbol.for("react.strict_mode"),dP=Symbol.for("react.profiler"),R6=Symbol.for("react.provider"),z6=Symbol.for("react.context"),EM=Symbol.for("react.forward_ref"),pP=Symbol.for("react.suspense"),mP=Symbol.for("react.suspense_list"),CM=Symbol.for("react.memo"),gh=Symbol.for("react.lazy"),F6=Symbol.for("react.offscreen"),tD=Symbol.iterator;function l_(e){return e===null||typeof e!="object"?null:(e=tD&&e[tD]||e["@@iterator"],typeof e=="function"?e:null)}var gi=Object.assign,LI;function k_(e){if(LI===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);LI=t&&t[1]||""}return`
`+LI+e}var DI=!1;function RI(e,t){if(!e||DI)return"";DI=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,a=o.length-1;1<=l&&0<=a&&i[l]!==o[a];)a--;for(;1<=l&&0<=a;l--,a--)if(i[l]!==o[a]){if(l!==1||a!==1)do if(l--,a--,0>a||i[l]!==o[a]){var h=`
`+i[l].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=l&&0<=a);break}}}finally{DI=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?k_(e):""}function lX(e){switch(e.tag){case 5:return k_(e.type);case 16:return k_("Lazy");case 13:return k_("Suspense");case 19:return k_("SuspenseList");case 0:case 2:case 15:return e=RI(e.type,!1),e;case 11:return e=RI(e.type.render,!1),e;case 1:return e=RI(e.type,!0),e;default:return""}}function gP(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Km:return"Fragment";case Zm:return"Portal";case dP:return"Profiler";case SM:return"StrictMode";case pP:return"Suspense";case mP:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z6:return(e.displayName||"Context")+".Consumer";case R6:return(e._context.displayName||"Context")+".Provider";case EM:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case CM:return t=e.displayName||null,t!==null?t:gP(e.type)||"Memo";case gh:t=e._payload,e=e._init;try{return gP(e(t))}catch{}}return null}function uX(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gP(t);case 8:return t===SM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function B6(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cX(e){var t=B6(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pb(e){e._valueTracker||(e._valueTracker=cX(e))}function j6(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=B6(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Kw(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yP(e,t){var n=t.checked;return gi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function nD(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=zh(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function U6(e,t){t=t.checked,t!=null&&wM(e,"checked",t,!1)}function vP(e,t){U6(e,t);var n=zh(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_P(e,t.type,n):t.hasOwnProperty("defaultValue")&&_P(e,t.type,zh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rD(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _P(e,t,n){(t!=="number"||Kw(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var N_=Array.isArray;function hg(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+zh(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function xP(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ht(91));return gi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function iD(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ht(92));if(N_(n)){if(1<n.length)throw Error(ht(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:zh(n)}}function V6(e,t){var n=zh(t.value),r=zh(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function oD(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function G6(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bP(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?G6(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ab,q6=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ab=Ab||document.createElement("div"),Ab.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ab.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function f0(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var V_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fX=["Webkit","ms","Moz","O"];Object.keys(V_).forEach(function(e){fX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),V_[t]=V_[e]})});function W6(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||V_.hasOwnProperty(e)&&V_[e]?(""+t).trim():t+"px"}function H6(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=W6(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var hX=gi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wP(e,t){if(t){if(hX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ht(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ht(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ht(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ht(62))}}function SP(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EP=null;function IM(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var CP=null,dg=null,pg=null;function aD(e){if(e=Vx(e)){if(typeof CP!="function")throw Error(ht(280));var t=e.stateNode;t&&(t=GE(t),CP(e.stateNode,e.type,t))}}function X6(e){dg?pg?pg.push(e):pg=[e]:dg=e}function Z6(){if(dg){var e=dg,t=pg;if(pg=dg=null,aD(e),t)for(e=0;e<t.length;e++)aD(t[e])}}function K6(e,t){return e(t)}function Y6(){}var zI=!1;function J6(e,t,n){if(zI)return e(t,n);zI=!0;try{return K6(e,t,n)}finally{zI=!1,(dg!==null||pg!==null)&&(Y6(),Z6())}}function h0(e,t){var n=e.stateNode;if(n===null)return null;var r=GE(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ht(231,t,typeof n));return n}var IP=!1;if(af)try{var u_={};Object.defineProperty(u_,"passive",{get:function(){IP=!0}}),window.addEventListener("test",u_,u_),window.removeEventListener("test",u_,u_)}catch{IP=!1}function dX(e,t,n,r,i,o,l,a,h){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(g){this.onError(g)}}var G_=!1,Yw=null,Jw=!1,TP=null,pX={onError:function(e){G_=!0,Yw=e}};function mX(e,t,n,r,i,o,l,a,h){G_=!1,Yw=null,dX.apply(pX,arguments)}function gX(e,t,n,r,i,o,l,a,h){if(mX.apply(this,arguments),G_){if(G_){var d=Yw;G_=!1,Yw=null}else throw Error(ht(198));Jw||(Jw=!0,TP=d)}}function Dp(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Q6(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sD(e){if(Dp(e)!==e)throw Error(ht(188))}function yX(e){var t=e.alternate;if(!t){if(t=Dp(e),t===null)throw Error(ht(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return sD(i),e;if(o===r)return sD(i),t;o=o.sibling}throw Error(ht(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,a=i.child;a;){if(a===n){l=!0,n=i,r=o;break}if(a===r){l=!0,r=i,n=o;break}a=a.sibling}if(!l){for(a=o.child;a;){if(a===n){l=!0,n=o,r=i;break}if(a===r){l=!0,r=o,n=i;break}a=a.sibling}if(!l)throw Error(ht(189))}}if(n.alternate!==r)throw Error(ht(190))}if(n.tag!==3)throw Error(ht(188));return n.stateNode.current===n?e:t}function eB(e){return e=yX(e),e!==null?tB(e):null}function tB(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tB(e);if(t!==null)return t;e=e.sibling}return null}var nB=Ls.unstable_scheduleCallback,lD=Ls.unstable_cancelCallback,vX=Ls.unstable_shouldYield,_X=Ls.unstable_requestPaint,Mi=Ls.unstable_now,xX=Ls.unstable_getCurrentPriorityLevel,TM=Ls.unstable_ImmediatePriority,rB=Ls.unstable_UserBlockingPriority,Qw=Ls.unstable_NormalPriority,bX=Ls.unstable_LowPriority,iB=Ls.unstable_IdlePriority,BE=null,lc=null;function wX(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(BE,e,void 0,(e.current.flags&128)===128)}catch{}}var _u=Math.clz32?Math.clz32:CX,SX=Math.log,EX=Math.LN2;function CX(e){return e>>>=0,e===0?32:31-(SX(e)/EX|0)|0}var Ob=64,Mb=4194304;function L_(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function eS(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var a=l&~i;a!==0?r=L_(a):(o&=l,o!==0&&(r=L_(o)))}else l=n&~i,l!==0?r=L_(l):o!==0&&(r=L_(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-_u(t),i=1<<n,r|=e[n],t&=~i;return r}function IX(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TX(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-_u(o),a=1<<l,h=i[l];h===-1?(!(a&n)||a&r)&&(i[l]=IX(a,t)):h<=t&&(e.expiredLanes|=a),o&=~a}}function PP(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oB(){var e=Ob;return Ob<<=1,!(Ob&4194240)&&(Ob=64),e}function FI(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jx(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_u(t),e[t]=n}function PX(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-_u(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function PM(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_u(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var cr=0;function aB(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sB,AM,lB,uB,cB,AP=!1,$b=[],Ih=null,Th=null,Ph=null,d0=new Map,p0=new Map,_h=[],AX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uD(e,t){switch(e){case"focusin":case"focusout":Ih=null;break;case"dragenter":case"dragleave":Th=null;break;case"mouseover":case"mouseout":Ph=null;break;case"pointerover":case"pointerout":d0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":p0.delete(t.pointerId)}}function c_(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Vx(t),t!==null&&AM(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function OX(e,t,n,r,i){switch(t){case"focusin":return Ih=c_(Ih,e,t,n,r,i),!0;case"dragenter":return Th=c_(Th,e,t,n,r,i),!0;case"mouseover":return Ph=c_(Ph,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return d0.set(o,c_(d0.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,p0.set(o,c_(p0.get(o)||null,e,t,n,r,i)),!0}return!1}function fB(e){var t=Kd(e.target);if(t!==null){var n=Dp(t);if(n!==null){if(t=n.tag,t===13){if(t=Q6(n),t!==null){e.blockedOn=t,cB(e.priority,function(){lB(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=OP(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);EP=r,n.target.dispatchEvent(r),EP=null}else return t=Vx(n),t!==null&&AM(t),e.blockedOn=n,!1;t.shift()}return!0}function cD(e,t,n){Cw(e)&&n.delete(t)}function MX(){AP=!1,Ih!==null&&Cw(Ih)&&(Ih=null),Th!==null&&Cw(Th)&&(Th=null),Ph!==null&&Cw(Ph)&&(Ph=null),d0.forEach(cD),p0.forEach(cD)}function f_(e,t){e.blockedOn===t&&(e.blockedOn=null,AP||(AP=!0,Ls.unstable_scheduleCallback(Ls.unstable_NormalPriority,MX)))}function m0(e){function t(i){return f_(i,e)}if(0<$b.length){f_($b[0],e);for(var n=1;n<$b.length;n++){var r=$b[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ih!==null&&f_(Ih,e),Th!==null&&f_(Th,e),Ph!==null&&f_(Ph,e),d0.forEach(t),p0.forEach(t),n=0;n<_h.length;n++)r=_h[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<_h.length&&(n=_h[0],n.blockedOn===null);)fB(n),n.blockedOn===null&&_h.shift()}var mg=Of.ReactCurrentBatchConfig,tS=!0;function $X(e,t,n,r){var i=cr,o=mg.transition;mg.transition=null;try{cr=1,OM(e,t,n,r)}finally{cr=i,mg.transition=o}}function kX(e,t,n,r){var i=cr,o=mg.transition;mg.transition=null;try{cr=4,OM(e,t,n,r)}finally{cr=i,mg.transition=o}}function OM(e,t,n,r){if(tS){var i=OP(e,t,n,r);if(i===null)ZI(e,t,r,nS,n),uD(e,r);else if(OX(i,e,t,n,r))r.stopPropagation();else if(uD(e,r),t&4&&-1<AX.indexOf(e)){for(;i!==null;){var o=Vx(i);if(o!==null&&sB(o),o=OP(e,t,n,r),o===null&&ZI(e,t,r,nS,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ZI(e,t,r,null,n)}}var nS=null;function OP(e,t,n,r){if(nS=null,e=IM(r),e=Kd(e),e!==null)if(t=Dp(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Q6(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nS=e,null}function hB(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xX()){case TM:return 1;case rB:return 4;case Qw:case bX:return 16;case iB:return 536870912;default:return 16}default:return 16}}var wh=null,MM=null,Iw=null;function dB(){if(Iw)return Iw;var e,t=MM,n=t.length,r,i="value"in wh?wh.value:wh.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[o-r];r++);return Iw=i.slice(e,1<r?1-r:void 0)}function Tw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kb(){return!0}function fD(){return!1}function Hs(e){function t(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kb:fD,this.isPropagationStopped=fD,this}return gi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kb)},persist:function(){},isPersistent:kb}),t}var Ay={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$M=Hs(Ay),Ux=gi({},Ay,{view:0,detail:0}),NX=Hs(Ux),BI,jI,h_,jE=gi({},Ux,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kM,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==h_&&(h_&&e.type==="mousemove"?(BI=e.screenX-h_.screenX,jI=e.screenY-h_.screenY):jI=BI=0,h_=e),BI)},movementY:function(e){return"movementY"in e?e.movementY:jI}}),hD=Hs(jE),LX=gi({},jE,{dataTransfer:0}),DX=Hs(LX),RX=gi({},Ux,{relatedTarget:0}),UI=Hs(RX),zX=gi({},Ay,{animationName:0,elapsedTime:0,pseudoElement:0}),FX=Hs(zX),BX=gi({},Ay,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jX=Hs(BX),UX=gi({},Ay,{data:0}),dD=Hs(UX),VX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WX(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qX[e])?!!t[e]:!1}function kM(){return WX}var HX=gi({},Ux,{key:function(e){if(e.key){var t=VX[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Tw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?GX[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kM,charCode:function(e){return e.type==="keypress"?Tw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),XX=Hs(HX),ZX=gi({},jE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pD=Hs(ZX),KX=gi({},Ux,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kM}),YX=Hs(KX),JX=gi({},Ay,{propertyName:0,elapsedTime:0,pseudoElement:0}),QX=Hs(JX),eZ=gi({},jE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tZ=Hs(eZ),nZ=[9,13,27,32],NM=af&&"CompositionEvent"in window,q_=null;af&&"documentMode"in document&&(q_=document.documentMode);var rZ=af&&"TextEvent"in window&&!q_,pB=af&&(!NM||q_&&8<q_&&11>=q_),mD=" ",gD=!1;function mB(e,t){switch(e){case"keyup":return nZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gB(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ym=!1;function iZ(e,t){switch(e){case"compositionend":return gB(t);case"keypress":return t.which!==32?null:(gD=!0,mD);case"textInput":return e=t.data,e===mD&&gD?null:e;default:return null}}function oZ(e,t){if(Ym)return e==="compositionend"||!NM&&mB(e,t)?(e=dB(),Iw=MM=wh=null,Ym=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pB&&t.locale!=="ko"?null:t.data;default:return null}}var aZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yD(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aZ[e.type]:t==="textarea"}function yB(e,t,n,r){X6(r),t=rS(t,"onChange"),0<t.length&&(n=new $M("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var W_=null,g0=null;function sZ(e){PB(e,0)}function UE(e){var t=eg(e);if(j6(t))return e}function lZ(e,t){if(e==="change")return t}var vB=!1;if(af){var VI;if(af){var GI="oninput"in document;if(!GI){var vD=document.createElement("div");vD.setAttribute("oninput","return;"),GI=typeof vD.oninput=="function"}VI=GI}else VI=!1;vB=VI&&(!document.documentMode||9<document.documentMode)}function _D(){W_&&(W_.detachEvent("onpropertychange",_B),g0=W_=null)}function _B(e){if(e.propertyName==="value"&&UE(g0)){var t=[];yB(t,g0,e,IM(e)),J6(sZ,t)}}function uZ(e,t,n){e==="focusin"?(_D(),W_=t,g0=n,W_.attachEvent("onpropertychange",_B)):e==="focusout"&&_D()}function cZ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return UE(g0)}function fZ(e,t){if(e==="click")return UE(t)}function hZ(e,t){if(e==="input"||e==="change")return UE(t)}function dZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Iu=typeof Object.is=="function"?Object.is:dZ;function y0(e,t){if(Iu(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hP.call(t,i)||!Iu(e[i],t[i]))return!1}return!0}function xD(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bD(e,t){var n=xD(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xD(n)}}function xB(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xB(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bB(){for(var e=window,t=Kw();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kw(e.document)}return t}function LM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function pZ(e){var t=bB(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xB(n.ownerDocument.documentElement,n)){if(r!==null&&LM(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=bD(n,o);var l=bD(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mZ=af&&"documentMode"in document&&11>=document.documentMode,Jm=null,MP=null,H_=null,$P=!1;function wD(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$P||Jm==null||Jm!==Kw(r)||(r=Jm,"selectionStart"in r&&LM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),H_&&y0(H_,r)||(H_=r,r=rS(MP,"onSelect"),0<r.length&&(t=new $M("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jm)))}function Nb(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qm={animationend:Nb("Animation","AnimationEnd"),animationiteration:Nb("Animation","AnimationIteration"),animationstart:Nb("Animation","AnimationStart"),transitionend:Nb("Transition","TransitionEnd")},qI={},wB={};af&&(wB=document.createElement("div").style,"AnimationEvent"in window||(delete Qm.animationend.animation,delete Qm.animationiteration.animation,delete Qm.animationstart.animation),"TransitionEvent"in window||delete Qm.transitionend.transition);function VE(e){if(qI[e])return qI[e];if(!Qm[e])return e;var t=Qm[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wB)return qI[e]=t[n];return e}var SB=VE("animationend"),EB=VE("animationiteration"),CB=VE("animationstart"),IB=VE("transitionend"),TB=new Map,SD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function id(e,t){TB.set(e,t),Lp(t,[e])}for(var WI=0;WI<SD.length;WI++){var HI=SD[WI],gZ=HI.toLowerCase(),yZ=HI[0].toUpperCase()+HI.slice(1);id(gZ,"on"+yZ)}id(SB,"onAnimationEnd");id(EB,"onAnimationIteration");id(CB,"onAnimationStart");id("dblclick","onDoubleClick");id("focusin","onFocus");id("focusout","onBlur");id(IB,"onTransitionEnd");Eg("onMouseEnter",["mouseout","mouseover"]);Eg("onMouseLeave",["mouseout","mouseover"]);Eg("onPointerEnter",["pointerout","pointerover"]);Eg("onPointerLeave",["pointerout","pointerover"]);Lp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var D_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(D_));function ED(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,gX(r,t,void 0,e),e.currentTarget=null}function PB(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var a=r[l],h=a.instance,d=a.currentTarget;if(a=a.listener,h!==o&&i.isPropagationStopped())break e;ED(i,a,d),o=h}else for(l=0;l<r.length;l++){if(a=r[l],h=a.instance,d=a.currentTarget,a=a.listener,h!==o&&i.isPropagationStopped())break e;ED(i,a,d),o=h}}}if(Jw)throw e=TP,Jw=!1,TP=null,e}function jr(e,t){var n=t[RP];n===void 0&&(n=t[RP]=new Set);var r=e+"__bubble";n.has(r)||(AB(t,e,2,!1),n.add(r))}function XI(e,t,n){var r=0;t&&(r|=4),AB(n,e,r,t)}var Lb="_reactListening"+Math.random().toString(36).slice(2);function v0(e){if(!e[Lb]){e[Lb]=!0,D6.forEach(function(n){n!=="selectionchange"&&(vZ.has(n)||XI(n,!1,e),XI(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lb]||(t[Lb]=!0,XI("selectionchange",!1,t))}}function AB(e,t,n,r){switch(hB(t)){case 1:var i=$X;break;case 4:i=kX;break;default:i=OM}n=i.bind(null,t,n,e),i=void 0,!IP||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ZI(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;l=l.return}for(;a!==null;){if(l=Kd(a),l===null)return;if(h=l.tag,h===5||h===6){r=o=l;continue e}a=a.parentNode}}r=r.return}J6(function(){var d=o,g=IM(n),v=[];e:{var b=TB.get(e);if(b!==void 0){var I=$M,T=e;switch(e){case"keypress":if(Tw(n)===0)break e;case"keydown":case"keyup":I=XX;break;case"focusin":T="focus",I=UI;break;case"focusout":T="blur",I=UI;break;case"beforeblur":case"afterblur":I=UI;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=hD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=DX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=YX;break;case SB:case EB:case CB:I=FX;break;case IB:I=QX;break;case"scroll":I=NX;break;case"wheel":I=tZ;break;case"copy":case"cut":case"paste":I=jX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=pD}var P=(t&4)!==0,$=!P&&e==="scroll",O=P?b!==null?b+"Capture":null:b;P=[];for(var k=d,R;k!==null;){R=k;var j=R.stateNode;if(R.tag===5&&j!==null&&(R=j,O!==null&&(j=h0(k,O),j!=null&&P.push(_0(k,j,R)))),$)break;k=k.return}0<P.length&&(b=new I(b,T,null,n,g),v.push({event:b,listeners:P}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",b&&n!==EP&&(T=n.relatedTarget||n.fromElement)&&(Kd(T)||T[sf]))break e;if((I||b)&&(b=g.window===g?g:(b=g.ownerDocument)?b.defaultView||b.parentWindow:window,I?(T=n.relatedTarget||n.toElement,I=d,T=T?Kd(T):null,T!==null&&($=Dp(T),T!==$||T.tag!==5&&T.tag!==6)&&(T=null)):(I=null,T=d),I!==T)){if(P=hD,j="onMouseLeave",O="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(P=pD,j="onPointerLeave",O="onPointerEnter",k="pointer"),$=I==null?b:eg(I),R=T==null?b:eg(T),b=new P(j,k+"leave",I,n,g),b.target=$,b.relatedTarget=R,j=null,Kd(g)===d&&(P=new P(O,k+"enter",T,n,g),P.target=R,P.relatedTarget=$,j=P),$=j,I&&T)t:{for(P=I,O=T,k=0,R=P;R;R=Lm(R))k++;for(R=0,j=O;j;j=Lm(j))R++;for(;0<k-R;)P=Lm(P),k--;for(;0<R-k;)O=Lm(O),R--;for(;k--;){if(P===O||O!==null&&P===O.alternate)break t;P=Lm(P),O=Lm(O)}P=null}else P=null;I!==null&&CD(v,b,I,P,!1),T!==null&&$!==null&&CD(v,$,T,P,!0)}}e:{if(b=d?eg(d):window,I=b.nodeName&&b.nodeName.toLowerCase(),I==="select"||I==="input"&&b.type==="file")var F=lZ;else if(yD(b))if(vB)F=hZ;else{F=cZ;var U=uZ}else(I=b.nodeName)&&I.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(F=fZ);if(F&&(F=F(e,d))){yB(v,F,n,g);break e}U&&U(e,b,d),e==="focusout"&&(U=b._wrapperState)&&U.controlled&&b.type==="number"&&_P(b,"number",b.value)}switch(U=d?eg(d):window,e){case"focusin":(yD(U)||U.contentEditable==="true")&&(Jm=U,MP=d,H_=null);break;case"focusout":H_=MP=Jm=null;break;case"mousedown":$P=!0;break;case"contextmenu":case"mouseup":case"dragend":$P=!1,wD(v,n,g);break;case"selectionchange":if(mZ)break;case"keydown":case"keyup":wD(v,n,g)}var G;if(NM)e:{switch(e){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else Ym?mB(e,n)&&(Z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Z="onCompositionStart");Z&&(pB&&n.locale!=="ko"&&(Ym||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&Ym&&(G=dB()):(wh=g,MM="value"in wh?wh.value:wh.textContent,Ym=!0)),U=rS(d,Z),0<U.length&&(Z=new dD(Z,e,null,n,g),v.push({event:Z,listeners:U}),G?Z.data=G:(G=gB(n),G!==null&&(Z.data=G)))),(G=rZ?iZ(e,n):oZ(e,n))&&(d=rS(d,"onBeforeInput"),0<d.length&&(g=new dD("onBeforeInput","beforeinput",null,n,g),v.push({event:g,listeners:d}),g.data=G))}PB(v,t)})}function _0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rS(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=h0(e,n),o!=null&&r.unshift(_0(e,o,i)),o=h0(e,t),o!=null&&r.push(_0(e,o,i))),e=e.return}return r}function Lm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function CD(e,t,n,r,i){for(var o=t._reactName,l=[];n!==null&&n!==r;){var a=n,h=a.alternate,d=a.stateNode;if(h!==null&&h===r)break;a.tag===5&&d!==null&&(a=d,i?(h=h0(n,o),h!=null&&l.unshift(_0(n,h,a))):i||(h=h0(n,o),h!=null&&l.push(_0(n,h,a)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var _Z=/\r\n?/g,xZ=/\u0000|\uFFFD/g;function ID(e){return(typeof e=="string"?e:""+e).replace(_Z,`
`).replace(xZ,"")}function Db(e,t,n){if(t=ID(t),ID(e)!==t&&n)throw Error(ht(425))}function iS(){}var kP=null,NP=null;function LP(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var DP=typeof setTimeout=="function"?setTimeout:void 0,bZ=typeof clearTimeout=="function"?clearTimeout:void 0,TD=typeof Promise=="function"?Promise:void 0,wZ=typeof queueMicrotask=="function"?queueMicrotask:typeof TD<"u"?function(e){return TD.resolve(null).then(e).catch(SZ)}:DP;function SZ(e){setTimeout(function(){throw e})}function KI(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),m0(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);m0(t)}function Ah(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function PD(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Oy=Math.random().toString(36).slice(2),oc="__reactFiber$"+Oy,x0="__reactProps$"+Oy,sf="__reactContainer$"+Oy,RP="__reactEvents$"+Oy,EZ="__reactListeners$"+Oy,CZ="__reactHandles$"+Oy;function Kd(e){var t=e[oc];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sf]||n[oc]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=PD(e);e!==null;){if(n=e[oc])return n;e=PD(e)}return t}e=n,n=e.parentNode}return null}function Vx(e){return e=e[oc]||e[sf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function eg(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ht(33))}function GE(e){return e[x0]||null}var zP=[],tg=-1;function od(e){return{current:e}}function qr(e){0>tg||(e.current=zP[tg],zP[tg]=null,tg--)}function Nr(e,t){tg++,zP[tg]=e.current,e.current=t}var Fh={},fa=od(Fh),ns=od(!1),dp=Fh;function Cg(e,t){var n=e.type.contextTypes;if(!n)return Fh;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function rs(e){return e=e.childContextTypes,e!=null}function oS(){qr(ns),qr(fa)}function AD(e,t,n){if(fa.current!==Fh)throw Error(ht(168));Nr(fa,t),Nr(ns,n)}function OB(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ht(108,uX(e)||"Unknown",i));return gi({},n,r)}function aS(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fh,dp=fa.current,Nr(fa,e),Nr(ns,ns.current),!0}function OD(e,t,n){var r=e.stateNode;if(!r)throw Error(ht(169));n?(e=OB(e,t,dp),r.__reactInternalMemoizedMergedChildContext=e,qr(ns),qr(fa),Nr(fa,e)):qr(ns),Nr(ns,n)}var Wc=null,qE=!1,YI=!1;function MB(e){Wc===null?Wc=[e]:Wc.push(e)}function IZ(e){qE=!0,MB(e)}function ad(){if(!YI&&Wc!==null){YI=!0;var e=0,t=cr;try{var n=Wc;for(cr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Wc=null,qE=!1}catch(i){throw Wc!==null&&(Wc=Wc.slice(e+1)),nB(TM,ad),i}finally{cr=t,YI=!1}}return null}var ng=[],rg=0,sS=null,lS=0,pl=[],ml=0,pp=null,Hc=1,Xc="";function Fd(e,t){ng[rg++]=lS,ng[rg++]=sS,sS=e,lS=t}function $B(e,t,n){pl[ml++]=Hc,pl[ml++]=Xc,pl[ml++]=pp,pp=e;var r=Hc;e=Xc;var i=32-_u(r)-1;r&=~(1<<i),n+=1;var o=32-_u(t)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Hc=1<<32-_u(t)+i|n<<i|r,Xc=o+e}else Hc=1<<o|n<<i|r,Xc=e}function DM(e){e.return!==null&&(Fd(e,1),$B(e,1,0))}function RM(e){for(;e===sS;)sS=ng[--rg],ng[rg]=null,lS=ng[--rg],ng[rg]=null;for(;e===pp;)pp=pl[--ml],pl[ml]=null,Xc=pl[--ml],pl[ml]=null,Hc=pl[--ml],pl[ml]=null}var Ms=null,As=null,ti=!1,hu=null;function kB(e,t){var n=vl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function MD(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ms=e,As=Ah(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ms=e,As=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=pp!==null?{id:Hc,overflow:Xc}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=vl(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ms=e,As=null,!0):!1;default:return!1}}function FP(e){return(e.mode&1)!==0&&(e.flags&128)===0}function BP(e){if(ti){var t=As;if(t){var n=t;if(!MD(e,t)){if(FP(e))throw Error(ht(418));t=Ah(n.nextSibling);var r=Ms;t&&MD(e,t)?kB(r,n):(e.flags=e.flags&-4097|2,ti=!1,Ms=e)}}else{if(FP(e))throw Error(ht(418));e.flags=e.flags&-4097|2,ti=!1,Ms=e}}}function $D(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ms=e}function Rb(e){if(e!==Ms)return!1;if(!ti)return $D(e),ti=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!LP(e.type,e.memoizedProps)),t&&(t=As)){if(FP(e))throw NB(),Error(ht(418));for(;t;)kB(e,t),t=Ah(t.nextSibling)}if($D(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ht(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){As=Ah(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}As=null}}else As=Ms?Ah(e.stateNode.nextSibling):null;return!0}function NB(){for(var e=As;e;)e=Ah(e.nextSibling)}function Ig(){As=Ms=null,ti=!1}function zM(e){hu===null?hu=[e]:hu.push(e)}var TZ=Of.ReactCurrentBatchConfig;function lu(e,t){if(e&&e.defaultProps){t=gi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var uS=od(null),cS=null,ig=null,FM=null;function BM(){FM=ig=cS=null}function jM(e){var t=uS.current;qr(uS),e._currentValue=t}function jP(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function gg(e,t){cS=e,FM=ig=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(es=!0),e.firstContext=null)}function Il(e){var t=e._currentValue;if(FM!==e)if(e={context:e,memoizedValue:t,next:null},ig===null){if(cS===null)throw Error(ht(308));ig=e,cS.dependencies={lanes:0,firstContext:e}}else ig=ig.next=e;return t}var Yd=null;function UM(e){Yd===null?Yd=[e]:Yd.push(e)}function LB(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,UM(t)):(n.next=i.next,i.next=n),t.interleaved=n,lf(e,r)}function lf(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var yh=!1;function VM(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DB(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oh(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Xn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,lf(e,n)}return i=r.interleaved,i===null?(t.next=t,UM(r)):(t.next=i.next,i.next=t),r.interleaved=t,lf(e,n)}function Pw(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,PM(e,n)}}function kD(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fS(e,t,n,r){var i=e.updateQueue;yh=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var h=a,d=h.next;h.next=null,l===null?o=d:l.next=d,l=h;var g=e.alternate;g!==null&&(g=g.updateQueue,a=g.lastBaseUpdate,a!==l&&(a===null?g.firstBaseUpdate=d:a.next=d,g.lastBaseUpdate=h))}if(o!==null){var v=i.baseState;l=0,g=d=h=null,a=o;do{var b=a.lane,I=a.eventTime;if((r&b)===b){g!==null&&(g=g.next={eventTime:I,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=e,P=a;switch(b=t,I=n,P.tag){case 1:if(T=P.payload,typeof T=="function"){v=T.call(I,v,b);break e}v=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=P.payload,b=typeof T=="function"?T.call(I,v,b):T,b==null)break e;v=gi({},v,b);break e;case 2:yh=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,b=i.effects,b===null?i.effects=[a]:b.push(a))}else I={eventTime:I,lane:b,tag:a.tag,payload:a.payload,callback:a.callback,next:null},g===null?(d=g=I,h=v):g=g.next=I,l|=b;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;b=a,a=b.next,b.next=null,i.lastBaseUpdate=b,i.shared.pending=null}}while(!0);if(g===null&&(h=v),i.baseState=h,i.firstBaseUpdate=d,i.lastBaseUpdate=g,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);gp|=l,e.lanes=l,e.memoizedState=v}}function ND(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ht(191,i));i.call(r)}}}var RB=new L6.Component().refs;function UP(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:gi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var WE={isMounted:function(e){return(e=e._reactInternals)?Dp(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ka(),i=$h(e),o=Qc(r,i);o.payload=t,n!=null&&(o.callback=n),t=Oh(e,o,i),t!==null&&(xu(t,e,i,r),Pw(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ka(),i=$h(e),o=Qc(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Oh(e,o,i),t!==null&&(xu(t,e,i,r),Pw(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ka(),r=$h(e),i=Qc(n,r);i.tag=2,t!=null&&(i.callback=t),t=Oh(e,i,r),t!==null&&(xu(t,e,r,n),Pw(t,e,r))}};function LD(e,t,n,r,i,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!y0(n,r)||!y0(i,o):!0}function zB(e,t,n){var r=!1,i=Fh,o=t.contextType;return typeof o=="object"&&o!==null?o=Il(o):(i=rs(t)?dp:fa.current,r=t.contextTypes,o=(r=r!=null)?Cg(e,i):Fh),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=WE,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function DD(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&WE.enqueueReplaceState(t,t.state,null)}function VP(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=RB,VM(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Il(o):(o=rs(t)?dp:fa.current,i.context=Cg(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(UP(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&WE.enqueueReplaceState(i,i.state,null),fS(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function d_(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ht(309));var r=n.stateNode}if(!r)throw Error(ht(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var a=i.refs;a===RB&&(a=i.refs={}),l===null?delete a[o]:a[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(ht(284));if(!n._owner)throw Error(ht(290,e))}return e}function zb(e,t){throw e=Object.prototype.toString.call(t),Error(ht(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function RD(e){var t=e._init;return t(e._payload)}function FB(e){function t(O,k){if(e){var R=O.deletions;R===null?(O.deletions=[k],O.flags|=16):R.push(k)}}function n(O,k){if(!e)return null;for(;k!==null;)t(O,k),k=k.sibling;return null}function r(O,k){for(O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function i(O,k){return O=kh(O,k),O.index=0,O.sibling=null,O}function o(O,k,R){return O.index=R,e?(R=O.alternate,R!==null?(R=R.index,R<k?(O.flags|=2,k):R):(O.flags|=2,k)):(O.flags|=1048576,k)}function l(O){return e&&O.alternate===null&&(O.flags|=2),O}function a(O,k,R,j){return k===null||k.tag!==6?(k=iT(R,O.mode,j),k.return=O,k):(k=i(k,R),k.return=O,k)}function h(O,k,R,j){var F=R.type;return F===Km?g(O,k,R.props.children,j,R.key):k!==null&&(k.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===gh&&RD(F)===k.type)?(j=i(k,R.props),j.ref=d_(O,k,R),j.return=O,j):(j=Nw(R.type,R.key,R.props,null,O.mode,j),j.ref=d_(O,k,R),j.return=O,j)}function d(O,k,R,j){return k===null||k.tag!==4||k.stateNode.containerInfo!==R.containerInfo||k.stateNode.implementation!==R.implementation?(k=oT(R,O.mode,j),k.return=O,k):(k=i(k,R.children||[]),k.return=O,k)}function g(O,k,R,j,F){return k===null||k.tag!==7?(k=sp(R,O.mode,j,F),k.return=O,k):(k=i(k,R),k.return=O,k)}function v(O,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return k=iT(""+k,O.mode,R),k.return=O,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Tb:return R=Nw(k.type,k.key,k.props,null,O.mode,R),R.ref=d_(O,null,k),R.return=O,R;case Zm:return k=oT(k,O.mode,R),k.return=O,k;case gh:var j=k._init;return v(O,j(k._payload),R)}if(N_(k)||l_(k))return k=sp(k,O.mode,R,null),k.return=O,k;zb(O,k)}return null}function b(O,k,R,j){var F=k!==null?k.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return F!==null?null:a(O,k,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Tb:return R.key===F?h(O,k,R,j):null;case Zm:return R.key===F?d(O,k,R,j):null;case gh:return F=R._init,b(O,k,F(R._payload),j)}if(N_(R)||l_(R))return F!==null?null:g(O,k,R,j,null);zb(O,R)}return null}function I(O,k,R,j,F){if(typeof j=="string"&&j!==""||typeof j=="number")return O=O.get(R)||null,a(k,O,""+j,F);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Tb:return O=O.get(j.key===null?R:j.key)||null,h(k,O,j,F);case Zm:return O=O.get(j.key===null?R:j.key)||null,d(k,O,j,F);case gh:var U=j._init;return I(O,k,R,U(j._payload),F)}if(N_(j)||l_(j))return O=O.get(R)||null,g(k,O,j,F,null);zb(k,j)}return null}function T(O,k,R,j){for(var F=null,U=null,G=k,Z=k=0,ne=null;G!==null&&Z<R.length;Z++){G.index>Z?(ne=G,G=null):ne=G.sibling;var oe=b(O,G,R[Z],j);if(oe===null){G===null&&(G=ne);break}e&&G&&oe.alternate===null&&t(O,G),k=o(oe,k,Z),U===null?F=oe:U.sibling=oe,U=oe,G=ne}if(Z===R.length)return n(O,G),ti&&Fd(O,Z),F;if(G===null){for(;Z<R.length;Z++)G=v(O,R[Z],j),G!==null&&(k=o(G,k,Z),U===null?F=G:U.sibling=G,U=G);return ti&&Fd(O,Z),F}for(G=r(O,G);Z<R.length;Z++)ne=I(G,O,Z,R[Z],j),ne!==null&&(e&&ne.alternate!==null&&G.delete(ne.key===null?Z:ne.key),k=o(ne,k,Z),U===null?F=ne:U.sibling=ne,U=ne);return e&&G.forEach(function(ye){return t(O,ye)}),ti&&Fd(O,Z),F}function P(O,k,R,j){var F=l_(R);if(typeof F!="function")throw Error(ht(150));if(R=F.call(R),R==null)throw Error(ht(151));for(var U=F=null,G=k,Z=k=0,ne=null,oe=R.next();G!==null&&!oe.done;Z++,oe=R.next()){G.index>Z?(ne=G,G=null):ne=G.sibling;var ye=b(O,G,oe.value,j);if(ye===null){G===null&&(G=ne);break}e&&G&&ye.alternate===null&&t(O,G),k=o(ye,k,Z),U===null?F=ye:U.sibling=ye,U=ye,G=ne}if(oe.done)return n(O,G),ti&&Fd(O,Z),F;if(G===null){for(;!oe.done;Z++,oe=R.next())oe=v(O,oe.value,j),oe!==null&&(k=o(oe,k,Z),U===null?F=oe:U.sibling=oe,U=oe);return ti&&Fd(O,Z),F}for(G=r(O,G);!oe.done;Z++,oe=R.next())oe=I(G,O,Z,oe.value,j),oe!==null&&(e&&oe.alternate!==null&&G.delete(oe.key===null?Z:oe.key),k=o(oe,k,Z),U===null?F=oe:U.sibling=oe,U=oe);return e&&G.forEach(function(fe){return t(O,fe)}),ti&&Fd(O,Z),F}function $(O,k,R,j){if(typeof R=="object"&&R!==null&&R.type===Km&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Tb:e:{for(var F=R.key,U=k;U!==null;){if(U.key===F){if(F=R.type,F===Km){if(U.tag===7){n(O,U.sibling),k=i(U,R.props.children),k.return=O,O=k;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===gh&&RD(F)===U.type){n(O,U.sibling),k=i(U,R.props),k.ref=d_(O,U,R),k.return=O,O=k;break e}n(O,U);break}else t(O,U);U=U.sibling}R.type===Km?(k=sp(R.props.children,O.mode,j,R.key),k.return=O,O=k):(j=Nw(R.type,R.key,R.props,null,O.mode,j),j.ref=d_(O,k,R),j.return=O,O=j)}return l(O);case Zm:e:{for(U=R.key;k!==null;){if(k.key===U)if(k.tag===4&&k.stateNode.containerInfo===R.containerInfo&&k.stateNode.implementation===R.implementation){n(O,k.sibling),k=i(k,R.children||[]),k.return=O,O=k;break e}else{n(O,k);break}else t(O,k);k=k.sibling}k=oT(R,O.mode,j),k.return=O,O=k}return l(O);case gh:return U=R._init,$(O,k,U(R._payload),j)}if(N_(R))return T(O,k,R,j);if(l_(R))return P(O,k,R,j);zb(O,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,k!==null&&k.tag===6?(n(O,k.sibling),k=i(k,R),k.return=O,O=k):(n(O,k),k=iT(R,O.mode,j),k.return=O,O=k),l(O)):n(O,k)}return $}var Tg=FB(!0),BB=FB(!1),Gx={},uc=od(Gx),b0=od(Gx),w0=od(Gx);function Jd(e){if(e===Gx)throw Error(ht(174));return e}function GM(e,t){switch(Nr(w0,t),Nr(b0,e),Nr(uc,Gx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bP(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bP(t,e)}qr(uc),Nr(uc,t)}function Pg(){qr(uc),qr(b0),qr(w0)}function jB(e){Jd(w0.current);var t=Jd(uc.current),n=bP(t,e.type);t!==n&&(Nr(b0,e),Nr(uc,n))}function qM(e){b0.current===e&&(qr(uc),qr(b0))}var ci=od(0);function hS(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var JI=[];function WM(){for(var e=0;e<JI.length;e++)JI[e]._workInProgressVersionPrimary=null;JI.length=0}var Aw=Of.ReactCurrentDispatcher,QI=Of.ReactCurrentBatchConfig,mp=0,mi=null,eo=null,vo=null,dS=!1,X_=!1,S0=0,PZ=0;function aa(){throw Error(ht(321))}function HM(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Iu(e[n],t[n]))return!1;return!0}function XM(e,t,n,r,i,o){if(mp=o,mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Aw.current=e===null||e.memoizedState===null?$Z:kZ,e=n(r,i),X_){o=0;do{if(X_=!1,S0=0,25<=o)throw Error(ht(301));o+=1,vo=eo=null,t.updateQueue=null,Aw.current=NZ,e=n(r,i)}while(X_)}if(Aw.current=pS,t=eo!==null&&eo.next!==null,mp=0,vo=eo=mi=null,dS=!1,t)throw Error(ht(300));return e}function ZM(){var e=S0!==0;return S0=0,e}function Qu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vo===null?mi.memoizedState=vo=e:vo=vo.next=e,vo}function Tl(){if(eo===null){var e=mi.alternate;e=e!==null?e.memoizedState:null}else e=eo.next;var t=vo===null?mi.memoizedState:vo.next;if(t!==null)vo=t,eo=e;else{if(e===null)throw Error(ht(310));eo=e,e={memoizedState:eo.memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},vo===null?mi.memoizedState=vo=e:vo=vo.next=e}return vo}function E0(e,t){return typeof t=="function"?t(e):t}function eT(e){var t=Tl(),n=t.queue;if(n===null)throw Error(ht(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=l=null,h=null,d=o;do{var g=d.lane;if((mp&g)===g)h!==null&&(h=h.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var v={lane:g,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};h===null?(a=h=v,l=r):h=h.next=v,mi.lanes|=g,gp|=g}d=d.next}while(d!==null&&d!==o);h===null?l=r:h.next=a,Iu(r,t.memoizedState)||(es=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=h,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,mi.lanes|=o,gp|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function tT(e){var t=Tl(),n=t.queue;if(n===null)throw Error(ht(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=e(o,l.action),l=l.next;while(l!==i);Iu(o,t.memoizedState)||(es=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function UB(){}function VB(e,t){var n=mi,r=Tl(),i=t(),o=!Iu(r.memoizedState,i);if(o&&(r.memoizedState=i,es=!0),r=r.queue,KM(WB.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||vo!==null&&vo.memoizedState.tag&1){if(n.flags|=2048,C0(9,qB.bind(null,n,r,i,t),void 0,null),Co===null)throw Error(ht(349));mp&30||GB(n,t,i)}return i}function GB(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=mi.updateQueue,t===null?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qB(e,t,n,r){t.value=n,t.getSnapshot=r,HB(t)&&XB(e)}function WB(e,t,n){return n(function(){HB(t)&&XB(e)})}function HB(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Iu(e,n)}catch{return!0}}function XB(e){var t=lf(e,1);t!==null&&xu(t,e,1,-1)}function zD(e){var t=Qu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:E0,lastRenderedState:e},t.queue=e,e=e.dispatch=MZ.bind(null,mi,e),[t.memoizedState,e]}function C0(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=mi.updateQueue,t===null?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ZB(){return Tl().memoizedState}function Ow(e,t,n,r){var i=Qu();mi.flags|=e,i.memoizedState=C0(1|t,n,void 0,r===void 0?null:r)}function HE(e,t,n,r){var i=Tl();r=r===void 0?null:r;var o=void 0;if(eo!==null){var l=eo.memoizedState;if(o=l.destroy,r!==null&&HM(r,l.deps)){i.memoizedState=C0(t,n,o,r);return}}mi.flags|=e,i.memoizedState=C0(1|t,n,o,r)}function FD(e,t){return Ow(8390656,8,e,t)}function KM(e,t){return HE(2048,8,e,t)}function KB(e,t){return HE(4,2,e,t)}function YB(e,t){return HE(4,4,e,t)}function JB(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function QB(e,t,n){return n=n!=null?n.concat([e]):null,HE(4,4,JB.bind(null,t,e),n)}function YM(){}function e8(e,t){var n=Tl();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&HM(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function t8(e,t){var n=Tl();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&HM(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function n8(e,t,n){return mp&21?(Iu(n,t)||(n=oB(),mi.lanes|=n,gp|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,es=!0),e.memoizedState=n)}function AZ(e,t){var n=cr;cr=n!==0&&4>n?n:4,e(!0);var r=QI.transition;QI.transition={};try{e(!1),t()}finally{cr=n,QI.transition=r}}function r8(){return Tl().memoizedState}function OZ(e,t,n){var r=$h(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},i8(e))o8(t,n);else if(n=LB(e,t,n,r),n!==null){var i=ka();xu(n,e,r,i),a8(n,t,r)}}function MZ(e,t,n){var r=$h(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(i8(e))o8(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,a=o(l,n);if(i.hasEagerState=!0,i.eagerState=a,Iu(a,l)){var h=t.interleaved;h===null?(i.next=i,UM(t)):(i.next=h.next,h.next=i),t.interleaved=i;return}}catch{}finally{}n=LB(e,t,i,r),n!==null&&(i=ka(),xu(n,e,r,i),a8(n,t,r))}}function i8(e){var t=e.alternate;return e===mi||t!==null&&t===mi}function o8(e,t){X_=dS=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function a8(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,PM(e,n)}}var pS={readContext:Il,useCallback:aa,useContext:aa,useEffect:aa,useImperativeHandle:aa,useInsertionEffect:aa,useLayoutEffect:aa,useMemo:aa,useReducer:aa,useRef:aa,useState:aa,useDebugValue:aa,useDeferredValue:aa,useTransition:aa,useMutableSource:aa,useSyncExternalStore:aa,useId:aa,unstable_isNewReconciler:!1},$Z={readContext:Il,useCallback:function(e,t){return Qu().memoizedState=[e,t===void 0?null:t],e},useContext:Il,useEffect:FD,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ow(4194308,4,JB.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ow(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ow(4,2,e,t)},useMemo:function(e,t){var n=Qu();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qu();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=OZ.bind(null,mi,e),[r.memoizedState,e]},useRef:function(e){var t=Qu();return e={current:e},t.memoizedState=e},useState:zD,useDebugValue:YM,useDeferredValue:function(e){return Qu().memoizedState=e},useTransition:function(){var e=zD(!1),t=e[0];return e=AZ.bind(null,e[1]),Qu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mi,i=Qu();if(ti){if(n===void 0)throw Error(ht(407));n=n()}else{if(n=t(),Co===null)throw Error(ht(349));mp&30||GB(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,FD(WB.bind(null,r,o,e),[e]),r.flags|=2048,C0(9,qB.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Qu(),t=Co.identifierPrefix;if(ti){var n=Xc,r=Hc;n=(r&~(1<<32-_u(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=S0++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=PZ++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kZ={readContext:Il,useCallback:e8,useContext:Il,useEffect:KM,useImperativeHandle:QB,useInsertionEffect:KB,useLayoutEffect:YB,useMemo:t8,useReducer:eT,useRef:ZB,useState:function(){return eT(E0)},useDebugValue:YM,useDeferredValue:function(e){var t=Tl();return n8(t,eo.memoizedState,e)},useTransition:function(){var e=eT(E0)[0],t=Tl().memoizedState;return[e,t]},useMutableSource:UB,useSyncExternalStore:VB,useId:r8,unstable_isNewReconciler:!1},NZ={readContext:Il,useCallback:e8,useContext:Il,useEffect:KM,useImperativeHandle:QB,useInsertionEffect:KB,useLayoutEffect:YB,useMemo:t8,useReducer:tT,useRef:ZB,useState:function(){return tT(E0)},useDebugValue:YM,useDeferredValue:function(e){var t=Tl();return eo===null?t.memoizedState=e:n8(t,eo.memoizedState,e)},useTransition:function(){var e=tT(E0)[0],t=Tl().memoizedState;return[e,t]},useMutableSource:UB,useSyncExternalStore:VB,useId:r8,unstable_isNewReconciler:!1};function Ag(e,t){try{var n="",r=t;do n+=lX(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function nT(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function GP(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var LZ=typeof WeakMap=="function"?WeakMap:Map;function s8(e,t,n){n=Qc(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){gS||(gS=!0,eA=r),GP(e,t)},n}function l8(e,t,n){n=Qc(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){GP(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){GP(e,t),typeof r!="function"&&(Mh===null?Mh=new Set([this]):Mh.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function BD(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new LZ;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ZZ.bind(null,e,t,n),t.then(e,e))}function jD(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function UD(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qc(-1,1),t.tag=2,Oh(n,t,1))),n.lanes|=1),e)}var DZ=Of.ReactCurrentOwner,es=!1;function Aa(e,t,n,r){t.child=e===null?BB(t,null,n,r):Tg(t,e.child,n,r)}function VD(e,t,n,r,i){n=n.render;var o=t.ref;return gg(t,i),r=XM(e,t,n,r,o,i),n=ZM(),e!==null&&!es?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,uf(e,t,i)):(ti&&n&&DM(t),t.flags|=1,Aa(e,t,r,i),t.child)}function GD(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!o$(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,u8(e,t,o,r,i)):(e=Nw(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:y0,n(l,r)&&e.ref===t.ref)return uf(e,t,i)}return t.flags|=1,e=kh(o,r),e.ref=t.ref,e.return=t,t.child=e}function u8(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(y0(o,r)&&e.ref===t.ref)if(es=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(es=!0);else return t.lanes=e.lanes,uf(e,t,i)}return qP(e,t,n,r,i)}function c8(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nr(ag,Cs),Cs|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Nr(ag,Cs),Cs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Nr(ag,Cs),Cs|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Nr(ag,Cs),Cs|=r;return Aa(e,t,i,n),t.child}function f8(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function qP(e,t,n,r,i){var o=rs(n)?dp:fa.current;return o=Cg(t,o),gg(t,i),n=XM(e,t,n,r,o,i),r=ZM(),e!==null&&!es?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,uf(e,t,i)):(ti&&r&&DM(t),t.flags|=1,Aa(e,t,n,i),t.child)}function qD(e,t,n,r,i){if(rs(n)){var o=!0;aS(t)}else o=!1;if(gg(t,i),t.stateNode===null)Mw(e,t),zB(t,n,r),VP(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,a=t.memoizedProps;l.props=a;var h=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Il(d):(d=rs(n)?dp:fa.current,d=Cg(t,d));var g=n.getDerivedStateFromProps,v=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||h!==d)&&DD(t,l,r,d),yh=!1;var b=t.memoizedState;l.state=b,fS(t,r,l,i),h=t.memoizedState,a!==r||b!==h||ns.current||yh?(typeof g=="function"&&(UP(t,n,g,r),h=t.memoizedState),(a=yh||LD(t,n,a,r,b,h,d))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=h),l.props=r,l.state=h,l.context=d,r=a):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,DB(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:lu(t.type,a),l.props=d,v=t.pendingProps,b=l.context,h=n.contextType,typeof h=="object"&&h!==null?h=Il(h):(h=rs(n)?dp:fa.current,h=Cg(t,h));var I=n.getDerivedStateFromProps;(g=typeof I=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==v||b!==h)&&DD(t,l,r,h),yh=!1,b=t.memoizedState,l.state=b,fS(t,r,l,i);var T=t.memoizedState;a!==v||b!==T||ns.current||yh?(typeof I=="function"&&(UP(t,n,I,r),T=t.memoizedState),(d=yh||LD(t,n,d,r,b,T,h)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,T,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,T,h)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=T),l.props=r,l.state=T,l.context=h,r=d):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),r=!1)}return WP(e,t,n,r,o,i)}function WP(e,t,n,r,i,o){f8(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&OD(t,n,!1),uf(e,t,o);r=t.stateNode,DZ.current=t;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Tg(t,e.child,null,o),t.child=Tg(t,null,a,o)):Aa(e,t,a,o),t.memoizedState=r.state,i&&OD(t,n,!0),t.child}function h8(e){var t=e.stateNode;t.pendingContext?AD(e,t.pendingContext,t.pendingContext!==t.context):t.context&&AD(e,t.context,!1),GM(e,t.containerInfo)}function WD(e,t,n,r,i){return Ig(),zM(i),t.flags|=256,Aa(e,t,n,r),t.child}var HP={dehydrated:null,treeContext:null,retryLane:0};function XP(e){return{baseLanes:e,cachePool:null,transitions:null}}function d8(e,t,n){var r=t.pendingProps,i=ci.current,o=!1,l=(t.flags&128)!==0,a;if((a=l)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Nr(ci,i&1),e===null)return BP(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=KE(l,r,0,null),e=sp(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=XP(n),t.memoizedState=HP,e):JM(t,l));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return RZ(e,t,l,r,a,i,n);if(o){o=r.fallback,l=t.mode,i=e.child,a=i.sibling;var h={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=h,t.deletions=null):(r=kh(i,h),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=kh(a,o):(o=sp(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?XP(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=HP,r}return o=e.child,e=o.sibling,r=kh(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function JM(e,t){return t=KE({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fb(e,t,n,r){return r!==null&&zM(r),Tg(t,e.child,null,n),e=JM(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function RZ(e,t,n,r,i,o,l){if(n)return t.flags&256?(t.flags&=-257,r=nT(Error(ht(422))),Fb(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=KE({mode:"visible",children:r.children},i,0,null),o=sp(o,i,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Tg(t,e.child,null,l),t.child.memoizedState=XP(l),t.memoizedState=HP,o);if(!(t.mode&1))return Fb(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ht(419)),r=nT(o,r,void 0),Fb(e,t,l,r)}if(a=(l&e.childLanes)!==0,es||a){if(r=Co,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,lf(e,i),xu(r,e,i,-1))}return i$(),r=nT(Error(ht(421))),Fb(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=KZ.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,As=Ah(i.nextSibling),Ms=t,ti=!0,hu=null,e!==null&&(pl[ml++]=Hc,pl[ml++]=Xc,pl[ml++]=pp,Hc=e.id,Xc=e.overflow,pp=t),t=JM(t,r.children),t.flags|=4096,t)}function HD(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),jP(e.return,t,n)}function rT(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function p8(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Aa(e,t,r.children,n),r=ci.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&HD(e,n,t);else if(e.tag===19)HD(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Nr(ci,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&hS(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rT(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&hS(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rT(t,!0,n,null,o);break;case"together":rT(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mw(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function uf(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),gp|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ht(153));if(t.child!==null){for(e=t.child,n=kh(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=kh(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zZ(e,t,n){switch(t.tag){case 3:h8(t),Ig();break;case 5:jB(t);break;case 1:rs(t.type)&&aS(t);break;case 4:GM(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Nr(uS,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Nr(ci,ci.current&1),t.flags|=128,null):n&t.child.childLanes?d8(e,t,n):(Nr(ci,ci.current&1),e=uf(e,t,n),e!==null?e.sibling:null);Nr(ci,ci.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return p8(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Nr(ci,ci.current),r)break;return null;case 22:case 23:return t.lanes=0,c8(e,t,n)}return uf(e,t,n)}var m8,ZP,g8,y8;m8=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ZP=function(){};g8=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jd(uc.current);var o=null;switch(n){case"input":i=yP(e,i),r=yP(e,r),o=[];break;case"select":i=gi({},i,{value:void 0}),r=gi({},r,{value:void 0}),o=[];break;case"textarea":i=xP(e,i),r=xP(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=iS)}wP(n,r);var l;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(c0.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var h=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&h!==a&&(h!=null||a!=null))if(d==="style")if(a){for(l in a)!a.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in h)h.hasOwnProperty(l)&&a[l]!==h[l]&&(n||(n={}),n[l]=h[l])}else n||(o||(o=[]),o.push(d,n)),n=h;else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,a=a?a.__html:void 0,h!=null&&a!==h&&(o=o||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(c0.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&jr("scroll",e),o||a===h||(o=[])):(o=o||[]).push(d,h))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};y8=function(e,t,n,r){n!==r&&(t.flags|=4)};function p_(e,t){if(!ti)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sa(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function FZ(e,t,n){var r=t.pendingProps;switch(RM(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sa(t),null;case 1:return rs(t.type)&&oS(),sa(t),null;case 3:return r=t.stateNode,Pg(),qr(ns),qr(fa),WM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Rb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hu!==null&&(rA(hu),hu=null))),ZP(e,t),sa(t),null;case 5:qM(t);var i=Jd(w0.current);if(n=t.type,e!==null&&t.stateNode!=null)g8(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ht(166));return sa(t),null}if(e=Jd(uc.current),Rb(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[oc]=t,r[x0]=o,e=(t.mode&1)!==0,n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<D_.length;i++)jr(D_[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":nD(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":iD(r,o),jr("invalid",r)}wP(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var a=o[l];l==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Db(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Db(r.textContent,a,e),i=["children",""+a]):c0.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&jr("scroll",r)}switch(n){case"input":Pb(r),rD(r,o,!0);break;case"textarea":Pb(r),oD(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=iS)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=G6(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[oc]=t,e[x0]=r,m8(e,t,!1,!1),t.stateNode=e;e:{switch(l=SP(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<D_.length;i++)jr(D_[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":nD(e,r),i=yP(e,r),jr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=gi({},r,{value:void 0}),jr("invalid",e);break;case"textarea":iD(e,r),i=xP(e,r),jr("invalid",e);break;default:i=r}wP(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var h=a[o];o==="style"?H6(e,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&q6(e,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&f0(e,h):typeof h=="number"&&f0(e,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(c0.hasOwnProperty(o)?h!=null&&o==="onScroll"&&jr("scroll",e):h!=null&&wM(e,o,h,l))}switch(n){case"input":Pb(e),rD(e,r,!1);break;case"textarea":Pb(e),oD(e);break;case"option":r.value!=null&&e.setAttribute("value",""+zh(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?hg(e,!!r.multiple,o,!1):r.defaultValue!=null&&hg(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=iS)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return sa(t),null;case 6:if(e&&t.stateNode!=null)y8(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ht(166));if(n=Jd(w0.current),Jd(uc.current),Rb(t)){if(r=t.stateNode,n=t.memoizedProps,r[oc]=t,(o=r.nodeValue!==n)&&(e=Ms,e!==null))switch(e.tag){case 3:Db(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Db(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[oc]=t,t.stateNode=r}return sa(t),null;case 13:if(qr(ci),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ti&&As!==null&&t.mode&1&&!(t.flags&128))NB(),Ig(),t.flags|=98560,o=!1;else if(o=Rb(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ht(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ht(317));o[oc]=t}else Ig(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;sa(t),o=!1}else hu!==null&&(rA(hu),hu=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ci.current&1?to===0&&(to=3):i$())),t.updateQueue!==null&&(t.flags|=4),sa(t),null);case 4:return Pg(),ZP(e,t),e===null&&v0(t.stateNode.containerInfo),sa(t),null;case 10:return jM(t.type._context),sa(t),null;case 17:return rs(t.type)&&oS(),sa(t),null;case 19:if(qr(ci),o=t.memoizedState,o===null)return sa(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)p_(o,!1);else{if(to!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=hS(e),l!==null){for(t.flags|=128,p_(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Nr(ci,ci.current&1|2),t.child}e=e.sibling}o.tail!==null&&Mi()>Og&&(t.flags|=128,r=!0,p_(o,!1),t.lanes=4194304)}else{if(!r)if(e=hS(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),p_(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!ti)return sa(t),null}else 2*Mi()-o.renderingStartTime>Og&&n!==1073741824&&(t.flags|=128,r=!0,p_(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Mi(),t.sibling=null,n=ci.current,Nr(ci,r?n&1|2:n&1),t):(sa(t),null);case 22:case 23:return r$(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Cs&1073741824&&(sa(t),t.subtreeFlags&6&&(t.flags|=8192)):sa(t),null;case 24:return null;case 25:return null}throw Error(ht(156,t.tag))}function BZ(e,t){switch(RM(t),t.tag){case 1:return rs(t.type)&&oS(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pg(),qr(ns),qr(fa),WM(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qM(t),null;case 13:if(qr(ci),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ht(340));Ig()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qr(ci),null;case 4:return Pg(),null;case 10:return jM(t.type._context),null;case 22:case 23:return r$(),null;case 24:return null;default:return null}}var Bb=!1,ua=!1,jZ=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function og(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bi(e,t,r)}else n.current=null}function KP(e,t,n){try{n()}catch(r){bi(e,t,r)}}var XD=!1;function UZ(e,t){if(kP=tS,e=bB(),LM(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,a=-1,h=-1,d=0,g=0,v=e,b=null;t:for(;;){for(var I;v!==n||i!==0&&v.nodeType!==3||(a=l+i),v!==o||r!==0&&v.nodeType!==3||(h=l+r),v.nodeType===3&&(l+=v.nodeValue.length),(I=v.firstChild)!==null;)b=v,v=I;for(;;){if(v===e)break t;if(b===n&&++d===i&&(a=l),b===o&&++g===r&&(h=l),(I=v.nextSibling)!==null)break;v=b,b=v.parentNode}v=I}n=a===-1||h===-1?null:{start:a,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(NP={focusedElem:e,selectionRange:n},tS=!1,Ft=t;Ft!==null;)if(t=Ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ft=e;else for(;Ft!==null;){t=Ft;try{var T=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var P=T.memoizedProps,$=T.memoizedState,O=t.stateNode,k=O.getSnapshotBeforeUpdate(t.elementType===t.type?P:lu(t.type,P),$);O.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ht(163))}}catch(j){bi(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Ft=e;break}Ft=t.return}return T=XD,XD=!1,T}function Z_(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&KP(t,n,o)}i=i.next}while(i!==r)}}function XE(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function YP(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function v8(e){var t=e.alternate;t!==null&&(e.alternate=null,v8(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[oc],delete t[x0],delete t[RP],delete t[EZ],delete t[CZ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _8(e){return e.tag===5||e.tag===3||e.tag===4}function ZD(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function JP(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=iS));else if(r!==4&&(e=e.child,e!==null))for(JP(e,t,n),e=e.sibling;e!==null;)JP(e,t,n),e=e.sibling}function QP(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(QP(e,t,n),e=e.sibling;e!==null;)QP(e,t,n),e=e.sibling}var Uo=null,uu=!1;function ih(e,t,n){for(n=n.child;n!==null;)x8(e,t,n),n=n.sibling}function x8(e,t,n){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(BE,n)}catch{}switch(n.tag){case 5:ua||og(n,t);case 6:var r=Uo,i=uu;Uo=null,ih(e,t,n),Uo=r,uu=i,Uo!==null&&(uu?(e=Uo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Uo.removeChild(n.stateNode));break;case 18:Uo!==null&&(uu?(e=Uo,n=n.stateNode,e.nodeType===8?KI(e.parentNode,n):e.nodeType===1&&KI(e,n),m0(e)):KI(Uo,n.stateNode));break;case 4:r=Uo,i=uu,Uo=n.stateNode.containerInfo,uu=!0,ih(e,t,n),Uo=r,uu=i;break;case 0:case 11:case 14:case 15:if(!ua&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&KP(n,t,l),i=i.next}while(i!==r)}ih(e,t,n);break;case 1:if(!ua&&(og(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){bi(n,t,a)}ih(e,t,n);break;case 21:ih(e,t,n);break;case 22:n.mode&1?(ua=(r=ua)||n.memoizedState!==null,ih(e,t,n),ua=r):ih(e,t,n);break;default:ih(e,t,n)}}function KD(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jZ),t.forEach(function(r){var i=YZ.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function iu(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,l=t,a=l;e:for(;a!==null;){switch(a.tag){case 5:Uo=a.stateNode,uu=!1;break e;case 3:Uo=a.stateNode.containerInfo,uu=!0;break e;case 4:Uo=a.stateNode.containerInfo,uu=!0;break e}a=a.return}if(Uo===null)throw Error(ht(160));x8(o,l,i),Uo=null,uu=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(d){bi(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)b8(t,e),t=t.sibling}function b8(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(iu(t,e),Ku(e),r&4){try{Z_(3,e,e.return),XE(3,e)}catch(P){bi(e,e.return,P)}try{Z_(5,e,e.return)}catch(P){bi(e,e.return,P)}}break;case 1:iu(t,e),Ku(e),r&512&&n!==null&&og(n,n.return);break;case 5:if(iu(t,e),Ku(e),r&512&&n!==null&&og(n,n.return),e.flags&32){var i=e.stateNode;try{f0(i,"")}catch(P){bi(e,e.return,P)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,a=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&U6(i,o),SP(a,l);var d=SP(a,o);for(l=0;l<h.length;l+=2){var g=h[l],v=h[l+1];g==="style"?H6(i,v):g==="dangerouslySetInnerHTML"?q6(i,v):g==="children"?f0(i,v):wM(i,g,v,d)}switch(a){case"input":vP(i,o);break;case"textarea":V6(i,o);break;case"select":var b=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var I=o.value;I!=null?hg(i,!!o.multiple,I,!1):b!==!!o.multiple&&(o.defaultValue!=null?hg(i,!!o.multiple,o.defaultValue,!0):hg(i,!!o.multiple,o.multiple?[]:"",!1))}i[x0]=o}catch(P){bi(e,e.return,P)}}break;case 6:if(iu(t,e),Ku(e),r&4){if(e.stateNode===null)throw Error(ht(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(P){bi(e,e.return,P)}}break;case 3:if(iu(t,e),Ku(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{m0(t.containerInfo)}catch(P){bi(e,e.return,P)}break;case 4:iu(t,e),Ku(e);break;case 13:iu(t,e),Ku(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(t$=Mi())),r&4&&KD(e);break;case 22:if(g=n!==null&&n.memoizedState!==null,e.mode&1?(ua=(d=ua)||g,iu(t,e),ua=d):iu(t,e),Ku(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!g&&e.mode&1)for(Ft=e,g=e.child;g!==null;){for(v=Ft=g;Ft!==null;){switch(b=Ft,I=b.child,b.tag){case 0:case 11:case 14:case 15:Z_(4,b,b.return);break;case 1:og(b,b.return);var T=b.stateNode;if(typeof T.componentWillUnmount=="function"){r=b,n=b.return;try{t=r,T.props=t.memoizedProps,T.state=t.memoizedState,T.componentWillUnmount()}catch(P){bi(r,n,P)}}break;case 5:og(b,b.return);break;case 22:if(b.memoizedState!==null){JD(v);continue}}I!==null?(I.return=b,Ft=I):JD(v)}g=g.sibling}e:for(g=null,v=e;;){if(v.tag===5){if(g===null){g=v;try{i=v.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=v.stateNode,h=v.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,a.style.display=W6("display",l))}catch(P){bi(e,e.return,P)}}}else if(v.tag===6){if(g===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(P){bi(e,e.return,P)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;g===v&&(g=null),v=v.return}g===v&&(g=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:iu(t,e),Ku(e),r&4&&KD(e);break;case 21:break;default:iu(t,e),Ku(e)}}function Ku(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_8(n)){var r=n;break e}n=n.return}throw Error(ht(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(f0(i,""),r.flags&=-33);var o=ZD(e);QP(e,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,a=ZD(e);JP(e,a,l);break;default:throw Error(ht(161))}}catch(h){bi(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function VZ(e,t,n){Ft=e,w8(e)}function w8(e,t,n){for(var r=(e.mode&1)!==0;Ft!==null;){var i=Ft,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Bb;if(!l){var a=i.alternate,h=a!==null&&a.memoizedState!==null||ua;a=Bb;var d=ua;if(Bb=l,(ua=h)&&!d)for(Ft=i;Ft!==null;)l=Ft,h=l.child,l.tag===22&&l.memoizedState!==null?QD(i):h!==null?(h.return=l,Ft=h):QD(i);for(;o!==null;)Ft=o,w8(o),o=o.sibling;Ft=i,Bb=a,ua=d}YD(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ft=o):YD(e)}}function YD(e){for(;Ft!==null;){var t=Ft;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ua||XE(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ua)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:lu(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&ND(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ND(t,l,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var g=d.memoizedState;if(g!==null){var v=g.dehydrated;v!==null&&m0(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ht(163))}ua||t.flags&512&&YP(t)}catch(b){bi(t,t.return,b)}}if(t===e){Ft=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ft=n;break}Ft=t.return}}function JD(e){for(;Ft!==null;){var t=Ft;if(t===e){Ft=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ft=n;break}Ft=t.return}}function QD(e){for(;Ft!==null;){var t=Ft;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{XE(4,t)}catch(h){bi(t,n,h)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(h){bi(t,i,h)}}var o=t.return;try{YP(t)}catch(h){bi(t,o,h)}break;case 5:var l=t.return;try{YP(t)}catch(h){bi(t,l,h)}}}catch(h){bi(t,t.return,h)}if(t===e){Ft=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ft=a;break}Ft=t.return}}var GZ=Math.ceil,mS=Of.ReactCurrentDispatcher,QM=Of.ReactCurrentOwner,bl=Of.ReactCurrentBatchConfig,Xn=0,Co=null,Fi=null,Wo=0,Cs=0,ag=od(0),to=0,I0=null,gp=0,ZE=0,e$=0,K_=null,Qa=null,t$=0,Og=1/0,Vc=null,gS=!1,eA=null,Mh=null,jb=!1,Sh=null,yS=0,Y_=0,tA=null,$w=-1,kw=0;function ka(){return Xn&6?Mi():$w!==-1?$w:$w=Mi()}function $h(e){return e.mode&1?Xn&2&&Wo!==0?Wo&-Wo:TZ.transition!==null?(kw===0&&(kw=oB()),kw):(e=cr,e!==0||(e=window.event,e=e===void 0?16:hB(e.type)),e):1}function xu(e,t,n,r){if(50<Y_)throw Y_=0,tA=null,Error(ht(185));jx(e,n,r),(!(Xn&2)||e!==Co)&&(e===Co&&(!(Xn&2)&&(ZE|=n),to===4&&xh(e,Wo)),is(e,r),n===1&&Xn===0&&!(t.mode&1)&&(Og=Mi()+500,qE&&ad()))}function is(e,t){var n=e.callbackNode;TX(e,t);var r=eS(e,e===Co?Wo:0);if(r===0)n!==null&&lD(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lD(n),t===1)e.tag===0?IZ(eR.bind(null,e)):MB(eR.bind(null,e)),wZ(function(){!(Xn&6)&&ad()}),n=null;else{switch(aB(r)){case 1:n=TM;break;case 4:n=rB;break;case 16:n=Qw;break;case 536870912:n=iB;break;default:n=Qw}n=O8(n,S8.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function S8(e,t){if($w=-1,kw=0,Xn&6)throw Error(ht(327));var n=e.callbackNode;if(yg()&&e.callbackNode!==n)return null;var r=eS(e,e===Co?Wo:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=vS(e,r);else{t=r;var i=Xn;Xn|=2;var o=C8();(Co!==e||Wo!==t)&&(Vc=null,Og=Mi()+500,ap(e,t));do try{HZ();break}catch(a){E8(e,a)}while(!0);BM(),mS.current=o,Xn=i,Fi!==null?t=0:(Co=null,Wo=0,t=to)}if(t!==0){if(t===2&&(i=PP(e),i!==0&&(r=i,t=nA(e,i))),t===1)throw n=I0,ap(e,0),xh(e,r),is(e,Mi()),n;if(t===6)xh(e,r);else{if(i=e.current.alternate,!(r&30)&&!qZ(i)&&(t=vS(e,r),t===2&&(o=PP(e),o!==0&&(r=o,t=nA(e,o))),t===1))throw n=I0,ap(e,0),xh(e,r),is(e,Mi()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ht(345));case 2:Bd(e,Qa,Vc);break;case 3:if(xh(e,r),(r&130023424)===r&&(t=t$+500-Mi(),10<t)){if(eS(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ka(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=DP(Bd.bind(null,e,Qa,Vc),t);break}Bd(e,Qa,Vc);break;case 4:if(xh(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-_u(r);o=1<<l,l=t[l],l>i&&(i=l),r&=~o}if(r=i,r=Mi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GZ(r/1960))-r,10<r){e.timeoutHandle=DP(Bd.bind(null,e,Qa,Vc),r);break}Bd(e,Qa,Vc);break;case 5:Bd(e,Qa,Vc);break;default:throw Error(ht(329))}}}return is(e,Mi()),e.callbackNode===n?S8.bind(null,e):null}function nA(e,t){var n=K_;return e.current.memoizedState.isDehydrated&&(ap(e,t).flags|=256),e=vS(e,t),e!==2&&(t=Qa,Qa=n,t!==null&&rA(t)),e}function rA(e){Qa===null?Qa=e:Qa.push.apply(Qa,e)}function qZ(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Iu(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xh(e,t){for(t&=~e$,t&=~ZE,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_u(t),r=1<<n;e[n]=-1,t&=~r}}function eR(e){if(Xn&6)throw Error(ht(327));yg();var t=eS(e,0);if(!(t&1))return is(e,Mi()),null;var n=vS(e,t);if(e.tag!==0&&n===2){var r=PP(e);r!==0&&(t=r,n=nA(e,r))}if(n===1)throw n=I0,ap(e,0),xh(e,t),is(e,Mi()),n;if(n===6)throw Error(ht(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bd(e,Qa,Vc),is(e,Mi()),null}function n$(e,t){var n=Xn;Xn|=1;try{return e(t)}finally{Xn=n,Xn===0&&(Og=Mi()+500,qE&&ad())}}function yp(e){Sh!==null&&Sh.tag===0&&!(Xn&6)&&yg();var t=Xn;Xn|=1;var n=bl.transition,r=cr;try{if(bl.transition=null,cr=1,e)return e()}finally{cr=r,bl.transition=n,Xn=t,!(Xn&6)&&ad()}}function r$(){Cs=ag.current,qr(ag)}function ap(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,bZ(n)),Fi!==null)for(n=Fi.return;n!==null;){var r=n;switch(RM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oS();break;case 3:Pg(),qr(ns),qr(fa),WM();break;case 5:qM(r);break;case 4:Pg();break;case 13:qr(ci);break;case 19:qr(ci);break;case 10:jM(r.type._context);break;case 22:case 23:r$()}n=n.return}if(Co=e,Fi=e=kh(e.current,null),Wo=Cs=t,to=0,I0=null,e$=ZE=gp=0,Qa=K_=null,Yd!==null){for(t=0;t<Yd.length;t++)if(n=Yd[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}Yd=null}return e}function E8(e,t){do{var n=Fi;try{if(BM(),Aw.current=pS,dS){for(var r=mi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}dS=!1}if(mp=0,vo=eo=mi=null,X_=!1,S0=0,QM.current=null,n===null||n.return===null){to=1,I0=t,Fi=null;break}e:{var o=e,l=n.return,a=n,h=t;if(t=Wo,a.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h,g=a,v=g.tag;if(!(g.mode&1)&&(v===0||v===11||v===15)){var b=g.alternate;b?(g.updateQueue=b.updateQueue,g.memoizedState=b.memoizedState,g.lanes=b.lanes):(g.updateQueue=null,g.memoizedState=null)}var I=jD(l);if(I!==null){I.flags&=-257,UD(I,l,a,o,t),I.mode&1&&BD(o,d,t),t=I,h=d;var T=t.updateQueue;if(T===null){var P=new Set;P.add(h),t.updateQueue=P}else T.add(h);break e}else{if(!(t&1)){BD(o,d,t),i$();break e}h=Error(ht(426))}}else if(ti&&a.mode&1){var $=jD(l);if($!==null){!($.flags&65536)&&($.flags|=256),UD($,l,a,o,t),zM(Ag(h,a));break e}}o=h=Ag(h,a),to!==4&&(to=2),K_===null?K_=[o]:K_.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var O=s8(o,h,t);kD(o,O);break e;case 1:a=h;var k=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Mh===null||!Mh.has(R)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=l8(o,a,t);kD(o,j);break e}}o=o.return}while(o!==null)}T8(n)}catch(F){t=F,Fi===n&&n!==null&&(Fi=n=n.return);continue}break}while(!0)}function C8(){var e=mS.current;return mS.current=pS,e===null?pS:e}function i$(){(to===0||to===3||to===2)&&(to=4),Co===null||!(gp&268435455)&&!(ZE&268435455)||xh(Co,Wo)}function vS(e,t){var n=Xn;Xn|=2;var r=C8();(Co!==e||Wo!==t)&&(Vc=null,ap(e,t));do try{WZ();break}catch(i){E8(e,i)}while(!0);if(BM(),Xn=n,mS.current=r,Fi!==null)throw Error(ht(261));return Co=null,Wo=0,to}function WZ(){for(;Fi!==null;)I8(Fi)}function HZ(){for(;Fi!==null&&!vX();)I8(Fi)}function I8(e){var t=A8(e.alternate,e,Cs);e.memoizedProps=e.pendingProps,t===null?T8(e):Fi=t,QM.current=null}function T8(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=BZ(n,t),n!==null){n.flags&=32767,Fi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{to=6,Fi=null;return}}else if(n=FZ(n,t,Cs),n!==null){Fi=n;return}if(t=t.sibling,t!==null){Fi=t;return}Fi=t=e}while(t!==null);to===0&&(to=5)}function Bd(e,t,n){var r=cr,i=bl.transition;try{bl.transition=null,cr=1,XZ(e,t,n,r)}finally{bl.transition=i,cr=r}return null}function XZ(e,t,n,r){do yg();while(Sh!==null);if(Xn&6)throw Error(ht(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ht(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(PX(e,o),e===Co&&(Fi=Co=null,Wo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jb||(jb=!0,O8(Qw,function(){return yg(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=bl.transition,bl.transition=null;var l=cr;cr=1;var a=Xn;Xn|=4,QM.current=null,UZ(e,n),b8(n,e),pZ(NP),tS=!!kP,NP=kP=null,e.current=n,VZ(n),_X(),Xn=a,cr=l,bl.transition=o}else e.current=n;if(jb&&(jb=!1,Sh=e,yS=i),o=e.pendingLanes,o===0&&(Mh=null),wX(n.stateNode),is(e,Mi()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gS)throw gS=!1,e=eA,eA=null,e;return yS&1&&e.tag!==0&&yg(),o=e.pendingLanes,o&1?e===tA?Y_++:(Y_=0,tA=e):Y_=0,ad(),null}function yg(){if(Sh!==null){var e=aB(yS),t=bl.transition,n=cr;try{if(bl.transition=null,cr=16>e?16:e,Sh===null)var r=!1;else{if(e=Sh,Sh=null,yS=0,Xn&6)throw Error(ht(331));var i=Xn;for(Xn|=4,Ft=e.current;Ft!==null;){var o=Ft,l=o.child;if(Ft.flags&16){var a=o.deletions;if(a!==null){for(var h=0;h<a.length;h++){var d=a[h];for(Ft=d;Ft!==null;){var g=Ft;switch(g.tag){case 0:case 11:case 15:Z_(8,g,o)}var v=g.child;if(v!==null)v.return=g,Ft=v;else for(;Ft!==null;){g=Ft;var b=g.sibling,I=g.return;if(v8(g),g===d){Ft=null;break}if(b!==null){b.return=I,Ft=b;break}Ft=I}}}var T=o.alternate;if(T!==null){var P=T.child;if(P!==null){T.child=null;do{var $=P.sibling;P.sibling=null,P=$}while(P!==null)}}Ft=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,Ft=l;else e:for(;Ft!==null;){if(o=Ft,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Z_(9,o,o.return)}var O=o.sibling;if(O!==null){O.return=o.return,Ft=O;break e}Ft=o.return}}var k=e.current;for(Ft=k;Ft!==null;){l=Ft;var R=l.child;if(l.subtreeFlags&2064&&R!==null)R.return=l,Ft=R;else e:for(l=k;Ft!==null;){if(a=Ft,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:XE(9,a)}}catch(F){bi(a,a.return,F)}if(a===l){Ft=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,Ft=j;break e}Ft=a.return}}if(Xn=i,ad(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(BE,e)}catch{}r=!0}return r}finally{cr=n,bl.transition=t}}return!1}function tR(e,t,n){t=Ag(n,t),t=s8(e,t,1),e=Oh(e,t,1),t=ka(),e!==null&&(jx(e,1,t),is(e,t))}function bi(e,t,n){if(e.tag===3)tR(e,e,n);else for(;t!==null;){if(t.tag===3){tR(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mh===null||!Mh.has(r))){e=Ag(n,e),e=l8(t,e,1),t=Oh(t,e,1),e=ka(),t!==null&&(jx(t,1,e),is(t,e));break}}t=t.return}}function ZZ(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ka(),e.pingedLanes|=e.suspendedLanes&n,Co===e&&(Wo&n)===n&&(to===4||to===3&&(Wo&130023424)===Wo&&500>Mi()-t$?ap(e,0):e$|=n),is(e,t)}function P8(e,t){t===0&&(e.mode&1?(t=Mb,Mb<<=1,!(Mb&130023424)&&(Mb=4194304)):t=1);var n=ka();e=lf(e,t),e!==null&&(jx(e,t,n),is(e,n))}function KZ(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),P8(e,n)}function YZ(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ht(314))}r!==null&&r.delete(t),P8(e,n)}var A8;A8=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ns.current)es=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return es=!1,zZ(e,t,n);es=!!(e.flags&131072)}else es=!1,ti&&t.flags&1048576&&$B(t,lS,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Mw(e,t),e=t.pendingProps;var i=Cg(t,fa.current);gg(t,n),i=XM(null,t,r,e,i,n);var o=ZM();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rs(r)?(o=!0,aS(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,VM(t),i.updater=WE,t.stateNode=i,i._reactInternals=t,VP(t,r,e,n),t=WP(null,t,r,!0,o,n)):(t.tag=0,ti&&o&&DM(t),Aa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Mw(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=QZ(r),e=lu(r,e),i){case 0:t=qP(null,t,r,e,n);break e;case 1:t=qD(null,t,r,e,n);break e;case 11:t=VD(null,t,r,e,n);break e;case 14:t=GD(null,t,r,lu(r.type,e),n);break e}throw Error(ht(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lu(r,i),qP(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lu(r,i),qD(e,t,r,i,n);case 3:e:{if(h8(t),e===null)throw Error(ht(387));r=t.pendingProps,o=t.memoizedState,i=o.element,DB(e,t),fS(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Ag(Error(ht(423)),t),t=WD(e,t,r,n,i);break e}else if(r!==i){i=Ag(Error(ht(424)),t),t=WD(e,t,r,n,i);break e}else for(As=Ah(t.stateNode.containerInfo.firstChild),Ms=t,ti=!0,hu=null,n=BB(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ig(),r===i){t=uf(e,t,n);break e}Aa(e,t,r,n)}t=t.child}return t;case 5:return jB(t),e===null&&BP(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,l=i.children,LP(r,i)?l=null:o!==null&&LP(r,o)&&(t.flags|=32),f8(e,t),Aa(e,t,l,n),t.child;case 6:return e===null&&BP(t),null;case 13:return d8(e,t,n);case 4:return GM(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tg(t,null,r,n):Aa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lu(r,i),VD(e,t,r,i,n);case 7:return Aa(e,t,t.pendingProps,n),t.child;case 8:return Aa(e,t,t.pendingProps.children,n),t.child;case 12:return Aa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,Nr(uS,r._currentValue),r._currentValue=l,o!==null)if(Iu(o.value,l)){if(o.children===i.children&&!ns.current){t=uf(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){l=o.child;for(var h=a.firstContext;h!==null;){if(h.context===r){if(o.tag===1){h=Qc(-1,n&-n),h.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var g=d.pending;g===null?h.next=h:(h.next=g.next,g.next=h),d.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),jP(o.return,n,t),a.lanes|=n;break}h=h.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(ht(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),jP(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Aa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,gg(t,n),i=Il(i),r=r(i),t.flags|=1,Aa(e,t,r,n),t.child;case 14:return r=t.type,i=lu(r,t.pendingProps),i=lu(r.type,i),GD(e,t,r,i,n);case 15:return u8(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lu(r,i),Mw(e,t),t.tag=1,rs(r)?(e=!0,aS(t)):e=!1,gg(t,n),zB(t,r,i),VP(t,r,i,n),WP(null,t,r,!0,e,n);case 19:return p8(e,t,n);case 22:return c8(e,t,n)}throw Error(ht(156,t.tag))};function O8(e,t){return nB(e,t)}function JZ(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vl(e,t,n,r){return new JZ(e,t,n,r)}function o$(e){return e=e.prototype,!(!e||!e.isReactComponent)}function QZ(e){if(typeof e=="function")return o$(e)?1:0;if(e!=null){if(e=e.$$typeof,e===EM)return 11;if(e===CM)return 14}return 2}function kh(e,t){var n=e.alternate;return n===null?(n=vl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nw(e,t,n,r,i,o){var l=2;if(r=e,typeof e=="function")o$(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Km:return sp(n.children,i,o,t);case SM:l=8,i|=8;break;case dP:return e=vl(12,n,t,i|2),e.elementType=dP,e.lanes=o,e;case pP:return e=vl(13,n,t,i),e.elementType=pP,e.lanes=o,e;case mP:return e=vl(19,n,t,i),e.elementType=mP,e.lanes=o,e;case F6:return KE(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R6:l=10;break e;case z6:l=9;break e;case EM:l=11;break e;case CM:l=14;break e;case gh:l=16,r=null;break e}throw Error(ht(130,e==null?e:typeof e,""))}return t=vl(l,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function sp(e,t,n,r){return e=vl(7,e,r,t),e.lanes=n,e}function KE(e,t,n,r){return e=vl(22,e,r,t),e.elementType=F6,e.lanes=n,e.stateNode={isHidden:!1},e}function iT(e,t,n){return e=vl(6,e,null,t),e.lanes=n,e}function oT(e,t,n){return t=vl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function eK(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=FI(0),this.expirationTimes=FI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=FI(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function a$(e,t,n,r,i,o,l,a,h){return e=new eK(e,t,n,a,h),t===1?(t=1,o===!0&&(t|=8)):t=0,o=vl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},VM(o),e}function tK(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zm,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function M8(e){if(!e)return Fh;e=e._reactInternals;e:{if(Dp(e)!==e||e.tag!==1)throw Error(ht(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ht(171))}if(e.tag===1){var n=e.type;if(rs(n))return OB(e,n,t)}return t}function $8(e,t,n,r,i,o,l,a,h){return e=a$(n,r,!0,e,i,o,l,a,h),e.context=M8(null),n=e.current,r=ka(),i=$h(n),o=Qc(r,i),o.callback=t??null,Oh(n,o,i),e.current.lanes=i,jx(e,i,r),is(e,r),e}function YE(e,t,n,r){var i=t.current,o=ka(),l=$h(i);return n=M8(n),t.context===null?t.context=n:t.pendingContext=n,t=Qc(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Oh(i,t,l),e!==null&&(xu(e,i,l,o),Pw(e,i,l)),l}function _S(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nR(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function s$(e,t){nR(e,t),(e=e.alternate)&&nR(e,t)}function nK(){return null}var k8=typeof reportError=="function"?reportError:function(e){console.error(e)};function l$(e){this._internalRoot=e}JE.prototype.render=l$.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ht(409));YE(e,t,null,null)};JE.prototype.unmount=l$.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yp(function(){YE(null,e,null,null)}),t[sf]=null}};function JE(e){this._internalRoot=e}JE.prototype.unstable_scheduleHydration=function(e){if(e){var t=uB();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_h.length&&t!==0&&t<_h[n].priority;n++);_h.splice(n,0,e),n===0&&fB(e)}};function u$(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function QE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rR(){}function rK(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=_S(l);o.call(d)}}var l=$8(t,r,e,0,null,!1,!1,"",rR);return e._reactRootContainer=l,e[sf]=l.current,v0(e.nodeType===8?e.parentNode:e),yp(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=_S(h);a.call(d)}}var h=a$(e,0,!1,null,null,!1,!1,"",rR);return e._reactRootContainer=h,e[sf]=h.current,v0(e.nodeType===8?e.parentNode:e),yp(function(){YE(t,h,n,r)}),h}function e2(e,t,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var a=i;i=function(){var h=_S(l);a.call(h)}}YE(t,l,e,i)}else l=rK(n,t,e,i,r);return _S(l)}sB=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=L_(t.pendingLanes);n!==0&&(PM(t,n|1),is(t,Mi()),!(Xn&6)&&(Og=Mi()+500,ad()))}break;case 13:yp(function(){var r=lf(e,1);if(r!==null){var i=ka();xu(r,e,1,i)}}),s$(e,1)}};AM=function(e){if(e.tag===13){var t=lf(e,134217728);if(t!==null){var n=ka();xu(t,e,134217728,n)}s$(e,134217728)}};lB=function(e){if(e.tag===13){var t=$h(e),n=lf(e,t);if(n!==null){var r=ka();xu(n,e,t,r)}s$(e,t)}};uB=function(){return cr};cB=function(e,t){var n=cr;try{return cr=e,t()}finally{cr=n}};CP=function(e,t,n){switch(t){case"input":if(vP(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=GE(r);if(!i)throw Error(ht(90));j6(r),vP(r,i)}}}break;case"textarea":V6(e,n);break;case"select":t=n.value,t!=null&&hg(e,!!n.multiple,t,!1)}};K6=n$;Y6=yp;var iK={usingClientEntryPoint:!1,Events:[Vx,eg,GE,X6,Z6,n$]},m_={findFiberByHostInstance:Kd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},oK={bundleType:m_.bundleType,version:m_.version,rendererPackageName:m_.rendererPackageName,rendererConfig:m_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Of.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=eB(e),e===null?null:e.stateNode},findFiberByHostInstance:m_.findFiberByHostInstance||nK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ub=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ub.isDisabled&&Ub.supportsFiber)try{BE=Ub.inject(oK),lc=Ub}catch{}}Ws.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iK;Ws.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u$(t))throw Error(ht(200));return tK(e,t,null,n)};Ws.createRoot=function(e,t){if(!u$(e))throw Error(ht(299));var n=!1,r="",i=k8;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=a$(e,1,!1,null,null,n,!1,r,i),e[sf]=t.current,v0(e.nodeType===8?e.parentNode:e),new l$(t)};Ws.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ht(188)):(e=Object.keys(e).join(","),Error(ht(268,e)));return e=eB(t),e=e===null?null:e.stateNode,e};Ws.flushSync=function(e){return yp(e)};Ws.hydrate=function(e,t,n){if(!QE(t))throw Error(ht(200));return e2(null,e,t,!0,n)};Ws.hydrateRoot=function(e,t,n){if(!u$(e))throw Error(ht(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=k8;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=$8(t,null,e,1,n??null,i,!1,o,l),e[sf]=t.current,v0(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new JE(t)};Ws.render=function(e,t,n){if(!QE(t))throw Error(ht(200));return e2(null,e,t,!1,n)};Ws.unmountComponentAtNode=function(e){if(!QE(e))throw Error(ht(40));return e._reactRootContainer?(yp(function(){e2(null,null,e,!1,function(){e._reactRootContainer=null,e[sf]=null})}),!0):!1};Ws.unstable_batchedUpdates=n$;Ws.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!QE(n))throw Error(ht(200));if(e==null||e._reactInternals===void 0)throw Error(ht(38));return e2(e,t,n,!1,r)};Ws.version="18.2.0-next-9e3b772b8-20220608";function N8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N8)}catch(e){console.error(e)}}N8(),$6.exports=Ws;var Mf=$6.exports;const L8=hr(Mf);var iR=Mf;fP.createRoot=iR.createRoot,fP.hydrateRoot=iR.hydrateRoot;function lt(){return lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lt.apply(this,arguments)}function Zt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function $f(e,t=[]){let n=[];function r(o,l){const a=D.createContext(l),h=n.length;n=[...n,l];function d(v){const{scope:b,children:I,...T}=v,P=(b==null?void 0:b[e][h])||a,$=D.useMemo(()=>T,Object.values(T));return D.createElement(P.Provider,{value:$},I)}function g(v,b){const I=(b==null?void 0:b[e][h])||a,T=D.useContext(I);if(T)return T;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,g]}const i=()=>{const o=n.map(l=>D.createContext(l));return function(a){const h=(a==null?void 0:a[e])||o;return D.useMemo(()=>({[`__scope${e}`]:{...a,[e]:h}}),[a,h])}};return i.scopeName=e,[r,aK(i,...t)]}function aK(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const l=r.reduce((a,{useScope:h,scopeName:d})=>{const v=h(o)[`__scope${d}`];return{...a,...v}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function sK(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function t2(...e){return t=>e.forEach(n=>sK(n,t))}function Cr(...e){return D.useCallback(t2(...e),e)}const cf=D.forwardRef((e,t)=>{const{children:n,...r}=e,i=D.Children.toArray(n),o=i.find(uK);if(o){const l=o.props.children,a=i.map(h=>h===o?D.Children.count(l)>1?D.Children.only(null):D.isValidElement(l)?l.props.children:null:h);return D.createElement(iA,lt({},r,{ref:t}),D.isValidElement(l)?D.cloneElement(l,void 0,a):null)}return D.createElement(iA,lt({},r,{ref:t}),n)});cf.displayName="Slot";const iA=D.forwardRef((e,t)=>{const{children:n,...r}=e;return D.isValidElement(n)?D.cloneElement(n,{...cK(r,n.props),ref:t?t2(t,n.ref):n.ref}):D.Children.count(n)>1?D.Children.only(null):null});iA.displayName="SlotClone";const lK=({children:e})=>D.createElement(D.Fragment,null,e);function uK(e){return D.isValidElement(e)&&e.type===lK}function cK(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function c$(e){const t=e+"CollectionProvider",[n,r]=$f(t),[i,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=I=>{const{scope:T,children:P}=I,$=Re.useRef(null),O=Re.useRef(new Map).current;return Re.createElement(i,{scope:T,itemMap:O,collectionRef:$},P)},a=e+"CollectionSlot",h=Re.forwardRef((I,T)=>{const{scope:P,children:$}=I,O=o(a,P),k=Cr(T,O.collectionRef);return Re.createElement(cf,{ref:k},$)}),d=e+"CollectionItemSlot",g="data-radix-collection-item",v=Re.forwardRef((I,T)=>{const{scope:P,children:$,...O}=I,k=Re.useRef(null),R=Cr(T,k),j=o(d,P);return Re.useEffect(()=>(j.itemMap.set(k,{ref:k,...O}),()=>void j.itemMap.delete(k))),Re.createElement(cf,{[g]:"",ref:R},$)});function b(I){const T=o(e+"CollectionConsumer",I);return Re.useCallback(()=>{const $=T.collectionRef.current;if(!$)return[];const O=Array.from($.querySelectorAll(`[${g}]`));return Array.from(T.itemMap.values()).sort((j,F)=>O.indexOf(j.ref.current)-O.indexOf(F.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:l,Slot:h,ItemSlot:v},b,r]}const ls=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},fK=Zw.useId||(()=>{});let hK=0;function Bh(e){const[t,n]=D.useState(fK());return ls(()=>{e||n(r=>r??String(hK++))},[e]),e||(t?`radix-${t}`:"")}const dK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Qn=dK.reduce((e,t)=>{const n=D.forwardRef((r,i)=>{const{asChild:o,...l}=r,a=o?cf:t;return D.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),D.createElement(a,lt({},l,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function D8(e,t){e&&Mf.flushSync(()=>e.dispatchEvent(t))}function Tu(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function Mg({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=pK({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:r,a=Tu(n),h=D.useCallback(d=>{if(o){const v=typeof d=="function"?d(e):d;v!==e&&a(v)}else i(d)},[o,e,i,a]);return[l,h]}function pK({defaultProp:e,onChange:t}){const n=D.useState(e),[r]=n,i=D.useRef(r),o=Tu(t);return D.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}const mK=D.createContext(void 0);function n2(e){const t=D.useContext(mK);return e||t||"ltr"}const aT="rovingFocusGroup.onEntryFocus",gK={bubbles:!1,cancelable:!0},f$="RovingFocusGroup",[oA,R8,yK]=c$(f$),[vK,r2]=$f(f$,[yK]),[_K,xK]=vK(f$),bK=D.forwardRef((e,t)=>D.createElement(oA.Provider,{scope:e.__scopeRovingFocusGroup},D.createElement(oA.Slot,{scope:e.__scopeRovingFocusGroup},D.createElement(wK,lt({},e,{ref:t}))))),wK=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:h,onEntryFocus:d,...g}=e,v=D.useRef(null),b=Cr(t,v),I=n2(o),[T=null,P]=Mg({prop:l,defaultProp:a,onChange:h}),[$,O]=D.useState(!1),k=Tu(d),R=R8(n),j=D.useRef(!1),[F,U]=D.useState(0);return D.useEffect(()=>{const G=v.current;if(G)return G.addEventListener(aT,k),()=>G.removeEventListener(aT,k)},[k]),D.createElement(_K,{scope:n,orientation:r,dir:I,loop:i,currentTabStopId:T,onItemFocus:D.useCallback(G=>P(G),[P]),onItemShiftTab:D.useCallback(()=>O(!0),[]),onFocusableItemAdd:D.useCallback(()=>U(G=>G+1),[]),onFocusableItemRemove:D.useCallback(()=>U(G=>G-1),[])},D.createElement(Qn.div,lt({tabIndex:$||F===0?-1:0,"data-orientation":r},g,{ref:b,style:{outline:"none",...e.style},onMouseDown:Zt(e.onMouseDown,()=>{j.current=!0}),onFocus:Zt(e.onFocus,G=>{const Z=!j.current;if(G.target===G.currentTarget&&Z&&!$){const ne=new CustomEvent(aT,gK);if(G.currentTarget.dispatchEvent(ne),!ne.defaultPrevented){const oe=R().filter(be=>be.focusable),ye=oe.find(be=>be.active),fe=oe.find(be=>be.id===T),ae=[ye,fe,...oe].filter(Boolean).map(be=>be.ref.current);z8(ae)}}j.current=!1}),onBlur:Zt(e.onBlur,()=>O(!1))})))}),SK="RovingFocusGroupItem",EK=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...l}=e,a=Bh(),h=o||a,d=xK(SK,n),g=d.currentTabStopId===h,v=R8(n),{onFocusableItemAdd:b,onFocusableItemRemove:I}=d;return D.useEffect(()=>{if(r)return b(),()=>I()},[r,b,I]),D.createElement(oA.ItemSlot,{scope:n,id:h,focusable:r,active:i},D.createElement(Qn.span,lt({tabIndex:g?0:-1,"data-orientation":d.orientation},l,{ref:t,onMouseDown:Zt(e.onMouseDown,T=>{r?d.onItemFocus(h):T.preventDefault()}),onFocus:Zt(e.onFocus,()=>d.onItemFocus(h)),onKeyDown:Zt(e.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){d.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const P=TK(T,d.orientation,d.dir);if(P!==void 0){T.preventDefault();let O=v().filter(k=>k.focusable).map(k=>k.ref.current);if(P==="last")O.reverse();else if(P==="prev"||P==="next"){P==="prev"&&O.reverse();const k=O.indexOf(T.currentTarget);O=d.loop?PK(O,k+1):O.slice(k+1)}setTimeout(()=>z8(O))}})})))}),CK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function IK(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function TK(e,t,n){const r=IK(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return CK[r]}function z8(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function PK(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const AK=bK,OK=EK;function MK(e,t){return D.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const Ru=e=>{const{present:t,children:n}=e,r=$K(t),i=typeof n=="function"?n({present:r.isPresent}):D.Children.only(n),o=Cr(r.ref,i.ref);return typeof n=="function"||r.isPresent?D.cloneElement(i,{ref:o}):null};Ru.displayName="Presence";function $K(e){const[t,n]=D.useState(),r=D.useRef({}),i=D.useRef(e),o=D.useRef("none"),l=e?"mounted":"unmounted",[a,h]=MK(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const d=Vb(r.current);o.current=a==="mounted"?d:"none"},[a]),ls(()=>{const d=r.current,g=i.current;if(g!==e){const b=o.current,I=Vb(d);e?h("MOUNT"):I==="none"||(d==null?void 0:d.display)==="none"?h("UNMOUNT"):h(g&&b!==I?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,h]),ls(()=>{if(t){const d=v=>{const I=Vb(r.current).includes(v.animationName);v.target===t&&I&&Mf.flushSync(()=>h("ANIMATION_END"))},g=v=>{v.target===t&&(o.current=Vb(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else h("ANIMATION_END")},[t,h]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:D.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Vb(e){return(e==null?void 0:e.animationName)||"none"}const F8="Tabs",[kK,O$e]=$f(F8,[r2]);r2();const[NK,LK]=kK(F8),DK=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:o,orientation:l="horizontal",dir:a,activationMode:h="automatic",...d}=e,g=n2(a),[v,b]=Mg({prop:r,onChange:i,defaultProp:o});return D.createElement(NK,{scope:n,baseId:Bh(),value:v,onValueChange:b,orientation:l,dir:g,activationMode:h},D.createElement(Qn.div,lt({dir:g,"data-orientation":l},d,{ref:t})))}),RK="TabsContent",zK=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:o,...l}=e,a=LK(RK,n),h=FK(a.baseId,r),d=BK(a.baseId,r),g=r===a.value,v=D.useRef(g);return D.useEffect(()=>{const b=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(b)},[]),D.createElement(Ru,{present:i||g},({present:b})=>D.createElement(Qn.div,lt({"data-state":g?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":h,hidden:!b,id:d,tabIndex:0},l,{ref:t,style:{...e.style,animationDuration:v.current?"0s":void 0}}),b&&o))});function FK(e,t){return`${e}-trigger-${t}`}function BK(e,t){return`${e}-content-${t}`}function B8(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=B8(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function ir(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=B8(e))&&(r&&(r+=" "),r+=t);return r}const h$="-";function jK(e){const t=VK(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;function i(l){const a=l.split(h$);return a[0]===""&&a.length!==1&&a.shift(),j8(a,t)||UK(l)}function o(l,a){const h=n[l]||[];return a&&r[l]?[...h,...r[l]]:h}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function j8(e,t){var l;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?j8(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(h$);return(l=t.validators.find(({validator:a})=>a(o)))==null?void 0:l.classGroupId}const oR=/^\[(.+)\]$/;function UK(e){if(oR.test(e)){const t=oR.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function VK(e){const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return qK(Object.entries(e.classGroups),n).forEach(([o,l])=>{aA(l,r,o,t)}),r}function aA(e,t,n,r){e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:aR(t,i);o.classGroupId=n;return}if(typeof i=="function"){if(GK(i)){aA(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,l])=>{aA(l,aR(t,o),n,r)})})}function aR(e,t){let n=e;return t.split(h$).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function GK(e){return e.isThemeGetter}function qK(e,t){return t?e.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,a])=>[t+l,a])):o);return[n,i]}):e}function WK(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;function i(o,l){n.set(o,l),t++,t>e&&(t=0,r=n,n=new Map)}return{get(o){let l=n.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return i(o,l),l},set(o,l){n.has(o)?n.set(o,l):i(o,l)}}}const U8="!";function HK(e){const t=e.separator,n=t.length===1,r=t[0],i=t.length;return function(l){const a=[];let h=0,d=0,g;for(let P=0;P<l.length;P++){let $=l[P];if(h===0){if($===r&&(n||l.slice(P,P+i)===t)){a.push(l.slice(d,P)),d=P+i;continue}if($==="/"){g=P;continue}}$==="["?h++:$==="]"&&h--}const v=a.length===0?l:l.substring(d),b=v.startsWith(U8),I=b?v.substring(1):v,T=g&&g>d?g-d:void 0;return{modifiers:a,hasImportantModifier:b,baseClassName:I,maybePostfixModifierPosition:T}}}function XK(e){if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t}function ZK(e){return{cache:WK(e.cacheSize),splitModifiers:HK(e),...jK(e)}}const KK=/\s+/;function YK(e,t){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,o=new Set;return e.trim().split(KK).map(l=>{const{modifiers:a,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:g}=n(l);let v=r(g?d.substring(0,g):d),b=!!g;if(!v){if(!g)return{isTailwindClass:!1,originalClassName:l};if(v=r(d),!v)return{isTailwindClass:!1,originalClassName:l};b=!1}const I=XK(a).join(":");return{isTailwindClass:!0,modifierId:h?I+U8:I,classGroupId:v,originalClassName:l,hasPostfixModifier:b}}).reverse().filter(l=>{if(!l.isTailwindClass)return!0;const{modifierId:a,classGroupId:h,hasPostfixModifier:d}=l,g=a+h;return o.has(g)?!1:(o.add(g),i(h,d).forEach(v=>o.add(a+v)),!0)}).reverse().map(l=>l.originalClassName).join(" ")}function JK(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=V8(t))&&(r&&(r+=" "),r+=n);return r}function V8(e){if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=V8(e[r]))&&(n&&(n+=" "),n+=t);return n}function QK(e,...t){let n,r,i,o=l;function l(h){const d=t.reduce((g,v)=>v(g),e());return n=ZK(d),r=n.cache.get,i=n.cache.set,o=a,a(h)}function a(h){const d=r(h);if(d)return d;const g=YK(h,n);return i(h,g),g}return function(){return o(JK.apply(null,arguments))}}function Br(e){const t=n=>n[e]||[];return t.isThemeGetter=!0,t}const G8=/^\[(?:([a-z-]+):)?(.+)\]$/i,eY=/^\d+\/\d+$/,tY=new Set(["px","full","screen"]),nY=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rY=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iY=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oY=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function ou(e){return Qd(e)||tY.has(e)||eY.test(e)}function oh(e){return My(e,"length",dY)}function Qd(e){return!!e&&!Number.isNaN(Number(e))}function Gb(e){return My(e,"number",Qd)}function g_(e){return!!e&&Number.isInteger(Number(e))}function aY(e){return e.endsWith("%")&&Qd(e.slice(0,-1))}function En(e){return G8.test(e)}function ah(e){return nY.test(e)}const sY=new Set(["length","size","percentage"]);function lY(e){return My(e,sY,q8)}function uY(e){return My(e,"position",q8)}const cY=new Set(["image","url"]);function fY(e){return My(e,cY,mY)}function hY(e){return My(e,"",pY)}function y_(){return!0}function My(e,t,n){const r=G8.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1}function dY(e){return rY.test(e)}function q8(){return!1}function pY(e){return iY.test(e)}function mY(e){return oY.test(e)}function gY(){const e=Br("colors"),t=Br("spacing"),n=Br("blur"),r=Br("brightness"),i=Br("borderColor"),o=Br("borderRadius"),l=Br("borderSpacing"),a=Br("borderWidth"),h=Br("contrast"),d=Br("grayscale"),g=Br("hueRotate"),v=Br("invert"),b=Br("gap"),I=Br("gradientColorStops"),T=Br("gradientColorStopPositions"),P=Br("inset"),$=Br("margin"),O=Br("opacity"),k=Br("padding"),R=Br("saturate"),j=Br("scale"),F=Br("sepia"),U=Br("skew"),G=Br("space"),Z=Br("translate"),ne=()=>["auto","contain","none"],oe=()=>["auto","hidden","clip","visible","scroll"],ye=()=>["auto",En,t],fe=()=>[En,t],$e=()=>["",ou,oh],ae=()=>["auto",Qd,En],be=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Te=()=>["solid","dashed","dotted","double","none"],Le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],Ee=()=>["start","end","center","between","around","evenly","stretch"],de=()=>["","0",En],De=()=>["auto","avoid","all","avoid-page","page","left","right","column"],He=()=>[Qd,Gb],je=()=>[Qd,En];return{cacheSize:500,separator:":",theme:{colors:[y_],spacing:[ou,oh],blur:["none","",ah,En],brightness:He(),borderColor:[e],borderRadius:["none","","full",ah,En],borderSpacing:fe(),borderWidth:$e(),contrast:He(),grayscale:de(),hueRotate:je(),invert:de(),gap:fe(),gradientColorStops:[e],gradientColorStopPositions:[aY,oh],inset:ye(),margin:ye(),opacity:He(),padding:fe(),saturate:He(),scale:He(),sepia:de(),skew:je(),space:fe(),translate:fe()},classGroups:{aspect:[{aspect:["auto","square","video",En]}],container:["container"],columns:[{columns:[ah]}],"break-after":[{"break-after":De()}],"break-before":[{"break-before":De()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...be(),En]}],overflow:[{overflow:oe()}],"overflow-x":[{"overflow-x":oe()}],"overflow-y":[{"overflow-y":oe()}],overscroll:[{overscroll:ne()}],"overscroll-x":[{"overscroll-x":ne()}],"overscroll-y":[{"overscroll-y":ne()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[P]}],"inset-x":[{"inset-x":[P]}],"inset-y":[{"inset-y":[P]}],start:[{start:[P]}],end:[{end:[P]}],top:[{top:[P]}],right:[{right:[P]}],bottom:[{bottom:[P]}],left:[{left:[P]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",g_,En]}],basis:[{basis:ye()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",En]}],grow:[{grow:de()}],shrink:[{shrink:de()}],order:[{order:["first","last","none",g_,En]}],"grid-cols":[{"grid-cols":[y_]}],"col-start-end":[{col:["auto",{span:["full",g_,En]},En]}],"col-start":[{"col-start":ae()}],"col-end":[{"col-end":ae()}],"grid-rows":[{"grid-rows":[y_]}],"row-start-end":[{row:["auto",{span:[g_,En]},En]}],"row-start":[{"row-start":ae()}],"row-end":[{"row-end":ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",En]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",En]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...Ee()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ee(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ee(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[$]}],mx:[{mx:[$]}],my:[{my:[$]}],ms:[{ms:[$]}],me:[{me:[$]}],mt:[{mt:[$]}],mr:[{mr:[$]}],mb:[{mb:[$]}],ml:[{ml:[$]}],"space-x":[{"space-x":[G]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[G]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",En,t]}],"min-w":[{"min-w":["min","max","fit",En,ou]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ah]},ah,En]}],h:[{h:[En,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ou,En]}],"max-h":[{"max-h":[En,t,"min","max","fit"]}],"font-size":[{text:["base",ah,oh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Gb]}],"font-family":[{font:[y_]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",En]}],"line-clamp":[{"line-clamp":["none",Qd,Gb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ou,En]}],"list-image":[{"list-image":["none",En]}],"list-style-type":[{list:["none","disc","decimal",En]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[O]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[O]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ou,oh]}],"underline-offset":[{"underline-offset":["auto",ou,En]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:fe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",En]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",En]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[O]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...be(),uY]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",lY]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fY]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[I]}],"gradient-via":[{via:[I]}],"gradient-to":[{to:[I]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[O]}],"border-style":[{border:[...Te(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[O]}],"divide-style":[{divide:Te()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Te()]}],"outline-offset":[{"outline-offset":[ou,En]}],"outline-w":[{outline:[ou,oh]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$e()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[O]}],"ring-offset-w":[{"ring-offset":[ou,oh]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ah,hY]}],"shadow-color":[{shadow:[y_]}],opacity:[{opacity:[O]}],"mix-blend":[{"mix-blend":Le()}],"bg-blend":[{"bg-blend":Le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",ah,En]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[v]}],saturate:[{saturate:[R]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[O]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",En]}],duration:[{duration:je()}],ease:[{ease:["linear","in","out","in-out",En]}],delay:[{delay:je()}],animate:[{animate:["none","spin","ping","pulse","bounce",En]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[g_,En]}],"translate-x":[{"translate-x":[Z]}],"translate-y":[{"translate-y":[Z]}],"skew-x":[{"skew-x":[U]}],"skew-y":[{"skew-y":[U]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",En]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",En]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":fe()}],"scroll-mx":[{"scroll-mx":fe()}],"scroll-my":[{"scroll-my":fe()}],"scroll-ms":[{"scroll-ms":fe()}],"scroll-me":[{"scroll-me":fe()}],"scroll-mt":[{"scroll-mt":fe()}],"scroll-mr":[{"scroll-mr":fe()}],"scroll-mb":[{"scroll-mb":fe()}],"scroll-ml":[{"scroll-ml":fe()}],"scroll-p":[{"scroll-p":fe()}],"scroll-px":[{"scroll-px":fe()}],"scroll-py":[{"scroll-py":fe()}],"scroll-ps":[{"scroll-ps":fe()}],"scroll-pe":[{"scroll-pe":fe()}],"scroll-pt":[{"scroll-pt":fe()}],"scroll-pr":[{"scroll-pr":fe()}],"scroll-pb":[{"scroll-pb":fe()}],"scroll-pl":[{"scroll-pl":fe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",En]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ou,oh,Gb]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const yY=QK(gY);function Vn(...e){return yY(ir(e))}const jd=D.forwardRef(({className:e,...t},n)=>Pe.jsx("div",{ref:n,className:Vn("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));jd.displayName="Card";const Ud=D.forwardRef(({className:e,...t},n)=>Pe.jsx("div",{ref:n,className:Vn("flex flex-col space-y-1.5 p-6",e),...t}));Ud.displayName="CardHeader";const Vd=D.forwardRef(({className:e,...t},n)=>Pe.jsx("h3",{ref:n,className:Vn("text-2xl font-semibold leading-none tracking-tight",e),...t}));Vd.displayName="CardTitle";const W8=D.forwardRef(({className:e,...t},n)=>Pe.jsx("p",{ref:n,className:Vn("text-sm text-muted-foreground",e),...t}));W8.displayName="CardDescription";const Gd=D.forwardRef(({className:e,...t},n)=>Pe.jsx("div",{ref:n,className:Vn("p-6 pt-0",e),...t}));Gd.displayName="CardContent";const vY=D.forwardRef(({className:e,...t},n)=>Pe.jsx("div",{ref:n,className:Vn("flex items-center p-6 pt-0",e),...t}));vY.displayName="CardFooter";const _Y={theme:"system",setTheme:()=>null},H8=D.createContext(_Y);function xY({children:e,defaultTheme:t="system",storageKey:n="vite-ui-theme",...r}){const[i,o]=D.useState(()=>localStorage.getItem(n)||t);D.useEffect(()=>{const a=window.document.documentElement;if(a.classList.remove("light","dark"),i==="system"){const h=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";a.classList.add(h);return}a.classList.add(i)},[i]);const l={theme:i,setTheme:a=>{localStorage.setItem(n,a),o(a)}};return Pe.jsx(H8.Provider,{...r,value:l,children:e})}const X8=()=>{const e=D.useContext(H8);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),wc=(e,t)=>{const n=D.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:a="",children:h,...d},g)=>D.createElement("svg",{ref:g,...bY,width:i,height:i,stroke:r,strokeWidth:l?Number(o)*24/Number(i):o,className:["lucide",`lucide-${wY(e)}`,a].join(" "),...d},[...t.map(([v,b])=>D.createElement(v,b)),...Array.isArray(h)?h:[h]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=wc("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=wc("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=wc("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=wc("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=wc("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=wc("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=wc("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=wc("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=wc("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=wc("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sR=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,lR=ir,MY=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return lR(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=t,l=Object.keys(i).map(d=>{const g=n==null?void 0:n[d],v=o==null?void 0:o[d];if(g===null)return null;const b=sR(g)||sR(v);return i[d][b]}),a=n&&Object.entries(n).reduce((d,g)=>{let[v,b]=g;return b===void 0||(d[v]=b),d},{}),h=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,g)=>{let{class:v,className:b,...I}=g;return Object.entries(I).every(T=>{let[P,$]=T;return Array.isArray($)?$.includes({...o,...a}[P]):{...o,...a}[P]===$})?[...d,v,b]:d},[]);return lR(e,l,h,n==null?void 0:n.class,n==null?void 0:n.className)},$Y=MY("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300",{variants:{variant:{default:"bg-zinc-900 text-zinc-50 hover:bg-zinc-900/90 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50/90",destructive:"bg-red-500 text-zinc-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-zinc-50 dark:hover:bg-red-900/90",outline:"border border-zinc-200 bg-white hover:bg-zinc-100 hover:text-zinc-900 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",secondary:"bg-zinc-100 text-zinc-900 hover:bg-zinc-100/80 dark:bg-zinc-800 dark:text-zinc-50 dark:hover:bg-zinc-800/80",ghost:"hover:bg-zinc-100 hover:text-zinc-900 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",link:"text-zinc-900 underline-offset-4 hover:underline dark:text-zinc-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p$=D.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},o)=>{const l=r?cf:"button";return Pe.jsx(l,{className:Vn($Y({variant:t,size:n,className:e})),ref:o,...i})});p$.displayName="Button";function kY(e,t=globalThis==null?void 0:globalThis.document){const n=Tu(e);D.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const sA="dismissableLayer.update",NY="dismissableLayer.pointerDownOutside",LY="dismissableLayer.focusOutside";let uR;const DY=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),i2=D.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:a,onDismiss:h,...d}=e,g=D.useContext(DY),[v,b]=D.useState(null),I=(n=v==null?void 0:v.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,T]=D.useState({}),P=Cr(t,Z=>b(Z)),$=Array.from(g.layers),[O]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),k=$.indexOf(O),R=v?$.indexOf(v):-1,j=g.layersWithOutsidePointerEventsDisabled.size>0,F=R>=k,U=RY(Z=>{const ne=Z.target,oe=[...g.branches].some(ye=>ye.contains(ne));!F||oe||(o==null||o(Z),a==null||a(Z),Z.defaultPrevented||h==null||h())},I),G=zY(Z=>{const ne=Z.target;[...g.branches].some(ye=>ye.contains(ne))||(l==null||l(Z),a==null||a(Z),Z.defaultPrevented||h==null||h())},I);return kY(Z=>{R===g.layers.size-1&&(i==null||i(Z),!Z.defaultPrevented&&h&&(Z.preventDefault(),h()))},I),D.useEffect(()=>{if(v)return r&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(uR=I.body.style.pointerEvents,I.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(v)),g.layers.add(v),cR(),()=>{r&&g.layersWithOutsidePointerEventsDisabled.size===1&&(I.body.style.pointerEvents=uR)}},[v,I,r,g]),D.useEffect(()=>()=>{v&&(g.layers.delete(v),g.layersWithOutsidePointerEventsDisabled.delete(v),cR())},[v,g]),D.useEffect(()=>{const Z=()=>T({});return document.addEventListener(sA,Z),()=>document.removeEventListener(sA,Z)},[]),D.createElement(Qn.div,lt({},d,{ref:P,style:{pointerEvents:j?F?"auto":"none":void 0,...e.style},onFocusCapture:Zt(e.onFocusCapture,G.onFocusCapture),onBlurCapture:Zt(e.onBlurCapture,G.onBlurCapture),onPointerDownCapture:Zt(e.onPointerDownCapture,U.onPointerDownCapture)}))});function RY(e,t=globalThis==null?void 0:globalThis.document){const n=Tu(e),r=D.useRef(!1),i=D.useRef(()=>{});return D.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let g=function(){K8(NY,n,d,{discrete:!0})};var h=g;const d={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=g,t.addEventListener("click",i.current,{once:!0})):g()}else t.removeEventListener("click",i.current);r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function zY(e,t=globalThis==null?void 0:globalThis.document){const n=Tu(e),r=D.useRef(!1);return D.useEffect(()=>{const i=o=>{o.target&&!r.current&&K8(LY,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function cR(){const e=new CustomEvent(sA);document.dispatchEvent(e)}function K8(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?D8(i,o):i.dispatchEvent(o)}let sT=0;function o2(){D.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:fR()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:fR()),sT++,()=>{sT===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),sT--}},[])}function fR(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const lT="focusScope.autoFocusOnMount",uT="focusScope.autoFocusOnUnmount",hR={bubbles:!1,cancelable:!0},a2=D.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...l}=e,[a,h]=D.useState(null),d=Tu(i),g=Tu(o),v=D.useRef(null),b=Cr(t,P=>h(P)),I=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(r){let k=function(U){if(I.paused||!a)return;const G=U.target;a.contains(G)?v.current=G:ch(v.current,{select:!0})},R=function(U){if(I.paused||!a)return;const G=U.relatedTarget;G!==null&&(a.contains(G)||ch(v.current,{select:!0}))},j=function(U){if(document.activeElement===document.body)for(const Z of U)Z.removedNodes.length>0&&ch(a)};var P=k,$=R,O=j;document.addEventListener("focusin",k),document.addEventListener("focusout",R);const F=new MutationObserver(j);return a&&F.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",R),F.disconnect()}}},[r,a,I.paused]),D.useEffect(()=>{if(a){pR.add(I);const P=document.activeElement;if(!a.contains(P)){const O=new CustomEvent(lT,hR);a.addEventListener(lT,d),a.dispatchEvent(O),O.defaultPrevented||(FY(GY(Y8(a)),{select:!0}),document.activeElement===P&&ch(a))}return()=>{a.removeEventListener(lT,d),setTimeout(()=>{const O=new CustomEvent(uT,hR);a.addEventListener(uT,g),a.dispatchEvent(O),O.defaultPrevented||ch(P??document.body,{select:!0}),a.removeEventListener(uT,g),pR.remove(I)},0)}}},[a,d,g,I]);const T=D.useCallback(P=>{if(!n&&!r||I.paused)return;const $=P.key==="Tab"&&!P.altKey&&!P.ctrlKey&&!P.metaKey,O=document.activeElement;if($&&O){const k=P.currentTarget,[R,j]=BY(k);R&&j?!P.shiftKey&&O===j?(P.preventDefault(),n&&ch(R,{select:!0})):P.shiftKey&&O===R&&(P.preventDefault(),n&&ch(j,{select:!0})):O===k&&P.preventDefault()}},[n,r,I.paused]);return D.createElement(Qn.div,lt({tabIndex:-1},l,{ref:b,onKeyDown:T}))});function FY(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ch(r,{select:t}),document.activeElement!==n)return}function BY(e){const t=Y8(e),n=dR(t,e),r=dR(t.reverse(),e);return[n,r]}function Y8(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function dR(e,t){for(const n of e)if(!jY(n,{upTo:t}))return n}function jY(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function UY(e){return e instanceof HTMLInputElement&&"select"in e}function ch(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&UY(e)&&t&&e.select()}}const pR=VY();function VY(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=mR(e,t),e.unshift(t)},remove(t){var n;e=mR(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function mR(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function GY(e){return e.filter(t=>t.tagName!=="A")}const qY=["top","right","bottom","left"],jh=Math.min,Ts=Math.max,xS=Math.round,qb=Math.floor,Uh=e=>({x:e,y:e}),WY={left:"right",right:"left",bottom:"top",top:"bottom"},HY={start:"end",end:"start"};function lA(e,t,n){return Ts(e,jh(t,n))}function ff(e,t){return typeof e=="function"?e(t):e}function hf(e){return e.split("-")[0]}function $y(e){return e.split("-")[1]}function m$(e){return e==="x"?"y":"x"}function g$(e){return e==="y"?"height":"width"}function ky(e){return["top","bottom"].includes(hf(e))?"y":"x"}function y$(e){return m$(ky(e))}function XY(e,t,n){n===void 0&&(n=!1);const r=$y(e),i=y$(e),o=g$(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=bS(l)),[l,bS(l)]}function ZY(e){const t=bS(e);return[uA(e),t,uA(t)]}function uA(e){return e.replace(/start|end/g,t=>HY[t])}function KY(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],l=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:l;default:return[]}}function YY(e,t,n,r){const i=$y(e);let o=KY(hf(e),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),t&&(o=o.concat(o.map(uA)))),o}function bS(e){return e.replace(/left|right|bottom|top/g,t=>WY[t])}function JY(e){return{top:0,right:0,bottom:0,left:0,...e}}function J8(e){return typeof e!="number"?JY(e):{top:e,right:e,bottom:e,left:e}}function wS(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function gR(e,t,n){let{reference:r,floating:i}=e;const o=ky(t),l=y$(t),a=g$(l),h=hf(t),d=o==="y",g=r.x+r.width/2-i.width/2,v=r.y+r.height/2-i.height/2,b=r[a]/2-i[a]/2;let I;switch(h){case"top":I={x:g,y:r.y-i.height};break;case"bottom":I={x:g,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y:v};break;case"left":I={x:r.x-i.width,y:v};break;default:I={x:r.x,y:r.y}}switch($y(t)){case"start":I[l]-=b*(n&&d?-1:1);break;case"end":I[l]+=b*(n&&d?-1:1);break}return I}const QY=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,a=o.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(t));let d=await l.getElementRects({reference:e,floating:t,strategy:i}),{x:g,y:v}=gR(d,r,h),b=r,I={},T=0;for(let P=0;P<a.length;P++){const{name:$,fn:O}=a[P],{x:k,y:R,data:j,reset:F}=await O({x:g,y:v,initialPlacement:r,placement:b,strategy:i,middlewareData:I,rects:d,platform:l,elements:{reference:e,floating:t}});if(g=k??g,v=R??v,I={...I,[$]:{...I[$],...j}},F&&T<=50){T++,typeof F=="object"&&(F.placement&&(b=F.placement),F.rects&&(d=F.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:i}):F.rects),{x:g,y:v}=gR(d,b,h)),P=-1;continue}}return{x:g,y:v,placement:b,strategy:i,middlewareData:I}};async function T0(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:l,elements:a,strategy:h}=e,{boundary:d="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:b=!1,padding:I=0}=ff(t,e),T=J8(I),$=a[b?v==="floating"?"reference":"floating":v],O=wS(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement($)))==null||n?$:$.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:d,rootBoundary:g,strategy:h})),k=v==="floating"?{...l.floating,x:r,y:i}:l.reference,R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),j=await(o.isElement==null?void 0:o.isElement(R))?await(o.getScale==null?void 0:o.getScale(R))||{x:1,y:1}:{x:1,y:1},F=wS(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:k,offsetParent:R,strategy:h}):k);return{top:(O.top-F.top+T.top)/j.y,bottom:(F.bottom-O.bottom+T.bottom)/j.y,left:(O.left-F.left+T.left)/j.x,right:(F.right-O.right+T.right)/j.x}}const yR=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:l,elements:a,middlewareData:h}=t,{element:d,padding:g=0}=ff(e,t)||{};if(d==null)return{};const v=J8(g),b={x:n,y:r},I=y$(i),T=g$(I),P=await l.getDimensions(d),$=I==="y",O=$?"top":"left",k=$?"bottom":"right",R=$?"clientHeight":"clientWidth",j=o.reference[T]+o.reference[I]-b[I]-o.floating[T],F=b[I]-o.reference[I],U=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let G=U?U[R]:0;(!G||!await(l.isElement==null?void 0:l.isElement(U)))&&(G=a.floating[R]||o.floating[T]);const Z=j/2-F/2,ne=G/2-P[T]/2-1,oe=jh(v[O],ne),ye=jh(v[k],ne),fe=oe,$e=G-P[T]-ye,ae=G/2-P[T]/2+Z,be=lA(fe,ae,$e),Te=!h.arrow&&$y(i)!=null&&ae!=be&&o.reference[T]/2-(ae<fe?oe:ye)-P[T]/2<0,Le=Te?ae<fe?ae-fe:ae-$e:0;return{[I]:b[I]+Le,data:{[I]:be,centerOffset:ae-be-Le,...Te&&{alignmentOffset:Le}},reset:Te}}}),eJ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:a,platform:h,elements:d}=t,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:b,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:P=!0,...$}=ff(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const O=hf(i),k=hf(a)===a,R=await(h.isRTL==null?void 0:h.isRTL(d.floating)),j=b||(k||!P?[bS(a)]:ZY(a));!b&&T!=="none"&&j.push(...YY(a,P,T,R));const F=[a,...j],U=await T0(t,$),G=[];let Z=((r=o.flip)==null?void 0:r.overflows)||[];if(g&&G.push(U[O]),v){const fe=XY(i,l,R);G.push(U[fe[0]],U[fe[1]])}if(Z=[...Z,{placement:i,overflows:G}],!G.every(fe=>fe<=0)){var ne,oe;const fe=(((ne=o.flip)==null?void 0:ne.index)||0)+1,$e=F[fe];if($e)return{data:{index:fe,overflows:Z},reset:{placement:$e}};let ae=(oe=Z.filter(be=>be.overflows[0]<=0).sort((be,Te)=>be.overflows[1]-Te.overflows[1])[0])==null?void 0:oe.placement;if(!ae)switch(I){case"bestFit":{var ye;const be=(ye=Z.map(Te=>[Te.placement,Te.overflows.filter(Le=>Le>0).reduce((Le,Ee)=>Le+Ee,0)]).sort((Te,Le)=>Te[1]-Le[1])[0])==null?void 0:ye[0];be&&(ae=be);break}case"initialPlacement":ae=a;break}if(i!==ae)return{reset:{placement:ae}}}return{}}}};function vR(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function _R(e){return qY.some(t=>e[t]>=0)}const tJ=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=ff(e,t);switch(r){case"referenceHidden":{const o=await T0(t,{...i,elementContext:"reference"}),l=vR(o,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:_R(l)}}}case"escaped":{const o=await T0(t,{...i,altBoundary:!0}),l=vR(o,n.floating);return{data:{escapedOffsets:l,escaped:_R(l)}}}default:return{}}}}};async function nJ(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=hf(n),a=$y(n),h=ky(n)==="y",d=["left","top"].includes(l)?-1:1,g=o&&h?-1:1,v=ff(t,e);let{mainAxis:b,crossAxis:I,alignmentAxis:T}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...v};return a&&typeof T=="number"&&(I=a==="end"?T*-1:T),h?{x:I*g,y:b*d}:{x:b*d,y:I*g}}const rJ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:l,middlewareData:a}=t,h=await nJ(t,e);return l===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+h.x,y:o+h.y,data:{...h,placement:l}}}}},iJ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:a={fn:$=>{let{x:O,y:k}=$;return{x:O,y:k}}},...h}=ff(e,t),d={x:n,y:r},g=await T0(t,h),v=ky(hf(i)),b=m$(v);let I=d[b],T=d[v];if(o){const $=b==="y"?"top":"left",O=b==="y"?"bottom":"right",k=I+g[$],R=I-g[O];I=lA(k,I,R)}if(l){const $=v==="y"?"top":"left",O=v==="y"?"bottom":"right",k=T+g[$],R=T-g[O];T=lA(k,T,R)}const P=a.fn({...t,[b]:I,[v]:T});return{...P,data:{x:P.x-n,y:P.y-r}}}}},oJ=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:l}=t,{offset:a=0,mainAxis:h=!0,crossAxis:d=!0}=ff(e,t),g={x:n,y:r},v=ky(i),b=m$(v);let I=g[b],T=g[v];const P=ff(a,t),$=typeof P=="number"?{mainAxis:P,crossAxis:0}:{mainAxis:0,crossAxis:0,...P};if(h){const R=b==="y"?"height":"width",j=o.reference[b]-o.floating[R]+$.mainAxis,F=o.reference[b]+o.reference[R]-$.mainAxis;I<j?I=j:I>F&&(I=F)}if(d){var O,k;const R=b==="y"?"width":"height",j=["top","left"].includes(hf(i)),F=o.reference[v]-o.floating[R]+(j&&((O=l.offset)==null?void 0:O[v])||0)+(j?0:$.crossAxis),U=o.reference[v]+o.reference[R]+(j?0:((k=l.offset)==null?void 0:k[v])||0)-(j?$.crossAxis:0);T<F?T=F:T>U&&(T=U)}return{[b]:I,[v]:T}}}},aJ=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:o}=t,{apply:l=()=>{},...a}=ff(e,t),h=await T0(t,a),d=hf(n),g=$y(n),v=ky(n)==="y",{width:b,height:I}=r.floating;let T,P;d==="top"||d==="bottom"?(T=d,P=g===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(P=d,T=g==="end"?"top":"bottom");const $=I-h[T],O=b-h[P],k=!t.middlewareData.shift;let R=$,j=O;if(v){const U=b-h.left-h.right;j=g||k?jh(O,U):U}else{const U=I-h.top-h.bottom;R=g||k?jh($,U):U}if(k&&!g){const U=Ts(h.left,0),G=Ts(h.right,0),Z=Ts(h.top,0),ne=Ts(h.bottom,0);v?j=b-2*(U!==0||G!==0?U+G:Ts(h.left,h.right)):R=I-2*(Z!==0||ne!==0?Z+ne:Ts(h.top,h.bottom))}await l({...t,availableWidth:j,availableHeight:R});const F=await i.getDimensions(o.floating);return b!==F.width||I!==F.height?{reset:{rects:!0}}:{}}}};function Vh(e){return Q8(e)?(e.nodeName||"").toLowerCase():"#document"}function $s(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function kf(e){var t;return(t=(Q8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Q8(e){return e instanceof Node||e instanceof $s(e).Node}function df(e){return e instanceof Element||e instanceof $s(e).Element}function dc(e){return e instanceof HTMLElement||e instanceof $s(e).HTMLElement}function xR(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $s(e).ShadowRoot}function qx(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Pl(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function sJ(e){return["table","td","th"].includes(Vh(e))}function v$(e){const t=_$(),n=Pl(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function lJ(e){let t=$g(e);for(;dc(t)&&!s2(t);){if(v$(t))return t;t=$g(t)}return null}function _$(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function s2(e){return["html","body","#document"].includes(Vh(e))}function Pl(e){return $s(e).getComputedStyle(e)}function l2(e){return df(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function $g(e){if(Vh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||xR(e)&&e.host||kf(e);return xR(t)?t.host:t}function ej(e){const t=$g(e);return s2(t)?e.ownerDocument?e.ownerDocument.body:e.body:dc(t)&&qx(t)?t:ej(t)}function P0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=ej(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),l=$s(i);return o?t.concat(l,l.visualViewport||[],qx(i)?i:[],l.frameElement&&n?P0(l.frameElement):[]):t.concat(i,P0(i,[],n))}function tj(e){const t=Pl(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=dc(e),o=i?e.offsetWidth:n,l=i?e.offsetHeight:r,a=xS(n)!==o||xS(r)!==l;return a&&(n=o,r=l),{width:n,height:r,$:a}}function x$(e){return df(e)?e:e.contextElement}function vg(e){const t=x$(e);if(!dc(t))return Uh(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=tj(t);let l=(o?xS(n.width):n.width)/r,a=(o?xS(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!a||!Number.isFinite(a))&&(a=1),{x:l,y:a}}const uJ=Uh(0);function nj(e){const t=$s(e);return!_$()||!t.visualViewport?uJ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function cJ(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==$s(e)?!1:t}function vp(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=x$(e);let l=Uh(1);t&&(r?df(r)&&(l=vg(r)):l=vg(e));const a=cJ(o,n,r)?nj(o):Uh(0);let h=(i.left+a.x)/l.x,d=(i.top+a.y)/l.y,g=i.width/l.x,v=i.height/l.y;if(o){const b=$s(o),I=r&&df(r)?$s(r):r;let T=b.frameElement;for(;T&&r&&I!==b;){const P=vg(T),$=T.getBoundingClientRect(),O=Pl(T),k=$.left+(T.clientLeft+parseFloat(O.paddingLeft))*P.x,R=$.top+(T.clientTop+parseFloat(O.paddingTop))*P.y;h*=P.x,d*=P.y,g*=P.x,v*=P.y,h+=k,d+=R,T=$s(T).frameElement}}return wS({width:g,height:v,x:h,y:d})}function fJ(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=dc(n),o=kf(n);if(n===o)return t;let l={scrollLeft:0,scrollTop:0},a=Uh(1);const h=Uh(0);if((i||!i&&r!=="fixed")&&((Vh(n)!=="body"||qx(o))&&(l=l2(n)),dc(n))){const d=vp(n);a=vg(n),h.x=d.x+n.clientLeft,h.y=d.y+n.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-l.scrollLeft*a.x+h.x,y:t.y*a.y-l.scrollTop*a.y+h.y}}function hJ(e){return Array.from(e.getClientRects())}function rj(e){return vp(kf(e)).left+l2(e).scrollLeft}function dJ(e){const t=kf(e),n=l2(e),r=e.ownerDocument.body,i=Ts(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Ts(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+rj(e);const a=-n.scrollTop;return Pl(r).direction==="rtl"&&(l+=Ts(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:a}}function pJ(e,t){const n=$s(e),r=kf(e),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,a=0,h=0;if(i){o=i.width,l=i.height;const d=_$();(!d||d&&t==="fixed")&&(a=i.offsetLeft,h=i.offsetTop)}return{width:o,height:l,x:a,y:h}}function mJ(e,t){const n=vp(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=dc(e)?vg(e):Uh(1),l=e.clientWidth*o.x,a=e.clientHeight*o.y,h=i*o.x,d=r*o.y;return{width:l,height:a,x:h,y:d}}function bR(e,t,n){let r;if(t==="viewport")r=pJ(e,n);else if(t==="document")r=dJ(kf(e));else if(df(t))r=mJ(t,n);else{const i=nj(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return wS(r)}function ij(e,t){const n=$g(e);return n===t||!df(n)||s2(n)?!1:Pl(n).position==="fixed"||ij(n,t)}function gJ(e,t){const n=t.get(e);if(n)return n;let r=P0(e,[],!1).filter(a=>df(a)&&Vh(a)!=="body"),i=null;const o=Pl(e).position==="fixed";let l=o?$g(e):e;for(;df(l)&&!s2(l);){const a=Pl(l),h=v$(l);!h&&a.position==="fixed"&&(i=null),(o?!h&&!i:!h&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||qx(l)&&!h&&ij(e,l))?r=r.filter(g=>g!==l):i=a,l=$g(l)}return t.set(e,r),r}function yJ(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const l=[...n==="clippingAncestors"?gJ(t,this._c):[].concat(n),r],a=l[0],h=l.reduce((d,g)=>{const v=bR(t,g,i);return d.top=Ts(v.top,d.top),d.right=jh(v.right,d.right),d.bottom=jh(v.bottom,d.bottom),d.left=Ts(v.left,d.left),d},bR(t,a,i));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function vJ(e){return tj(e)}function _J(e,t,n){const r=dc(t),i=kf(t),o=n==="fixed",l=vp(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const h=Uh(0);if(r||!r&&!o)if((Vh(t)!=="body"||qx(i))&&(a=l2(t)),r){const d=vp(t,!0,o,t);h.x=d.x+t.clientLeft,h.y=d.y+t.clientTop}else i&&(h.x=rj(i));return{x:l.left+a.scrollLeft-h.x,y:l.top+a.scrollTop-h.y,width:l.width,height:l.height}}function wR(e,t){return!dc(e)||Pl(e).position==="fixed"?null:t?t(e):e.offsetParent}function oj(e,t){const n=$s(e);if(!dc(e))return n;let r=wR(e,t);for(;r&&sJ(r)&&Pl(r).position==="static";)r=wR(r,t);return r&&(Vh(r)==="html"||Vh(r)==="body"&&Pl(r).position==="static"&&!v$(r))?n:r||lJ(e)||n}const xJ=async function(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||oj,o=this.getDimensions;return{reference:_J(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}};function bJ(e){return Pl(e).direction==="rtl"}const wJ={convertOffsetParentRelativeRectToViewportRelativeRect:fJ,getDocumentElement:kf,getClippingRect:yJ,getOffsetParent:oj,getElementRects:xJ,getClientRects:hJ,getDimensions:vJ,getScale:vg,isElement:df,isRTL:bJ};function SJ(e,t){let n=null,r;const i=kf(e);function o(){clearTimeout(r),n&&n.disconnect(),n=null}function l(a,h){a===void 0&&(a=!1),h===void 0&&(h=1),o();const{left:d,top:g,width:v,height:b}=e.getBoundingClientRect();if(a||t(),!v||!b)return;const I=qb(g),T=qb(i.clientWidth-(d+v)),P=qb(i.clientHeight-(g+b)),$=qb(d),k={rootMargin:-I+"px "+-T+"px "+-P+"px "+-$+"px",threshold:Ts(0,jh(1,h))||1};let R=!0;function j(F){const U=F[0].intersectionRatio;if(U!==h){if(!R)return l();U?l(!1,U):r=setTimeout(()=>{l(!1,1e-7)},100)}R=!1}try{n=new IntersectionObserver(j,{...k,root:i.ownerDocument})}catch{n=new IntersectionObserver(j,k)}n.observe(e)}return l(!0),o}function EJ(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,d=x$(e),g=i||o?[...d?P0(d):[],...P0(t)]:[];g.forEach(O=>{i&&O.addEventListener("scroll",n,{passive:!0}),o&&O.addEventListener("resize",n)});const v=d&&a?SJ(d,n):null;let b=-1,I=null;l&&(I=new ResizeObserver(O=>{let[k]=O;k&&k.target===d&&I&&(I.unobserve(t),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{I&&I.observe(t)})),n()}),d&&!h&&I.observe(d),I.observe(t));let T,P=h?vp(e):null;h&&$();function $(){const O=vp(e);P&&(O.x!==P.x||O.y!==P.y||O.width!==P.width||O.height!==P.height)&&n(),P=O,T=requestAnimationFrame($)}return n(),()=>{g.forEach(O=>{i&&O.removeEventListener("scroll",n),o&&O.removeEventListener("resize",n)}),v&&v(),I&&I.disconnect(),I=null,h&&cancelAnimationFrame(T)}}const CJ=(e,t,n)=>{const r=new Map,i={platform:wJ,...n},o={...i.platform,_c:r};return QY(e,t,{...i,platform:o})},IJ=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?yR({element:r.current,padding:i}).fn(n):{}:r?yR({element:r,padding:i}).fn(n):{}}}};var Lw=typeof document<"u"?D.useLayoutEffect:D.useEffect;function SS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!SS(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!SS(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function aj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function SR(e,t){const n=aj(e);return Math.round(t*n)/n}function ER(e){const t=D.useRef(e);return Lw(()=>{t.current=e}),t}function TJ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:a=!0,whileElementsMounted:h,open:d}=e,[g,v]=D.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[b,I]=D.useState(r);SS(b,r)||I(r);const[T,P]=D.useState(null),[$,O]=D.useState(null),k=D.useCallback(Te=>{Te!=U.current&&(U.current=Te,P(Te))},[P]),R=D.useCallback(Te=>{Te!==G.current&&(G.current=Te,O(Te))},[O]),j=o||T,F=l||$,U=D.useRef(null),G=D.useRef(null),Z=D.useRef(g),ne=ER(h),oe=ER(i),ye=D.useCallback(()=>{if(!U.current||!G.current)return;const Te={placement:t,strategy:n,middleware:b};oe.current&&(Te.platform=oe.current),CJ(U.current,G.current,Te).then(Le=>{const Ee={...Le,isPositioned:!0};fe.current&&!SS(Z.current,Ee)&&(Z.current=Ee,Mf.flushSync(()=>{v(Ee)}))})},[b,t,n,oe]);Lw(()=>{d===!1&&Z.current.isPositioned&&(Z.current.isPositioned=!1,v(Te=>({...Te,isPositioned:!1})))},[d]);const fe=D.useRef(!1);Lw(()=>(fe.current=!0,()=>{fe.current=!1}),[]),Lw(()=>{if(j&&(U.current=j),F&&(G.current=F),j&&F){if(ne.current)return ne.current(j,F,ye);ye()}},[j,F,ye,ne]);const $e=D.useMemo(()=>({reference:U,floating:G,setReference:k,setFloating:R}),[k,R]),ae=D.useMemo(()=>({reference:j,floating:F}),[j,F]),be=D.useMemo(()=>{const Te={position:n,left:0,top:0};if(!ae.floating)return Te;const Le=SR(ae.floating,g.x),Ee=SR(ae.floating,g.y);return a?{...Te,transform:"translate("+Le+"px, "+Ee+"px)",...aj(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Le,top:Ee}},[n,a,ae.floating,g.x,g.y]);return D.useMemo(()=>({...g,update:ye,refs:$e,elements:ae,floatingStyles:be}),[g,ye,$e,ae,be])}function PJ(e){const[t,n]=D.useState(void 0);return ls(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let l,a;if("borderBoxSize"in o){const h=o.borderBoxSize,d=Array.isArray(h)?h[0]:h;l=d.inlineSize,a=d.blockSize}else l=e.offsetWidth,a=e.offsetHeight;n({width:l,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}const sj="Popper",[lj,Ny]=$f(sj),[AJ,uj]=lj(sj),OJ=e=>{const{__scopePopper:t,children:n}=e,[r,i]=D.useState(null);return D.createElement(AJ,{scope:t,anchor:r,onAnchorChange:i},n)},MJ="PopperAnchor",$J=D.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=uj(MJ,n),l=D.useRef(null),a=Cr(t,l);return D.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:D.createElement(Qn.div,lt({},i,{ref:a}))}),cj="PopperContent",[kJ,M$e]=lj(cj),NJ=D.forwardRef((e,t)=>{var n,r,i,o,l,a,h,d;const{__scopePopper:g,side:v="bottom",sideOffset:b=0,align:I="center",alignOffset:T=0,arrowPadding:P=0,avoidCollisions:$=!0,collisionBoundary:O=[],collisionPadding:k=0,sticky:R="partial",hideWhenDetached:j=!1,updatePositionStrategy:F="optimized",onPlaced:U,...G}=e,Z=uj(cj,g),[ne,oe]=D.useState(null),ye=Cr(t,Tt=>oe(Tt)),[fe,$e]=D.useState(null),ae=PJ(fe),be=(n=ae==null?void 0:ae.width)!==null&&n!==void 0?n:0,Te=(r=ae==null?void 0:ae.height)!==null&&r!==void 0?r:0,Le=v+(I!=="center"?"-"+I:""),Ee=typeof k=="number"?k:{top:0,right:0,bottom:0,left:0,...k},de=Array.isArray(O)?O:[O],De=de.length>0,He={padding:Ee,boundary:de.filter(LJ),altBoundary:De},{refs:je,floatingStyles:et,placement:Et,isPositioned:zt,middlewareData:Yt}=TJ({strategy:"fixed",placement:Le,whileElementsMounted:(...Tt)=>EJ(...Tt,{animationFrame:F==="always"}),elements:{reference:Z.anchor},middleware:[rJ({mainAxis:b+Te,alignmentAxis:T}),$&&iJ({mainAxis:!0,crossAxis:!1,limiter:R==="partial"?oJ():void 0,...He}),$&&eJ({...He}),aJ({...He,apply:({elements:Tt,rects:Tn,availableWidth:yn,availableHeight:sn})=>{const{width:br,height:Ge}=Tn.reference,Dn=Tt.floating.style;Dn.setProperty("--radix-popper-available-width",`${yn}px`),Dn.setProperty("--radix-popper-available-height",`${sn}px`),Dn.setProperty("--radix-popper-anchor-width",`${br}px`),Dn.setProperty("--radix-popper-anchor-height",`${Ge}px`)}}),fe&&IJ({element:fe,padding:P}),DJ({arrowWidth:be,arrowHeight:Te}),j&&tJ({strategy:"referenceHidden",...He})]}),[St,Vt]=fj(Et),Qe=Tu(U);ls(()=>{zt&&(Qe==null||Qe())},[zt,Qe]);const dt=(i=Yt.arrow)===null||i===void 0?void 0:i.x,vt=(o=Yt.arrow)===null||o===void 0?void 0:o.y,We=((l=Yt.arrow)===null||l===void 0?void 0:l.centerOffset)!==0,[Ot,Ct]=D.useState();return ls(()=>{ne&&Ct(window.getComputedStyle(ne).zIndex)},[ne]),D.createElement("div",{ref:je.setFloating,"data-radix-popper-content-wrapper":"",style:{...et,transform:zt?et.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ot,"--radix-popper-transform-origin":[(a=Yt.transformOrigin)===null||a===void 0?void 0:a.x,(h=Yt.transformOrigin)===null||h===void 0?void 0:h.y].join(" ")},dir:e.dir},D.createElement(kJ,{scope:g,placedSide:St,onArrowChange:$e,arrowX:dt,arrowY:vt,shouldHideArrow:We},D.createElement(Qn.div,lt({"data-side":St,"data-align":Vt},G,{ref:ye,style:{...G.style,animation:zt?void 0:"none",opacity:(d=Yt.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function LJ(e){return e!==null}const DJ=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,o,l;const{placement:a,rects:h,middlewareData:d}=t,v=((n=d.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,b=v?0:e.arrowWidth,I=v?0:e.arrowHeight,[T,P]=fj(a),$={start:"0%",center:"50%",end:"100%"}[P],O=((r=(i=d.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+b/2,k=((o=(l=d.arrow)===null||l===void 0?void 0:l.y)!==null&&o!==void 0?o:0)+I/2;let R="",j="";return T==="bottom"?(R=v?$:`${O}px`,j=`${-I}px`):T==="top"?(R=v?$:`${O}px`,j=`${h.floating.height+I}px`):T==="right"?(R=`${-I}px`,j=v?$:`${k}px`):T==="left"&&(R=`${h.floating.width+I}px`,j=v?$:`${k}px`),{data:{x:R,y:j}}}});function fj(e){const[t,n="center"]=e.split("-");return[t,n]}const b$=OJ,w$=$J,S$=NJ,u2=D.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=e;return r?L8.createPortal(D.createElement(Qn.div,lt({},i,{ref:t})),r):null});var RJ=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Dm=new WeakMap,Wb=new WeakMap,Hb={},cT=0,hj=function(e){return e&&(e.host||hj(e.parentNode))},zJ=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=hj(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},FJ=function(e,t,n,r){var i=zJ(t,Array.isArray(e)?e:[e]);Hb[n]||(Hb[n]=new WeakMap);var o=Hb[n],l=[],a=new Set,h=new Set(i),d=function(v){!v||a.has(v)||(a.add(v),d(v.parentNode))};i.forEach(d);var g=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(b){if(a.has(b))g(b);else{var I=b.getAttribute(r),T=I!==null&&I!=="false",P=(Dm.get(b)||0)+1,$=(o.get(b)||0)+1;Dm.set(b,P),o.set(b,$),l.push(b),P===1&&T&&Wb.set(b,!0),$===1&&b.setAttribute(n,"true"),T||b.setAttribute(r,"true")}})};return g(t),a.clear(),cT++,function(){l.forEach(function(v){var b=Dm.get(v)-1,I=o.get(v)-1;Dm.set(v,b),o.set(v,I),b||(Wb.has(v)||v.removeAttribute(r),Wb.delete(v)),I||v.removeAttribute(n)}),cT--,cT||(Dm=new WeakMap,Dm=new WeakMap,Wb=new WeakMap,Hb={})}},Wx=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||RJ(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),FJ(r,i,n,"aria-hidden")):function(){return null}},_r=function(){return _r=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_r.apply(this,arguments)};function E$(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function kg(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var J_="right-scroll-bar-position",Q_="width-before-scroll-bar",BJ="with-scroll-bars-hidden",jJ="--removed-body-scroll-bar-size";function UJ(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function VJ(e,t){var n=D.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}function dj(e,t){return VJ(t||null,function(n){return e.forEach(function(r){return UJ(r,n)})})}function GJ(e){return e}function qJ(e,t){t===void 0&&(t=GJ);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var l=t(o,r);return n.push(l),function(){n=n.filter(function(a){return a!==l})}},assignSyncMedium:function(o){for(r=!0;n.length;){var l=n;n=[],l.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var l=[];if(n.length){var a=n;n=[],a.forEach(o),l=n}var h=function(){var g=l;l=[],g.forEach(o)},d=function(){return Promise.resolve().then(h)};d(),n={push:function(g){l.push(g),d()},filter:function(g){return l=l.filter(g),n}}}};return i}function pj(e){e===void 0&&(e={});var t=qJ(null);return t.options=_r({async:!0,ssr:!1},e),t}var mj=function(e){var t=e.sideCar,n=E$(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return D.createElement(r,_r({},n))};mj.isSideCarExport=!0;function gj(e,t){return e.useMedium(t),mj}var yj=pj(),fT=function(){},c2=D.forwardRef(function(e,t){var n=D.useRef(null),r=D.useState({onScrollCapture:fT,onWheelCapture:fT,onTouchMoveCapture:fT}),i=r[0],o=r[1],l=e.forwardProps,a=e.children,h=e.className,d=e.removeScrollBar,g=e.enabled,v=e.shards,b=e.sideCar,I=e.noIsolation,T=e.inert,P=e.allowPinchZoom,$=e.as,O=$===void 0?"div":$,k=E$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),R=b,j=dj([n,t]),F=_r(_r({},k),i);return D.createElement(D.Fragment,null,g&&D.createElement(R,{sideCar:yj,removeScrollBar:d,shards:v,noIsolation:I,inert:T,setCallbacks:o,allowPinchZoom:!!P,lockRef:n}),l?D.cloneElement(D.Children.only(a),_r(_r({},F),{ref:j})):D.createElement(O,_r({},F,{className:h,ref:j}),a))});c2.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};c2.classNames={fullWidth:Q_,zeroRight:J_};var CR,WJ=function(){if(CR)return CR;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function HJ(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=WJ();return t&&e.setAttribute("nonce",t),e}function XJ(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ZJ(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var KJ=function(){var e=0,t=null;return{add:function(n){e==0&&(t=HJ())&&(XJ(t,n),ZJ(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},YJ=function(){var e=KJ();return function(t,n){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},C$=function(){var e=YJ(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},JJ={left:0,top:0,right:0,gap:0},hT=function(e){return parseInt(e||"",10)||0},QJ=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[hT(n),hT(r),hT(i)]},eQ=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return JJ;var t=QJ(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},tQ=C$(),nQ=function(e,t,n,r){var i=e.left,o=e.top,l=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(BJ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(J_,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Q_,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(J_," .").concat(J_,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Q_," .").concat(Q_,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(jJ,": ").concat(a,`px;
  }
`)},vj=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r,o=D.useMemo(function(){return eQ(i)},[i]);return D.createElement(tQ,{styles:nQ(o,!t,i,n?"":"!important")})},cA=!1;if(typeof window<"u")try{var Xb=Object.defineProperty({},"passive",{get:function(){return cA=!0,!0}});window.addEventListener("test",Xb,Xb),window.removeEventListener("test",Xb,Xb)}catch{cA=!1}var Rm=cA?{passive:!1}:!1,rQ=function(e){return e.tagName==="TEXTAREA"},_j=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!rQ(e)&&n[t]==="visible")},iQ=function(e){return _j(e,"overflowY")},oQ=function(e){return _j(e,"overflowX")},IR=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=xj(e,n);if(r){var i=bj(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},aQ=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},sQ=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},xj=function(e,t){return e==="v"?iQ(t):oQ(t)},bj=function(e,t){return e==="v"?aQ(t):sQ(t)},lQ=function(e,t){return e==="h"&&t==="rtl"?-1:1},uQ=function(e,t,n,r,i){var o=lQ(e,window.getComputedStyle(t).direction),l=o*r,a=n.target,h=t.contains(a),d=!1,g=l>0,v=0,b=0;do{var I=bj(e,a),T=I[0],P=I[1],$=I[2],O=P-$-o*T;(T||O)&&xj(e,a)&&(v+=O,b+=T),a=a.parentNode}while(!h&&a!==document.body||h&&(t.contains(a)||t===a));return(g&&(i&&v===0||!i&&l>v)||!g&&(i&&b===0||!i&&-l>b))&&(d=!0),d},Zb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},TR=function(e){return[e.deltaX,e.deltaY]},PR=function(e){return e&&"current"in e?e.current:e},cQ=function(e,t){return e[0]===t[0]&&e[1]===t[1]},fQ=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},hQ=0,zm=[];function dQ(e){var t=D.useRef([]),n=D.useRef([0,0]),r=D.useRef(),i=D.useState(hQ++)[0],o=D.useState(function(){return C$()})[0],l=D.useRef(e);D.useEffect(function(){l.current=e},[e]),D.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var P=kg([e.lockRef.current],(e.shards||[]).map(PR),!0).filter(Boolean);return P.forEach(function($){return $.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),P.forEach(function($){return $.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=D.useCallback(function(P,$){if("touches"in P&&P.touches.length===2)return!l.current.allowPinchZoom;var O=Zb(P),k=n.current,R="deltaX"in P?P.deltaX:k[0]-O[0],j="deltaY"in P?P.deltaY:k[1]-O[1],F,U=P.target,G=Math.abs(R)>Math.abs(j)?"h":"v";if("touches"in P&&G==="h"&&U.type==="range")return!1;var Z=IR(G,U);if(!Z)return!0;if(Z?F=G:(F=G==="v"?"h":"v",Z=IR(G,U)),!Z)return!1;if(!r.current&&"changedTouches"in P&&(R||j)&&(r.current=F),!F)return!0;var ne=r.current||F;return uQ(ne,$,P,ne==="h"?R:j,!0)},[]),h=D.useCallback(function(P){var $=P;if(!(!zm.length||zm[zm.length-1]!==o)){var O="deltaY"in $?TR($):Zb($),k=t.current.filter(function(F){return F.name===$.type&&F.target===$.target&&cQ(F.delta,O)})[0];if(k&&k.should){$.cancelable&&$.preventDefault();return}if(!k){var R=(l.current.shards||[]).map(PR).filter(Boolean).filter(function(F){return F.contains($.target)}),j=R.length>0?a($,R[0]):!l.current.noIsolation;j&&$.cancelable&&$.preventDefault()}}},[]),d=D.useCallback(function(P,$,O,k){var R={name:P,delta:$,target:O,should:k};t.current.push(R),setTimeout(function(){t.current=t.current.filter(function(j){return j!==R})},1)},[]),g=D.useCallback(function(P){n.current=Zb(P),r.current=void 0},[]),v=D.useCallback(function(P){d(P.type,TR(P),P.target,a(P,e.lockRef.current))},[]),b=D.useCallback(function(P){d(P.type,Zb(P),P.target,a(P,e.lockRef.current))},[]);D.useEffect(function(){return zm.push(o),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:b}),document.addEventListener("wheel",h,Rm),document.addEventListener("touchmove",h,Rm),document.addEventListener("touchstart",g,Rm),function(){zm=zm.filter(function(P){return P!==o}),document.removeEventListener("wheel",h,Rm),document.removeEventListener("touchmove",h,Rm),document.removeEventListener("touchstart",g,Rm)}},[]);var I=e.removeScrollBar,T=e.inert;return D.createElement(D.Fragment,null,T?D.createElement(o,{styles:fQ(i)}):null,I?D.createElement(vj,{gapMode:"margin"}):null)}const pQ=gj(yj,dQ);var wj=D.forwardRef(function(e,t){return D.createElement(c2,_r({},e,{ref:t,sideCar:pQ}))});wj.classNames=c2.classNames;const f2=wj,fA=["Enter"," "],mQ=["ArrowDown","PageUp","Home"],Sj=["ArrowUp","PageDown","End"],gQ=[...mQ,...Sj],yQ={ltr:[...fA,"ArrowRight"],rtl:[...fA,"ArrowLeft"]},vQ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},h2="Menu",[A0,_Q,xQ]=c$(h2),[Rp,Ej]=$f(h2,[xQ,Ny,r2]),I$=Ny(),Cj=r2(),[bQ,zp]=Rp(h2),[wQ,Hx]=Rp(h2),SQ=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:o,modal:l=!0}=e,a=I$(t),[h,d]=D.useState(null),g=D.useRef(!1),v=Tu(o),b=n2(i);return D.useEffect(()=>{const I=()=>{g.current=!0,document.addEventListener("pointerdown",T,{capture:!0,once:!0}),document.addEventListener("pointermove",T,{capture:!0,once:!0})},T=()=>g.current=!1;return document.addEventListener("keydown",I,{capture:!0}),()=>{document.removeEventListener("keydown",I,{capture:!0}),document.removeEventListener("pointerdown",T,{capture:!0}),document.removeEventListener("pointermove",T,{capture:!0})}},[]),D.createElement(b$,a,D.createElement(bQ,{scope:t,open:n,onOpenChange:v,content:h,onContentChange:d},D.createElement(wQ,{scope:t,onClose:D.useCallback(()=>v(!1),[v]),isUsingKeyboardRef:g,dir:b,modal:l},r)))},Ij=D.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=I$(n);return D.createElement(w$,lt({},i,r,{ref:t}))}),Tj="MenuPortal",[EQ,Pj]=Rp(Tj,{forceMount:void 0}),CQ=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,o=zp(Tj,t);return D.createElement(EQ,{scope:t,forceMount:n},D.createElement(Ru,{present:n||o.open},D.createElement(u2,{asChild:!0,container:i},r)))},bu="MenuContent",[IQ,T$]=Rp(bu),TQ=D.forwardRef((e,t)=>{const n=Pj(bu,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=zp(bu,e.__scopeMenu),l=Hx(bu,e.__scopeMenu);return D.createElement(A0.Provider,{scope:e.__scopeMenu},D.createElement(Ru,{present:r||o.open},D.createElement(A0.Slot,{scope:e.__scopeMenu},l.modal?D.createElement(PQ,lt({},i,{ref:t})):D.createElement(AQ,lt({},i,{ref:t})))))}),PQ=D.forwardRef((e,t)=>{const n=zp(bu,e.__scopeMenu),r=D.useRef(null),i=Cr(t,r);return D.useEffect(()=>{const o=r.current;if(o)return Wx(o)},[]),D.createElement(P$,lt({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Zt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),AQ=D.forwardRef((e,t)=>{const n=zp(bu,e.__scopeMenu);return D.createElement(P$,lt({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),P$=D.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:a,onEntryFocus:h,onEscapeKeyDown:d,onPointerDownOutside:g,onFocusOutside:v,onInteractOutside:b,onDismiss:I,disableOutsideScroll:T,...P}=e,$=zp(bu,n),O=Hx(bu,n),k=I$(n),R=Cj(n),j=_Q(n),[F,U]=D.useState(null),G=D.useRef(null),Z=Cr(t,G,$.onContentChange),ne=D.useRef(0),oe=D.useRef(""),ye=D.useRef(0),fe=D.useRef(null),$e=D.useRef("right"),ae=D.useRef(0),be=T?f2:D.Fragment,Te=T?{as:cf,allowPinchZoom:!0}:void 0,Le=de=>{var De,He;const je=oe.current+de,et=j().filter(Qe=>!Qe.disabled),Et=document.activeElement,zt=(De=et.find(Qe=>Qe.ref.current===Et))===null||De===void 0?void 0:De.textValue,Yt=et.map(Qe=>Qe.textValue),St=qQ(Yt,je,zt),Vt=(He=et.find(Qe=>Qe.textValue===St))===null||He===void 0?void 0:He.ref.current;(function Qe(dt){oe.current=dt,window.clearTimeout(ne.current),dt!==""&&(ne.current=window.setTimeout(()=>Qe(""),1e3))})(je),Vt&&setTimeout(()=>Vt.focus())};D.useEffect(()=>()=>window.clearTimeout(ne.current),[]),o2();const Ee=D.useCallback(de=>{var De,He;return $e.current===((De=fe.current)===null||De===void 0?void 0:De.side)&&HQ(de,(He=fe.current)===null||He===void 0?void 0:He.area)},[]);return D.createElement(IQ,{scope:n,searchRef:oe,onItemEnter:D.useCallback(de=>{Ee(de)&&de.preventDefault()},[Ee]),onItemLeave:D.useCallback(de=>{var De;Ee(de)||((De=G.current)===null||De===void 0||De.focus(),U(null))},[Ee]),onTriggerLeave:D.useCallback(de=>{Ee(de)&&de.preventDefault()},[Ee]),pointerGraceTimerRef:ye,onPointerGraceIntentChange:D.useCallback(de=>{fe.current=de},[])},D.createElement(be,Te,D.createElement(a2,{asChild:!0,trapped:i,onMountAutoFocus:Zt(o,de=>{var De;de.preventDefault(),(De=G.current)===null||De===void 0||De.focus()}),onUnmountAutoFocus:l},D.createElement(i2,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:d,onPointerDownOutside:g,onFocusOutside:v,onInteractOutside:b,onDismiss:I},D.createElement(AK,lt({asChild:!0},R,{dir:O.dir,orientation:"vertical",loop:r,currentTabStopId:F,onCurrentTabStopIdChange:U,onEntryFocus:Zt(h,de=>{O.isUsingKeyboardRef.current||de.preventDefault()})}),D.createElement(S$,lt({role:"menu","aria-orientation":"vertical","data-state":kj($.open),"data-radix-menu-content":"",dir:O.dir},k,P,{ref:Z,style:{outline:"none",...P.style},onKeyDown:Zt(P.onKeyDown,de=>{const He=de.target.closest("[data-radix-menu-content]")===de.currentTarget,je=de.ctrlKey||de.altKey||de.metaKey,et=de.key.length===1;He&&(de.key==="Tab"&&de.preventDefault(),!je&&et&&Le(de.key));const Et=G.current;if(de.target!==Et||!gQ.includes(de.key))return;de.preventDefault();const Yt=j().filter(St=>!St.disabled).map(St=>St.ref.current);Sj.includes(de.key)&&Yt.reverse(),VQ(Yt)}),onBlur:Zt(e.onBlur,de=>{de.currentTarget.contains(de.target)||(window.clearTimeout(ne.current),oe.current="")}),onPointerMove:Zt(e.onPointerMove,O0(de=>{const De=de.target,He=ae.current!==de.clientX;if(de.currentTarget.contains(De)&&He){const je=de.clientX>ae.current?"right":"left";$e.current=je,ae.current=de.clientX}}))})))))))}),OQ=D.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return D.createElement(Qn.div,lt({},r,{ref:t}))}),hA="MenuItem",AR="menu.itemSelect",A$=D.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,o=D.useRef(null),l=Hx(hA,e.__scopeMenu),a=T$(hA,e.__scopeMenu),h=Cr(t,o),d=D.useRef(!1),g=()=>{const v=o.current;if(!n&&v){const b=new CustomEvent(AR,{bubbles:!0,cancelable:!0});v.addEventListener(AR,I=>r==null?void 0:r(I),{once:!0}),D8(v,b),b.defaultPrevented?d.current=!1:l.onClose()}};return D.createElement(Aj,lt({},i,{ref:h,disabled:n,onClick:Zt(e.onClick,g),onPointerDown:v=>{var b;(b=e.onPointerDown)===null||b===void 0||b.call(e,v),d.current=!0},onPointerUp:Zt(e.onPointerUp,v=>{var b;d.current||(b=v.currentTarget)===null||b===void 0||b.click()}),onKeyDown:Zt(e.onKeyDown,v=>{const b=a.searchRef.current!=="";n||b&&v.key===" "||fA.includes(v.key)&&(v.currentTarget.click(),v.preventDefault())})}))}),Aj=D.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=e,l=T$(hA,n),a=Cj(n),h=D.useRef(null),d=Cr(t,h),[g,v]=D.useState(!1),[b,I]=D.useState("");return D.useEffect(()=>{const T=h.current;if(T){var P;I(((P=T.textContent)!==null&&P!==void 0?P:"").trim())}},[o.children]),D.createElement(A0.ItemSlot,{scope:n,disabled:r,textValue:i??b},D.createElement(OK,lt({asChild:!0},a,{focusable:!r}),D.createElement(Qn.div,lt({role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},o,{ref:d,onPointerMove:Zt(e.onPointerMove,O0(T=>{r?l.onItemLeave(T):(l.onItemEnter(T),T.defaultPrevented||T.currentTarget.focus())})),onPointerLeave:Zt(e.onPointerLeave,O0(T=>l.onItemLeave(T))),onFocus:Zt(e.onFocus,()=>v(!0)),onBlur:Zt(e.onBlur,()=>v(!1))}))))}),MQ=D.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return D.createElement(Mj,{scope:e.__scopeMenu,checked:n},D.createElement(A$,lt({role:"menuitemcheckbox","aria-checked":ES(n)?"mixed":n},i,{ref:t,"data-state":O$(n),onSelect:Zt(i.onSelect,()=>r==null?void 0:r(ES(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),$Q="MenuRadioGroup",[$$e,kQ]=Rp($Q,{value:void 0,onValueChange:()=>{}}),NQ="MenuRadioItem",LQ=D.forwardRef((e,t)=>{const{value:n,...r}=e,i=kQ(NQ,e.__scopeMenu),o=n===i.value;return D.createElement(Mj,{scope:e.__scopeMenu,checked:o},D.createElement(A$,lt({role:"menuitemradio","aria-checked":o},r,{ref:t,"data-state":O$(o),onSelect:Zt(r.onSelect,()=>{var l;return(l=i.onValueChange)===null||l===void 0?void 0:l.call(i,n)},{checkForDefaultPrevented:!1})})))}),Oj="MenuItemIndicator",[Mj,DQ]=Rp(Oj,{checked:!1}),RQ=D.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,o=DQ(Oj,n);return D.createElement(Ru,{present:r||ES(o.checked)||o.checked===!0},D.createElement(Qn.span,lt({},i,{ref:t,"data-state":O$(o.checked)})))}),zQ=D.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return D.createElement(Qn.div,lt({role:"separator","aria-orientation":"horizontal"},r,{ref:t}))}),FQ="MenuSub",[k$e,$j]=Rp(FQ),Kb="MenuSubTrigger",BQ=D.forwardRef((e,t)=>{const n=zp(Kb,e.__scopeMenu),r=Hx(Kb,e.__scopeMenu),i=$j(Kb,e.__scopeMenu),o=T$(Kb,e.__scopeMenu),l=D.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:h}=o,d={__scopeMenu:e.__scopeMenu},g=D.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return D.useEffect(()=>g,[g]),D.useEffect(()=>{const v=a.current;return()=>{window.clearTimeout(v),h(null)}},[a,h]),D.createElement(Ij,lt({asChild:!0},d),D.createElement(Aj,lt({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":kj(n.open)},e,{ref:t2(t,i.onTriggerChange),onClick:v=>{var b;(b=e.onClick)===null||b===void 0||b.call(e,v),!(e.disabled||v.defaultPrevented)&&(v.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Zt(e.onPointerMove,O0(v=>{o.onItemEnter(v),!v.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),g()},100))})),onPointerLeave:Zt(e.onPointerLeave,O0(v=>{var b;g();const I=(b=n.content)===null||b===void 0?void 0:b.getBoundingClientRect();if(I){var T;const P=(T=n.content)===null||T===void 0?void 0:T.dataset.side,$=P==="right",O=$?-5:5,k=I[$?"left":"right"],R=I[$?"right":"left"];o.onPointerGraceIntentChange({area:[{x:v.clientX+O,y:v.clientY},{x:k,y:I.top},{x:R,y:I.top},{x:R,y:I.bottom},{x:k,y:I.bottom}],side:P}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(v),v.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Zt(e.onKeyDown,v=>{const b=o.searchRef.current!=="";if(!(e.disabled||b&&v.key===" ")&&yQ[r.dir].includes(v.key)){var I;n.onOpenChange(!0),(I=n.content)===null||I===void 0||I.focus(),v.preventDefault()}})})))}),jQ="MenuSubContent",UQ=D.forwardRef((e,t)=>{const n=Pj(bu,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=zp(bu,e.__scopeMenu),l=Hx(bu,e.__scopeMenu),a=$j(jQ,e.__scopeMenu),h=D.useRef(null),d=Cr(t,h);return D.createElement(A0.Provider,{scope:e.__scopeMenu},D.createElement(Ru,{present:r||o.open},D.createElement(A0.Slot,{scope:e.__scopeMenu},D.createElement(P$,lt({id:a.contentId,"aria-labelledby":a.triggerId},i,{ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{var v;l.isUsingKeyboardRef.current&&((v=h.current)===null||v===void 0||v.focus()),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:Zt(e.onFocusOutside,g=>{g.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Zt(e.onEscapeKeyDown,g=>{l.onClose(),g.preventDefault()}),onKeyDown:Zt(e.onKeyDown,g=>{const v=g.currentTarget.contains(g.target),b=vQ[l.dir].includes(g.key);if(v&&b){var I;o.onOpenChange(!1),(I=a.trigger)===null||I===void 0||I.focus(),g.preventDefault()}})})))))});function kj(e){return e?"open":"closed"}function ES(e){return e==="indeterminate"}function O$(e){return ES(e)?"indeterminate":e?"checked":"unchecked"}function VQ(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function GQ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function qQ(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let l=GQ(e,Math.max(o,0));i.length===1&&(l=l.filter(d=>d!==n));const h=l.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return h!==n?h:void 0}function WQ(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,l=t.length-1;o<t.length;l=o++){const a=t[o].x,h=t[o].y,d=t[l].x,g=t[l].y;h>r!=g>r&&n<(d-a)*(r-h)/(g-h)+a&&(i=!i)}return i}function HQ(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return WQ(n,t)}function O0(e){return t=>t.pointerType==="mouse"?e(t):void 0}const XQ=SQ,ZQ=Ij,KQ=CQ,YQ=TQ,JQ=OQ,QQ=A$,eee=MQ,tee=LQ,nee=RQ,ree=zQ,iee=BQ,oee=UQ,Nj="DropdownMenu",[aee,N$e]=$f(Nj,[Ej]),jl=Ej(),[see,Lj]=aee(Nj),lee=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:l,modal:a=!0}=e,h=jl(t),d=D.useRef(null),[g=!1,v]=Mg({prop:i,defaultProp:o,onChange:l});return D.createElement(see,{scope:t,triggerId:Bh(),triggerRef:d,contentId:Bh(),open:g,onOpenChange:v,onOpenToggle:D.useCallback(()=>v(b=>!b),[v]),modal:a},D.createElement(XQ,lt({},h,{open:g,onOpenChange:v,dir:r,modal:a}),n))},uee="DropdownMenuTrigger",cee=D.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,o=Lj(uee,n),l=jl(n);return D.createElement(ZQ,lt({asChild:!0},l),D.createElement(Qn.button,lt({type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},i,{ref:t2(t,o.triggerRef),onPointerDown:Zt(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:Zt(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})))}),fee=e=>{const{__scopeDropdownMenu:t,...n}=e,r=jl(t);return D.createElement(KQ,lt({},r,n))},hee="DropdownMenuContent",dee=D.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Lj(hee,n),o=jl(n),l=D.useRef(!1);return D.createElement(YQ,lt({id:i.contentId,"aria-labelledby":i.triggerId},o,r,{ref:t,onCloseAutoFocus:Zt(e.onCloseAutoFocus,a=>{var h;l.current||(h=i.triggerRef.current)===null||h===void 0||h.focus(),l.current=!1,a.preventDefault()}),onInteractOutside:Zt(e.onInteractOutside,a=>{const h=a.detail.originalEvent,d=h.button===0&&h.ctrlKey===!0,g=h.button===2||d;(!i.modal||g)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),pee=D.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=jl(n);return D.createElement(JQ,lt({},i,r,{ref:t}))}),mee=D.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=jl(n);return D.createElement(QQ,lt({},i,r,{ref:t}))}),gee=D.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=jl(n);return D.createElement(eee,lt({},i,r,{ref:t}))}),yee=D.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=jl(n);return D.createElement(tee,lt({},i,r,{ref:t}))}),vee=D.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=jl(n);return D.createElement(nee,lt({},i,r,{ref:t}))}),_ee=D.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=jl(n);return D.createElement(ree,lt({},i,r,{ref:t}))}),xee=D.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=jl(n);return D.createElement(iee,lt({},i,r,{ref:t}))}),bee=D.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=jl(n);return D.createElement(oee,lt({},i,r,{ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),wee=lee,See=cee,Eee=fee,Dj=dee,Rj=pee,zj=mee,Fj=gee,Bj=yee,jj=vee,Uj=_ee,Vj=xee,Gj=bee,Cee=wee,Iee=See,Tee=D.forwardRef(({className:e,inset:t,children:n,...r},i)=>Pe.jsxs(Vj,{ref:i,className:Vn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,Pe.jsx(SY,{className:"ml-auto h-4 w-4"})]}));Tee.displayName=Vj.displayName;const Pee=D.forwardRef(({className:e,...t},n)=>Pe.jsx(Gj,{ref:n,className:Vn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Pee.displayName=Gj.displayName;const qj=D.forwardRef(({className:e,sideOffset:t=4,...n},r)=>Pe.jsx(Eee,{children:Pe.jsx(Dj,{ref:r,sideOffset:t,className:Vn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));qj.displayName=Dj.displayName;const Dw=D.forwardRef(({className:e,inset:t,...n},r)=>Pe.jsx(zj,{ref:r,className:Vn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Dw.displayName=zj.displayName;const Aee=D.forwardRef(({className:e,children:t,checked:n,...r},i)=>Pe.jsxs(Fj,{ref:i,className:Vn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[Pe.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Pe.jsx(jj,{children:Pe.jsx(d$,{className:"h-4 w-4"})})}),t]}));Aee.displayName=Fj.displayName;const Oee=D.forwardRef(({className:e,children:t,...n},r)=>Pe.jsxs(Bj,{ref:r,className:Vn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[Pe.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Pe.jsx(jj,{children:Pe.jsx(IY,{className:"h-2 w-2 fill-current"})})}),t]}));Oee.displayName=Bj.displayName;const Mee=D.forwardRef(({className:e,inset:t,...n},r)=>Pe.jsx(Rj,{ref:r,className:Vn("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Mee.displayName=Rj.displayName;const $ee=D.forwardRef(({className:e,...t},n)=>Pe.jsx(Uj,{ref:n,className:Vn("-mx-1 my-1 h-px bg-muted",e),...t}));$ee.displayName=Uj.displayName;function kee(){const{setTheme:e}=X8();return Pe.jsxs(Cee,{children:[Pe.jsx(Iee,{asChild:!0,children:Pe.jsxs(p$,{variant:"outline",size:"icon",children:[Pe.jsx(AY,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),Pe.jsx(TY,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),Pe.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),Pe.jsxs(qj,{align:"end",children:[Pe.jsx(Dw,{onClick:()=>e("light"),children:"Light"}),Pe.jsx(Dw,{onClick:()=>e("dark"),children:"Dark"}),Pe.jsx(Dw,{onClick:()=>e("system"),children:"System"})]})]})}function _g(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Nee(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Wj(...e){return t=>e.forEach(n=>Nee(n,t))}function Xx(...e){return D.useCallback(Wj(...e),e)}function Lee(e,t=[]){let n=[];function r(o,l){const a=D.createContext(l),h=n.length;n=[...n,l];function d(v){const{scope:b,children:I,...T}=v,P=(b==null?void 0:b[e][h])||a,$=D.useMemo(()=>T,Object.values(T));return D.createElement(P.Provider,{value:$},I)}function g(v,b){const I=(b==null?void 0:b[e][h])||a,T=D.useContext(I);if(T)return T;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,g]}const i=()=>{const o=n.map(l=>D.createContext(l));return function(a){const h=(a==null?void 0:a[e])||o;return D.useMemo(()=>({[`__scope${e}`]:{...a,[e]:h}}),[a,h])}};return i.scopeName=e,[r,Dee(i,...t)]}function Dee(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const l=r.reduce((a,{useScope:h,scopeName:d})=>{const v=h(o)[`__scope${d}`];return{...a,...v}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}const dA=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},Ree=Zw.useId||(()=>{});let zee=0;function dT(e){const[t,n]=D.useState(Ree());return dA(()=>{e||n(r=>r??String(zee++))},[e]),e||(t?`radix-${t}`:"")}function _p(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function Fee({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=Bee({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:r,a=_p(n),h=D.useCallback(d=>{if(o){const v=typeof d=="function"?d(e):d;v!==e&&a(v)}else i(d)},[o,e,i,a]);return[l,h]}function Bee({defaultProp:e,onChange:t}){const n=D.useState(e),[r]=n,i=D.useRef(r),o=_p(t);return D.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}const M$=D.forwardRef((e,t)=>{const{children:n,...r}=e,i=D.Children.toArray(n),o=i.find(Uee);if(o){const l=o.props.children,a=i.map(h=>h===o?D.Children.count(l)>1?D.Children.only(null):D.isValidElement(l)?l.props.children:null:h);return D.createElement(pA,lt({},r,{ref:t}),D.isValidElement(l)?D.cloneElement(l,void 0,a):null)}return D.createElement(pA,lt({},r,{ref:t}),n)});M$.displayName="Slot";const pA=D.forwardRef((e,t)=>{const{children:n,...r}=e;return D.isValidElement(n)?D.cloneElement(n,{...Vee(r,n.props),ref:Wj(t,n.ref)}):D.Children.count(n)>1?D.Children.only(null):null});pA.displayName="SlotClone";const jee=({children:e})=>D.createElement(D.Fragment,null,e);function Uee(e){return D.isValidElement(e)&&e.type===jee}function Vee(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{o==null||o(...a),i==null||i(...a)}:r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}const Gee=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],d2=Gee.reduce((e,t)=>{const n=D.forwardRef((r,i)=>{const{asChild:o,...l}=r,a=o?M$:t;return D.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),D.createElement(a,lt({},l,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function qee(e,t){e&&Mf.flushSync(()=>e.dispatchEvent(t))}function Wee(e){const t=_p(e);D.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[t])}const mA="dismissableLayer.update",Hee="dismissableLayer.pointerDownOutside",Xee="dismissableLayer.focusOutside";let OR;const Zee=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Kee=D.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:a,...h}=e,d=D.useContext(Zee),[g,v]=D.useState(null),[,b]=D.useState({}),I=Xx(t,U=>v(U)),T=Array.from(d.layers),[P]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),$=T.indexOf(P),O=g?T.indexOf(g):-1,k=d.layersWithOutsidePointerEventsDisabled.size>0,R=O>=$,j=Yee(U=>{const G=U.target,Z=[...d.branches].some(ne=>ne.contains(G));!R||Z||(i==null||i(U),l==null||l(U),U.defaultPrevented||a==null||a())}),F=Jee(U=>{const G=U.target;[...d.branches].some(ne=>ne.contains(G))||(o==null||o(U),l==null||l(U),U.defaultPrevented||a==null||a())});return Wee(U=>{O===d.layers.size-1&&(r==null||r(U),!U.defaultPrevented&&a&&(U.preventDefault(),a()))}),D.useEffect(()=>{if(g)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(OR=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(g)),d.layers.add(g),MR(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=OR)}},[g,n,d]),D.useEffect(()=>()=>{g&&(d.layers.delete(g),d.layersWithOutsidePointerEventsDisabled.delete(g),MR())},[g,d]),D.useEffect(()=>{const U=()=>b({});return document.addEventListener(mA,U),()=>document.removeEventListener(mA,U)},[]),D.createElement(d2.div,lt({},h,{ref:I,style:{pointerEvents:k?R?"auto":"none":void 0,...e.style},onFocusCapture:_g(e.onFocusCapture,F.onFocusCapture),onBlurCapture:_g(e.onBlurCapture,F.onBlurCapture),onPointerDownCapture:_g(e.onPointerDownCapture,j.onPointerDownCapture)}))});function Yee(e){const t=_p(e),n=D.useRef(!1),r=D.useRef(()=>{});return D.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let d=function(){Hj(Hee,t,h,{discrete:!0})};var a=d;const h={originalEvent:l};l.pointerType==="touch"?(document.removeEventListener("click",r.current),r.current=d,document.addEventListener("click",r.current,{once:!0})):d()}n.current=!1},o=window.setTimeout(()=>{document.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),document.removeEventListener("pointerdown",i),document.removeEventListener("click",r.current)}},[t]),{onPointerDownCapture:()=>n.current=!0}}function Jee(e){const t=_p(e),n=D.useRef(!1);return D.useEffect(()=>{const r=i=>{i.target&&!n.current&&Hj(Xee,t,{originalEvent:i},{discrete:!1})};return document.addEventListener("focusin",r),()=>document.removeEventListener("focusin",r)},[t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function MR(){const e=new CustomEvent(mA);document.dispatchEvent(e)}function Hj(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?qee(i,o):i.dispatchEvent(o)}const pT="focusScope.autoFocusOnMount",mT="focusScope.autoFocusOnUnmount",$R={bubbles:!1,cancelable:!0},Qee=D.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...l}=e,[a,h]=D.useState(null),d=_p(i),g=_p(o),v=D.useRef(null),b=Xx(t,P=>h(P)),I=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(r){let O=function(R){if(I.paused||!a)return;const j=R.target;a.contains(j)?v.current=j:qd(v.current,{select:!0})},k=function(R){I.paused||!a||a.contains(R.relatedTarget)||qd(v.current,{select:!0})};var P=O,$=k;return document.addEventListener("focusin",O),document.addEventListener("focusout",k),()=>{document.removeEventListener("focusin",O),document.removeEventListener("focusout",k)}}},[r,a,I.paused]),D.useEffect(()=>{if(a){NR.add(I);const P=document.activeElement;if(!a.contains(P)){const O=new CustomEvent(pT,$R);a.addEventListener(pT,d),a.dispatchEvent(O),O.defaultPrevented||(ete(ote(Xj(a)),{select:!0}),document.activeElement===P&&qd(a))}return()=>{a.removeEventListener(pT,d),setTimeout(()=>{const O=new CustomEvent(mT,$R);a.addEventListener(mT,g),a.dispatchEvent(O),O.defaultPrevented||qd(P??document.body,{select:!0}),a.removeEventListener(mT,g),NR.remove(I)},0)}}},[a,d,g,I]);const T=D.useCallback(P=>{if(!n&&!r||I.paused)return;const $=P.key==="Tab"&&!P.altKey&&!P.ctrlKey&&!P.metaKey,O=document.activeElement;if($&&O){const k=P.currentTarget,[R,j]=tte(k);R&&j?!P.shiftKey&&O===j?(P.preventDefault(),n&&qd(R,{select:!0})):P.shiftKey&&O===R&&(P.preventDefault(),n&&qd(j,{select:!0})):O===k&&P.preventDefault()}},[n,r,I.paused]);return D.createElement(d2.div,lt({tabIndex:-1},l,{ref:b,onKeyDown:T}))});function ete(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(qd(r,{select:t}),document.activeElement!==n)return}function tte(e){const t=Xj(e),n=kR(t,e),r=kR(t.reverse(),e);return[n,r]}function Xj(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function kR(e,t){for(const n of e)if(!nte(n,{upTo:t}))return n}function nte(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function rte(e){return e instanceof HTMLInputElement&&"select"in e}function qd(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&rte(e)&&t&&e.select()}}const NR=ite();function ite(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=LR(e,t),e.unshift(t)},remove(t){var n;e=LR(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function LR(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function ote(e){return e.filter(t=>t.tagName!=="A")}const ate=D.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=e;return r?L8.createPortal(D.createElement(d2.div,lt({},i,{ref:t})),r):null});function ste(e,t){return D.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const p2=e=>{const{present:t,children:n}=e,r=lte(t),i=typeof n=="function"?n({present:r.isPresent}):D.Children.only(n),o=Xx(r.ref,i.ref);return typeof n=="function"||r.isPresent?D.cloneElement(i,{ref:o}):null};p2.displayName="Presence";function lte(e){const[t,n]=D.useState(),r=D.useRef({}),i=D.useRef(e),o=D.useRef("none"),l=e?"mounted":"unmounted",[a,h]=ste(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const d=Yb(r.current);o.current=a==="mounted"?d:"none"},[a]),dA(()=>{const d=r.current,g=i.current;if(g!==e){const b=o.current,I=Yb(d);e?h("MOUNT"):I==="none"||(d==null?void 0:d.display)==="none"?h("UNMOUNT"):h(g&&b!==I?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,h]),dA(()=>{if(t){const d=v=>{const I=Yb(r.current).includes(v.animationName);v.target===t&&I&&Mf.flushSync(()=>h("ANIMATION_END"))},g=v=>{v.target===t&&(o.current=Yb(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else h("ANIMATION_END")},[t,h]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:D.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Yb(e){return(e==null?void 0:e.animationName)||"none"}let gT=0;function ute(){D.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:DR()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:DR()),gT++,()=>{gT===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),gT--}},[])}function DR(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var Zj=pj(),yT=function(){},m2=D.forwardRef(function(e,t){var n=D.useRef(null),r=D.useState({onScrollCapture:yT,onWheelCapture:yT,onTouchMoveCapture:yT}),i=r[0],o=r[1],l=e.forwardProps,a=e.children,h=e.className,d=e.removeScrollBar,g=e.enabled,v=e.shards,b=e.sideCar,I=e.noIsolation,T=e.inert,P=e.allowPinchZoom,$=e.as,O=$===void 0?"div":$,k=E$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),R=b,j=dj([n,t]),F=_r(_r({},k),i);return D.createElement(D.Fragment,null,g&&D.createElement(R,{sideCar:Zj,removeScrollBar:d,shards:v,noIsolation:I,inert:T,setCallbacks:o,allowPinchZoom:!!P,lockRef:n}),l?D.cloneElement(D.Children.only(a),_r(_r({},F),{ref:j})):D.createElement(O,_r({},F,{className:h,ref:j}),a))});m2.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};m2.classNames={fullWidth:Q_,zeroRight:J_};var gA=!1;if(typeof window<"u")try{var Jb=Object.defineProperty({},"passive",{get:function(){return gA=!0,!0}});window.addEventListener("test",Jb,Jb),window.removeEventListener("test",Jb,Jb)}catch{gA=!1}var Fm=gA?{passive:!1}:!1,cte=function(e){var t=window.getComputedStyle(e);return t.overflowY!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowY==="visible")},fte=function(e){var t=window.getComputedStyle(e);return t.overflowX!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowX==="visible")},RR=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=Kj(e,n);if(r){var i=Yj(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},hte=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},dte=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Kj=function(e,t){return e==="v"?cte(t):fte(t)},Yj=function(e,t){return e==="v"?hte(t):dte(t)},pte=function(e,t){return e==="h"&&t==="rtl"?-1:1},mte=function(e,t,n,r,i){var o=pte(e,window.getComputedStyle(t).direction),l=o*r,a=n.target,h=t.contains(a),d=!1,g=l>0,v=0,b=0;do{var I=Yj(e,a),T=I[0],P=I[1],$=I[2],O=P-$-o*T;(T||O)&&Kj(e,a)&&(v+=O,b+=T),a=a.parentNode}while(!h&&a!==document.body||h&&(t.contains(a)||t===a));return(g&&(i&&v===0||!i&&l>v)||!g&&(i&&b===0||!i&&-l>b))&&(d=!0),d},Qb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},zR=function(e){return[e.deltaX,e.deltaY]},FR=function(e){return e&&"current"in e?e.current:e},gte=function(e,t){return e[0]===t[0]&&e[1]===t[1]},yte=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vte=0,Bm=[];function _te(e){var t=D.useRef([]),n=D.useRef([0,0]),r=D.useRef(),i=D.useState(vte++)[0],o=D.useState(function(){return C$()})[0],l=D.useRef(e);D.useEffect(function(){l.current=e},[e]),D.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var P=kg([e.lockRef.current],(e.shards||[]).map(FR),!0).filter(Boolean);return P.forEach(function($){return $.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),P.forEach(function($){return $.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=D.useCallback(function(P,$){if("touches"in P&&P.touches.length===2)return!l.current.allowPinchZoom;var O=Qb(P),k=n.current,R="deltaX"in P?P.deltaX:k[0]-O[0],j="deltaY"in P?P.deltaY:k[1]-O[1],F,U=P.target,G=Math.abs(R)>Math.abs(j)?"h":"v";if("touches"in P&&G==="h"&&U.type==="range")return!1;var Z=RR(G,U);if(!Z)return!0;if(Z?F=G:(F=G==="v"?"h":"v",Z=RR(G,U)),!Z)return!1;if(!r.current&&"changedTouches"in P&&(R||j)&&(r.current=F),!F)return!0;var ne=r.current||F;return mte(ne,$,P,ne==="h"?R:j,!0)},[]),h=D.useCallback(function(P){var $=P;if(!(!Bm.length||Bm[Bm.length-1]!==o)){var O="deltaY"in $?zR($):Qb($),k=t.current.filter(function(F){return F.name===$.type&&F.target===$.target&&gte(F.delta,O)})[0];if(k&&k.should){$.preventDefault();return}if(!k){var R=(l.current.shards||[]).map(FR).filter(Boolean).filter(function(F){return F.contains($.target)}),j=R.length>0?a($,R[0]):!l.current.noIsolation;j&&$.preventDefault()}}},[]),d=D.useCallback(function(P,$,O,k){var R={name:P,delta:$,target:O,should:k};t.current.push(R),setTimeout(function(){t.current=t.current.filter(function(j){return j!==R})},1)},[]),g=D.useCallback(function(P){n.current=Qb(P),r.current=void 0},[]),v=D.useCallback(function(P){d(P.type,zR(P),P.target,a(P,e.lockRef.current))},[]),b=D.useCallback(function(P){d(P.type,Qb(P),P.target,a(P,e.lockRef.current))},[]);D.useEffect(function(){return Bm.push(o),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:b}),document.addEventListener("wheel",h,Fm),document.addEventListener("touchmove",h,Fm),document.addEventListener("touchstart",g,Fm),function(){Bm=Bm.filter(function(P){return P!==o}),document.removeEventListener("wheel",h,Fm),document.removeEventListener("touchmove",h,Fm),document.removeEventListener("touchstart",g,Fm)}},[]);var I=e.removeScrollBar,T=e.inert;return D.createElement(D.Fragment,null,T?D.createElement(o,{styles:yte(i)}):null,I?D.createElement(vj,{gapMode:"margin"}):null)}const xte=gj(Zj,_te);var Jj=D.forwardRef(function(e,t){return D.createElement(m2,_r({},e,{ref:t,sideCar:xte}))});Jj.classNames=m2.classNames;const bte=Jj,Qj="Dialog",[e7,L$e]=Lee(Qj),[wte,Fp]=e7(Qj),Ste=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,a=D.useRef(null),h=D.useRef(null),[d=!1,g]=Fee({prop:r,defaultProp:i,onChange:o});return D.createElement(wte,{scope:t,triggerRef:a,contentRef:h,contentId:dT(),titleId:dT(),descriptionId:dT(),open:d,onOpenChange:g,onOpenToggle:D.useCallback(()=>g(v=>!v),[g]),modal:l},n)},t7="DialogPortal",[Ete,n7]=e7(t7,{forceMount:void 0}),Cte=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,o=Fp(t7,t);return D.createElement(Ete,{scope:t,forceMount:n},D.Children.map(r,l=>D.createElement(p2,{present:n||o.open},D.createElement(ate,{asChild:!0,container:i},l))))},yA="DialogOverlay",Ite=D.forwardRef((e,t)=>{const n=n7(yA,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=Fp(yA,e.__scopeDialog);return o.modal?D.createElement(p2,{present:r||o.open},D.createElement(Tte,lt({},i,{ref:t}))):null}),Tte=D.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Fp(yA,n);return D.createElement(bte,{as:M$,allowPinchZoom:!0,shards:[i.contentRef]},D.createElement(d2.div,lt({"data-state":i7(i.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),M0="DialogContent",Pte=D.forwardRef((e,t)=>{const n=n7(M0,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=Fp(M0,e.__scopeDialog);return D.createElement(p2,{present:r||o.open},o.modal?D.createElement(Ate,lt({},i,{ref:t})):D.createElement(Ote,lt({},i,{ref:t})))}),Ate=D.forwardRef((e,t)=>{const n=Fp(M0,e.__scopeDialog),r=D.useRef(null),i=Xx(t,n.contentRef,r);return D.useEffect(()=>{const o=r.current;if(o)return Wx(o)},[]),D.createElement(r7,lt({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_g(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=n.triggerRef.current)===null||l===void 0||l.focus()}),onPointerDownOutside:_g(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,a=l.button===0&&l.ctrlKey===!0;(l.button===2||a)&&o.preventDefault()}),onFocusOutside:_g(e.onFocusOutside,o=>o.preventDefault())}))}),Ote=D.forwardRef((e,t)=>{const n=Fp(M0,e.__scopeDialog),r=D.useRef(!1);return D.createElement(r7,lt({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o;if((o=e.onCloseAutoFocus)===null||o===void 0||o.call(e,i),!i.defaultPrevented){var l;r.current||(l=n.triggerRef.current)===null||l===void 0||l.focus(),i.preventDefault()}r.current=!1},onInteractOutside:i=>{var o,l;(o=e.onInteractOutside)===null||o===void 0||o.call(e,i),i.defaultPrevented||(r.current=!0);const a=i.target;((l=n.triggerRef.current)===null||l===void 0?void 0:l.contains(a))&&i.preventDefault()}}))}),r7=D.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...l}=e,a=Fp(M0,n),h=D.useRef(null),d=Xx(t,h);return ute(),D.createElement(D.Fragment,null,D.createElement(Qee,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o},D.createElement(Kee,lt({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":i7(a.open)},l,{ref:d,onDismiss:()=>a.onOpenChange(!1)}))),!1)});function i7(e){return e?"open":"closed"}const Mte=Ste,$te=Cte,kte=Ite,Nte=Pte;var BR=1,Lte=.9,Dte=.3,vT=.1,Rte=0,_T=.999,zte=.9999,Fte=.99,jR=/[\\\/\-_+.# \t"@\[\(\{&]/,Bte=/[\\\/\-_+.# \t"@\[\(\{&]/g;function vA(e,t,n,r,i,o){if(o===t.length)return i===e.length?BR:Fte;for(var l=r.charAt(o),a=n.indexOf(l,i),h=0,d,g,v;a>=0;)d=vA(e,t,n,r,a+1,o+1),d>h&&(a===i?d*=BR:jR.test(e.charAt(a-1))?(d*=Lte,v=e.slice(i,a-1).match(Bte),v&&i>0&&(d*=Math.pow(_T,v.length))):jR.test(e.slice(i,a-1))?(d*=Rte,i>0&&(d*=Math.pow(_T,a-i))):(d*=Dte,i>0&&(d*=Math.pow(_T,a-i))),e.charAt(a)!==t.charAt(o)&&(d*=zte)),d<vT&&n.charAt(a-1)===r.charAt(o+1)&&n.charAt(a-1)!==r.charAt(o)&&(g=vA(e,t,n,r,a+1,o+2),g*vT>d&&(d=g*vT)),d>h&&(h=d),a=n.indexOf(l,a+1);return h}function jte(e,t){return vA(e,t,e.toLowerCase(),t.toLowerCase(),0,0)}var Ute=jte;const Vte=hr(Ute);var Gte='[cmdk-list-sizer=""]',v_='[cmdk-group=""]',xT='[cmdk-group-items=""]',qte='[cmdk-group-heading=""]',o7='[cmdk-item=""]',UR=`${o7}:not([aria-disabled="true"])`,_A="cmdk-item-select",fh="data-value",Wte=(e,t)=>Vte(e,t),a7=D.createContext(void 0),Zx=()=>D.useContext(a7),s7=D.createContext(void 0),$$=()=>D.useContext(s7),l7=D.createContext(void 0),u7=D.forwardRef((e,t)=>{let n=D.useRef(null),r=Wm(()=>({search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}})),i=Wm(()=>new Set),o=Wm(()=>new Map),l=Wm(()=>new Map),a=Wm(()=>new Set),h=c7(e),{label:d,children:g,value:v,onValueChange:b,filter:I,shouldFilter:T,...P}=e,$=D.useId(),O=D.useId(),k=D.useId(),R=rne();Ly(()=>{if(v!==void 0){let de=v.trim().toLowerCase();r.current.value=de,R(6,oe),j.emit()}},[v]);let j=D.useMemo(()=>({subscribe:de=>(a.current.add(de),()=>a.current.delete(de)),snapshot:()=>r.current,setState:(de,De,He)=>{var je,et,Et;if(!Object.is(r.current[de],De)){if(r.current[de]=De,de==="search")ne(),G(),R(1,Z);else if(de==="value")if(((je=h.current)==null?void 0:je.value)!==void 0){(Et=(et=h.current).onValueChange)==null||Et.call(et,De);return}else He||R(5,oe);j.emit()}},emit:()=>{a.current.forEach(de=>de())}}),[]),F=D.useMemo(()=>({value:(de,De)=>{De!==l.current.get(de)&&(l.current.set(de,De),r.current.filtered.items.set(de,U(De)),R(2,()=>{G(),j.emit()}))},item:(de,De)=>(i.current.add(de),De&&(o.current.has(De)?o.current.get(De).add(de):o.current.set(De,new Set([de]))),R(3,()=>{ne(),G(),r.current.value||Z(),j.emit()}),()=>{l.current.delete(de),i.current.delete(de),r.current.filtered.items.delete(de),R(4,()=>{ne(),Z(),j.emit()})}),group:de=>(o.current.has(de)||o.current.set(de,new Set),()=>{l.current.delete(de),o.current.delete(de)}),filter:()=>h.current.shouldFilter,label:d||e["aria-label"],listId:$,inputId:k,labelId:O}),[]);function U(de){var De;let He=((De=h.current)==null?void 0:De.filter)??Wte;return de?He(de,r.current.search):0}function G(){if(!n.current||!r.current.search||h.current.shouldFilter===!1)return;let de=r.current.filtered.items,De=[];r.current.filtered.groups.forEach(je=>{let et=o.current.get(je),Et=0;et.forEach(zt=>{let Yt=de.get(zt);Et=Math.max(Yt,Et)}),De.push([je,Et])});let He=n.current.querySelector(Gte);fe().sort((je,et)=>{let Et=je.getAttribute(fh),zt=et.getAttribute(fh);return(de.get(zt)??0)-(de.get(Et)??0)}).forEach(je=>{let et=je.closest(xT);et?et.appendChild(je.parentElement===et?je:je.closest(`${xT} > *`)):He.appendChild(je.parentElement===He?je:je.closest(`${xT} > *`))}),De.sort((je,et)=>et[1]-je[1]).forEach(je=>{let et=n.current.querySelector(`${v_}[${fh}="${je[0]}"]`);et==null||et.parentElement.appendChild(et)})}function Z(){let de=fe().find(He=>!He.ariaDisabled),De=de==null?void 0:de.getAttribute(fh);j.setState("value",De||void 0)}function ne(){if(!r.current.search||h.current.shouldFilter===!1){r.current.filtered.count=i.current.size;return}r.current.filtered.groups=new Set;let de=0;for(let De of i.current){let He=l.current.get(De),je=U(He);r.current.filtered.items.set(De,je),je>0&&de++}for(let[De,He]of o.current)for(let je of He)if(r.current.filtered.items.get(je)>0){r.current.filtered.groups.add(De);break}r.current.filtered.count=de}function oe(){var de,De,He;let je=ye();je&&(((de=je.parentElement)==null?void 0:de.firstChild)===je&&((He=(De=je.closest(v_))==null?void 0:De.querySelector(qte))==null||He.scrollIntoView({block:"nearest"})),je.scrollIntoView({block:"nearest"}))}function ye(){return n.current.querySelector(`${o7}[aria-selected="true"]`)}function fe(){return Array.from(n.current.querySelectorAll(UR))}function $e(de){let De=fe()[de];De&&j.setState("value",De.getAttribute(fh))}function ae(de){var De;let He=ye(),je=fe(),et=je.findIndex(zt=>zt===He),Et=je[et+de];(De=h.current)!=null&&De.loop&&(Et=et+de<0?je[je.length-1]:et+de===je.length?je[0]:je[et+de]),Et&&j.setState("value",Et.getAttribute(fh))}function be(de){let De=ye(),He=De==null?void 0:De.closest(v_),je;for(;He&&!je;)He=de>0?tne(He,v_):nne(He,v_),je=He==null?void 0:He.querySelector(UR);je?j.setState("value",je.getAttribute(fh)):ae(de)}let Te=()=>$e(fe().length-1),Le=de=>{de.preventDefault(),de.metaKey?Te():de.altKey?be(1):ae(1)},Ee=de=>{de.preventDefault(),de.metaKey?$e(0):de.altKey?be(-1):ae(-1)};return D.createElement("div",{ref:Kx([n,t]),...P,"cmdk-root":"",onKeyDown:de=>{var De;if((De=P.onKeyDown)==null||De.call(P,de),!de.defaultPrevented)switch(de.key){case"n":case"j":{de.ctrlKey&&Le(de);break}case"ArrowDown":{Le(de);break}case"p":case"k":{de.ctrlKey&&Ee(de);break}case"ArrowUp":{Ee(de);break}case"Home":{de.preventDefault(),$e(0);break}case"End":{de.preventDefault(),Te();break}case"Enter":{de.preventDefault();let He=ye();if(He){let je=new Event(_A);He.dispatchEvent(je)}}}}},D.createElement("label",{"cmdk-label":"",htmlFor:F.inputId,id:F.labelId,style:ine},d),D.createElement(s7.Provider,{value:j},D.createElement(a7.Provider,{value:F},g)))}),Hte=D.forwardRef((e,t)=>{let n=D.useId(),r=D.useRef(null),i=D.useContext(l7),o=Zx(),l=c7(e);Ly(()=>o.item(n,i),[]);let a=f7(n,r,[e.value,e.children,r]),h=$$(),d=Ng(O=>O.value&&O.value===a.current),g=Ng(O=>o.filter()===!1?!0:O.search?O.filtered.items.get(n)>0:!0);D.useEffect(()=>{let O=r.current;if(!(!O||e.disabled))return O.addEventListener(_A,v),()=>O.removeEventListener(_A,v)},[g,e.onSelect,e.disabled]);function v(){var O,k;(k=(O=l.current).onSelect)==null||k.call(O,a.current)}function b(){h.setState("value",a.current,!0)}if(!g)return null;let{disabled:I,value:T,onSelect:P,...$}=e;return D.createElement("div",{ref:Kx([r,t]),...$,"cmdk-item":"",role:"option","aria-disabled":I||void 0,"aria-selected":d||void 0,"data-selected":d||void 0,onPointerMove:I?void 0:b,onClick:I?void 0:v},e.children)}),Xte=D.forwardRef((e,t)=>{let{heading:n,children:r,...i}=e,o=D.useId(),l=D.useRef(null),a=D.useRef(null),h=D.useId(),d=Zx(),g=Ng(b=>d.filter()===!1?!0:b.search?b.filtered.groups.has(o):!0);Ly(()=>d.group(o),[]),f7(o,l,[e.value,e.heading,a]);let v=D.createElement(l7.Provider,{value:o},r);return D.createElement("div",{ref:Kx([l,t]),...i,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},n&&D.createElement("div",{ref:a,"cmdk-group-heading":"","aria-hidden":!0,id:h},n),D.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?h:void 0},v))}),Zte=D.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=D.useRef(null),o=Ng(l=>!l.search);return!n&&!o?null:D.createElement("div",{ref:Kx([i,t]),...r,"cmdk-separator":"",role:"separator"})}),Kte=D.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,o=$$(),l=Ng(h=>h.search),a=Zx();return D.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),D.createElement("input",{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":a.listId,"aria-labelledby":a.labelId,id:a.inputId,type:"text",value:i?e.value:l,onChange:h=>{i||o.setState("search",h.target.value),n==null||n(h.target.value)}})}),Yte=D.forwardRef((e,t)=>{let{children:n,...r}=e,i=D.useRef(null),o=D.useRef(null),l=Zx();return D.useEffect(()=>{if(o.current&&i.current){let a=o.current,h=i.current,d,g=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let v=a.getBoundingClientRect().height;h.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return g.observe(a),()=>{cancelAnimationFrame(d),g.unobserve(a)}}},[]),D.createElement("div",{ref:Kx([i,t]),...r,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:l.listId,"aria-labelledby":l.inputId},D.createElement("div",{ref:o,"cmdk-list-sizer":""},n))}),Jte=D.forwardRef((e,t)=>{let{open:n,onOpenChange:r,container:i,...o}=e;return D.createElement(Mte,{open:n,onOpenChange:r},D.createElement($te,{container:i},D.createElement(kte,{"cmdk-overlay":""}),D.createElement(Nte,{"aria-label":e.label,"cmdk-dialog":""},D.createElement(u7,{ref:t,...o}))))}),Qte=D.forwardRef((e,t)=>{let n=D.useRef(!0),r=Ng(i=>i.filtered.count===0);return D.useEffect(()=>{n.current=!1},[]),n.current||!r?null:D.createElement("div",{ref:t,...e,"cmdk-empty":"",role:"presentation"})}),ene=D.forwardRef((e,t)=>{let{progress:n,children:r,...i}=e;return D.createElement("div",{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},D.createElement("div",{"aria-hidden":!0},r))}),hs=Object.assign(u7,{List:Yte,Item:Hte,Input:Kte,Group:Xte,Separator:Zte,Dialog:Jte,Empty:Qte,Loading:ene});function tne(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function nne(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function c7(e){let t=D.useRef(e);return Ly(()=>{t.current=e}),t}var Ly=typeof window>"u"?D.useEffect:D.useLayoutEffect;function Wm(e){let t=D.useRef();return t.current===void 0&&(t.current=e()),t}function Kx(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function Ng(e){let t=$$(),n=()=>e(t.snapshot());return D.useSyncExternalStore(t.subscribe,n,n)}function f7(e,t,n){let r=D.useRef(),i=Zx();return Ly(()=>{var o;let l=(()=>{var a;for(let h of n){if(typeof h=="string")return h.trim().toLowerCase();if(typeof h=="object"&&"current"in h&&h.current)return(a=h.current.textContent)==null?void 0:a.trim().toLowerCase()}})();i.value(e,l),(o=t.current)==null||o.setAttribute(fh,l),r.current=l}),r}var rne=()=>{let[e,t]=D.useState(),n=Wm(()=>new Map);return Ly(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,i)=>{n.current.set(r,i),t({})}},ine={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const h7="Dialog",[d7,D$e]=$f(h7),[R$e,Sc]=d7(h7),p7="DialogPortal",[one,m7]=d7(p7,{forceMount:void 0}),ane=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,o=Sc(p7,t);return D.createElement(one,{scope:t,forceMount:n},D.Children.map(r,l=>D.createElement(Ru,{present:n||o.open},D.createElement(u2,{asChild:!0,container:i},l))))},xA="DialogOverlay",sne=D.forwardRef((e,t)=>{const n=m7(xA,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=Sc(xA,e.__scopeDialog);return o.modal?D.createElement(Ru,{present:r||o.open},D.createElement(lne,lt({},i,{ref:t}))):null}),lne=D.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Sc(xA,n);return D.createElement(f2,{as:cf,allowPinchZoom:!0,shards:[i.contentRef]},D.createElement(Qn.div,lt({"data-state":y7(i.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),$0="DialogContent",une=D.forwardRef((e,t)=>{const n=m7($0,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=Sc($0,e.__scopeDialog);return D.createElement(Ru,{present:r||o.open},o.modal?D.createElement(cne,lt({},i,{ref:t})):D.createElement(fne,lt({},i,{ref:t})))}),cne=D.forwardRef((e,t)=>{const n=Sc($0,e.__scopeDialog),r=D.useRef(null),i=Cr(t,n.contentRef,r);return D.useEffect(()=>{const o=r.current;if(o)return Wx(o)},[]),D.createElement(g7,lt({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Zt(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=n.triggerRef.current)===null||l===void 0||l.focus()}),onPointerDownOutside:Zt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,a=l.button===0&&l.ctrlKey===!0;(l.button===2||a)&&o.preventDefault()}),onFocusOutside:Zt(e.onFocusOutside,o=>o.preventDefault())}))}),fne=D.forwardRef((e,t)=>{const n=Sc($0,e.__scopeDialog),r=D.useRef(!1),i=D.useRef(!1);return D.createElement(g7,lt({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l;if((l=e.onCloseAutoFocus)===null||l===void 0||l.call(e,o),!o.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),o.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:o=>{var l,a;(l=e.onInteractOutside)===null||l===void 0||l.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const h=o.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(h))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}}))}),g7=D.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...l}=e,a=Sc($0,n),h=D.useRef(null),d=Cr(t,h);return o2(),D.createElement(D.Fragment,null,D.createElement(a2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o},D.createElement(i2,lt({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":y7(a.open)},l,{ref:d,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),hne="DialogTitle",dne=D.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Sc(hne,n);return D.createElement(Qn.h2,lt({id:i.titleId},r,{ref:t}))}),pne="DialogDescription",mne=D.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Sc(pne,n);return D.createElement(Qn.p,lt({id:i.descriptionId},r,{ref:t}))}),gne="DialogClose",yne=D.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Sc(gne,n);return D.createElement(Qn.button,lt({type:"button"},r,{ref:t,onClick:Zt(e.onClick,()=>i.onOpenChange(!1))}))});function y7(e){return e?"open":"closed"}const vne=ane,v7=sne,_7=une,x7=dne,b7=mne,_ne=yne,xne=vne,w7=D.forwardRef(({className:e,...t},n)=>Pe.jsx(v7,{ref:n,className:Vn("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));w7.displayName=v7.displayName;const bne=D.forwardRef(({className:e,children:t,...n},r)=>Pe.jsxs(xne,{children:[Pe.jsx(w7,{}),Pe.jsxs(_7,{ref:r,className:Vn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,Pe.jsxs(_ne,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Pe.jsx(OY,{className:"h-4 w-4"}),Pe.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bne.displayName=_7.displayName;const wne=D.forwardRef(({className:e,...t},n)=>Pe.jsx(x7,{ref:n,className:Vn("text-lg font-semibold leading-none tracking-tight",e),...t}));wne.displayName=x7.displayName;const Sne=D.forwardRef(({className:e,...t},n)=>Pe.jsx(b7,{ref:n,className:Vn("text-sm text-muted-foreground",e),...t}));Sne.displayName=b7.displayName;const S7=D.forwardRef(({className:e,...t},n)=>Pe.jsx(hs,{ref:n,className:Vn("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));S7.displayName=hs.displayName;const E7=D.forwardRef(({className:e,...t},n)=>Pe.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[Pe.jsx(PY,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),Pe.jsx(hs.Input,{ref:n,className:Vn("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));E7.displayName=hs.Input.displayName;const Ene=D.forwardRef(({className:e,...t},n)=>Pe.jsx(hs.List,{ref:n,className:Vn("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));Ene.displayName=hs.List.displayName;const C7=D.forwardRef((e,t)=>Pe.jsx(hs.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));C7.displayName=hs.Empty.displayName;const I7=D.forwardRef(({className:e,...t},n)=>Pe.jsx(hs.Group,{ref:n,className:Vn("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));I7.displayName=hs.Group.displayName;const Cne=D.forwardRef(({className:e,...t},n)=>Pe.jsx(hs.Separator,{ref:n,className:Vn("-mx-1 h-px bg-border",e),...t}));Cne.displayName=hs.Separator.displayName;const T7=D.forwardRef(({className:e,...t},n)=>Pe.jsx(hs.Item,{ref:n,className:Vn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t}));T7.displayName=hs.Item.displayName;const P7="Popover",[A7,z$e]=$f(P7,[Ny]),k$=Ny(),[Ine,Dy]=A7(P7),Tne=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:l=!1}=e,a=k$(t),h=D.useRef(null),[d,g]=D.useState(!1),[v=!1,b]=Mg({prop:r,defaultProp:i,onChange:o});return D.createElement(b$,a,D.createElement(Ine,{scope:t,contentId:Bh(),triggerRef:h,open:v,onOpenChange:b,onOpenToggle:D.useCallback(()=>b(I=>!I),[b]),hasCustomAnchor:d,onCustomAnchorAdd:D.useCallback(()=>g(!0),[]),onCustomAnchorRemove:D.useCallback(()=>g(!1),[]),modal:l},n))},Pne="PopoverTrigger",Ane=D.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Dy(Pne,n),o=k$(n),l=Cr(t,i.triggerRef),a=D.createElement(Qn.button,lt({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":$7(i.open)},r,{ref:l,onClick:Zt(e.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:D.createElement(w$,lt({asChild:!0},o),a)}),O7="PopoverPortal",[One,Mne]=A7(O7,{forceMount:void 0}),$ne=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,o=Dy(O7,t);return D.createElement(One,{scope:t,forceMount:n},D.createElement(Ru,{present:n||o.open},D.createElement(u2,{asChild:!0,container:i},r)))},k0="PopoverContent",kne=D.forwardRef((e,t)=>{const n=Mne(k0,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,o=Dy(k0,e.__scopePopover);return D.createElement(Ru,{present:r||o.open},o.modal?D.createElement(Nne,lt({},i,{ref:t})):D.createElement(Lne,lt({},i,{ref:t})))}),Nne=D.forwardRef((e,t)=>{const n=Dy(k0,e.__scopePopover),r=D.useRef(null),i=Cr(t,r),o=D.useRef(!1);return D.useEffect(()=>{const l=r.current;if(l)return Wx(l)},[]),D.createElement(f2,{as:cf,allowPinchZoom:!0},D.createElement(M7,lt({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Zt(e.onCloseAutoFocus,l=>{var a;l.preventDefault(),o.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:Zt(e.onPointerDownOutside,l=>{const a=l.detail.originalEvent,h=a.button===0&&a.ctrlKey===!0,d=a.button===2||h;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Zt(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})))}),Lne=D.forwardRef((e,t)=>{const n=Dy(k0,e.__scopePopover),r=D.useRef(!1),i=D.useRef(!1);return D.createElement(M7,lt({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l;if((l=e.onCloseAutoFocus)===null||l===void 0||l.call(e,o),!o.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),o.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:o=>{var l,a;(l=e.onInteractOutside)===null||l===void 0||l.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const h=o.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(h))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}}))}),M7=D.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEscapeKeyDown:a,onPointerDownOutside:h,onFocusOutside:d,onInteractOutside:g,...v}=e,b=Dy(k0,n),I=k$(n);return o2(),D.createElement(a2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o},D.createElement(i2,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:g,onEscapeKeyDown:a,onPointerDownOutside:h,onFocusOutside:d,onDismiss:()=>b.onOpenChange(!1)},D.createElement(S$,lt({"data-state":$7(b.open),role:"dialog",id:b.contentId},I,v,{ref:t,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function $7(e){return e?"open":"closed"}const Dne=Tne,Rne=Ane,zne=$ne,k7=kne,Fne=Dne,Bne=Rne,N7=D.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},i)=>Pe.jsx(zne,{children:Pe.jsx(k7,{ref:i,align:t,sideOffset:n,className:Vn("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));N7.displayName=k7.displayName;const VR=[{value:"2017",label:"2017"},{value:"2018",label:"2018"},{value:"2019",label:"2019"},{value:"2020",label:"2020"}];function jne({selectedYear:e,setSelectedYear:t}){var i;const[n,r]=D.useState(!1);return Pe.jsxs(Fne,{open:n,onOpenChange:r,children:[Pe.jsx(Bne,{asChild:!0,children:Pe.jsxs(p$,{variant:"outline",role:"combobox","aria-expanded":n,className:"w-[220px] justify-between",children:[e?(i=VR.find(o=>o.value===e))==null?void 0:i.label:"2020",Pe.jsx(CY,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),Pe.jsx(N7,{className:"w-[200px] p-0",children:Pe.jsxs(S7,{children:[Pe.jsx(E7,{placeholder:"Recherche l'anne..."}),Pe.jsx(C7,{children:"No framework found."}),Pe.jsx(I7,{children:VR.map(o=>Pe.jsxs(T7,{value:o.value,onSelect:l=>{t(l===e?"":l),r(!1)},children:[Pe.jsx(d$,{className:Vn("mr-2 h-4 w-4",e===o.value?"opacity-100":"opacity-0")}),o.label]},o.value))})]})})]})}var Une=Array.isArray,ds=Une,Vne=typeof $_=="object"&&$_&&$_.Object===Object&&$_,L7=Vne,Gne=L7,qne=typeof self=="object"&&self&&self.Object===Object&&self,Wne=Gne||qne||Function("return this")(),Ec=Wne,Hne=Ec,Xne=Hne.Symbol,Yx=Xne,GR=Yx,D7=Object.prototype,Zne=D7.hasOwnProperty,Kne=D7.toString,__=GR?GR.toStringTag:void 0;function Yne(e){var t=Zne.call(e,__),n=e[__];try{e[__]=void 0;var r=!0}catch{}var i=Kne.call(e);return r&&(t?e[__]=n:delete e[__]),i}var Jne=Yne,Qne=Object.prototype,ere=Qne.toString;function tre(e){return ere.call(e)}var nre=tre,qR=Yx,rre=Jne,ire=nre,ore="[object Null]",are="[object Undefined]",WR=qR?qR.toStringTag:void 0;function sre(e){return e==null?e===void 0?are:ore:WR&&WR in Object(e)?rre(e):ire(e)}var Nf=sre;function lre(e){return e!=null&&typeof e=="object"}var Lf=lre,ure=Nf,cre=Lf,fre="[object Symbol]";function hre(e){return typeof e=="symbol"||cre(e)&&ure(e)==fre}var Ry=hre,dre=ds,pre=Ry,mre=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gre=/^\w*$/;function yre(e,t){if(dre(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||pre(e)?!0:gre.test(e)||!mre.test(e)||t!=null&&e in Object(t)}var N$=yre;function vre(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var sd=vre;const zy=hr(sd);var _re=Nf,xre=sd,bre="[object AsyncFunction]",wre="[object Function]",Sre="[object GeneratorFunction]",Ere="[object Proxy]";function Cre(e){if(!xre(e))return!1;var t=_re(e);return t==wre||t==Sre||t==bre||t==Ere}var L$=Cre;const $n=hr(L$);var Ire=Ec,Tre=Ire["__core-js_shared__"],Pre=Tre,bT=Pre,HR=function(){var e=/[^.]+$/.exec(bT&&bT.keys&&bT.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Are(e){return!!HR&&HR in e}var Ore=Are,Mre=Function.prototype,$re=Mre.toString;function kre(e){if(e!=null){try{return $re.call(e)}catch{}try{return e+""}catch{}}return""}var R7=kre,Nre=L$,Lre=Ore,Dre=sd,Rre=R7,zre=/[\\^$.*+?()[\]{}|]/g,Fre=/^\[object .+?Constructor\]$/,Bre=Function.prototype,jre=Object.prototype,Ure=Bre.toString,Vre=jre.hasOwnProperty,Gre=RegExp("^"+Ure.call(Vre).replace(zre,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qre(e){if(!Dre(e)||Lre(e))return!1;var t=Nre(e)?Gre:Fre;return t.test(Rre(e))}var Wre=qre;function Hre(e,t){return e==null?void 0:e[t]}var Xre=Hre,Zre=Wre,Kre=Xre;function Yre(e,t){var n=Kre(e,t);return Zre(n)?n:void 0}var Bp=Yre,Jre=Bp,Qre=Jre(Object,"create"),g2=Qre,XR=g2;function eie(){this.__data__=XR?XR(null):{},this.size=0}var tie=eie;function nie(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var rie=nie,iie=g2,oie="__lodash_hash_undefined__",aie=Object.prototype,sie=aie.hasOwnProperty;function lie(e){var t=this.__data__;if(iie){var n=t[e];return n===oie?void 0:n}return sie.call(t,e)?t[e]:void 0}var uie=lie,cie=g2,fie=Object.prototype,hie=fie.hasOwnProperty;function die(e){var t=this.__data__;return cie?t[e]!==void 0:hie.call(t,e)}var pie=die,mie=g2,gie="__lodash_hash_undefined__";function yie(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=mie&&t===void 0?gie:t,this}var vie=yie,_ie=tie,xie=rie,bie=uie,wie=pie,Sie=vie;function Fy(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Fy.prototype.clear=_ie;Fy.prototype.delete=xie;Fy.prototype.get=bie;Fy.prototype.has=wie;Fy.prototype.set=Sie;var Eie=Fy;function Cie(){this.__data__=[],this.size=0}var Iie=Cie;function Tie(e,t){return e===t||e!==e&&t!==t}var D$=Tie,Pie=D$;function Aie(e,t){for(var n=e.length;n--;)if(Pie(e[n][0],t))return n;return-1}var y2=Aie,Oie=y2,Mie=Array.prototype,$ie=Mie.splice;function kie(e){var t=this.__data__,n=Oie(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():$ie.call(t,n,1),--this.size,!0}var Nie=kie,Lie=y2;function Die(e){var t=this.__data__,n=Lie(t,e);return n<0?void 0:t[n][1]}var Rie=Die,zie=y2;function Fie(e){return zie(this.__data__,e)>-1}var Bie=Fie,jie=y2;function Uie(e,t){var n=this.__data__,r=jie(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Vie=Uie,Gie=Iie,qie=Nie,Wie=Rie,Hie=Bie,Xie=Vie;function By(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}By.prototype.clear=Gie;By.prototype.delete=qie;By.prototype.get=Wie;By.prototype.has=Hie;By.prototype.set=Xie;var v2=By,Zie=Bp,Kie=Ec,Yie=Zie(Kie,"Map"),R$=Yie,ZR=Eie,Jie=v2,Qie=R$;function eoe(){this.size=0,this.__data__={hash:new ZR,map:new(Qie||Jie),string:new ZR}}var toe=eoe;function noe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var roe=noe,ioe=roe;function ooe(e,t){var n=e.__data__;return ioe(t)?n[typeof t=="string"?"string":"hash"]:n.map}var _2=ooe,aoe=_2;function soe(e){var t=aoe(this,e).delete(e);return this.size-=t?1:0,t}var loe=soe,uoe=_2;function coe(e){return uoe(this,e).get(e)}var foe=coe,hoe=_2;function doe(e){return hoe(this,e).has(e)}var poe=doe,moe=_2;function goe(e,t){var n=moe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var yoe=goe,voe=toe,_oe=loe,xoe=foe,boe=poe,woe=yoe;function jy(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}jy.prototype.clear=voe;jy.prototype.delete=_oe;jy.prototype.get=xoe;jy.prototype.has=boe;jy.prototype.set=woe;var z$=jy,z7=z$,Soe="Expected a function";function F$(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Soe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var l=e.apply(this,r);return n.cache=o.set(i,l)||o,l};return n.cache=new(F$.Cache||z7),n}F$.Cache=z7;var Eoe=F$,Coe=Eoe,Ioe=500;function Toe(e){var t=Coe(e,function(r){return n.size===Ioe&&n.clear(),r}),n=t.cache;return t}var Poe=Toe,Aoe=Poe,Ooe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Moe=/\\(\\)?/g,$oe=Aoe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ooe,function(n,r,i,o){t.push(i?o.replace(Moe,"$1"):r||n)}),t}),koe=$oe;function Noe(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var B$=Noe,KR=Yx,Loe=B$,Doe=ds,Roe=Ry,zoe=1/0,YR=KR?KR.prototype:void 0,JR=YR?YR.toString:void 0;function F7(e){if(typeof e=="string")return e;if(Doe(e))return Loe(e,F7)+"";if(Roe(e))return JR?JR.call(e):"";var t=e+"";return t=="0"&&1/e==-zoe?"-0":t}var Foe=F7,Boe=Foe;function joe(e){return e==null?"":Boe(e)}var B7=joe,Uoe=ds,Voe=N$,Goe=koe,qoe=B7;function Woe(e,t){return Uoe(e)?e:Voe(e,t)?[e]:Goe(qoe(e))}var j7=Woe,Hoe=Ry,Xoe=1/0;function Zoe(e){if(typeof e=="string"||Hoe(e))return e;var t=e+"";return t=="0"&&1/e==-Xoe?"-0":t}var x2=Zoe,Koe=j7,Yoe=x2;function Joe(e,t){t=Koe(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Yoe(t[n++])];return n&&n==r?e:void 0}var j$=Joe,Qoe=j$;function eae(e,t,n){var r=e==null?void 0:Qoe(e,t);return r===void 0?n:r}var U7=eae;const wl=hr(U7);function tae(e){return e==null}var nae=tae;const Wn=hr(nae);var rae=Nf,iae=ds,oae=Lf,aae="[object String]";function sae(e){return typeof e=="string"||!iae(e)&&oae(e)&&rae(e)==aae}var lae=sae;const Jx=hr(lae);var V7={exports:{}},dr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo=typeof Symbol=="function"&&Symbol.for,U$=Mo?Symbol.for("react.element"):60103,V$=Mo?Symbol.for("react.portal"):60106,b2=Mo?Symbol.for("react.fragment"):60107,w2=Mo?Symbol.for("react.strict_mode"):60108,S2=Mo?Symbol.for("react.profiler"):60114,E2=Mo?Symbol.for("react.provider"):60109,C2=Mo?Symbol.for("react.context"):60110,G$=Mo?Symbol.for("react.async_mode"):60111,I2=Mo?Symbol.for("react.concurrent_mode"):60111,T2=Mo?Symbol.for("react.forward_ref"):60112,P2=Mo?Symbol.for("react.suspense"):60113,uae=Mo?Symbol.for("react.suspense_list"):60120,A2=Mo?Symbol.for("react.memo"):60115,O2=Mo?Symbol.for("react.lazy"):60116,cae=Mo?Symbol.for("react.block"):60121,fae=Mo?Symbol.for("react.fundamental"):60117,hae=Mo?Symbol.for("react.responder"):60118,dae=Mo?Symbol.for("react.scope"):60119;function Xs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case U$:switch(e=e.type,e){case G$:case I2:case b2:case S2:case w2:case P2:return e;default:switch(e=e&&e.$$typeof,e){case C2:case T2:case O2:case A2:case E2:return e;default:return t}}case V$:return t}}}function G7(e){return Xs(e)===I2}dr.AsyncMode=G$;dr.ConcurrentMode=I2;dr.ContextConsumer=C2;dr.ContextProvider=E2;dr.Element=U$;dr.ForwardRef=T2;dr.Fragment=b2;dr.Lazy=O2;dr.Memo=A2;dr.Portal=V$;dr.Profiler=S2;dr.StrictMode=w2;dr.Suspense=P2;dr.isAsyncMode=function(e){return G7(e)||Xs(e)===G$};dr.isConcurrentMode=G7;dr.isContextConsumer=function(e){return Xs(e)===C2};dr.isContextProvider=function(e){return Xs(e)===E2};dr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===U$};dr.isForwardRef=function(e){return Xs(e)===T2};dr.isFragment=function(e){return Xs(e)===b2};dr.isLazy=function(e){return Xs(e)===O2};dr.isMemo=function(e){return Xs(e)===A2};dr.isPortal=function(e){return Xs(e)===V$};dr.isProfiler=function(e){return Xs(e)===S2};dr.isStrictMode=function(e){return Xs(e)===w2};dr.isSuspense=function(e){return Xs(e)===P2};dr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===b2||e===I2||e===S2||e===w2||e===P2||e===uae||typeof e=="object"&&e!==null&&(e.$$typeof===O2||e.$$typeof===A2||e.$$typeof===E2||e.$$typeof===C2||e.$$typeof===T2||e.$$typeof===fae||e.$$typeof===hae||e.$$typeof===dae||e.$$typeof===cae)};dr.typeOf=Xs;V7.exports=dr;var bA=V7.exports,pae=Nf,mae=Lf,gae="[object Number]";function yae(e){return typeof e=="number"||mae(e)&&pae(e)==gae}var q7=yae;const vae=hr(q7);var _ae=q7;function xae(e){return _ae(e)&&e!=+e}var bae=xae;const Qx=hr(bae);var yu=function(t){return t===0?0:t>0?1:-1},ep=function(t){return Jx(t)&&t.indexOf("%")===t.length-1},It=function(t){return vae(t)&&!Qx(t)},no=function(t){return It(t)||Jx(t)},wae=0,e1=function(t){var n=++wae;return"".concat(t||"").concat(n)},Lg=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!It(t)&&!Jx(t))return r;var o;if(ep(t)){var l=t.indexOf("%");o=n*parseFloat(t.slice(0,l))/100}else o=+t;return Qx(o)&&(o=r),i&&o>n&&(o=n),o},hh=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Sae=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},i=0;i<n;i++)if(!r[t[i]])r[t[i]]=!0;else return!0;return!1},du=function(t,n){return It(t)&&It(n)?function(r){return t+r*(n-t)}:function(){return n}};function CS(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):wl(r,t))===n})}function xg(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function wA(e){"@babel/helpers - typeof";return wA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wA(e)}var Eae=["viewBox","children"],Cae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],QR=["points","pathLength"],wT={svg:Eae,polygon:QR,polyline:QR},q$=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],IS=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(D.isValidElement(t)&&(r=t.props),!zy(r))return null;var i={};return Object.keys(r).forEach(function(o){q$.includes(o)&&(i[o]=n||function(l){return r[o](r,l)})}),i},Iae=function(t,n,r){return function(i){return t(n,r,i),null}},TS=function(t,n,r){if(!zy(t)||wA(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(o){var l=t[o];q$.includes(o)&&typeof l=="function"&&(i||(i={}),i[o]=Iae(l,n,r))}),i},Tae=["children"],Pae=["children"];function e3(e,t){if(e==null)return{};var n=Aae(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Aae(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function SA(e){"@babel/helpers - typeof";return SA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SA(e)}var t3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},ef=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},n3=null,ST=null,W$=function e(t){if(t===n3&&Array.isArray(ST))return ST;var n=[];return D.Children.forEach(t,function(r){Wn(r)||(bA.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),ST=n,n3=t,n};function Sl(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(i){return ef(i)}):r=[ef(t)],W$(e).forEach(function(i){var o=wl(i,"type.displayName")||wl(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function Zc(e,t){var n=Sl(e,t);return n&&n[0]}var r3=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,i=n.height;return!(!It(r)||r<=0||!It(i)||i<=0)},Oae=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Mae=function(t){return t&&t.type&&Jx(t.type)&&Oae.indexOf(t.type)>=0},$ae=function(t){return t&&SA(t)==="object"&&"cx"in t&&"cy"in t&&"r"in t},kae=function(t,n,r,i){var o,l=(o=wT==null?void 0:wT[i])!==null&&o!==void 0?o:[];return!$n(t)&&(i&&l.includes(n)||Cae.includes(n))||r&&q$.includes(n)},jn=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(D.isValidElement(t)&&(i=t.props),!zy(i))return null;var o={};return Object.keys(i).forEach(function(l){var a;kae((a=i)===null||a===void 0?void 0:a[l],l,n,r)&&(o[l]=i[l])}),o},W7=function e(t,n){if(t===n)return!0;var r=D.Children.count(t);if(r!==D.Children.count(n))return!1;if(r===0)return!0;if(r===1)return i3(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=t[i],l=n[i];if(Array.isArray(o)||Array.isArray(l)){if(!e(o,l))return!1}else if(!i3(o,l))return!1}return!0},i3=function(t,n){if(Wn(t)&&Wn(n))return!0;if(!Wn(t)&&!Wn(n)){var r=t.props||{},i=r.children,o=e3(r,Tae),l=n.props||{},a=l.children,h=e3(l,Pae);return i&&a?xg(o,h)&&W7(i,a):!i&&!a?xg(o,h):!1}return!1},o3=function(t,n){var r=[],i={};return W$(t).forEach(function(o,l){if(Mae(o))r.push(o);else if(o){var a=ef(o.type),h=n[a]||{},d=h.handler,g=h.once;if(d&&(!g||!i[a])){var v=d(o,a,l);r.push(v),i[a]=!0}}}),r},Nae=function(t){var n=t&&t.type;return n&&t3[n]?t3[n]:null},Lae=function(t,n){return W$(n).indexOf(t)},Dae=["children","width","height","viewBox","className","style","title","desc"];function EA(){return EA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EA.apply(this,arguments)}function Rae(e,t){if(e==null)return{};var n=zae(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zae(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function CA(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,o=e.className,l=e.style,a=e.title,h=e.desc,d=Rae(e,Dae),g=i||{width:n,height:r,x:0,y:0},v=ir("recharts-surface",o);return Re.createElement("svg",EA({},jn(d,!0,"svg"),{className:v,width:n,height:r,style:l,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height)}),Re.createElement("title",null,a),Re.createElement("desc",null,h),t)}var Fae=["children","className"];function IA(){return IA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IA.apply(this,arguments)}function Bae(e,t){if(e==null)return{};var n=jae(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jae(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var $i=Re.forwardRef(function(e,t){var n=e.children,r=e.className,i=Bae(e,Fae),o=ir("recharts-layer",r);return Re.createElement("g",IA({className:o},jn(i,!0),{ref:t}),n)}),lp=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function Uae(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}var Vae=Uae,Gae=Vae;function qae(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:Gae(e,t,n)}var Wae=qae,Hae="\\ud800-\\udfff",Xae="\\u0300-\\u036f",Zae="\\ufe20-\\ufe2f",Kae="\\u20d0-\\u20ff",Yae=Xae+Zae+Kae,Jae="\\ufe0e\\ufe0f",Qae="\\u200d",ese=RegExp("["+Qae+Hae+Yae+Jae+"]");function tse(e){return ese.test(e)}var H7=tse;function nse(e){return e.split("")}var rse=nse,X7="\\ud800-\\udfff",ise="\\u0300-\\u036f",ose="\\ufe20-\\ufe2f",ase="\\u20d0-\\u20ff",sse=ise+ose+ase,lse="\\ufe0e\\ufe0f",use="["+X7+"]",TA="["+sse+"]",PA="\\ud83c[\\udffb-\\udfff]",cse="(?:"+TA+"|"+PA+")",Z7="[^"+X7+"]",K7="(?:\\ud83c[\\udde6-\\uddff]){2}",Y7="[\\ud800-\\udbff][\\udc00-\\udfff]",fse="\\u200d",J7=cse+"?",Q7="["+lse+"]?",hse="(?:"+fse+"(?:"+[Z7,K7,Y7].join("|")+")"+Q7+J7+")*",dse=Q7+J7+hse,pse="(?:"+[Z7+TA+"?",TA,K7,Y7,use].join("|")+")",mse=RegExp(PA+"(?="+PA+")|"+pse+dse,"g");function gse(e){return e.match(mse)||[]}var yse=gse,vse=rse,_se=H7,xse=yse;function bse(e){return _se(e)?xse(e):vse(e)}var wse=bse,Sse=Wae,Ese=H7,Cse=wse,Ise=B7;function Tse(e){return function(t){t=Ise(t);var n=Ese(t)?Cse(t):void 0,r=n?n[0]:t.charAt(0),i=n?Sse(n,1).join(""):t.slice(1);return r[e]()+i}}var Pse=Tse,Ase=Pse,Ose=Ase("toUpperCase"),Mse=Ose;const M2=hr(Mse);function $r(e){return function(){return e}}const e9=Math.cos,PS=Math.sin,zu=Math.sqrt,AS=Math.PI,$2=2*AS,AA=Math.PI,OA=2*AA,Wd=1e-6,$se=OA-Wd;function t9(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function kse(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return t9;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Nse{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?t9:kse(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+l}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,a=this._y1,h=r-t,d=i-n,g=l-t,v=a-n,b=g*g+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>Wd)if(!(Math.abs(v*h-d*g)>Wd)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let I=r-l,T=i-a,P=h*h+d*d,$=I*I+T*T,O=Math.sqrt(P),k=Math.sqrt(b),R=o*Math.tan((AA-Math.acos((P+b-$)/(2*O*k)))/2),j=R/k,F=R/O;Math.abs(j-1)>Wd&&this._append`L${t+j*g},${n+j*v}`,this._append`A${o},${o},0,0,${+(v*I>g*T)},${this._x1=t+F*h},${this._y1=n+F*d}`}}arc(t,n,r,i,o,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),h=r*Math.sin(i),d=t+a,g=n+h,v=1^l,b=l?i-o:o-i;this._x1===null?this._append`M${d},${g}`:(Math.abs(this._x1-d)>Wd||Math.abs(this._y1-g)>Wd)&&this._append`L${d},${g}`,r&&(b<0&&(b=b%OA+OA),b>$se?this._append`A${r},${r},0,1,${v},${t-a},${n-h}A${r},${r},0,1,${v},${this._x1=d},${this._y1=g}`:b>Wd&&this._append`A${r},${r},0,${+(b>=AA)},${v},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function H$(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Nse(t)}function X$(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function n9(e){this._context=e}n9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function k2(e){return new n9(e)}function r9(e){return e[0]}function i9(e){return e[1]}function o9(e,t){var n=$r(!0),r=null,i=k2,o=null,l=H$(a);e=typeof e=="function"?e:e===void 0?r9:$r(e),t=typeof t=="function"?t:t===void 0?i9:$r(t);function a(h){var d,g=(h=X$(h)).length,v,b=!1,I;for(r==null&&(o=i(I=l())),d=0;d<=g;++d)!(d<g&&n(v=h[d],d,h))===b&&((b=!b)?o.lineStart():o.lineEnd()),b&&o.point(+e(v,d,h),+t(v,d,h));if(I)return o=null,I+""||null}return a.x=function(h){return arguments.length?(e=typeof h=="function"?h:$r(+h),a):e},a.y=function(h){return arguments.length?(t=typeof h=="function"?h:$r(+h),a):t},a.defined=function(h){return arguments.length?(n=typeof h=="function"?h:$r(!!h),a):n},a.curve=function(h){return arguments.length?(i=h,r!=null&&(o=i(r)),a):i},a.context=function(h){return arguments.length?(h==null?r=o=null:o=i(r=h),a):r},a}function ew(e,t,n){var r=null,i=$r(!0),o=null,l=k2,a=null,h=H$(d);e=typeof e=="function"?e:e===void 0?r9:$r(+e),t=typeof t=="function"?t:$r(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?i9:$r(+n);function d(v){var b,I,T,P=(v=X$(v)).length,$,O=!1,k,R=new Array(P),j=new Array(P);for(o==null&&(a=l(k=h())),b=0;b<=P;++b){if(!(b<P&&i($=v[b],b,v))===O)if(O=!O)I=b,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),T=b-1;T>=I;--T)a.point(R[T],j[T]);a.lineEnd(),a.areaEnd()}O&&(R[b]=+e($,b,v),j[b]=+t($,b,v),a.point(r?+r($,b,v):R[b],n?+n($,b,v):j[b]))}if(k)return a=null,k+""||null}function g(){return o9().defined(i).curve(l).context(o)}return d.x=function(v){return arguments.length?(e=typeof v=="function"?v:$r(+v),r=null,d):e},d.x0=function(v){return arguments.length?(e=typeof v=="function"?v:$r(+v),d):e},d.x1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:$r(+v),d):r},d.y=function(v){return arguments.length?(t=typeof v=="function"?v:$r(+v),n=null,d):t},d.y0=function(v){return arguments.length?(t=typeof v=="function"?v:$r(+v),d):t},d.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:$r(+v),d):n},d.lineX0=d.lineY0=function(){return g().x(e).y(t)},d.lineY1=function(){return g().x(e).y(n)},d.lineX1=function(){return g().x(r).y(t)},d.defined=function(v){return arguments.length?(i=typeof v=="function"?v:$r(!!v),d):i},d.curve=function(v){return arguments.length?(l=v,o!=null&&(a=l(o)),d):l},d.context=function(v){return arguments.length?(v==null?o=a=null:a=l(o=v),d):o},d}class a9{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Lse(e){return new a9(e,!0)}function Dse(e){return new a9(e,!1)}const Z$={draw(e,t){const n=zu(t/AS);e.moveTo(n,0),e.arc(0,0,n,0,$2)}},Rse={draw(e,t){const n=zu(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},s9=zu(1/3),zse=s9*2,Fse={draw(e,t){const n=zu(t/zse),r=n*s9;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Bse={draw(e,t){const n=zu(t),r=-n/2;e.rect(r,r,n,n)}},jse=.8908130915292852,l9=PS(AS/10)/PS(7*AS/10),Use=PS($2/10)*l9,Vse=-e9($2/10)*l9,Gse={draw(e,t){const n=zu(t*jse),r=Use*n,i=Vse*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const l=$2*o/5,a=e9(l),h=PS(l);e.lineTo(h*n,-a*n),e.lineTo(a*r-h*i,h*r+a*i)}e.closePath()}},ET=zu(3),qse={draw(e,t){const n=-zu(t/(ET*3));e.moveTo(0,n*2),e.lineTo(-ET*n,-n),e.lineTo(ET*n,-n),e.closePath()}},sl=-.5,ll=zu(3)/2,MA=1/zu(12),Wse=(MA/2+1)*3,Hse={draw(e,t){const n=zu(t/Wse),r=n/2,i=n*MA,o=r,l=n*MA+n,a=-o,h=l;e.moveTo(r,i),e.lineTo(o,l),e.lineTo(a,h),e.lineTo(sl*r-ll*i,ll*r+sl*i),e.lineTo(sl*o-ll*l,ll*o+sl*l),e.lineTo(sl*a-ll*h,ll*a+sl*h),e.lineTo(sl*r+ll*i,sl*i-ll*r),e.lineTo(sl*o+ll*l,sl*l-ll*o),e.lineTo(sl*a+ll*h,sl*h-ll*a),e.closePath()}};function Xse(e,t){let n=null,r=H$(i);e=typeof e=="function"?e:$r(e||Z$),t=typeof t=="function"?t:$r(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:$r(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:$r(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function OS(){}function MS(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function u9(e){this._context=e}u9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:MS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:MS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zse(e){return new u9(e)}function c9(e){this._context=e}c9.prototype={areaStart:OS,areaEnd:OS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:MS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kse(e){return new c9(e)}function f9(e){this._context=e}f9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:MS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Yse(e){return new f9(e)}function h9(e){this._context=e}h9.prototype={areaStart:OS,areaEnd:OS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Jse(e){return new h9(e)}function a3(e){return e<0?-1:1}function s3(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),a=(o*i+l*r)/(r+i);return(a3(o)+a3(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(a))||0}function l3(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function CT(e,t,n){var r=e._x0,i=e._y0,o=e._x1,l=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,l-a*n,o,l)}function $S(e){this._context=e}$S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:CT(this,this._t0,l3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,CT(this,l3(this,n=s3(this,e,t)),n);break;default:CT(this,this._t0,n=s3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function d9(e){this._context=new p9(e)}(d9.prototype=Object.create($S.prototype)).point=function(e,t){$S.prototype.point.call(this,t,e)};function p9(e){this._context=e}p9.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function Qse(e){return new $S(e)}function ele(e){return new d9(e)}function m9(e){this._context=e}m9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=u3(e),i=u3(t),o=0,l=1;l<n;++o,++l)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function u3(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),l=new Array(n);for(i[0]=0,o[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function tle(e){return new m9(e)}function N2(e,t){this._context=e,this._t=t}N2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function nle(e){return new N2(e,.5)}function rle(e){return new N2(e,0)}function ile(e){return new N2(e,1)}function Dg(e,t){if((l=e.length)>1)for(var n=1,r,i,o=e[t[0]],l,a=o.length;n<l;++n)for(i=o,o=e[t[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function $A(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ole(e,t){return e[t]}function ale(e){const t=[];return t.key=e,t}function sle(){var e=$r([]),t=$A,n=Dg,r=ole;function i(o){var l=Array.from(e.apply(this,arguments),ale),a,h=l.length,d=-1,g;for(const v of o)for(a=0,++d;a<h;++a)(l[a][d]=[0,+r(v,l[a].key,d,o)]).data=v;for(a=0,g=X$(t(l));a<h;++a)l[g[a]].index=a;return n(l,g),l}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:$r(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:$r(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?$A:typeof o=="function"?o:$r(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??Dg,i):n},i}function lle(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,l;i<o;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}Dg(e,t)}}function ule(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var l=0,a=0;l<i;++l)a+=e[l][n][1]||0;r[n][1]+=r[n][0]=-a/2}Dg(e,t)}}function cle(e,t){if(!(!((l=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,l;r<o;++r){for(var a=0,h=0,d=0;a<l;++a){for(var g=e[t[a]],v=g[r][1]||0,b=g[r-1][1]||0,I=(v-b)/2,T=0;T<a;++T){var P=e[t[T]],$=P[r][1]||0,O=P[r-1][1]||0;I+=$-O}h+=v,d+=I*v}i[r-1][1]+=i[r-1][0]=n,h&&(n-=d/h)}i[r-1][1]+=i[r-1][0]=n,Dg(e,t)}}function N0(e){"@babel/helpers - typeof";return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N0(e)}var fle=["type","size","sizeType"];function kA(){return kA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kA.apply(this,arguments)}function c3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function f3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(n),!0).forEach(function(r){hle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hle(e,t,n){return t=dle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dle(e){var t=ple(e,"string");return N0(t)==="symbol"?t:String(t)}function ple(e,t){if(N0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(N0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mle(e,t){if(e==null)return{};var n=gle(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gle(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var g9={symbolCircle:Z$,symbolCross:Rse,symbolDiamond:Fse,symbolSquare:Bse,symbolStar:Gse,symbolTriangle:qse,symbolWye:Hse},yle=Math.PI/180,vle=function(t){var n="symbol".concat(M2(t));return g9[n]||Z$},_le=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*yle;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},xle=function(t,n){g9["symbol".concat(M2(t))]=n},K$=function(t){var n=t.type,r=n===void 0?"circle":n,i=t.size,o=i===void 0?64:i,l=t.sizeType,a=l===void 0?"area":l,h=mle(t,fle),d=f3(f3({},h),{},{type:r,size:o,sizeType:a}),g=function(){var $=vle(r),O=Xse().type($).size(_le(o,a,r));return O()},v=d.className,b=d.cx,I=d.cy,T=jn(d,!0);return b===+b&&I===+I&&o===+o?Re.createElement("path",kA({},T,{className:ir("recharts-symbols",v),transform:"translate(".concat(b,", ").concat(I,")"),d:g()})):null};K$.registerSymbol=xle;function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function NA(){return NA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NA.apply(this,arguments)}function h3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ble(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h3(Object(n),!0).forEach(function(r){L0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y9(r.key),r)}}function Sle(e,t,n){return t&&d3(e.prototype,t),n&&d3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ele(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LA(e,t)}function LA(e,t){return LA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LA(e,t)}function Cle(e){var t=Ple();return function(){var r=kS(e),i;if(t){var o=kS(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Ile(this,i)}}function Ile(e,t){if(t&&(Rg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tle(e)}function Tle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ple(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kS(e){return kS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kS(e)}function L0(e,t,n){return t=y9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y9(e){var t=Ale(e,"string");return Rg(t)==="symbol"?t:String(t)}function Ale(e,t){if(Rg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ul=32,Y$=function(e){Ele(n,e);var t=Cle(n);function n(){return wle(this,n),t.apply(this,arguments)}return Sle(n,[{key:"renderIcon",value:function(i){var o=this.props.inactiveColor,l=ul/2,a=ul/6,h=ul/3,d=i.inactive?o:i.color;if(i.type==="plainline")return Re.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:l,x2:ul,y2:l,className:"recharts-legend-icon"});if(i.type==="line")return Re.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(l,"h").concat(h,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*h,",").concat(l,`
            H`).concat(ul,"M").concat(2*h,",").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(h,",").concat(l),className:"recharts-legend-icon"});if(i.type==="rect")return Re.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(ul/8,"h").concat(ul,"v").concat(ul*3/4,"h").concat(-ul,"z"),className:"recharts-legend-icon"});if(Re.isValidElement(i.legendIcon)){var g=ble({},i);return delete g.legendIcon,Re.cloneElement(i.legendIcon,g)}return Re.createElement(K$,{fill:d,cx:l,cy:l,size:ul,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,o=this.props,l=o.payload,a=o.iconSize,h=o.layout,d=o.formatter,g=o.inactiveColor,v={x:0,y:0,width:ul,height:ul},b={display:h==="horizontal"?"inline-block":"block",marginRight:10},I={display:"inline-block",verticalAlign:"middle",marginRight:4};return l.map(function(T,P){var $,O=T.formatter||d,k=ir(($={"recharts-legend-item":!0},L0($,"legend-item-".concat(P),!0),L0($,"inactive",T.inactive),$));if(T.type==="none")return null;var R=$n(T.value)?null:T.value;lp(!$n(T.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var j=T.inactive?g:T.color;return Re.createElement("li",NA({className:k,style:b,key:"legend-item-".concat(P)},TS(i.props,T,P)),Re.createElement(CA,{width:a,height:a,viewBox:v,style:I},i.renderIcon(T)),Re.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},O?O(R,T,P):R))})}},{key:"render",value:function(){var i=this.props,o=i.payload,l=i.layout,a=i.align;if(!o||!o.length)return null;var h={padding:0,margin:0,textAlign:l==="horizontal"?a:"left"};return Re.createElement("ul",{className:"recharts-default-legend",style:h},this.renderItems())}}]),n}(D.PureComponent);L0(Y$,"displayName","Legend");L0(Y$,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Ole=v2;function Mle(){this.__data__=new Ole,this.size=0}var $le=Mle;function kle(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Nle=kle;function Lle(e){return this.__data__.get(e)}var Dle=Lle;function Rle(e){return this.__data__.has(e)}var zle=Rle,Fle=v2,Ble=R$,jle=z$,Ule=200;function Vle(e,t){var n=this.__data__;if(n instanceof Fle){var r=n.__data__;if(!Ble||r.length<Ule-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new jle(r)}return n.set(e,t),this.size=n.size,this}var Gle=Vle,qle=v2,Wle=$le,Hle=Nle,Xle=Dle,Zle=zle,Kle=Gle;function Uy(e){var t=this.__data__=new qle(e);this.size=t.size}Uy.prototype.clear=Wle;Uy.prototype.delete=Hle;Uy.prototype.get=Xle;Uy.prototype.has=Zle;Uy.prototype.set=Kle;var v9=Uy,Yle="__lodash_hash_undefined__";function Jle(e){return this.__data__.set(e,Yle),this}var Qle=Jle;function eue(e){return this.__data__.has(e)}var tue=eue,nue=z$,rue=Qle,iue=tue;function NS(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new nue;++t<n;)this.add(e[t])}NS.prototype.add=NS.prototype.push=rue;NS.prototype.has=iue;var _9=NS;function oue(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var x9=oue;function aue(e,t){return e.has(t)}var b9=aue,sue=_9,lue=x9,uue=b9,cue=1,fue=2;function hue(e,t,n,r,i,o){var l=n&cue,a=e.length,h=t.length;if(a!=h&&!(l&&h>a))return!1;var d=o.get(e),g=o.get(t);if(d&&g)return d==t&&g==e;var v=-1,b=!0,I=n&fue?new sue:void 0;for(o.set(e,t),o.set(t,e);++v<a;){var T=e[v],P=t[v];if(r)var $=l?r(P,T,v,t,e,o):r(T,P,v,e,t,o);if($!==void 0){if($)continue;b=!1;break}if(I){if(!lue(t,function(O,k){if(!uue(I,k)&&(T===O||i(T,O,n,r,o)))return I.push(k)})){b=!1;break}}else if(!(T===P||i(T,P,n,r,o))){b=!1;break}}return o.delete(e),o.delete(t),b}var w9=hue,due=Ec,pue=due.Uint8Array,mue=pue;function gue(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var yue=gue;function vue(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var J$=vue,p3=Yx,m3=mue,_ue=D$,xue=w9,bue=yue,wue=J$,Sue=1,Eue=2,Cue="[object Boolean]",Iue="[object Date]",Tue="[object Error]",Pue="[object Map]",Aue="[object Number]",Oue="[object RegExp]",Mue="[object Set]",$ue="[object String]",kue="[object Symbol]",Nue="[object ArrayBuffer]",Lue="[object DataView]",g3=p3?p3.prototype:void 0,IT=g3?g3.valueOf:void 0;function Due(e,t,n,r,i,o,l){switch(n){case Lue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Nue:return!(e.byteLength!=t.byteLength||!o(new m3(e),new m3(t)));case Cue:case Iue:case Aue:return _ue(+e,+t);case Tue:return e.name==t.name&&e.message==t.message;case Oue:case $ue:return e==t+"";case Pue:var a=bue;case Mue:var h=r&Sue;if(a||(a=wue),e.size!=t.size&&!h)return!1;var d=l.get(e);if(d)return d==t;r|=Eue,l.set(e,t);var g=xue(a(e),a(t),r,i,o,l);return l.delete(e),g;case kue:if(IT)return IT.call(e)==IT.call(t)}return!1}var Rue=Due;function zue(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var S9=zue,Fue=S9,Bue=ds;function jue(e,t,n){var r=t(e);return Bue(e)?r:Fue(r,n(e))}var Uue=jue;function Vue(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var l=e[n];t(l,n,e)&&(o[i++]=l)}return o}var Gue=Vue;function que(){return[]}var Wue=que,Hue=Gue,Xue=Wue,Zue=Object.prototype,Kue=Zue.propertyIsEnumerable,y3=Object.getOwnPropertySymbols,Yue=y3?function(e){return e==null?[]:(e=Object(e),Hue(y3(e),function(t){return Kue.call(e,t)}))}:Xue,Jue=Yue;function Que(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var ece=Que,tce=Nf,nce=Lf,rce="[object Arguments]";function ice(e){return nce(e)&&tce(e)==rce}var oce=ice,v3=oce,ace=Lf,E9=Object.prototype,sce=E9.hasOwnProperty,lce=E9.propertyIsEnumerable,uce=v3(function(){return arguments}())?v3:function(e){return ace(e)&&sce.call(e,"callee")&&!lce.call(e,"callee")},Q$=uce,LS={exports:{}};function cce(){return!1}var fce=cce;LS.exports;(function(e,t){var n=Ec,r=fce,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===i,a=l?n.Buffer:void 0,h=a?a.isBuffer:void 0,d=h||r;e.exports=d})(LS,LS.exports);var C9=LS.exports,hce=9007199254740991,dce=/^(?:0|[1-9]\d*)$/;function pce(e,t){var n=typeof e;return t=t??hce,!!t&&(n=="number"||n!="symbol"&&dce.test(e))&&e>-1&&e%1==0&&e<t}var ek=pce,mce=9007199254740991;function gce(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=mce}var tk=gce,yce=Nf,vce=tk,_ce=Lf,xce="[object Arguments]",bce="[object Array]",wce="[object Boolean]",Sce="[object Date]",Ece="[object Error]",Cce="[object Function]",Ice="[object Map]",Tce="[object Number]",Pce="[object Object]",Ace="[object RegExp]",Oce="[object Set]",Mce="[object String]",$ce="[object WeakMap]",kce="[object ArrayBuffer]",Nce="[object DataView]",Lce="[object Float32Array]",Dce="[object Float64Array]",Rce="[object Int8Array]",zce="[object Int16Array]",Fce="[object Int32Array]",Bce="[object Uint8Array]",jce="[object Uint8ClampedArray]",Uce="[object Uint16Array]",Vce="[object Uint32Array]",Vr={};Vr[Lce]=Vr[Dce]=Vr[Rce]=Vr[zce]=Vr[Fce]=Vr[Bce]=Vr[jce]=Vr[Uce]=Vr[Vce]=!0;Vr[xce]=Vr[bce]=Vr[kce]=Vr[wce]=Vr[Nce]=Vr[Sce]=Vr[Ece]=Vr[Cce]=Vr[Ice]=Vr[Tce]=Vr[Pce]=Vr[Ace]=Vr[Oce]=Vr[Mce]=Vr[$ce]=!1;function Gce(e){return _ce(e)&&vce(e.length)&&!!Vr[yce(e)]}var qce=Gce;function Wce(e){return function(t){return e(t)}}var I9=Wce,DS={exports:{}};DS.exports;(function(e,t){var n=L7,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,l=o&&n.process,a=function(){try{var h=i&&i.require&&i.require("util").types;return h||l&&l.binding&&l.binding("util")}catch{}}();e.exports=a})(DS,DS.exports);var Hce=DS.exports,Xce=qce,Zce=I9,_3=Hce,x3=_3&&_3.isTypedArray,Kce=x3?Zce(x3):Xce,T9=Kce,Yce=ece,Jce=Q$,Qce=ds,efe=C9,tfe=ek,nfe=T9,rfe=Object.prototype,ife=rfe.hasOwnProperty;function ofe(e,t){var n=Qce(e),r=!n&&Jce(e),i=!n&&!r&&efe(e),o=!n&&!r&&!i&&nfe(e),l=n||r||i||o,a=l?Yce(e.length,String):[],h=a.length;for(var d in e)(t||ife.call(e,d))&&!(l&&(d=="length"||i&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||tfe(d,h)))&&a.push(d);return a}var afe=ofe,sfe=Object.prototype;function lfe(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||sfe;return e===n}var ufe=lfe;function cfe(e,t){return function(n){return e(t(n))}}var P9=cfe,ffe=P9,hfe=ffe(Object.keys,Object),dfe=hfe,pfe=ufe,mfe=dfe,gfe=Object.prototype,yfe=gfe.hasOwnProperty;function vfe(e){if(!pfe(e))return mfe(e);var t=[];for(var n in Object(e))yfe.call(e,n)&&n!="constructor"&&t.push(n);return t}var _fe=vfe,xfe=L$,bfe=tk;function wfe(e){return e!=null&&bfe(e.length)&&!xfe(e)}var t1=wfe,Sfe=afe,Efe=_fe,Cfe=t1;function Ife(e){return Cfe(e)?Sfe(e):Efe(e)}var L2=Ife,Tfe=Uue,Pfe=Jue,Afe=L2;function Ofe(e){return Tfe(e,Afe,Pfe)}var Mfe=Ofe,b3=Mfe,$fe=1,kfe=Object.prototype,Nfe=kfe.hasOwnProperty;function Lfe(e,t,n,r,i,o){var l=n&$fe,a=b3(e),h=a.length,d=b3(t),g=d.length;if(h!=g&&!l)return!1;for(var v=h;v--;){var b=a[v];if(!(l?b in t:Nfe.call(t,b)))return!1}var I=o.get(e),T=o.get(t);if(I&&T)return I==t&&T==e;var P=!0;o.set(e,t),o.set(t,e);for(var $=l;++v<h;){b=a[v];var O=e[b],k=t[b];if(r)var R=l?r(k,O,b,t,e,o):r(O,k,b,e,t,o);if(!(R===void 0?O===k||i(O,k,n,r,o):R)){P=!1;break}$||($=b=="constructor")}if(P&&!$){var j=e.constructor,F=t.constructor;j!=F&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof F=="function"&&F instanceof F)&&(P=!1)}return o.delete(e),o.delete(t),P}var Dfe=Lfe,Rfe=Bp,zfe=Ec,Ffe=Rfe(zfe,"DataView"),Bfe=Ffe,jfe=Bp,Ufe=Ec,Vfe=jfe(Ufe,"Promise"),Gfe=Vfe,qfe=Bp,Wfe=Ec,Hfe=qfe(Wfe,"Set"),A9=Hfe,Xfe=Bp,Zfe=Ec,Kfe=Xfe(Zfe,"WeakMap"),Yfe=Kfe,DA=Bfe,RA=R$,zA=Gfe,FA=A9,BA=Yfe,O9=Nf,Vy=R7,w3="[object Map]",Jfe="[object Object]",S3="[object Promise]",E3="[object Set]",C3="[object WeakMap]",I3="[object DataView]",Qfe=Vy(DA),ehe=Vy(RA),the=Vy(zA),nhe=Vy(FA),rhe=Vy(BA),Hd=O9;(DA&&Hd(new DA(new ArrayBuffer(1)))!=I3||RA&&Hd(new RA)!=w3||zA&&Hd(zA.resolve())!=S3||FA&&Hd(new FA)!=E3||BA&&Hd(new BA)!=C3)&&(Hd=function(e){var t=O9(e),n=t==Jfe?e.constructor:void 0,r=n?Vy(n):"";if(r)switch(r){case Qfe:return I3;case ehe:return w3;case the:return S3;case nhe:return E3;case rhe:return C3}return t});var ihe=Hd,TT=v9,ohe=w9,ahe=Rue,she=Dfe,T3=ihe,P3=ds,A3=C9,lhe=T9,uhe=1,O3="[object Arguments]",M3="[object Array]",tw="[object Object]",che=Object.prototype,$3=che.hasOwnProperty;function fhe(e,t,n,r,i,o){var l=P3(e),a=P3(t),h=l?M3:T3(e),d=a?M3:T3(t);h=h==O3?tw:h,d=d==O3?tw:d;var g=h==tw,v=d==tw,b=h==d;if(b&&A3(e)){if(!A3(t))return!1;l=!0,g=!1}if(b&&!g)return o||(o=new TT),l||lhe(e)?ohe(e,t,n,r,i,o):ahe(e,t,h,n,r,i,o);if(!(n&uhe)){var I=g&&$3.call(e,"__wrapped__"),T=v&&$3.call(t,"__wrapped__");if(I||T){var P=I?e.value():e,$=T?t.value():t;return o||(o=new TT),i(P,$,n,r,o)}}return b?(o||(o=new TT),she(e,t,n,r,i,o)):!1}var hhe=fhe,dhe=hhe,k3=Lf;function M9(e,t,n,r,i){return e===t?!0:e==null||t==null||!k3(e)&&!k3(t)?e!==e&&t!==t:dhe(e,t,n,r,M9,i)}var nk=M9,phe=v9,mhe=nk,ghe=1,yhe=2;function vhe(e,t,n,r){var i=n.length,o=i,l=!r;if(e==null)return!o;for(e=Object(e);i--;){var a=n[i];if(l&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=n[i];var h=a[0],d=e[h],g=a[1];if(l&&a[2]){if(d===void 0&&!(h in e))return!1}else{var v=new phe;if(r)var b=r(d,g,h,e,t,v);if(!(b===void 0?mhe(g,d,ghe|yhe,r,v):b))return!1}}return!0}var _he=vhe,xhe=sd;function bhe(e){return e===e&&!xhe(e)}var $9=bhe,whe=$9,She=L2;function Ehe(e){for(var t=She(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,whe(i)]}return t}var Che=Ehe;function Ihe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var k9=Ihe,The=_he,Phe=Che,Ahe=k9;function Ohe(e){var t=Phe(e);return t.length==1&&t[0][2]?Ahe(t[0][0],t[0][1]):function(n){return n===e||The(n,e,t)}}var Mhe=Ohe;function $he(e,t){return e!=null&&t in Object(e)}var khe=$he,Nhe=j7,Lhe=Q$,Dhe=ds,Rhe=ek,zhe=tk,Fhe=x2;function Bhe(e,t,n){t=Nhe(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var l=Fhe(t[r]);if(!(o=e!=null&&n(e,l)))break;e=e[l]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&zhe(i)&&Rhe(l,i)&&(Dhe(e)||Lhe(e)))}var jhe=Bhe,Uhe=khe,Vhe=jhe;function Ghe(e,t){return e!=null&&Vhe(e,t,Uhe)}var qhe=Ghe,Whe=nk,Hhe=U7,Xhe=qhe,Zhe=N$,Khe=$9,Yhe=k9,Jhe=x2,Qhe=1,ede=2;function tde(e,t){return Zhe(e)&&Khe(t)?Yhe(Jhe(e),t):function(n){var r=Hhe(n,e);return r===void 0&&r===t?Xhe(n,e):Whe(t,r,Qhe|ede)}}var nde=tde;function rde(e){return e}var Gy=rde;function ide(e){return function(t){return t==null?void 0:t[e]}}var ode=ide,ade=j$;function sde(e){return function(t){return ade(t,e)}}var lde=sde,ude=ode,cde=lde,fde=N$,hde=x2;function dde(e){return fde(e)?ude(hde(e)):cde(e)}var pde=dde,mde=Mhe,gde=nde,yde=Gy,vde=ds,_de=pde;function xde(e){return typeof e=="function"?e:e==null?yde:typeof e=="object"?vde(e)?gde(e[0],e[1]):mde(e):_de(e)}var ld=xde;function bde(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var N9=bde;function wde(e){return e!==e}var Sde=wde;function Ede(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var Cde=Ede,Ide=N9,Tde=Sde,Pde=Cde;function Ade(e,t,n){return t===t?Pde(e,t,n):Ide(e,Tde,n)}var Ode=Ade,Mde=Ode;function $de(e,t){var n=e==null?0:e.length;return!!n&&Mde(e,t,0)>-1}var kde=$de;function Nde(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var Lde=Nde;function Dde(){}var Rde=Dde,PT=A9,zde=Rde,Fde=J$,Bde=1/0,jde=PT&&1/Fde(new PT([,-0]))[1]==Bde?function(e){return new PT(e)}:zde,Ude=jde,Vde=_9,Gde=kde,qde=Lde,Wde=b9,Hde=Ude,Xde=J$,Zde=200;function Kde(e,t,n){var r=-1,i=Gde,o=e.length,l=!0,a=[],h=a;if(n)l=!1,i=qde;else if(o>=Zde){var d=t?null:Hde(e);if(d)return Xde(d);l=!1,i=Wde,h=new Vde}else h=t?[]:a;e:for(;++r<o;){var g=e[r],v=t?t(g):g;if(g=n||g!==0?g:0,l&&v===v){for(var b=h.length;b--;)if(h[b]===v)continue e;t&&h.push(v),a.push(g)}else i(h,v,n)||(h!==a&&h.push(v),a.push(g))}return a}var Yde=Kde,Jde=ld,Qde=Yde;function epe(e,t){return e&&e.length?Qde(e,Jde(t)):[]}var tpe=epe;const N3=hr(tpe);function L9(e,t,n){return t===!0?N3(e,n):$n(t)?N3(e,t):e}function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(e)}var npe=["ref"];function L3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L3(Object(n),!0).forEach(function(r){D2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R9(r.key),r)}}function ipe(e,t,n){return t&&D3(e.prototype,t),n&&D3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ope(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jA(e,t)}function jA(e,t){return jA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jA(e,t)}function ape(e){var t=lpe();return function(){var r=RS(e),i;if(t){var o=RS(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return spe(this,i)}}function spe(e,t){if(t&&(zg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D9(e)}function D9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function RS(e){return RS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},RS(e)}function D2(e,t,n){return t=R9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R9(e){var t=upe(e,"string");return zg(t)==="symbol"?t:String(t)}function upe(e,t){if(zg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cpe(e,t){if(e==null)return{};var n=fpe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fpe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function hpe(e){return e.value}function dpe(e,t){if(Re.isValidElement(e))return Re.cloneElement(e,t);if(typeof e=="function")return Re.createElement(e,t);t.ref;var n=cpe(t,npe);return Re.createElement(Y$,n)}var R3=1,Fg=function(e){ope(n,e);var t=ape(n);function n(){var r;rpe(this,n);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=t.call.apply(t,[this].concat(o)),D2(D9(r),"lastBoundingBox",{width:-1,height:-1}),r}return ipe(n,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var o=this.wrapperNode.getBoundingClientRect();(Math.abs(o.width-this.lastBoundingBox.width)>R3||Math.abs(o.height-this.lastBoundingBox.height)>R3)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,i&&i(o))}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?zd({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var o=this.props,l=o.layout,a=o.align,h=o.verticalAlign,d=o.margin,g=o.chartWidth,v=o.chartHeight,b,I;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(a==="center"&&l==="vertical"){var T=this.getBBoxSnapshot();b={left:((g||0)-T.width)/2}}else b=a==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(h==="middle"){var P=this.getBBoxSnapshot();I={top:((v||0)-P.height)/2}}else I=h==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return zd(zd({},b),I)}},{key:"render",value:function(){var i=this,o=this.props,l=o.content,a=o.width,h=o.height,d=o.wrapperStyle,g=o.payloadUniqBy,v=o.payload,b=zd(zd({position:"absolute",width:a||"auto",height:h||"auto"},this.getDefaultPosition(d)),d);return Re.createElement("div",{className:"recharts-legend-wrapper",style:b,ref:function(T){i.wrapperNode=T}},dpe(l,zd(zd({},this.props),{},{payload:L9(v,g,hpe)})))}}],[{key:"getWithHeight",value:function(i,o){var l=i.props.layout;return l==="vertical"&&It(i.props.height)?{height:i.props.height}:l==="horizontal"?{width:i.props.width||o}:null}}]),n}(D.PureComponent);D2(Fg,"displayName","Legend");D2(Fg,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var z3=Yx,ppe=Q$,mpe=ds,F3=z3?z3.isConcatSpreadable:void 0;function gpe(e){return mpe(e)||ppe(e)||!!(F3&&e&&e[F3])}var ype=gpe,vpe=S9,_pe=ype;function z9(e,t,n,r,i){var o=-1,l=e.length;for(n||(n=_pe),i||(i=[]);++o<l;){var a=e[o];t>0&&n(a)?t>1?z9(a,t-1,n,r,i):vpe(i,a):r||(i[i.length]=a)}return i}var F9=z9;function xpe(e){return function(t,n,r){for(var i=-1,o=Object(t),l=r(t),a=l.length;a--;){var h=l[e?a:++i];if(n(o[h],h,o)===!1)break}return t}}var bpe=xpe,wpe=bpe,Spe=wpe(),Epe=Spe,Cpe=Epe,Ipe=L2;function Tpe(e,t){return e&&Cpe(e,t,Ipe)}var B9=Tpe,Ppe=t1;function Ape(e,t){return function(n,r){if(n==null)return n;if(!Ppe(n))return e(n,r);for(var i=n.length,o=t?i:-1,l=Object(n);(t?o--:++o<i)&&r(l[o],o,l)!==!1;);return n}}var Ope=Ape,Mpe=B9,$pe=Ope,kpe=$pe(Mpe),rk=kpe,Npe=rk,Lpe=t1;function Dpe(e,t){var n=-1,r=Lpe(e)?Array(e.length):[];return Npe(e,function(i,o,l){r[++n]=t(i,o,l)}),r}var j9=Dpe;function Rpe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var zpe=Rpe,B3=Ry;function Fpe(e,t){if(e!==t){var n=e!==void 0,r=e===null,i=e===e,o=B3(e),l=t!==void 0,a=t===null,h=t===t,d=B3(t);if(!a&&!d&&!o&&e>t||o&&l&&h&&!a&&!d||r&&l&&h||!n&&h||!i)return 1;if(!r&&!o&&!d&&e<t||d&&n&&i&&!r&&!o||a&&n&&i||!l&&i||!h)return-1}return 0}var Bpe=Fpe,jpe=Bpe;function Upe(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,l=i.length,a=n.length;++r<l;){var h=jpe(i[r],o[r]);if(h){if(r>=a)return h;var d=n[r];return h*(d=="desc"?-1:1)}}return e.index-t.index}var Vpe=Upe,AT=B$,Gpe=j$,qpe=ld,Wpe=j9,Hpe=zpe,Xpe=I9,Zpe=Vpe,Kpe=Gy,Ype=ds;function Jpe(e,t,n){t.length?t=AT(t,function(o){return Ype(o)?function(l){return Gpe(l,o.length===1?o[0]:o)}:o}):t=[Kpe];var r=-1;t=AT(t,Xpe(qpe));var i=Wpe(e,function(o,l,a){var h=AT(t,function(d){return d(o)});return{criteria:h,index:++r,value:o}});return Hpe(i,function(o,l){return Zpe(o,l,n)})}var Qpe=Jpe;function eme(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var tme=eme,nme=tme,j3=Math.max;function rme(e,t,n){return t=j3(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=j3(r.length-t,0),l=Array(o);++i<o;)l[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(l),nme(e,this,a)}}var ime=rme;function ome(e){return function(){return e}}var ame=ome,sme=Bp,lme=function(){try{var e=sme(Object,"defineProperty");return e({},"",{}),e}catch{}}(),U9=lme,ume=ame,U3=U9,cme=Gy,fme=U3?function(e,t){return U3(e,"toString",{configurable:!0,enumerable:!1,value:ume(t),writable:!0})}:cme,hme=fme,dme=800,pme=16,mme=Date.now;function gme(e){var t=0,n=0;return function(){var r=mme(),i=pme-(r-n);if(n=r,i>0){if(++t>=dme)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var yme=gme,vme=hme,_me=yme,xme=_me(vme),bme=xme,wme=Gy,Sme=ime,Eme=bme;function Cme(e,t){return Eme(Sme(e,t,wme),e+"")}var Ime=Cme,Tme=D$,Pme=t1,Ame=ek,Ome=sd;function Mme(e,t,n){if(!Ome(n))return!1;var r=typeof t;return(r=="number"?Pme(n)&&Ame(t,n.length):r=="string"&&t in n)?Tme(n[t],e):!1}var R2=Mme,$me=F9,kme=Qpe,Nme=Ime,V3=R2,Lme=Nme(function(e,t){if(e==null)return[];var n=t.length;return n>1&&V3(e,t[0],t[1])?t=[]:n>2&&V3(t[0],t[1],t[2])&&(t=[t[0]]),kme(e,$me(t,1),[])}),Dme=Lme;const ik=hr(Dme);function D0(e){"@babel/helpers - typeof";return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D0(e)}function Rme(e,t){return jme(e)||Bme(e,t)||Fme(e,t)||zme()}function zme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fme(e,t){if(e){if(typeof e=="string")return G3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G3(e,t)}}function G3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function jme(e){if(Array.isArray(e))return e}function q3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function OT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q3(Object(n),!0).forEach(function(r){Ume(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ume(e,t,n){return t=Vme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vme(e){var t=Gme(e,"string");return D0(t)==="symbol"?t:String(t)}function Gme(e,t){if(D0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(D0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qme(e){return Array.isArray(e)&&no(e[0])&&no(e[1])?e.join(" ~ "):e}var Wme=function(t){var n=t.separator,r=n===void 0?" : ":n,i=t.contentStyle,o=i===void 0?{}:i,l=t.itemStyle,a=l===void 0?{}:l,h=t.labelStyle,d=h===void 0?{}:h,g=t.payload,v=t.formatter,b=t.itemSorter,I=t.wrapperClassName,T=t.labelClassName,P=t.label,$=t.labelFormatter,O=function(){if(g&&g.length){var ne={padding:0,margin:0},oe=(b?ik(g,b):g).map(function(ye,fe){if(ye.type==="none")return null;var $e=OT({display:"block",paddingTop:4,paddingBottom:4,color:ye.color||"#000"},a),ae=ye.formatter||v||qme,be=ye.value,Te=ye.name,Le=be,Ee=Te;if(ae&&Le!=null&&Ee!=null){var de=ae(be,Te,ye,fe,g);if(Array.isArray(de)){var De=Rme(de,2);Le=De[0],Ee=De[1]}else Le=de}return Re.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(fe),style:$e},no(Ee)?Re.createElement("span",{className:"recharts-tooltip-item-name"},Ee):null,no(Ee)?Re.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Re.createElement("span",{className:"recharts-tooltip-item-value"},Le),Re.createElement("span",{className:"recharts-tooltip-item-unit"},ye.unit||""))});return Re.createElement("ul",{className:"recharts-tooltip-item-list",style:ne},oe)}return null},k=OT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),R=OT({margin:0},d),j=!Wn(P),F=j?P:"",U=ir("recharts-default-tooltip",I),G=ir("recharts-tooltip-label",T);return j&&$&&g!==void 0&&g!==null&&(F=$(P,g)),Re.createElement("div",{className:U,style:k},Re.createElement("p",{className:G,style:R},Re.isValidElement(F)?F:"".concat(F)),O())},V9={exports:{}},Hme="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Xme=Hme,Zme=Xme;function G9(){}function q9(){}q9.resetWarningCache=G9;var Kme=function(){function e(r,i,o,l,a,h){if(h!==Zme){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:q9,resetWarningCache:G9};return n.PropTypes=n,n};V9.exports=Kme();var Yme=V9.exports;const _n=hr(Yme);var Jme=Object.getOwnPropertyNames,Qme=Object.getOwnPropertySymbols,ege=Object.prototype.hasOwnProperty;function W3(e,t){return function(r,i,o){return e(r,i,o)&&t(r,i,o)}}function nw(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var o=i.cache,l=o.get(n),a=o.get(r);if(l&&a)return l===r&&a===n;o.set(n,r),o.set(r,n);var h=e(n,r,i);return o.delete(n),o.delete(r),h}}function H3(e){return Jme(e).concat(Qme(e))}var W9=Object.hasOwn||function(e,t){return ege.call(e,t)};function qy(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var H9="_owner",X3=Object.getOwnPropertyDescriptor,Z3=Object.keys;function tge(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function nge(e,t){return qy(e.getTime(),t.getTime())}function K3(e,t,n){if(e.size!==t.size)return!1;for(var r={},i=e.entries(),o=0,l,a;(l=i.next())&&!l.done;){for(var h=t.entries(),d=!1,g=0;(a=h.next())&&!a.done;){var v=l.value,b=v[0],I=v[1],T=a.value,P=T[0],$=T[1];!d&&!r[g]&&(d=n.equals(b,P,o,g,e,t,n)&&n.equals(I,$,b,P,e,t,n))&&(r[g]=!0),g++}if(!d)return!1;o++}return!0}function rge(e,t,n){var r=Z3(e),i=r.length;if(Z3(t).length!==i)return!1;for(var o;i-- >0;)if(o=r[i],o===H9&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!W9(t,o)||!n.equals(e[o],t[o],o,o,e,t,n))return!1;return!0}function x_(e,t,n){var r=H3(e),i=r.length;if(H3(t).length!==i)return!1;for(var o,l,a;i-- >0;)if(o=r[i],o===H9&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!W9(t,o)||!n.equals(e[o],t[o],o,o,e,t,n)||(l=X3(e,o),a=X3(t,o),(l||a)&&(!l||!a||l.configurable!==a.configurable||l.enumerable!==a.enumerable||l.writable!==a.writable)))return!1;return!0}function ige(e,t){return qy(e.valueOf(),t.valueOf())}function oge(e,t){return e.source===t.source&&e.flags===t.flags}function Y3(e,t,n){if(e.size!==t.size)return!1;for(var r={},i=e.values(),o,l;(o=i.next())&&!o.done;){for(var a=t.values(),h=!1,d=0;(l=a.next())&&!l.done;)!h&&!r[d]&&(h=n.equals(o.value,l.value,o.value,l.value,e,t,n))&&(r[d]=!0),d++;if(!h)return!1}return!0}function age(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var sge="[object Arguments]",lge="[object Boolean]",uge="[object Date]",cge="[object Map]",fge="[object Number]",hge="[object Object]",dge="[object RegExp]",pge="[object Set]",mge="[object String]",gge=Array.isArray,J3=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Q3=Object.assign,yge=Object.prototype.toString.call.bind(Object.prototype.toString);function vge(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,i=e.areObjectsEqual,o=e.arePrimitiveWrappersEqual,l=e.areRegExpsEqual,a=e.areSetsEqual,h=e.areTypedArraysEqual;return function(g,v,b){if(g===v)return!0;if(g==null||v==null||typeof g!="object"||typeof v!="object")return g!==g&&v!==v;var I=g.constructor;if(I!==v.constructor)return!1;if(I===Object)return i(g,v,b);if(gge(g))return t(g,v,b);if(J3!=null&&J3(g))return h(g,v,b);if(I===Date)return n(g,v,b);if(I===RegExp)return l(g,v,b);if(I===Map)return r(g,v,b);if(I===Set)return a(g,v,b);var T=yge(g);return T===uge?n(g,v,b):T===dge?l(g,v,b):T===cge?r(g,v,b):T===pge?a(g,v,b):T===hge?typeof g.then!="function"&&typeof v.then!="function"&&i(g,v,b):T===sge?i(g,v,b):T===lge||T===fge||T===mge?o(g,v,b):!1}}function _ge(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?x_:tge,areDatesEqual:nge,areMapsEqual:r?W3(K3,x_):K3,areObjectsEqual:r?x_:rge,arePrimitiveWrappersEqual:ige,areRegExpsEqual:oge,areSetsEqual:r?W3(Y3,x_):Y3,areTypedArraysEqual:r?x_:age};if(n&&(i=Q3({},i,n(i))),t){var o=nw(i.areArraysEqual),l=nw(i.areMapsEqual),a=nw(i.areObjectsEqual),h=nw(i.areSetsEqual);i=Q3({},i,{areArraysEqual:o,areMapsEqual:l,areObjectsEqual:a,areSetsEqual:h})}return i}function xge(e){return function(t,n,r,i,o,l,a){return e(t,n,a)}}function bge(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,o=e.strict;if(r)return function(h,d){var g=r(),v=g.cache,b=v===void 0?t?new WeakMap:void 0:v,I=g.meta;return n(h,d,{cache:b,equals:i,meta:I,strict:o})};if(t)return function(h,d){return n(h,d,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var l={cache:void 0,equals:i,meta:void 0,strict:o};return function(h,d){return n(h,d,l)}}var wge=ud();ud({strict:!0});ud({circular:!0});ud({circular:!0,strict:!0});ud({createInternalComparator:function(){return qy}});ud({strict:!0,createInternalComparator:function(){return qy}});ud({circular:!0,createInternalComparator:function(){return qy}});ud({circular:!0,createInternalComparator:function(){return qy},strict:!0});function ud(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,o=e.strict,l=o===void 0?!1:o,a=_ge(e),h=vge(a),d=r?r(h):xge(h);return bge({circular:n,comparator:h,createState:i,equals:d,strict:l})}function Sge(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function e5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>t?(e(o),n=-1):Sge(i)};requestAnimationFrame(r)}function UA(e){"@babel/helpers - typeof";return UA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UA(e)}function Ege(e){return Pge(e)||Tge(e)||Ige(e)||Cge()}function Cge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ige(e,t){if(e){if(typeof e=="string")return t5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t5(e,t)}}function t5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pge(e){if(Array.isArray(e))return e}function Age(){var e={},t=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,a=Ege(l),h=a[0],d=a.slice(1);if(typeof h=="number"){e5(i.bind(null,d),h);return}i(h),e5(i.bind(null,d));return}UA(o)==="object"&&(e=o,t(e)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function R0(e){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R0(e)}function n5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n5(Object(n),!0).forEach(function(r){zS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zS(e,t,n){return t=Oge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oge(e){var t=Mge(e,"string");return R0(t)==="symbol"?t:String(t)}function Mge(e,t){if(R0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(R0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $ge=["Webkit","Moz","O","ms"],kge=["-webkit-","-moz-","-o-","-ms-"],Nge=["transform","transformOrigin","transition"],Lge=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},Dge=function(t){return t},Rge=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},zge=function(t,n){if(Nge.indexOf(t)===-1)return zS({},t,Number.isNaN(n)?0:n);var r=t==="transition",i=t.replace(/(\w)/,function(l){return l.toUpperCase()}),o=n;return $ge.reduce(function(l,a,h){return r&&(o=n.replace(/(transform|transform-origin)/gim,"".concat(kge[h],"$1"))),Bg(Bg({},l),{},zS({},a+i,o))},{})},e0=function(t,n){return Object.keys(n).reduce(function(r,i){return Bg(Bg({},r),{},zS({},i,t(i,n[i])))},{})},ok=function(t){return Object.keys(t).reduce(function(n,r){return Bg(Bg({},n),zge(r,n[r]))},t)},r5=function(t,n,r){return t.map(function(i){return"".concat(Rge(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Fge(e,t){return Uge(e)||jge(e,t)||X9(e,t)||Bge()}function Bge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function Uge(e){if(Array.isArray(e))return e}function Vge(e){return Wge(e)||qge(e)||X9(e)||Gge()}function Gge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X9(e,t){if(e){if(typeof e=="string")return VA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VA(e,t)}}function qge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wge(e){if(Array.isArray(e))return VA(e)}function VA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var FS=1e-4,Z9=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},K9=function(t,n){return t.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},i5=function(t,n){return function(r){var i=Z9(t,n);return K9(i,r)}},Hge=function(t,n){return function(r){var i=Z9(t,n),o=[].concat(Vge(i.map(function(l,a){return l*a}).slice(1)),[0]);return K9(o,r)}},o5=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],o=n[1],l=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,l=1,a=1;break;case"ease":i=.25,o=.1,l=.25,a=1;break;case"ease-in":i=.42,o=0,l=1,a=1;break;case"ease-out":i=.42,o=0,l=.58,a=1;break;case"ease-in-out":i=0,o=0,l=.58,a=1;break;default:{var h=n[0].split("(");if(h[0]==="cubic-bezier"&&h[1].split(")")[0].split(",").length===4){var d=h[1].split(")")[0].split(",").map(function($){return parseFloat($)}),g=Fge(d,4);i=g[0],o=g[1],l=g[2],a=g[3]}}}var v=i5(i,l),b=i5(o,a),I=Hge(i,l),T=function(O){return O>1?1:O<0?0:O},P=function(O){for(var k=O>1?1:O,R=k,j=0;j<8;++j){var F=v(R)-k,U=I(R);if(Math.abs(F-k)<FS||U<FS)return b(R);R=T(R-F/U)}return b(R)};return P.isStepper=!1,P},Xge=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,i=t.damping,o=i===void 0?8:i,l=t.dt,a=l===void 0?17:l,h=function(g,v,b){var I=-(g-v)*r,T=b*o,P=b+(I-T)*a/1e3,$=b*a/1e3+g;return Math.abs($-v)<FS&&Math.abs(P)<FS?[v,0]:[$,P]};return h.isStepper=!0,h.dt=a,h},Zge=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return o5(i);case"spring":return Xge();default:if(i.split("(")[0]==="cubic-bezier")return o5(i)}return typeof i=="function"?i:null};function z0(e){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z0(e)}function a5(e){return Jge(e)||Yge(e)||Y9(e)||Kge()}function Kge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jge(e){if(Array.isArray(e))return qA(e)}function s5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s5(Object(n),!0).forEach(function(r){GA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GA(e,t,n){return t=Qge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qge(e){var t=eye(e,"string");return z0(t)==="symbol"?t:String(t)}function eye(e,t){if(z0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(z0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tye(e,t){return iye(e)||rye(e,t)||Y9(e,t)||nye()}function nye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y9(e,t){if(e){if(typeof e=="string")return qA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qA(e,t)}}function qA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function iye(e){if(Array.isArray(e))return e}var BS=function(t,n,r){return t+(n-t)*r},WA=function(t){var n=t.from,r=t.to;return n!==r},oye=function e(t,n,r){var i=e0(function(o,l){if(WA(l)){var a=t(l.from,l.to,l.velocity),h=tye(a,2),d=h[0],g=h[1];return Bo(Bo({},l),{},{from:d,velocity:g})}return l},n);return r<1?e0(function(o,l){return WA(l)?Bo(Bo({},l),{},{velocity:BS(l.velocity,i[o].velocity,r),from:BS(l.from,i[o].from,r)}):l},n):e(t,i,r-1)};const aye=function(e,t,n,r,i){var o=Lge(e,t),l=o.reduce(function($,O){return Bo(Bo({},$),{},GA({},O,[e[O],t[O]]))},{}),a=o.reduce(function($,O){return Bo(Bo({},$),{},GA({},O,{from:e[O],velocity:0,to:t[O]}))},{}),h=-1,d,g,v=function(){return null},b=function(){return e0(function(O,k){return k.from},a)},I=function(){return!Object.values(a).filter(WA).length},T=function(O){d||(d=O);var k=O-d,R=k/n.dt;a=oye(n,a,R),i(Bo(Bo(Bo({},e),t),b())),d=O,I()||(h=requestAnimationFrame(v))},P=function(O){g||(g=O);var k=(O-g)/r,R=e0(function(F,U){return BS.apply(void 0,a5(U).concat([n(k)]))},l);if(i(Bo(Bo(Bo({},e),t),R)),k<1)h=requestAnimationFrame(v);else{var j=e0(function(F,U){return BS.apply(void 0,a5(U).concat([n(1)]))},l);i(Bo(Bo(Bo({},e),t),j))}};return v=n.isStepper?T:P,function(){return requestAnimationFrame(v),function(){cancelAnimationFrame(h)}}};function jg(e){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}var sye=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function lye(e,t){if(e==null)return{};var n=uye(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uye(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function MT(e){return dye(e)||hye(e)||fye(e)||cye()}function cye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fye(e,t){if(e){if(typeof e=="string")return HA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HA(e,t)}}function hye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dye(e){if(Array.isArray(e))return HA(e)}function HA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l5(Object(n),!0).forEach(function(r){R_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R_(e,t,n){return t=J9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J9(r.key),r)}}function mye(e,t,n){return t&&u5(e.prototype,t),n&&u5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function J9(e){var t=gye(e,"string");return jg(t)==="symbol"?t:String(t)}function gye(e,t){if(jg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XA(e,t)}function XA(e,t){return XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XA(e,t)}function vye(e){var t=_ye();return function(){var r=jS(e),i;if(t){var o=jS(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return ZA(this,i)}}function ZA(e,t){if(t&&(jg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KA(e)}function KA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _ye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jS(e){return jS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jS(e)}var pf=function(e){yye(n,e);var t=vye(n);function n(r,i){var o;pye(this,n),o=t.call(this,r,i);var l=o.props,a=l.isActive,h=l.attributeName,d=l.from,g=l.to,v=l.steps,b=l.children,I=l.duration;if(o.handleStyleChange=o.handleStyleChange.bind(KA(o)),o.changeStyle=o.changeStyle.bind(KA(o)),!a||I<=0)return o.state={style:{}},typeof b=="function"&&(o.state={style:g}),ZA(o);if(v&&v.length)o.state={style:v[0].style};else if(d){if(typeof b=="function")return o.state={style:d},ZA(o);o.state={style:h?R_({},h,d):d}}else o.state={style:{}};return o}return mye(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,l=i.canBegin;this.mounted=!0,!(!o||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,l=o.isActive,a=o.canBegin,h=o.attributeName,d=o.shouldReAnimate,g=o.to,v=o.from,b=this.state.style;if(a){if(!l){var I={style:h?R_({},h,g):g};this.state&&b&&(h&&b[h]!==g||!h&&b!==g)&&this.setState(I);return}if(!(wge(i.to,g)&&i.canBegin&&i.isActive)){var T=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var P=T||d?v:i.to;if(this.state&&b){var $={style:h?R_({},h,P):P};(h&&[h]!==P||!h&&b!==P)&&this.setState($)}this.runAnimation(au(au({},this.props),{},{from:P,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,l=i.from,a=i.to,h=i.duration,d=i.easing,g=i.begin,v=i.onAnimationEnd,b=i.onAnimationStart,I=aye(l,a,Zge(d),h,this.changeStyle),T=function(){o.stopJSAnimation=I()};this.manager.start([b,g,T,h,v])}},{key:"runStepAnimation",value:function(i){var o=this,l=i.steps,a=i.begin,h=i.onAnimationStart,d=l[0],g=d.style,v=d.duration,b=v===void 0?0:v,I=function(P,$,O){if(O===0)return P;var k=$.duration,R=$.easing,j=R===void 0?"ease":R,F=$.style,U=$.properties,G=$.onAnimationEnd,Z=O>0?l[O-1]:$,ne=U||Object.keys(F);if(typeof j=="function"||j==="spring")return[].concat(MT(P),[o.runJSAnimation.bind(o,{from:Z.style,to:F,duration:k,easing:j}),k]);var oe=r5(ne,k,j),ye=au(au(au({},Z.style),F),{},{transition:oe});return[].concat(MT(P),[ye,k,G]).filter(Dge)};return this.manager.start([h].concat(MT(l.reduce(I,[g,Math.max(b,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Age());var o=i.begin,l=i.duration,a=i.attributeName,h=i.to,d=i.easing,g=i.onAnimationStart,v=i.onAnimationEnd,b=i.steps,I=i.children,T=this.manager;if(this.unSubscribe=T.subscribe(this.handleStyleChange),typeof d=="function"||typeof I=="function"||d==="spring"){this.runJSAnimation(i);return}if(b.length>1){this.runStepAnimation(i);return}var P=a?R_({},a,h):h,$=r5(Object.keys(P),l,d);T.start([g,o,au(au({},P),{},{transition:$}),l,v])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var l=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var h=lye(i,sye),d=D.Children.count(o),g=ok(this.state.style);if(typeof o=="function")return o(g);if(!a||d===0||l<=0)return o;var v=function(I){var T=I.props,P=T.style,$=P===void 0?{}:P,O=T.className,k=D.cloneElement(I,au(au({},h),{},{style:au(au({},$),g),className:O}));return k};return d===1?v(D.Children.only(o)):Re.createElement("div",null,D.Children.map(o,function(b){return v(b)}))}}]),n}(D.PureComponent);pf.displayName="Animate";pf.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};pf.propTypes={from:_n.oneOfType([_n.object,_n.string]),to:_n.oneOfType([_n.object,_n.string]),attributeName:_n.string,duration:_n.number,begin:_n.number,easing:_n.oneOfType([_n.string,_n.func]),steps:_n.arrayOf(_n.shape({duration:_n.number.isRequired,style:_n.object.isRequired,easing:_n.oneOfType([_n.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),_n.func]),properties:_n.arrayOf("string"),onAnimationEnd:_n.func})),children:_n.oneOfType([_n.node,_n.func]),isActive:_n.bool,canBegin:_n.bool,onAnimationEnd:_n.func,shouldReAnimate:_n.bool,onAnimationStart:_n.func,onAnimationReStart:_n.func};Number.isFinite===void 0&&(Number.isFinite=function(e){return typeof e=="number"&&isFinite(e)});_n.object,_n.object,_n.object,_n.element;_n.object,_n.object,_n.object,_n.oneOfType([_n.array,_n.element]),_n.any;function F0(e){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F0(e)}function rw(e,t,n){return t=xye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xye(e){var t=bye(e,"string");return F0(t)==="symbol"?t:String(t)}function bye(e,t){if(F0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(F0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b_="recharts-tooltip-wrapper",wye={visibility:"hidden"};function Sye(e){var t,n=e.coordinate,r=e.translateX,i=e.translateY;return ir(b_,(t={},rw(t,"".concat(b_,"-right"),It(r)&&n&&It(n.x)&&r>=n.x),rw(t,"".concat(b_,"-left"),It(r)&&n&&It(n.x)&&r<n.x),rw(t,"".concat(b_,"-bottom"),It(i)&&n&&It(n.y)&&i>=n.y),rw(t,"".concat(b_,"-top"),It(i)&&n&&It(n.y)&&i<n.y),t))}function c5(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,o=e.position,l=e.reverseDirection,a=e.tooltipDimension,h=e.viewBox,d=e.viewBoxDimension;if(o&&It(o[r]))return o[r];var g=n[r]-a-i,v=n[r]+i;if(t[r])return l[r]?g:v;if(l[r]){var b=g,I=h[r];return b<I?Math.max(v,h[r]):Math.max(g,h[r])}var T=v+a,P=h[r]+d;return T>P?Math.max(g,h[r]):Math.max(v,h[r])}function Eye(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return ok({transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")})}function Cye(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipBox,a=e.useTranslate3d,h=e.viewBox,d,g,v;return l.height>0&&l.width>0&&n?(g=c5({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l.width,viewBox:h,viewBoxDimension:h.width}),v=c5({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l.height,viewBox:h,viewBoxDimension:h.height}),d=Eye({translateX:g,translateY:v,useTranslate3d:a})):d=wye,{cssProperties:d,cssClasses:Sye({translateX:g,translateY:v,coordinate:n})}}function Ug(e){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ug(e)}function f5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $T(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f5(Object(n),!0).forEach(function(r){zw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Iye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q9(r.key),r)}}function Tye(e,t,n){return t&&h5(e.prototype,t),n&&h5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YA(e,t)}function YA(e,t){return YA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YA(e,t)}function Aye(e){var t=Mye();return function(){var r=US(e),i;if(t){var o=US(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Oye(this,i)}}function Oye(e,t){if(t&&(Ug(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rw(e)}function Rw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function US(e){return US=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},US(e)}function zw(e,t,n){return t=Q9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q9(e){var t=$ye(e,"string");return Ug(t)==="symbol"?t:String(t)}function $ye(e,t){if(Ug(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ug(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d5=1,kye=function(e){Pye(n,e);var t=Aye(n);function n(){var r;Iye(this,n);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=t.call.apply(t,[this].concat(o)),zw(Rw(r),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),zw(Rw(r),"lastBoundingBox",{width:-1,height:-1}),zw(Rw(r),"handleKeyDown",function(a){if(a.key==="Escape"){var h,d,g,v;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(h=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&h!==void 0?h:0,y:(g=(v=r.props.coordinate)===null||v===void 0?void 0:v.y)!==null&&g!==void 0?g:0}})}}),r}return Tye(n,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.lastBoundingBox.width)>d5||Math.abs(i.height-this.lastBoundingBox.height)>d5)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height)}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,o=this.props,l=o.active,a=o.allowEscapeViewBox,h=o.animationDuration,d=o.animationEasing,g=o.children,v=o.coordinate,b=o.hasPayload,I=o.isAnimationActive,T=o.offset,P=o.position,$=o.reverseDirection,O=o.useTranslate3d,k=o.viewBox,R=o.wrapperStyle,j=Cye({allowEscapeViewBox:a,coordinate:v,offsetTopLeft:T,position:P,reverseDirection:$,tooltipBox:{height:this.lastBoundingBox.height,width:this.lastBoundingBox.width},useTranslate3d:O,viewBox:k}),F=j.cssClasses,U=j.cssProperties,G=$T($T($T({},I&&l&&ok({transition:"transform ".concat(h,"ms ").concat(d)})),U),{},{pointerEvents:"none",visibility:!this.state.dismissed&&l&&b?"visible":"hidden",position:"absolute",top:0,left:0},R);return Re.createElement("div",{tabIndex:-1,role:"dialog",className:F,style:G,ref:function(ne){i.wrapperNode=ne}},g)}}]),n}(D.PureComponent),Nye=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},tf={isSsr:Nye(),get:function(t){return tf[t]},set:function(t,n){if(typeof t=="string")tf[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(i){tf[i]=t[i]})}}};function Vg(e){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(e)}function p5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function m5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p5(Object(n),!0).forEach(function(r){ak(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eU(r.key),r)}}function Dye(e,t,n){return t&&g5(e.prototype,t),n&&g5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JA(e,t)}function JA(e,t){return JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JA(e,t)}function zye(e){var t=jye();return function(){var r=VS(e),i;if(t){var o=VS(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Fye(this,i)}}function Fye(e,t){if(t&&(Vg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bye(e)}function Bye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function VS(e){return VS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},VS(e)}function ak(e,t,n){return t=eU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eU(e){var t=Uye(e,"string");return Vg(t)==="symbol"?t:String(t)}function Uye(e,t){if(Vg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vye(e){return e.dataKey}function Gye(e,t){return Re.isValidElement(e)?Re.cloneElement(e,t):typeof e=="function"?Re.createElement(e,t):Re.createElement(Wme,t)}var tp=function(e){Rye(n,e);var t=zye(n);function n(){return Lye(this,n),t.apply(this,arguments)}return Dye(n,[{key:"render",value:function(){var i=this.props,o=i.active,l=i.allowEscapeViewBox,a=i.animationDuration,h=i.animationEasing,d=i.content,g=i.coordinate,v=i.filterNull,b=i.isAnimationActive,I=i.offset,T=i.payload,P=i.payloadUniqBy,$=i.position,O=i.reverseDirection,k=i.useTranslate3d,R=i.viewBox,j=i.wrapperStyle,F=T??[];v&&F.length&&(F=L9(T.filter(function(G){return G.value!=null}),P,Vye));var U=F.length>0;return Re.createElement(kye,{allowEscapeViewBox:l,animationDuration:a,animationEasing:h,isAnimationActive:b,active:o,coordinate:g,hasPayload:U,offset:I,position:$,reverseDirection:O,useTranslate3d:k,viewBox:R,wrapperStyle:j},Gye(d,m5(m5({},this.props),{},{payload:F})))}}]),n}(D.PureComponent);ak(tp,"displayName","Tooltip");ak(tp,"defaultProps",{allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!tf.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var qye=Ec,Wye=function(){return qye.Date.now()},Hye=Wye,Xye=/\s/;function Zye(e){for(var t=e.length;t--&&Xye.test(e.charAt(t)););return t}var Kye=Zye,Yye=Kye,Jye=/^\s+/;function Qye(e){return e&&e.slice(0,Yye(e)+1).replace(Jye,"")}var eve=Qye,tve=eve,y5=sd,nve=Ry,v5=NaN,rve=/^[-+]0x[0-9a-f]+$/i,ive=/^0b[01]+$/i,ove=/^0o[0-7]+$/i,ave=parseInt;function sve(e){if(typeof e=="number")return e;if(nve(e))return v5;if(y5(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=y5(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=tve(e);var n=ive.test(e);return n||ove.test(e)?ave(e.slice(2),n?2:8):rve.test(e)?v5:+e}var tU=sve,lve=sd,kT=Hye,_5=tU,uve="Expected a function",cve=Math.max,fve=Math.min;function hve(e,t,n){var r,i,o,l,a,h,d=0,g=!1,v=!1,b=!0;if(typeof e!="function")throw new TypeError(uve);t=_5(t)||0,lve(n)&&(g=!!n.leading,v="maxWait"in n,o=v?cve(_5(n.maxWait)||0,t):o,b="trailing"in n?!!n.trailing:b);function I(U){var G=r,Z=i;return r=i=void 0,d=U,l=e.apply(Z,G),l}function T(U){return d=U,a=setTimeout(O,t),g?I(U):l}function P(U){var G=U-h,Z=U-d,ne=t-G;return v?fve(ne,o-Z):ne}function $(U){var G=U-h,Z=U-d;return h===void 0||G>=t||G<0||v&&Z>=o}function O(){var U=kT();if($(U))return k(U);a=setTimeout(O,P(U))}function k(U){return a=void 0,b&&r?I(U):(r=i=void 0,l)}function R(){a!==void 0&&clearTimeout(a),d=0,r=h=i=a=void 0}function j(){return a===void 0?l:k(kT())}function F(){var U=kT(),G=$(U);if(r=arguments,i=this,h=U,G){if(a===void 0)return T(h);if(v)return clearTimeout(a),a=setTimeout(O,t),I(h)}return a===void 0&&(a=setTimeout(O,t)),l}return F.cancel=R,F.flush=j,F}var dve=hve,pve=dve,mve=sd,gve="Expected a function";function yve(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(gve);return mve(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),pve(e,t,{leading:r,maxWait:t,trailing:i})}var vve=yve;const nU=hr(vve);function B0(e){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B0(e)}function x5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x5(Object(n),!0).forEach(function(r){_ve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _ve(e,t,n){return t=xve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xve(e){var t=bve(e,"string");return B0(t)==="symbol"?t:String(t)}function bve(e,t){if(B0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(B0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wve(e,t){return Ive(e)||Cve(e,t)||Eve(e,t)||Sve()}function Sve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eve(e,t){if(e){if(typeof e=="string")return b5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b5(e,t)}}function b5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cve(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function Ive(e){if(Array.isArray(e))return e}var Tve=D.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=e.width,l=o===void 0?"100%":o,a=e.height,h=a===void 0?"100%":a,d=e.minWidth,g=d===void 0?0:d,v=e.minHeight,b=e.maxHeight,I=e.children,T=e.debounce,P=T===void 0?0:T,$=e.id,O=e.className,k=e.onResize,R=e.style,j=R===void 0?{}:R,F=D.useRef(null),U=D.useRef();U.current=k,D.useImperativeHandle(t,function(){return F});var G=D.useState({containerWidth:i.width,containerHeight:i.height}),Z=wve(G,2),ne=Z[0],oe=Z[1],ye=D.useCallback(function($e,ae){oe(function(be){var Te=Math.round($e),Le=Math.round(ae);return be.containerWidth===Te&&be.containerHeight===Le?be:{containerWidth:Te,containerHeight:Le}})},[]);D.useEffect(function(){var $e=function(de){var De,He=de[0].contentRect,je=He.width,et=He.height;ye(je,et),(De=U.current)===null||De===void 0||De.call(U,je,et)};P>0&&($e=nU($e,P,{trailing:!0,leading:!1}));var ae=new ResizeObserver($e),be=F.current.getBoundingClientRect(),Te=be.width,Le=be.height;return ye(Te,Le),ae.observe(F.current),function(){ae.disconnect()}},[ye,P]);var fe=D.useMemo(function(){var $e=ne.containerWidth,ae=ne.containerHeight;if($e<0||ae<0)return null;lp(ep(l)||ep(h),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,h),lp(!n||n>0,"The aspect(%s) must be greater than zero.",n);var be=ep(l)?$e:l,Te=ep(h)?ae:h;n&&n>0&&(be?Te=be/n:Te&&(be=Te*n),b&&Te>b&&(Te=b)),lp(be>0||Te>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,be,Te,l,h,g,v,n);var Le=!Array.isArray(I)&&bA.isElement(I)&&ef(I.type).endsWith("Chart");return Re.Children.map(I,function(Ee){return bA.isElement(Ee)?D.cloneElement(Ee,iw({width:be,height:Te},Le?{style:iw({height:"100%",width:"100%",maxHeight:Te,maxWidth:be},Ee.props.style)}:{})):Ee})},[n,I,h,b,v,g,ne,l]);return Re.createElement("div",{id:$?"".concat($):void 0,className:ir("recharts-responsive-container",O),style:iw(iw({},j),{},{width:l,height:h,minWidth:g,minHeight:v,maxHeight:b}),ref:F},fe)}),rU=function(t){return null};rU.displayName="Cell";function j0(e){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j0(e)}function w5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w5(Object(n),!0).forEach(function(r){Pve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pve(e,t,n){return t=Ave(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ave(e){var t=Ove(e,"string");return j0(t)==="symbol"?t:String(t)}function Ove(e,t){if(j0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(j0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jm={widthCache:{},cacheCount:0},Mve=2e3,$ve={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},S5="recharts_measurement_span";function kve(e){var t=QA({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var t0=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||tf.isSsr)return{width:0,height:0};var r=kve(n),i=JSON.stringify({text:t,copyStyle:r});if(jm.widthCache[i])return jm.widthCache[i];try{var o=document.getElementById(S5);o||(o=document.createElement("span"),o.setAttribute("id",S5),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var l=QA(QA({},$ve),r);Object.assign(o.style,l),o.textContent="".concat(t);var a=o.getBoundingClientRect(),h={width:a.width,height:a.height};return jm.widthCache[i]=h,++jm.cacheCount>Mve&&(jm.cacheCount=0,jm.widthCache={}),h}catch{return{width:0,height:0}}},Nve=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function U0(e){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U0(e)}function GS(e,t){return zve(e)||Rve(e,t)||Dve(e,t)||Lve()}function Lve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dve(e,t){if(e){if(typeof e=="string")return E5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E5(e,t)}}function E5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rve(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function zve(e){if(Array.isArray(e))return e}function Fve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jve(r.key),r)}}function Bve(e,t,n){return t&&C5(e.prototype,t),n&&C5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jve(e){var t=Uve(e,"string");return U0(t)==="symbol"?t:String(t)}function Uve(e,t){if(U0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(U0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,T5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Vve=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Gve=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,iU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},qve=Object.keys(iU),sg="NaN";function Wve(e,t){return e*iU[t]}var ow=function(){function e(t,n){Fve(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Vve.test(n)&&(this.num=NaN,this.unit=""),qve.includes(n)&&(this.num=Wve(t,n),this.unit="px")}return Bve(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Gve.exec(n))!==null&&r!==void 0?r:[],o=GS(i,3),l=o[1],a=o[2];return new e(parseFloat(l),a??"")}}]),e}();function oU(e){if(e.includes(sg))return sg;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=I5.exec(t))!==null&&n!==void 0?n:[],i=GS(r,4),o=i[1],l=i[2],a=i[3],h=ow.parse(o??""),d=ow.parse(a??""),g=l==="*"?h.multiply(d):h.divide(d);if(g.isNaN())return sg;t=t.replace(I5,g.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var v,b=(v=T5.exec(t))!==null&&v!==void 0?v:[],I=GS(b,4),T=I[1],P=I[2],$=I[3],O=ow.parse(T??""),k=ow.parse($??""),R=P==="+"?O.add(k):O.subtract(k);if(R.isNaN())return sg;t=t.replace(T5,R.toString())}return t}var P5=/\(([^()]*)\)/;function Hve(e){for(var t=e;t.includes("(");){var n=P5.exec(t),r=GS(n,2),i=r[1];t=t.replace(P5,oU(i))}return t}function Xve(e){var t=e.replace(/\s+/g,"");return t=Hve(t),t=oU(t),t}function Zve(e){try{return Xve(e)}catch{return sg}}function NT(e){var t=Zve(e.slice(5,-1));return t===sg?"":t}var Kve=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Yve=["dx","dy","angle","className","breakAll"];function eO(){return eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eO.apply(this,arguments)}function A5(e,t){if(e==null)return{};var n=Jve(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jve(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function O5(e,t){return n_e(e)||t_e(e,t)||e_e(e,t)||Qve()}function Qve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e_e(e,t){if(e){if(typeof e=="string")return M5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M5(e,t)}}function M5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function n_e(e){if(Array.isArray(e))return e}var aU=/[ \f\n\r\t\v\u2028\u2029]+/,sU=function(t){var n=t.children,r=t.breakAll,i=t.style;try{var o=[];Wn(n)||(r?o=n.toString().split(""):o=n.toString().split(aU));var l=o.map(function(h){return{word:h,width:t0(h,i).width}}),a=r?0:t0("",i).width;return{wordsWithComputedWidth:l,spaceWidth:a}}catch{return null}},r_e=function(t,n,r,i,o){var l=t.maxLines,a=t.children,h=t.style,d=t.breakAll,g=It(l),v=a,b=function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return be.reduce(function(Te,Le){var Ee=Le.word,de=Le.width,De=Te[Te.length-1];if(De&&(i==null||o||De.width+de+r<Number(i)))De.words.push(Ee),De.width+=de+r;else{var He={words:[Ee],width:de};Te.push(He)}return Te},[])},I=b(n),T=function(be){return be.reduce(function(Te,Le){return Te.width>Le.width?Te:Le})};if(!g)return I;for(var P="",$=function(be){var Te=v.slice(0,be),Le=sU({breakAll:d,style:h,children:Te+P}).wordsWithComputedWidth,Ee=b(Le),de=Ee.length>l||T(Ee).width>Number(i);return[de,Ee]},O=0,k=v.length-1,R=0,j;O<=k&&R<=v.length-1;){var F=Math.floor((O+k)/2),U=F-1,G=$(U),Z=O5(G,2),ne=Z[0],oe=Z[1],ye=$(F),fe=O5(ye,1),$e=fe[0];if(!ne&&!$e&&(O=F+1),ne&&$e&&(k=F-1),!ne&&$e){j=oe;break}R++}return j||I},$5=function(t){var n=Wn(t)?[]:t.toString().split(aU);return[{words:n}]},i_e=function(t){var n=t.width,r=t.scaleToFit,i=t.children,o=t.style,l=t.breakAll,a=t.maxLines;if((n||r)&&!tf.isSsr){var h,d,g=sU({breakAll:l,children:i,style:o});if(g){var v=g.wordsWithComputedWidth,b=g.spaceWidth;h=v,d=b}else return $5(i);return r_e({breakAll:l,children:i,maxLines:a,style:o},h,d,n,r)}return $5(i)},k5="#808080",qS=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,o=i===void 0?0:i,l=t.lineHeight,a=l===void 0?"1em":l,h=t.capHeight,d=h===void 0?"0.71em":h,g=t.scaleToFit,v=g===void 0?!1:g,b=t.textAnchor,I=b===void 0?"start":b,T=t.verticalAnchor,P=T===void 0?"end":T,$=t.fill,O=$===void 0?k5:$,k=A5(t,Kve),R=D.useMemo(function(){return i_e({breakAll:k.breakAll,children:k.children,maxLines:k.maxLines,scaleToFit:v,style:k.style,width:k.width})},[k.breakAll,k.children,k.maxLines,v,k.style,k.width]),j=k.dx,F=k.dy,U=k.angle,G=k.className,Z=k.breakAll,ne=A5(k,Yve);if(!no(r)||!no(o))return null;var oe=r+(It(j)?j:0),ye=o+(It(F)?F:0),fe;switch(P){case"start":fe=NT("calc(".concat(d,")"));break;case"middle":fe=NT("calc(".concat((R.length-1)/2," * -").concat(a," + (").concat(d," / 2))"));break;default:fe=NT("calc(".concat(R.length-1," * -").concat(a,")"));break}var $e=[];if(v){var ae=R[0].width,be=k.width;$e.push("scale(".concat((It(be)?be/ae:1)/ae,")"))}return U&&$e.push("rotate(".concat(U,", ").concat(oe,", ").concat(ye,")")),$e.length&&(ne.transform=$e.join(" ")),Re.createElement("text",eO({},jn(ne,!0),{x:oe,y:ye,className:ir("recharts-text",G),textAnchor:I,fill:O.includes("url")?k5:O}),R.map(function(Te,Le){var Ee=Te.words.join(Z?"":" ");return Re.createElement("tspan",{x:oe,dy:Le===0?fe:a,key:Ee},Ee)}))};function Nh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function o_e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sk(e){let t,n,r;e.length!==2?(t=Nh,n=(a,h)=>Nh(e(a),h),r=(a,h)=>e(a)-h):(t=e===Nh||e===o_e?e:a_e,n=e,r=e);function i(a,h,d=0,g=a.length){if(d<g){if(t(h,h)!==0)return g;do{const v=d+g>>>1;n(a[v],h)<0?d=v+1:g=v}while(d<g)}return d}function o(a,h,d=0,g=a.length){if(d<g){if(t(h,h)!==0)return g;do{const v=d+g>>>1;n(a[v],h)<=0?d=v+1:g=v}while(d<g)}return d}function l(a,h,d=0,g=a.length){const v=i(a,h,d,g-1);return v>d&&r(a[v-1],h)>-r(a[v],h)?v-1:v}return{left:i,center:l,right:o}}function a_e(){return 0}function lU(e){return e===null?NaN:+e}function*s_e(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const l_e=sk(Nh),u_e=l_e.right;sk(lU).center;const n1=u_e;class N5 extends Map{constructor(t,n=h_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(L5(this,t))}has(t){return super.has(L5(this,t))}set(t,n){return super.set(c_e(this,t),n)}delete(t){return super.delete(f_e(this,t))}}function L5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function c_e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function f_e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function h_e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function d_e(e=Nh){if(e===Nh)return uU;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function uU(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const p_e=Math.sqrt(50),m_e=Math.sqrt(10),g_e=Math.sqrt(2);function WS(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=p_e?10:o>=m_e?5:o>=g_e?2:1;let a,h,d;return i<0?(d=Math.pow(10,-i)/l,a=Math.round(e*d),h=Math.round(t*d),a/d<e&&++a,h/d>t&&--h,d=-d):(d=Math.pow(10,i)*l,a=Math.round(e/d),h=Math.round(t/d),a*d<e&&++a,h*d>t&&--h),h<a&&.5<=n&&n<2?WS(e,t,n*2):[a,h,d]}function tO(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,l]=r?WS(t,e,n):WS(e,t,n);if(!(o>=i))return[];const a=o-i+1,h=new Array(a);if(r)if(l<0)for(let d=0;d<a;++d)h[d]=(o-d)/-l;else for(let d=0;d<a;++d)h[d]=(o-d)*l;else if(l<0)for(let d=0;d<a;++d)h[d]=(i+d)/-l;else for(let d=0;d<a;++d)h[d]=(i+d)*l;return h}function nO(e,t,n){return t=+t,e=+e,n=+n,WS(e,t,n)[2]}function rO(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?nO(t,e,n):nO(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function D5(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function R5(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function cU(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?uU:d_e(i);r>n;){if(r-n>600){const h=r-n+1,d=t-n+1,g=Math.log(h),v=.5*Math.exp(2*g/3),b=.5*Math.sqrt(g*v*(h-v)/h)*(d-h/2<0?-1:1),I=Math.max(n,Math.floor(t-d*v/h+b)),T=Math.min(r,Math.floor(t+(h-d)*v/h+b));cU(e,t,I,T,i)}const o=e[t];let l=n,a=r;for(w_(e,n,t),i(e[r],o)>0&&w_(e,n,r);l<a;){for(w_(e,l,a),++l,--a;i(e[l],o)<0;)++l;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?w_(e,n,a):(++a,w_(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function w_(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y_e(e,t,n){if(e=Float64Array.from(s_e(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return R5(e);if(t>=1)return D5(e);var r,i=(r-1)*t,o=Math.floor(i),l=D5(cU(e,o).subarray(0,o+1)),a=R5(e.subarray(o+1));return l+(a-l)*(i-o)}}function v_e(e,t,n=lU){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),l=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return l+(a-l)*(i-o)}}function __e(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Ul(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Df(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const iO=Symbol("implicit");function lk(){var e=new N5,t=[],n=[],r=iO;function i(o){let l=e.get(o);if(l===void 0){if(r!==iO)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new N5;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return lk(t,n).unknown(r)},Ul.apply(i,arguments),i}function V0(){var e=lk().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,l,a=!1,h=0,d=0,g=.5;delete e.unknown;function v(){var b=t().length,I=i<r,T=I?i:r,P=I?r:i;o=(P-T)/Math.max(1,b-h+d*2),a&&(o=Math.floor(o)),T+=(P-T-o*(b-h))*g,l=o*(1-h),a&&(T=Math.round(T),l=Math.round(l));var $=__e(b).map(function(O){return T+o*O});return n(I?$.reverse():$)}return e.domain=function(b){return arguments.length?(t(b),v()):t()},e.range=function(b){return arguments.length?([r,i]=b,r=+r,i=+i,v()):[r,i]},e.rangeRound=function(b){return[r,i]=b,r=+r,i=+i,a=!0,v()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(b){return arguments.length?(a=!!b,v()):a},e.padding=function(b){return arguments.length?(h=Math.min(1,d=+b),v()):h},e.paddingInner=function(b){return arguments.length?(h=Math.min(1,b),v()):h},e.paddingOuter=function(b){return arguments.length?(d=+b,v()):d},e.align=function(b){return arguments.length?(g=Math.max(0,Math.min(1,b)),v()):g},e.copy=function(){return V0(t(),[r,i]).round(a).paddingInner(h).paddingOuter(d).align(g)},Ul.apply(v(),arguments)}function fU(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fU(t())},e}function n0(){return fU(V0.apply(null,arguments).paddingInner(1))}function uk(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hU(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function r1(){}var G0=.7,HS=1/G0,bg="\\s*([+-]?\\d+)\\s*",q0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x_e=/^#([0-9a-f]{3,8})$/,b_e=new RegExp(`^rgb\\(${bg},${bg},${bg}\\)$`),w_e=new RegExp(`^rgb\\(${cc},${cc},${cc}\\)$`),S_e=new RegExp(`^rgba\\(${bg},${bg},${bg},${q0}\\)$`),E_e=new RegExp(`^rgba\\(${cc},${cc},${cc},${q0}\\)$`),C_e=new RegExp(`^hsl\\(${q0},${cc},${cc}\\)$`),I_e=new RegExp(`^hsla\\(${q0},${cc},${cc},${q0}\\)$`),z5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uk(r1,W0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:F5,formatHex:F5,formatHex8:T_e,formatHsl:P_e,formatRgb:B5,toString:B5});function F5(){return this.rgb().formatHex()}function T_e(){return this.rgb().formatHex8()}function P_e(){return dU(this).formatHsl()}function B5(){return this.rgb().formatRgb()}function W0(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=x_e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?j5(t):n===3?new ts(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?aw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?aw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=b_e.exec(e))?new ts(t[1],t[2],t[3],1):(t=w_e.exec(e))?new ts(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=S_e.exec(e))?aw(t[1],t[2],t[3],t[4]):(t=E_e.exec(e))?aw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=C_e.exec(e))?G5(t[1],t[2]/100,t[3]/100,1):(t=I_e.exec(e))?G5(t[1],t[2]/100,t[3]/100,t[4]):z5.hasOwnProperty(e)?j5(z5[e]):e==="transparent"?new ts(NaN,NaN,NaN,0):null}function j5(e){return new ts(e>>16&255,e>>8&255,e&255,1)}function aw(e,t,n,r){return r<=0&&(e=t=n=NaN),new ts(e,t,n,r)}function A_e(e){return e instanceof r1||(e=W0(e)),e?(e=e.rgb(),new ts(e.r,e.g,e.b,e.opacity)):new ts}function oO(e,t,n,r){return arguments.length===1?A_e(e):new ts(e,t,n,r??1)}function ts(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}uk(ts,oO,hU(r1,{brighter(e){return e=e==null?HS:Math.pow(HS,e),new ts(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?G0:Math.pow(G0,e),new ts(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ts(up(this.r),up(this.g),up(this.b),XS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:U5,formatHex:U5,formatHex8:O_e,formatRgb:V5,toString:V5}));function U5(){return`#${np(this.r)}${np(this.g)}${np(this.b)}`}function O_e(){return`#${np(this.r)}${np(this.g)}${np(this.b)}${np((isNaN(this.opacity)?1:this.opacity)*255)}`}function V5(){const e=XS(this.opacity);return`${e===1?"rgb(":"rgba("}${up(this.r)}, ${up(this.g)}, ${up(this.b)}${e===1?")":`, ${e})`}`}function XS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function up(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function np(e){return e=up(e),(e<16?"0":"")+e.toString(16)}function G5(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mu(e,t,n,r)}function dU(e){if(e instanceof mu)return new mu(e.h,e.s,e.l,e.opacity);if(e instanceof r1||(e=W0(e)),!e)return new mu;if(e instanceof mu)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,a=o-i,h=(o+i)/2;return a?(t===o?l=(n-r)/a+(n<r)*6:n===o?l=(r-t)/a+2:l=(t-n)/a+4,a/=h<.5?o+i:2-o-i,l*=60):a=h>0&&h<1?0:l,new mu(l,a,h,e.opacity)}function M_e(e,t,n,r){return arguments.length===1?dU(e):new mu(e,t,n,r??1)}function mu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}uk(mu,M_e,hU(r1,{brighter(e){return e=e==null?HS:Math.pow(HS,e),new mu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?G0:Math.pow(G0,e),new mu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ts(LT(e>=240?e-240:e+120,i,r),LT(e,i,r),LT(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new mu(q5(this.h),sw(this.s),sw(this.l),XS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=XS(this.opacity);return`${e===1?"hsl(":"hsla("}${q5(this.h)}, ${sw(this.s)*100}%, ${sw(this.l)*100}%${e===1?")":`, ${e})`}`}}));function q5(e){return e=(e||0)%360,e<0?e+360:e}function sw(e){return Math.max(0,Math.min(1,e||0))}function LT(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ck=e=>()=>e;function $_e(e,t){return function(n){return e+n*t}}function k_e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function N_e(e){return(e=+e)==1?pU:function(t,n){return n-t?k_e(t,n,e):ck(isNaN(t)?n:t)}}function pU(e,t){var n=t-e;return n?$_e(e,n):ck(isNaN(e)?t:e)}const W5=function e(t){var n=N_e(t);function r(i,o){var l=n((i=oO(i)).r,(o=oO(o)).r),a=n(i.g,o.g),h=n(i.b,o.b),d=pU(i.opacity,o.opacity);return function(g){return i.r=l(g),i.g=a(g),i.b=h(g),i.opacity=d(g),i+""}}return r.gamma=e,r}(1);function L_e(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function D_e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function R_e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=Wy(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(a){for(l=0;l<r;++l)o[l]=i[l](a);return o}}function z_e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ZS(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function F_e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Wy(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var aO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,DT=new RegExp(aO.source,"g");function B_e(e){return function(){return e}}function j_e(e){return function(t){return e(t)+""}}function U_e(e,t){var n=aO.lastIndex=DT.lastIndex=0,r,i,o,l=-1,a=[],h=[];for(e=e+"",t=t+"";(r=aO.exec(e))&&(i=DT.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[l]?a[l]+=o:a[++l]=o),(r=r[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,h.push({i:l,x:ZS(r,i)})),n=DT.lastIndex;return n<t.length&&(o=t.slice(n),a[l]?a[l]+=o:a[++l]=o),a.length<2?h[0]?j_e(h[0].x):B_e(t):(t=h.length,function(d){for(var g=0,v;g<t;++g)a[(v=h[g]).i]=v.x(d);return a.join("")})}function Wy(e,t){var n=typeof t,r;return t==null||n==="boolean"?ck(t):(n==="number"?ZS:n==="string"?(r=W0(t))?(t=r,W5):U_e:t instanceof W0?W5:t instanceof Date?z_e:D_e(t)?L_e:Array.isArray(t)?R_e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?F_e:ZS)(e,t)}function fk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function V_e(e,t){t===void 0&&(t=e,e=Wy);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(l){var a=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return o[a](l-a)}}function G_e(e){return function(){return e}}function KS(e){return+e}var H5=[0,1];function $a(e){return e}function sO(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:G_e(isNaN(t)?NaN:.5)}function q_e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function W_e(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=sO(i,r),o=n(l,o)):(r=sO(r,i),o=n(o,l)),function(a){return o(r(a))}}function H_e(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=sO(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(a){var h=n1(e,a,1,r)-1;return o[h](i[h](a))}}function i1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function z2(){var e=H5,t=H5,n=Wy,r,i,o,l=$a,a,h,d;function g(){var b=Math.min(e.length,t.length);return l!==$a&&(l=q_e(e[0],e[b-1])),a=b>2?H_e:W_e,h=d=null,v}function v(b){return b==null||isNaN(b=+b)?o:(h||(h=a(e.map(r),t,n)))(r(l(b)))}return v.invert=function(b){return l(i((d||(d=a(t,e.map(r),ZS)))(b)))},v.domain=function(b){return arguments.length?(e=Array.from(b,KS),g()):e.slice()},v.range=function(b){return arguments.length?(t=Array.from(b),g()):t.slice()},v.rangeRound=function(b){return t=Array.from(b),n=fk,g()},v.clamp=function(b){return arguments.length?(l=b?!0:$a,g()):l!==$a},v.interpolate=function(b){return arguments.length?(n=b,g()):n},v.unknown=function(b){return arguments.length?(o=b,v):o},function(b,I){return r=b,i=I,g()}}function hk(){return z2()($a,$a)}function X_e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function YS(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Gg(e){return e=YS(Math.abs(e)),e?e[1]:NaN}function Z_e(e,t){return function(n,r){for(var i=n.length,o=[],l=0,a=e[0],h=0;i>0&&a>0&&(h+a+1>r&&(a=Math.max(1,r-h)),o.push(n.substring(i-=a,i+a)),!((h+=a+1)>r));)a=e[l=(l+1)%e.length];return o.reverse().join(t)}}function K_e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Y_e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function H0(e){if(!(t=Y_e.exec(e)))throw new Error("invalid format: "+e);var t;return new dk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}H0.prototype=dk.prototype;function dk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}dk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function J_e(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var mU;function Q_e(e,t){var n=YS(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(mU=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+YS(e,Math.max(0,t+o-1))[0]}function X5(e,t){var n=YS(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Z5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:X_e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>X5(e*100,t),r:X5,s:Q_e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function K5(e){return e}var Y5=Array.prototype.map,J5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function e0e(e){var t=e.grouping===void 0||e.thousands===void 0?K5:Z_e(Y5.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?K5:K_e(Y5.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function d(v){v=H0(v);var b=v.fill,I=v.align,T=v.sign,P=v.symbol,$=v.zero,O=v.width,k=v.comma,R=v.precision,j=v.trim,F=v.type;F==="n"?(k=!0,F="g"):Z5[F]||(R===void 0&&(R=12),j=!0,F="g"),($||b==="0"&&I==="=")&&($=!0,b="0",I="=");var U=P==="$"?n:P==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",G=P==="$"?r:/[%p]/.test(F)?l:"",Z=Z5[F],ne=/[defgprs%]/.test(F);R=R===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function oe(ye){var fe=U,$e=G,ae,be,Te;if(F==="c")$e=Z(ye)+$e,ye="";else{ye=+ye;var Le=ye<0||1/ye<0;if(ye=isNaN(ye)?h:Z(Math.abs(ye),R),j&&(ye=J_e(ye)),Le&&+ye==0&&T!=="+"&&(Le=!1),fe=(Le?T==="("?T:a:T==="-"||T==="("?"":T)+fe,$e=(F==="s"?J5[8+mU/3]:"")+$e+(Le&&T==="("?")":""),ne){for(ae=-1,be=ye.length;++ae<be;)if(Te=ye.charCodeAt(ae),48>Te||Te>57){$e=(Te===46?i+ye.slice(ae+1):ye.slice(ae))+$e,ye=ye.slice(0,ae);break}}}k&&!$&&(ye=t(ye,1/0));var Ee=fe.length+ye.length+$e.length,de=Ee<O?new Array(O-Ee+1).join(b):"";switch(k&&$&&(ye=t(de+ye,de.length?O-$e.length:1/0),de=""),I){case"<":ye=fe+ye+$e+de;break;case"=":ye=fe+de+ye+$e;break;case"^":ye=de.slice(0,Ee=de.length>>1)+fe+ye+$e+de.slice(Ee);break;default:ye=de+fe+ye+$e;break}return o(ye)}return oe.toString=function(){return v+""},oe}function g(v,b){var I=d((v=H0(v),v.type="f",v)),T=Math.max(-8,Math.min(8,Math.floor(Gg(b)/3)))*3,P=Math.pow(10,-T),$=J5[8+T/3];return function(O){return I(P*O)+$}}return{format:d,formatPrefix:g}}var lw,pk,gU;t0e({thousands:",",grouping:[3],currency:["$",""]});function t0e(e){return lw=e0e(e),pk=lw.format,gU=lw.formatPrefix,lw}function n0e(e){return Math.max(0,-Gg(Math.abs(e)))}function r0e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gg(t)/3)))*3-Gg(Math.abs(e)))}function i0e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Gg(t)-Gg(e))+1}function yU(e,t,n,r){var i=rO(e,t,n),o;switch(r=H0(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=r0e(i,l))&&(r.precision=o),gU(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=i0e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=n0e(i))&&(r.precision=o-(r.type==="%")*2);break}}return pk(r)}function cd(e){var t=e.domain;return e.ticks=function(n){var r=t();return tO(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return yU(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],a=r[o],h,d,g=10;for(a<l&&(d=l,l=a,a=d,d=i,i=o,o=d);g-- >0;){if(d=nO(l,a,n),d===h)return r[i]=l,r[o]=a,t(r);if(d>0)l=Math.floor(l/d)*d,a=Math.ceil(a/d)*d;else if(d<0)l=Math.ceil(l*d)/d,a=Math.floor(a*d)/d;else break;h=d}return e},e}function JS(){var e=hk();return e.copy=function(){return i1(e,JS())},Ul.apply(e,arguments),cd(e)}function vU(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,KS),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return vU(e).unknown(t)},e=arguments.length?Array.from(e,KS):[0,1],cd(n)}function _U(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],l;return o<i&&(l=n,n=r,r=l,l=i,i=o,o=l),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Q5(e){return Math.log(e)}function e4(e){return Math.exp(e)}function o0e(e){return-Math.log(-e)}function a0e(e){return-Math.exp(-e)}function s0e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function l0e(e){return e===10?s0e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function u0e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function t4(e){return(t,n)=>-e(-t,n)}function mk(e){const t=e(Q5,e4),n=t.domain;let r=10,i,o;function l(){return i=u0e(r),o=l0e(r),n()[0]<0?(i=t4(i),o=t4(o),e(o0e,a0e)):e(Q5,e4),t}return t.base=function(a){return arguments.length?(r=+a,l()):r},t.domain=function(a){return arguments.length?(n(a),l()):n()},t.ticks=a=>{const h=n();let d=h[0],g=h[h.length-1];const v=g<d;v&&([d,g]=[g,d]);let b=i(d),I=i(g),T,P;const $=a==null?10:+a;let O=[];if(!(r%1)&&I-b<$){if(b=Math.floor(b),I=Math.ceil(I),d>0){for(;b<=I;++b)for(T=1;T<r;++T)if(P=b<0?T/o(-b):T*o(b),!(P<d)){if(P>g)break;O.push(P)}}else for(;b<=I;++b)for(T=r-1;T>=1;--T)if(P=b>0?T/o(-b):T*o(b),!(P<d)){if(P>g)break;O.push(P)}O.length*2<$&&(O=tO(d,g,$))}else O=tO(b,I,Math.min(I-b,$)).map(o);return v?O.reverse():O},t.tickFormat=(a,h)=>{if(a==null&&(a=10),h==null&&(h=r===10?"s":","),typeof h!="function"&&(!(r%1)&&(h=H0(h)).precision==null&&(h.trim=!0),h=pk(h)),a===1/0)return h;const d=Math.max(1,r*a/t.ticks().length);return g=>{let v=g/o(Math.round(i(g)));return v*r<r-.5&&(v*=r),v<=d?h(g):""}},t.nice=()=>n(_U(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function xU(){const e=mk(z2()).domain([1,10]);return e.copy=()=>i1(e,xU()).base(e.base()),Ul.apply(e,arguments),e}function n4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function r4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function gk(e){var t=1,n=e(n4(t),r4(t));return n.constant=function(r){return arguments.length?e(n4(t=+r),r4(t)):t},cd(n)}function bU(){var e=gk(z2());return e.copy=function(){return i1(e,bU()).constant(e.constant())},Ul.apply(e,arguments)}function i4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function c0e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function f0e(e){return e<0?-e*e:e*e}function yk(e){var t=e($a,$a),n=1;function r(){return n===1?e($a,$a):n===.5?e(c0e,f0e):e(i4(n),i4(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},cd(t)}function vk(){var e=yk(z2());return e.copy=function(){return i1(e,vk()).exponent(e.exponent())},Ul.apply(e,arguments),e}function h0e(){return vk.apply(null,arguments).exponent(.5)}function o4(e){return Math.sign(e)*e*e}function d0e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function wU(){var e=hk(),t=[0,1],n=!1,r;function i(o){var l=d0e(e(o));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(o){return e.invert(o4(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,KS)).map(o4)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return wU(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ul.apply(i,arguments),cd(i)}function SU(){var e=[],t=[],n=[],r;function i(){var l=0,a=Math.max(1,t.length);for(n=new Array(a-1);++l<a;)n[l-1]=v_e(e,l/a);return o}function o(l){return l==null||isNaN(l=+l)?r:t[n1(n,l)]}return o.invertExtent=function(l){var a=t.indexOf(l);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let a of l)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Nh),i()},o.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},o.unknown=function(l){return arguments.length?(r=l,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return SU().domain(e).range(t).unknown(r)},Ul.apply(o,arguments)}function EU(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function l(h){return h!=null&&h<=h?i[n1(r,h,0,n)]:o}function a(){var h=-1;for(r=new Array(n);++h<n;)r[h]=((h+1)*t-(h-n)*e)/(n+1);return l}return l.domain=function(h){return arguments.length?([e,t]=h,e=+e,t=+t,a()):[e,t]},l.range=function(h){return arguments.length?(n=(i=Array.from(h)).length-1,a()):i.slice()},l.invertExtent=function(h){var d=i.indexOf(h);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},l.unknown=function(h){return arguments.length&&(o=h),l},l.thresholds=function(){return r.slice()},l.copy=function(){return EU().domain([e,t]).range(i).unknown(o)},Ul.apply(cd(l),arguments)}function CU(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[n1(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var l=t.indexOf(o);return[e[l-1],e[l]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return CU().domain(e).range(t).unknown(n)},Ul.apply(i,arguments)}const RT=new Date,zT=new Date;function so(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const l=i(o),a=i.ceil(o);return o-l<a-o?l:a},i.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),i.range=(o,l,a)=>{const h=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<l)||!(a>0))return h;let d;do h.push(d=new Date(+o)),t(o,a),e(o);while(d<o&&o<l);return h},i.filter=o=>so(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,a)=>{if(l>=l)if(a<0)for(;++a<=0;)for(;t(l,-1),!o(l););else for(;--a>=0;)for(;t(l,1),!o(l););}),n&&(i.count=(o,l)=>(RT.setTime(+o),zT.setTime(+l),e(RT),e(zT),Math.floor(n(RT,zT))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?l=>r(l)%o===0:l=>i.count(0,l)%o===0):i)),i}const QS=so(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);QS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?so(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):QS);QS.range;const Kc=1e3,_l=Kc*60,Yc=_l*60,mf=Yc*24,_k=mf*7,a4=mf*30,FT=mf*365,rp=so(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Kc)},(e,t)=>(t-e)/Kc,e=>e.getUTCSeconds());rp.range;const xk=so(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kc)},(e,t)=>{e.setTime(+e+t*_l)},(e,t)=>(t-e)/_l,e=>e.getMinutes());xk.range;const bk=so(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_l)},(e,t)=>(t-e)/_l,e=>e.getUTCMinutes());bk.range;const wk=so(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kc-e.getMinutes()*_l)},(e,t)=>{e.setTime(+e+t*Yc)},(e,t)=>(t-e)/Yc,e=>e.getHours());wk.range;const Sk=so(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Yc)},(e,t)=>(t-e)/Yc,e=>e.getUTCHours());Sk.range;const o1=so(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_l)/mf,e=>e.getDate()-1);o1.range;const F2=so(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mf,e=>e.getUTCDate()-1);F2.range;const IU=so(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mf,e=>Math.floor(e/mf));IU.range;function jp(e){return so(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*_l)/_k)}const B2=jp(0),eE=jp(1),p0e=jp(2),m0e=jp(3),qg=jp(4),g0e=jp(5),y0e=jp(6);B2.range;eE.range;p0e.range;m0e.range;qg.range;g0e.range;y0e.range;function Up(e){return so(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/_k)}const j2=Up(0),tE=Up(1),v0e=Up(2),_0e=Up(3),Wg=Up(4),x0e=Up(5),b0e=Up(6);j2.range;tE.range;v0e.range;_0e.range;Wg.range;x0e.range;b0e.range;const Ek=so(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ek.range;const Ck=so(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ck.range;const gf=so(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());gf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:so(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});gf.range;const yf=so(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:so(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});yf.range;function TU(e,t,n,r,i,o){const l=[[rp,1,Kc],[rp,5,5*Kc],[rp,15,15*Kc],[rp,30,30*Kc],[o,1,_l],[o,5,5*_l],[o,15,15*_l],[o,30,30*_l],[i,1,Yc],[i,3,3*Yc],[i,6,6*Yc],[i,12,12*Yc],[r,1,mf],[r,2,2*mf],[n,1,_k],[t,1,a4],[t,3,3*a4],[e,1,FT]];function a(d,g,v){const b=g<d;b&&([d,g]=[g,d]);const I=v&&typeof v.range=="function"?v:h(d,g,v),T=I?I.range(d,+g+1):[];return b?T.reverse():T}function h(d,g,v){const b=Math.abs(g-d)/v,I=sk(([,,$])=>$).right(l,b);if(I===l.length)return e.every(rO(d/FT,g/FT,v));if(I===0)return QS.every(Math.max(rO(d,g,v),1));const[T,P]=l[b/l[I-1][2]<l[I][2]/b?I-1:I];return T.every(P)}return[a,h]}const[w0e,S0e]=TU(yf,Ck,j2,IU,Sk,bk),[E0e,C0e]=TU(gf,Ek,B2,o1,wk,xk);function BT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function S_(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function I0e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,l=e.shortDays,a=e.months,h=e.shortMonths,d=E_(i),g=C_(i),v=E_(o),b=C_(o),I=E_(l),T=C_(l),P=E_(a),$=C_(a),O=E_(h),k=C_(h),R={a:Le,A:Ee,b:de,B:De,c:null,d:h4,e:h4,f:Z0e,g:oxe,G:sxe,H:W0e,I:H0e,j:X0e,L:PU,m:K0e,M:Y0e,p:He,q:je,Q:m4,s:g4,S:J0e,u:Q0e,U:exe,V:txe,w:nxe,W:rxe,x:null,X:null,y:ixe,Y:axe,Z:lxe,"%":p4},j={a:et,A:Et,b:zt,B:Yt,c:null,d:d4,e:d4,f:hxe,g:wxe,G:Exe,H:uxe,I:cxe,j:fxe,L:OU,m:dxe,M:pxe,p:St,q:Vt,Q:m4,s:g4,S:mxe,u:gxe,U:yxe,V:vxe,w:_xe,W:xxe,x:null,X:null,y:bxe,Y:Sxe,Z:Cxe,"%":p4},F={a:oe,A:ye,b:fe,B:$e,c:ae,d:c4,e:c4,f:U0e,g:u4,G:l4,H:f4,I:f4,j:z0e,L:j0e,m:R0e,M:F0e,p:ne,q:D0e,Q:G0e,s:q0e,S:B0e,u:M0e,U:$0e,V:k0e,w:O0e,W:N0e,x:be,X:Te,y:u4,Y:l4,Z:L0e,"%":V0e};R.x=U(n,R),R.X=U(r,R),R.c=U(t,R),j.x=U(n,j),j.X=U(r,j),j.c=U(t,j);function U(Qe,dt){return function(vt){var We=[],Ot=-1,Ct=0,Tt=Qe.length,Tn,yn,sn;for(vt instanceof Date||(vt=new Date(+vt));++Ot<Tt;)Qe.charCodeAt(Ot)===37&&(We.push(Qe.slice(Ct,Ot)),(yn=s4[Tn=Qe.charAt(++Ot)])!=null?Tn=Qe.charAt(++Ot):yn=Tn==="e"?" ":"0",(sn=dt[Tn])&&(Tn=sn(vt,yn)),We.push(Tn),Ct=Ot+1);return We.push(Qe.slice(Ct,Ot)),We.join("")}}function G(Qe,dt){return function(vt){var We=S_(1900,void 0,1),Ot=Z(We,Qe,vt+="",0),Ct,Tt;if(Ot!=vt.length)return null;if("Q"in We)return new Date(We.Q);if("s"in We)return new Date(We.s*1e3+("L"in We?We.L:0));if(dt&&!("Z"in We)&&(We.Z=0),"p"in We&&(We.H=We.H%12+We.p*12),We.m===void 0&&(We.m="q"in We?We.q:0),"V"in We){if(We.V<1||We.V>53)return null;"w"in We||(We.w=1),"Z"in We?(Ct=jT(S_(We.y,0,1)),Tt=Ct.getUTCDay(),Ct=Tt>4||Tt===0?tE.ceil(Ct):tE(Ct),Ct=F2.offset(Ct,(We.V-1)*7),We.y=Ct.getUTCFullYear(),We.m=Ct.getUTCMonth(),We.d=Ct.getUTCDate()+(We.w+6)%7):(Ct=BT(S_(We.y,0,1)),Tt=Ct.getDay(),Ct=Tt>4||Tt===0?eE.ceil(Ct):eE(Ct),Ct=o1.offset(Ct,(We.V-1)*7),We.y=Ct.getFullYear(),We.m=Ct.getMonth(),We.d=Ct.getDate()+(We.w+6)%7)}else("W"in We||"U"in We)&&("w"in We||(We.w="u"in We?We.u%7:"W"in We?1:0),Tt="Z"in We?jT(S_(We.y,0,1)).getUTCDay():BT(S_(We.y,0,1)).getDay(),We.m=0,We.d="W"in We?(We.w+6)%7+We.W*7-(Tt+5)%7:We.w+We.U*7-(Tt+6)%7);return"Z"in We?(We.H+=We.Z/100|0,We.M+=We.Z%100,jT(We)):BT(We)}}function Z(Qe,dt,vt,We){for(var Ot=0,Ct=dt.length,Tt=vt.length,Tn,yn;Ot<Ct;){if(We>=Tt)return-1;if(Tn=dt.charCodeAt(Ot++),Tn===37){if(Tn=dt.charAt(Ot++),yn=F[Tn in s4?dt.charAt(Ot++):Tn],!yn||(We=yn(Qe,vt,We))<0)return-1}else if(Tn!=vt.charCodeAt(We++))return-1}return We}function ne(Qe,dt,vt){var We=d.exec(dt.slice(vt));return We?(Qe.p=g.get(We[0].toLowerCase()),vt+We[0].length):-1}function oe(Qe,dt,vt){var We=I.exec(dt.slice(vt));return We?(Qe.w=T.get(We[0].toLowerCase()),vt+We[0].length):-1}function ye(Qe,dt,vt){var We=v.exec(dt.slice(vt));return We?(Qe.w=b.get(We[0].toLowerCase()),vt+We[0].length):-1}function fe(Qe,dt,vt){var We=O.exec(dt.slice(vt));return We?(Qe.m=k.get(We[0].toLowerCase()),vt+We[0].length):-1}function $e(Qe,dt,vt){var We=P.exec(dt.slice(vt));return We?(Qe.m=$.get(We[0].toLowerCase()),vt+We[0].length):-1}function ae(Qe,dt,vt){return Z(Qe,t,dt,vt)}function be(Qe,dt,vt){return Z(Qe,n,dt,vt)}function Te(Qe,dt,vt){return Z(Qe,r,dt,vt)}function Le(Qe){return l[Qe.getDay()]}function Ee(Qe){return o[Qe.getDay()]}function de(Qe){return h[Qe.getMonth()]}function De(Qe){return a[Qe.getMonth()]}function He(Qe){return i[+(Qe.getHours()>=12)]}function je(Qe){return 1+~~(Qe.getMonth()/3)}function et(Qe){return l[Qe.getUTCDay()]}function Et(Qe){return o[Qe.getUTCDay()]}function zt(Qe){return h[Qe.getUTCMonth()]}function Yt(Qe){return a[Qe.getUTCMonth()]}function St(Qe){return i[+(Qe.getUTCHours()>=12)]}function Vt(Qe){return 1+~~(Qe.getUTCMonth()/3)}return{format:function(Qe){var dt=U(Qe+="",R);return dt.toString=function(){return Qe},dt},parse:function(Qe){var dt=G(Qe+="",!1);return dt.toString=function(){return Qe},dt},utcFormat:function(Qe){var dt=U(Qe+="",j);return dt.toString=function(){return Qe},dt},utcParse:function(Qe){var dt=G(Qe+="",!0);return dt.toString=function(){return Qe},dt}}}var s4={"-":"",_:" ",0:"0"},$o=/^\s*\d+/,T0e=/^%/,P0e=/[\\^$*+?|[\]().{}]/g;function Jn(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function A0e(e){return e.replace(P0e,"\\$&")}function E_(e){return new RegExp("^(?:"+e.map(A0e).join("|")+")","i")}function C_(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function O0e(e,t,n){var r=$o.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function M0e(e,t,n){var r=$o.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function $0e(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function k0e(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function N0e(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function l4(e,t,n){var r=$o.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function u4(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function L0e(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function D0e(e,t,n){var r=$o.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function R0e(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function c4(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function z0e(e,t,n){var r=$o.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function f4(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function F0e(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function B0e(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function j0e(e,t,n){var r=$o.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function U0e(e,t,n){var r=$o.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function V0e(e,t,n){var r=T0e.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function G0e(e,t,n){var r=$o.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function q0e(e,t,n){var r=$o.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function h4(e,t){return Jn(e.getDate(),t,2)}function W0e(e,t){return Jn(e.getHours(),t,2)}function H0e(e,t){return Jn(e.getHours()%12||12,t,2)}function X0e(e,t){return Jn(1+o1.count(gf(e),e),t,3)}function PU(e,t){return Jn(e.getMilliseconds(),t,3)}function Z0e(e,t){return PU(e,t)+"000"}function K0e(e,t){return Jn(e.getMonth()+1,t,2)}function Y0e(e,t){return Jn(e.getMinutes(),t,2)}function J0e(e,t){return Jn(e.getSeconds(),t,2)}function Q0e(e){var t=e.getDay();return t===0?7:t}function exe(e,t){return Jn(B2.count(gf(e)-1,e),t,2)}function AU(e){var t=e.getDay();return t>=4||t===0?qg(e):qg.ceil(e)}function txe(e,t){return e=AU(e),Jn(qg.count(gf(e),e)+(gf(e).getDay()===4),t,2)}function nxe(e){return e.getDay()}function rxe(e,t){return Jn(eE.count(gf(e)-1,e),t,2)}function ixe(e,t){return Jn(e.getFullYear()%100,t,2)}function oxe(e,t){return e=AU(e),Jn(e.getFullYear()%100,t,2)}function axe(e,t){return Jn(e.getFullYear()%1e4,t,4)}function sxe(e,t){var n=e.getDay();return e=n>=4||n===0?qg(e):qg.ceil(e),Jn(e.getFullYear()%1e4,t,4)}function lxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jn(t/60|0,"0",2)+Jn(t%60,"0",2)}function d4(e,t){return Jn(e.getUTCDate(),t,2)}function uxe(e,t){return Jn(e.getUTCHours(),t,2)}function cxe(e,t){return Jn(e.getUTCHours()%12||12,t,2)}function fxe(e,t){return Jn(1+F2.count(yf(e),e),t,3)}function OU(e,t){return Jn(e.getUTCMilliseconds(),t,3)}function hxe(e,t){return OU(e,t)+"000"}function dxe(e,t){return Jn(e.getUTCMonth()+1,t,2)}function pxe(e,t){return Jn(e.getUTCMinutes(),t,2)}function mxe(e,t){return Jn(e.getUTCSeconds(),t,2)}function gxe(e){var t=e.getUTCDay();return t===0?7:t}function yxe(e,t){return Jn(j2.count(yf(e)-1,e),t,2)}function MU(e){var t=e.getUTCDay();return t>=4||t===0?Wg(e):Wg.ceil(e)}function vxe(e,t){return e=MU(e),Jn(Wg.count(yf(e),e)+(yf(e).getUTCDay()===4),t,2)}function _xe(e){return e.getUTCDay()}function xxe(e,t){return Jn(tE.count(yf(e)-1,e),t,2)}function bxe(e,t){return Jn(e.getUTCFullYear()%100,t,2)}function wxe(e,t){return e=MU(e),Jn(e.getUTCFullYear()%100,t,2)}function Sxe(e,t){return Jn(e.getUTCFullYear()%1e4,t,4)}function Exe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Wg(e):Wg.ceil(e),Jn(e.getUTCFullYear()%1e4,t,4)}function Cxe(){return"+0000"}function p4(){return"%"}function m4(e){return+e}function g4(e){return Math.floor(+e/1e3)}var Um,$U,kU;Ixe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ixe(e){return Um=I0e(e),$U=Um.format,Um.parse,kU=Um.utcFormat,Um.utcParse,Um}function Txe(e){return new Date(e)}function Pxe(e){return e instanceof Date?+e:+new Date(+e)}function Ik(e,t,n,r,i,o,l,a,h,d){var g=hk(),v=g.invert,b=g.domain,I=d(".%L"),T=d(":%S"),P=d("%I:%M"),$=d("%I %p"),O=d("%a %d"),k=d("%b %d"),R=d("%B"),j=d("%Y");function F(U){return(h(U)<U?I:a(U)<U?T:l(U)<U?P:o(U)<U?$:r(U)<U?i(U)<U?O:k:n(U)<U?R:j)(U)}return g.invert=function(U){return new Date(v(U))},g.domain=function(U){return arguments.length?b(Array.from(U,Pxe)):b().map(Txe)},g.ticks=function(U){var G=b();return e(G[0],G[G.length-1],U??10)},g.tickFormat=function(U,G){return G==null?F:d(G)},g.nice=function(U){var G=b();return(!U||typeof U.range!="function")&&(U=t(G[0],G[G.length-1],U??10)),U?b(_U(G,U)):g},g.copy=function(){return i1(g,Ik(e,t,n,r,i,o,l,a,h,d))},g}function Axe(){return Ul.apply(Ik(E0e,C0e,gf,Ek,B2,o1,wk,xk,rp,$U).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Oxe(){return Ul.apply(Ik(w0e,S0e,yf,Ck,j2,F2,Sk,bk,rp,kU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function U2(){var e=0,t=1,n,r,i,o,l=$a,a=!1,h;function d(v){return v==null||isNaN(v=+v)?h:l(i===0?.5:(v=(o(v)-n)*i,a?Math.max(0,Math.min(1,v)):v))}d.domain=function(v){return arguments.length?([e,t]=v,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(v){return arguments.length?(a=!!v,d):a},d.interpolator=function(v){return arguments.length?(l=v,d):l};function g(v){return function(b){var I,T;return arguments.length?([I,T]=b,l=v(I,T),d):[l(0),l(1)]}}return d.range=g(Wy),d.rangeRound=g(fk),d.unknown=function(v){return arguments.length?(h=v,d):h},function(v){return o=v,n=v(e),r=v(t),i=n===r?0:1/(r-n),d}}function fd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function NU(){var e=cd(U2()($a));return e.copy=function(){return fd(e,NU())},Df.apply(e,arguments)}function LU(){var e=mk(U2()).domain([1,10]);return e.copy=function(){return fd(e,LU()).base(e.base())},Df.apply(e,arguments)}function DU(){var e=gk(U2());return e.copy=function(){return fd(e,DU()).constant(e.constant())},Df.apply(e,arguments)}function Tk(){var e=yk(U2());return e.copy=function(){return fd(e,Tk()).exponent(e.exponent())},Df.apply(e,arguments)}function Mxe(){return Tk.apply(null,arguments).exponent(.5)}function RU(){var e=[],t=$a;function n(r){if(r!=null&&!isNaN(r=+r))return t((n1(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Nh),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>y_e(e,o/r))},n.copy=function(){return RU(t).domain(e)},Df.apply(n,arguments)}function V2(){var e=0,t=.5,n=1,r=1,i,o,l,a,h,d=$a,g,v=!1,b;function I(P){return isNaN(P=+P)?b:(P=.5+((P=+g(P))-o)*(r*P<r*o?a:h),d(v?Math.max(0,Math.min(1,P)):P))}I.domain=function(P){return arguments.length?([e,t,n]=P,i=g(e=+e),o=g(t=+t),l=g(n=+n),a=i===o?0:.5/(o-i),h=o===l?0:.5/(l-o),r=o<i?-1:1,I):[e,t,n]},I.clamp=function(P){return arguments.length?(v=!!P,I):v},I.interpolator=function(P){return arguments.length?(d=P,I):d};function T(P){return function($){var O,k,R;return arguments.length?([O,k,R]=$,d=V_e(P,[O,k,R]),I):[d(0),d(.5),d(1)]}}return I.range=T(Wy),I.rangeRound=T(fk),I.unknown=function(P){return arguments.length?(b=P,I):b},function(P){return g=P,i=P(e),o=P(t),l=P(n),a=i===o?0:.5/(o-i),h=o===l?0:.5/(l-o),r=o<i?-1:1,I}}function zU(){var e=cd(V2()($a));return e.copy=function(){return fd(e,zU())},Df.apply(e,arguments)}function FU(){var e=mk(V2()).domain([.1,1,10]);return e.copy=function(){return fd(e,FU()).base(e.base())},Df.apply(e,arguments)}function BU(){var e=gk(V2());return e.copy=function(){return fd(e,BU()).constant(e.constant())},Df.apply(e,arguments)}function Pk(){var e=yk(V2());return e.copy=function(){return fd(e,Pk()).exponent(e.exponent())},Df.apply(e,arguments)}function $xe(){return Pk.apply(null,arguments).exponent(.5)}const y4=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:V0,scaleDiverging:zU,scaleDivergingLog:FU,scaleDivergingPow:Pk,scaleDivergingSqrt:$xe,scaleDivergingSymlog:BU,scaleIdentity:vU,scaleImplicit:iO,scaleLinear:JS,scaleLog:xU,scaleOrdinal:lk,scalePoint:n0,scalePow:vk,scaleQuantile:SU,scaleQuantize:EU,scaleRadial:wU,scaleSequential:NU,scaleSequentialLog:LU,scaleSequentialPow:Tk,scaleSequentialQuantile:RU,scaleSequentialSqrt:Mxe,scaleSequentialSymlog:DU,scaleSqrt:h0e,scaleSymlog:bU,scaleThreshold:CU,scaleTime:Axe,scaleUtc:Oxe,tickFormat:yU},Symbol.toStringTag,{value:"Module"}));var kxe=Ry;function Nxe(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],l=t(o);if(l!=null&&(a===void 0?l===l&&!kxe(l):n(l,a)))var a=l,h=o}return h}var jU=Nxe;function Lxe(e,t){return e>t}var Dxe=Lxe,Rxe=jU,zxe=Dxe,Fxe=Gy;function Bxe(e){return e&&e.length?Rxe(e,Fxe,zxe):void 0}var jxe=Bxe;const G2=hr(jxe);function Uxe(e,t){return e<t}var Vxe=Uxe,Gxe=jU,qxe=Vxe,Wxe=Gy;function Hxe(e){return e&&e.length?Gxe(e,Wxe,qxe):void 0}var Xxe=Hxe;const q2=hr(Xxe);var Zxe=B$,Kxe=ld,Yxe=j9,Jxe=ds;function Qxe(e,t){var n=Jxe(e)?Zxe:Yxe;return n(e,Kxe(t))}var e1e=Qxe,t1e=F9,n1e=e1e;function r1e(e,t){return t1e(n1e(e,t),1)}var i1e=r1e;const o1e=hr(i1e);var a1e=nk;function s1e(e,t){return a1e(e,t)}var l1e=s1e;const W2=hr(l1e);var Hy=1e9,u1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Ok,ri=!0,Al="[DecimalError] ",cp=Al+"Invalid argument: ",Ak=Al+"Exponent out of range: ",Xy=Math.floor,Xd=Math.pow,c1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ps,yo=1e7,Gr=7,UU=9007199254740991,nE=Xy(UU/Gr),jt={};jt.absoluteValue=jt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};jt.comparedTo=jt.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(r=o.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};jt.decimalPlaces=jt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Gr;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};jt.dividedBy=jt.div=function(e){return nf(this,new this.constructor(e))};jt.dividedToIntegerBy=jt.idiv=function(e){var t=this,n=t.constructor;return Er(nf(t,new n(e),0,1),n.precision)};jt.equals=jt.eq=function(e){return!this.cmp(e)};jt.exponent=function(){return Ui(this)};jt.greaterThan=jt.gt=function(e){return this.cmp(e)>0};jt.greaterThanOrEqualTo=jt.gte=function(e){return this.cmp(e)>=0};jt.isInteger=jt.isint=function(){return this.e>this.d.length-2};jt.isNegative=jt.isneg=function(){return this.s<0};jt.isPositive=jt.ispos=function(){return this.s>0};jt.isZero=function(){return this.s===0};jt.lessThan=jt.lt=function(e){return this.cmp(e)<0};jt.lessThanOrEqualTo=jt.lte=function(e){return this.cmp(e)<1};jt.logarithm=jt.log=function(e){var t,n=this,r=n.constructor,i=r.precision,o=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Ps))throw Error(Al+"NaN");if(n.s<1)throw Error(Al+(n.s?"NaN":"-Infinity"));return n.eq(Ps)?new r(0):(ri=!1,t=nf(X0(n,o),X0(e,o),o),ri=!0,Er(t,i))};jt.minus=jt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?qU(t,e):VU(t,(e.s=-e.s,e))};jt.modulo=jt.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Al+"NaN");return n.s?(ri=!1,t=nf(n,e,0,1).times(e),ri=!0,n.minus(t)):Er(new r(n),i)};jt.naturalExponential=jt.exp=function(){return GU(this)};jt.naturalLogarithm=jt.ln=function(){return X0(this)};jt.negated=jt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};jt.plus=jt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?VU(t,e):qU(t,(e.s=-e.s,e))};jt.precision=jt.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(cp+e);if(t=Ui(i)+1,r=i.d.length-1,n=r*Gr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};jt.squareRoot=jt.sqrt=function(){var e,t,n,r,i,o,l,a=this,h=a.constructor;if(a.s<1){if(!a.s)return new h(0);throw Error(Al+"NaN")}for(e=Ui(a),ri=!1,i=Math.sqrt(+a),i==0||i==1/0?(t=ac(a.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Xy((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new h(t)):r=new h(i.toString()),n=h.precision,i=l=n+3;;)if(o=r,r=o.plus(nf(a,o,l+2)).times(.5),ac(o.d).slice(0,l)===(t=ac(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(Er(o,n+1,0),o.times(o).eq(a)){r=o;break}}else if(t!="9999")break;l+=4}return ri=!0,Er(r,n)};jt.times=jt.mul=function(e){var t,n,r,i,o,l,a,h,d,g=this,v=g.constructor,b=g.d,I=(e=new v(e)).d;if(!g.s||!e.s)return new v(0);for(e.s*=g.s,n=g.e+e.e,h=b.length,d=I.length,h<d&&(o=b,b=I,I=o,l=h,h=d,d=l),o=[],l=h+d,r=l;r--;)o.push(0);for(r=d;--r>=0;){for(t=0,i=h+r;i>r;)a=o[i]+I[r]*b[i-r-1]+t,o[i--]=a%yo|0,t=a/yo|0;o[i]=(o[i]+t)%yo|0}for(;!o[--l];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,ri?Er(e,v.precision):e};jt.toDecimalPlaces=jt.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(pc(e,0,Hy),t===void 0?t=r.rounding:pc(t,0,8),Er(n,e+Ui(n)+1,t))};jt.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=xp(r,!0):(pc(e,0,Hy),t===void 0?t=i.rounding:pc(t,0,8),r=Er(new i(r),e+1,t),n=xp(r,!0,e+1)),n};jt.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?xp(i):(pc(e,0,Hy),t===void 0?t=o.rounding:pc(t,0,8),r=Er(new o(i),e+Ui(i)+1,t),n=xp(r.abs(),!1,e+Ui(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};jt.toInteger=jt.toint=function(){var e=this,t=e.constructor;return Er(new t(e),Ui(e)+1,t.rounding)};jt.toNumber=function(){return+this};jt.toPower=jt.pow=function(e){var t,n,r,i,o,l,a=this,h=a.constructor,d=12,g=+(e=new h(e));if(!e.s)return new h(Ps);if(a=new h(a),!a.s){if(e.s<1)throw Error(Al+"Infinity");return a}if(a.eq(Ps))return a;if(r=h.precision,e.eq(Ps))return Er(a,r);if(t=e.e,n=e.d.length-1,l=t>=n,o=a.s,l){if((n=g<0?-g:g)<=UU){for(i=new h(Ps),t=Math.ceil(r/Gr+4),ri=!1;n%2&&(i=i.times(a),_4(i.d,t)),n=Xy(n/2),n!==0;)a=a.times(a),_4(a.d,t);return ri=!0,e.s<0?new h(Ps).div(i):Er(i,r)}}else if(o<0)throw Error(Al+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,a.s=1,ri=!1,i=e.times(X0(a,r+d)),ri=!0,i=GU(i),i.s=o,i};jt.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?(n=Ui(i),r=xp(i,n<=o.toExpNeg||n>=o.toExpPos)):(pc(e,1,Hy),t===void 0?t=o.rounding:pc(t,0,8),i=Er(new o(i),e,t),n=Ui(i),r=xp(i,e<=n||n<=o.toExpNeg,e)),r};jt.toSignificantDigits=jt.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(pc(e,1,Hy),t===void 0?t=r.rounding:pc(t,0,8)),Er(new r(n),e,t)};jt.toString=jt.valueOf=jt.val=jt.toJSON=jt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ui(e),n=e.constructor;return xp(e,t<=n.toExpNeg||t>=n.toExpPos)};function VU(e,t){var n,r,i,o,l,a,h,d,g=e.constructor,v=g.precision;if(!e.s||!t.s)return t.s||(t=new g(e)),ri?Er(t,v):t;if(h=e.d,d=t.d,l=e.e,i=t.e,h=h.slice(),o=l-i,o){for(o<0?(r=h,o=-o,a=d.length):(r=d,i=l,a=h.length),l=Math.ceil(v/Gr),a=l>a?l+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=h.length,o=d.length,a-o<0&&(o=a,r=d,d=h,h=r),n=0;o;)n=(h[--o]=h[o]+d[o]+n)/yo|0,h[o]%=yo;for(n&&(h.unshift(n),++i),a=h.length;h[--a]==0;)h.pop();return t.d=h,t.e=i,ri?Er(t,v):t}function pc(e,t,n){if(e!==~~e||e<t||e>n)throw Error(cp+e)}function ac(e){var t,n,r,i=e.length-1,o="",l=e[0];if(i>0){for(o+=l,t=1;t<i;t++)r=e[t]+"",n=Gr-r.length,n&&(o+=vh(n)),o+=r;l=e[t],r=l+"",n=Gr-r.length,n&&(o+=vh(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}var nf=function(){function e(r,i){var o,l=0,a=r.length;for(r=r.slice();a--;)o=r[a]*i+l,r[a]=o%yo|0,l=o/yo|0;return l&&r.unshift(l),r}function t(r,i,o,l){var a,h;if(o!=l)h=o>l?1:-1;else for(a=h=0;a<o;a++)if(r[a]!=i[a]){h=r[a]>i[a]?1:-1;break}return h}function n(r,i,o){for(var l=0;o--;)r[o]-=l,l=r[o]<i[o]?1:0,r[o]=l*yo+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,l){var a,h,d,g,v,b,I,T,P,$,O,k,R,j,F,U,G,Z,ne=r.constructor,oe=r.s==i.s?1:-1,ye=r.d,fe=i.d;if(!r.s)return new ne(r);if(!i.s)throw Error(Al+"Division by zero");for(h=r.e-i.e,G=fe.length,F=ye.length,I=new ne(oe),T=I.d=[],d=0;fe[d]==(ye[d]||0);)++d;if(fe[d]>(ye[d]||0)&&--h,o==null?k=o=ne.precision:l?k=o+(Ui(r)-Ui(i))+1:k=o,k<0)return new ne(0);if(k=k/Gr+2|0,d=0,G==1)for(g=0,fe=fe[0],k++;(d<F||g)&&k--;d++)R=g*yo+(ye[d]||0),T[d]=R/fe|0,g=R%fe|0;else{for(g=yo/(fe[0]+1)|0,g>1&&(fe=e(fe,g),ye=e(ye,g),G=fe.length,F=ye.length),j=G,P=ye.slice(0,G),$=P.length;$<G;)P[$++]=0;Z=fe.slice(),Z.unshift(0),U=fe[0],fe[1]>=yo/2&&++U;do g=0,a=t(fe,P,G,$),a<0?(O=P[0],G!=$&&(O=O*yo+(P[1]||0)),g=O/U|0,g>1?(g>=yo&&(g=yo-1),v=e(fe,g),b=v.length,$=P.length,a=t(v,P,b,$),a==1&&(g--,n(v,G<b?Z:fe,b))):(g==0&&(a=g=1),v=fe.slice()),b=v.length,b<$&&v.unshift(0),n(P,v,$),a==-1&&($=P.length,a=t(fe,P,G,$),a<1&&(g++,n(P,G<$?Z:fe,$))),$=P.length):a===0&&(g++,P=[0]),T[d++]=g,a&&P[0]?P[$++]=ye[j]||0:(P=[ye[j]],$=1);while((j++<F||P[0]!==void 0)&&k--)}return T[0]||T.shift(),I.e=h,Er(I,l?o+Ui(I)+1:o)}}();function GU(e,t){var n,r,i,o,l,a,h=0,d=0,g=e.constructor,v=g.precision;if(Ui(e)>16)throw Error(Ak+Ui(e));if(!e.s)return new g(Ps);for(t==null?(ri=!1,a=v):a=t,l=new g(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(r=Math.log(Xd(2,d))/Math.LN10*2+5|0,a+=r,n=i=o=new g(Ps),g.precision=a;;){if(i=Er(i.times(e),a),n=n.times(++h),l=o.plus(nf(i,n,a)),ac(l.d).slice(0,a)===ac(o.d).slice(0,a)){for(;d--;)o=Er(o.times(o),a);return g.precision=v,t==null?(ri=!0,Er(o,v)):o}o=l}}function Ui(e){for(var t=e.e*Gr,n=e.d[0];n>=10;n/=10)t++;return t}function UT(e,t,n){if(t>e.LN10.sd())throw ri=!0,n&&(e.precision=n),Error(Al+"LN10 precision limit exceeded");return Er(new e(e.LN10),t)}function vh(e){for(var t="";e--;)t+="0";return t}function X0(e,t){var n,r,i,o,l,a,h,d,g,v=1,b=10,I=e,T=I.d,P=I.constructor,$=P.precision;if(I.s<1)throw Error(Al+(I.s?"NaN":"-Infinity"));if(I.eq(Ps))return new P(0);if(t==null?(ri=!1,d=$):d=t,I.eq(10))return t==null&&(ri=!0),UT(P,d);if(d+=b,P.precision=d,n=ac(T),r=n.charAt(0),o=Ui(I),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)I=I.times(e),n=ac(I.d),r=n.charAt(0),v++;o=Ui(I),r>1?(I=new P("0."+n),o++):I=new P(r+"."+n.slice(1))}else return h=UT(P,d+2,$).times(o+""),I=X0(new P(r+"."+n.slice(1)),d-b).plus(h),P.precision=$,t==null?(ri=!0,Er(I,$)):I;for(a=l=I=nf(I.minus(Ps),I.plus(Ps),d),g=Er(I.times(I),d),i=3;;){if(l=Er(l.times(g),d),h=a.plus(nf(l,new P(i),d)),ac(h.d).slice(0,d)===ac(a.d).slice(0,d))return a=a.times(2),o!==0&&(a=a.plus(UT(P,d+2,$).times(o+""))),a=nf(a,new P(v),d),P.precision=$,t==null?(ri=!0,Er(a,$)):a;a=h,i+=2}}function v4(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Xy(n/Gr),e.d=[],r=(n+1)%Gr,n<0&&(r+=Gr),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Gr;r<i;)e.d.push(+t.slice(r,r+=Gr));t=t.slice(r),r=Gr-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),ri&&(e.e>nE||e.e<-nE))throw Error(Ak+n)}else e.s=0,e.e=0,e.d=[0];return e}function Er(e,t,n){var r,i,o,l,a,h,d,g,v=e.d;for(l=1,o=v[0];o>=10;o/=10)l++;if(r=t-l,r<0)r+=Gr,i=t,d=v[g=0];else{if(g=Math.ceil((r+1)/Gr),o=v.length,g>=o)return e;for(d=o=v[g],l=1;o>=10;o/=10)l++;r%=Gr,i=r-Gr+l}if(n!==void 0&&(o=Xd(10,l-i-1),a=d/o%10|0,h=t<0||v[g+1]!==void 0||d%o,h=n<4?(a||h)&&(n==0||n==(e.s<0?3:2)):a>5||a==5&&(n==4||h||n==6&&(r>0?i>0?d/Xd(10,l-i):0:v[g-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return h?(o=Ui(e),v.length=1,t=t-o-1,v[0]=Xd(10,(Gr-t%Gr)%Gr),e.e=Xy(-t/Gr)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(r==0?(v.length=g,o=1,g--):(v.length=g+1,o=Xd(10,Gr-r),v[g]=i>0?(d/Xd(10,l-i)%Xd(10,i)|0)*o:0),h)for(;;)if(g==0){(v[0]+=o)==yo&&(v[0]=1,++e.e);break}else{if(v[g]+=o,v[g]!=yo)break;v[g--]=0,o=1}for(r=v.length;v[--r]===0;)v.pop();if(ri&&(e.e>nE||e.e<-nE))throw Error(Ak+Ui(e));return e}function qU(e,t){var n,r,i,o,l,a,h,d,g,v,b=e.constructor,I=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),ri?Er(t,I):t;if(h=e.d,v=t.d,r=t.e,d=e.e,h=h.slice(),l=d-r,l){for(g=l<0,g?(n=h,l=-l,a=v.length):(n=v,r=d,a=h.length),i=Math.max(Math.ceil(I/Gr),a)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=h.length,a=v.length,g=i<a,g&&(a=i),i=0;i<a;i++)if(h[i]!=v[i]){g=h[i]<v[i];break}l=0}for(g&&(n=h,h=v,v=n,t.s=-t.s),a=h.length,i=v.length-a;i>0;--i)h[a++]=0;for(i=v.length;i>l;){if(h[--i]<v[i]){for(o=i;o&&h[--o]===0;)h[o]=yo-1;--h[o],h[i]+=yo}h[i]-=v[i]}for(;h[--a]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(t.d=h,t.e=r,ri?Er(t,I):t):new b(0)}function xp(e,t,n){var r,i=Ui(e),o=ac(e.d),l=o.length;return t?(n&&(r=n-l)>0?o=o.charAt(0)+"."+o.slice(1)+vh(r):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+vh(-i-1)+o,n&&(r=n-l)>0&&(o+=vh(r))):i>=l?(o+=vh(i+1-l),n&&(r=n-i-1)>0&&(o=o+"."+vh(r))):((r=i+1)<l&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(o+="."),o+=vh(r))),e.s<0?"-"+o:o}function _4(e,t){if(e.length>t)return e.length=t,!0}function WU(e){var t,n,r;function i(o){var l=this;if(!(l instanceof i))return new i(o);if(l.constructor=i,o instanceof i){l.s=o.s,l.e=o.e,l.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(cp+o);if(o>0)l.s=1;else if(o<0)o=-o,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(o===~~o&&o<1e7){l.e=0,l.d=[o];return}return v4(l,o.toString())}else if(typeof o!="string")throw Error(cp+o);if(o.charCodeAt(0)===45?(o=o.slice(1),l.s=-1):l.s=1,c1e.test(o))v4(l,o);else throw Error(cp+o)}if(i.prototype=jt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=WU,i.config=i.set=f1e,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function f1e(e){if(!e||typeof e!="object")throw Error(Al+"Object expected");var t,n,r,i=["precision",1,Hy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Xy(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(cp+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(cp+n+": "+r);return this}var Ok=WU(u1e);Ps=new Ok(1);const yr=Ok;function h1e(e){return g1e(e)||m1e(e)||p1e(e)||d1e()}function d1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p1e(e,t){if(e){if(typeof e=="string")return lO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lO(e,t)}}function m1e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function g1e(e){if(Array.isArray(e))return lO(e)}function lO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y1e=function(t){return t},HU={"@@functional/placeholder":!0},XU=function(t){return t===HU},x4=function(t){return function n(){return arguments.length===0||arguments.length===1&&XU(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},v1e=function e(t,n){return t===1?n:x4(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var l=i.filter(function(a){return a!==HU}).length;return l>=t?n.apply(void 0,i):e(t-l,x4(function(){for(var a=arguments.length,h=new Array(a),d=0;d<a;d++)h[d]=arguments[d];var g=i.map(function(v){return XU(v)?h.shift():v});return n.apply(void 0,h1e(g).concat(h))}))})},H2=function(t){return v1e(t.length,t)},uO=function(t,n){for(var r=[],i=t;i<n;++i)r[i-t]=i;return r},_1e=H2(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),x1e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return y1e;var i=n.reverse(),o=i[0],l=i.slice(1);return function(){return l.reduce(function(a,h){return h(a)},o.apply(void 0,arguments))}},cO=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},ZU=function(t){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return n&&o.every(function(a,h){return a===n[h]})||(n=o,r=t.apply(void 0,o)),r}};function b1e(e){var t;return e===0?t=1:t=Math.floor(new yr(e).abs().log(10).toNumber())+1,t}function w1e(e,t,n){for(var r=new yr(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var S1e=H2(function(e,t,n){var r=+e,i=+t;return r+n*(i-r)}),E1e=H2(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),C1e=H2(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const X2={rangeStep:w1e,getDigitCount:b1e,interpolateNumber:S1e,uninterpolateNumber:E1e,uninterpolateTruncation:C1e};function fO(e){return P1e(e)||T1e(e)||KU(e)||I1e()}function I1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T1e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function P1e(e){if(Array.isArray(e))return hO(e)}function Z0(e,t){return M1e(e)||O1e(e,t)||KU(e,t)||A1e()}function A1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KU(e,t){if(e){if(typeof e=="string")return hO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hO(e,t)}}function hO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O1e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,o=void 0;try{for(var l=e[Symbol.iterator](),a;!(r=(a=l.next()).done)&&(n.push(a.value),!(t&&n.length===t));r=!0);}catch(h){i=!0,o=h}finally{try{!r&&l.return!=null&&l.return()}finally{if(i)throw o}}return n}}function M1e(e){if(Array.isArray(e))return e}function YU(e){var t=Z0(e,2),n=t[0],r=t[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function JU(e,t,n){if(e.lte(0))return new yr(0);var r=X2.getDigitCount(e.toNumber()),i=new yr(10).pow(r),o=e.div(i),l=r!==1?.05:.1,a=new yr(Math.ceil(o.div(l).toNumber())).add(n).mul(l),h=a.mul(i);return t?h:new yr(Math.ceil(h))}function $1e(e,t,n){var r=1,i=new yr(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new yr(10).pow(X2.getDigitCount(e)-1),i=new yr(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new yr(Math.floor(e)))}else e===0?i=new yr(Math.floor((t-1)/2)):n||(i=new yr(Math.floor(e)));var l=Math.floor((t-1)/2),a=x1e(_1e(function(h){return i.add(new yr(h-l).mul(r)).toNumber()}),uO);return a(0,t)}function QU(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new yr(0),tickMin:new yr(0),tickMax:new yr(0)};var o=JU(new yr(t).sub(e).div(n-1),r,i),l;e<=0&&t>=0?l=new yr(0):(l=new yr(e).add(t).div(2),l=l.sub(new yr(l).mod(o)));var a=Math.ceil(l.sub(e).div(o).toNumber()),h=Math.ceil(new yr(t).sub(l).div(o).toNumber()),d=a+h+1;return d>n?QU(e,t,n,r,i+1):(d<n&&(h=t>0?h+(n-d):h,a=t>0?a:a+(n-d)),{step:o,tickMin:l.sub(new yr(a).mul(o)),tickMax:l.add(new yr(h).mul(o))})}function k1e(e){var t=Z0(e,2),n=t[0],r=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(i,2),a=YU([n,r]),h=Z0(a,2),d=h[0],g=h[1];if(d===-1/0||g===1/0){var v=g===1/0?[d].concat(fO(uO(0,i-1).map(function(){return 1/0}))):[].concat(fO(uO(0,i-1).map(function(){return-1/0})),[g]);return n>r?cO(v):v}if(d===g)return $1e(d,i,o);var b=QU(d,g,l,o),I=b.step,T=b.tickMin,P=b.tickMax,$=X2.rangeStep(T,P.add(new yr(.1).mul(I)),I);return n>r?cO($):$}function N1e(e,t){var n=Z0(e,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=YU([r,i]),a=Z0(l,2),h=a[0],d=a[1];if(h===-1/0||d===1/0)return[r,i];if(h===d)return[h];var g=Math.max(t,2),v=JU(new yr(d).sub(h).div(g-1),o,0),b=[].concat(fO(X2.rangeStep(new yr(h),new yr(d).sub(new yr(.99).mul(v)),v)),[d]);return r>i?cO(b):b}var L1e=ZU(k1e),D1e=ZU(N1e),R1e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function rE(){return rE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rE.apply(this,arguments)}function z1e(e,t){return U1e(e)||j1e(e,t)||B1e(e,t)||F1e()}function F1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B1e(e,t){if(e){if(typeof e=="string")return b4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b4(e,t)}}function b4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j1e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function U1e(e){if(Array.isArray(e))return e}function V1e(e,t){if(e==null)return{};var n=G1e(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function G1e(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function a1(e){var t=e.offset,n=e.layout,r=e.width,i=e.dataKey,o=e.data,l=e.dataPointFormatter,a=e.xAxis,h=e.yAxis,d=V1e(e,R1e),g=jn(d),v=o.map(function(b){var I=l(b,i),T=I.x,P=I.y,$=I.value,O=I.errorVal;if(!O)return null;var k=[],R,j;if(Array.isArray(O)){var F=z1e(O,2);R=F[0],j=F[1]}else R=j=O;if(n==="vertical"){var U=a.scale,G=P+t,Z=G+r,ne=G-r,oe=U($-R),ye=U($+j);k.push({x1:ye,y1:Z,x2:ye,y2:ne}),k.push({x1:oe,y1:G,x2:ye,y2:G}),k.push({x1:oe,y1:Z,x2:oe,y2:ne})}else if(n==="horizontal"){var fe=h.scale,$e=T+t,ae=$e-r,be=$e+r,Te=fe($-R),Le=fe($+j);k.push({x1:ae,y1:Le,x2:be,y2:Le}),k.push({x1:$e,y1:Te,x2:$e,y2:Le}),k.push({x1:ae,y1:Te,x2:be,y2:Te})}return Re.createElement($i,rE({className:"recharts-errorBar",key:"bar-".concat(k.map(function(Ee){return"".concat(Ee.x1,"-").concat(Ee.x2,"-").concat(Ee.y1,"-").concat(Ee.y2)}))},g),k.map(function(Ee){return Re.createElement("line",rE({},Ee,{key:"line-".concat(Ee.x1,"-").concat(Ee.x2,"-").concat(Ee.y1,"-").concat(Ee.y2)}))}))});return Re.createElement($i,{className:"recharts-errorBars"},v)}a1.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};a1.displayName="ErrorBar";function K0(e){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(e)}function w4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function VT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w4(Object(n),!0).forEach(function(r){q1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q1e(e,t,n){return t=W1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W1e(e){var t=H1e(e,"string");return K0(t)==="symbol"?t:String(t)}function H1e(e,t){if(K0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(K0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eV=function(t){var n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,o=t.legendContent,l=Zc(n,Fg);if(!l)return null;var a;return l.props&&l.props.payload?a=l.props&&l.props.payload:o==="children"?a=(r||[]).reduce(function(h,d){var g=d.item,v=d.props,b=v.sectors||v.data||[];return h.concat(b.map(function(I){return{type:l.props.iconType||g.props.legendType,value:I.name,color:I.fill,payload:I}}))},[]):a=(r||[]).map(function(h){var d=h.item,g=d.props,v=g.dataKey,b=g.name,I=g.legendType,T=g.hide;return{inactive:T,dataKey:v,type:l.props.iconType||I||"square",color:Mk(d),value:b||v,payload:d.props}}),VT(VT(VT({},l.props),Fg.getWithHeight(l,i)),{},{payload:a,item:l})};function Y0(e){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y0(e)}function S4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S4(Object(n),!0).forEach(function(r){wg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wg(e,t,n){return t=X1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X1e(e){var t=Z1e(e,"string");return Y0(t)==="symbol"?t:String(t)}function Z1e(e,t){if(Y0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Y0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E4(e){return Q1e(e)||J1e(e)||Y1e(e)||K1e()}function K1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y1e(e,t){if(e){if(typeof e=="string")return dO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dO(e,t)}}function J1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Q1e(e){if(Array.isArray(e))return dO(e)}function dO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ds(e,t,n){return Wn(e)||Wn(t)?n:no(t)?wl(e,t,n):$n(t)?t(e):n}function r0(e,t,n,r){var i=o1e(e,function(a){return Ds(a,t)});if(n==="number"){var o=i.filter(function(a){return It(a)||parseFloat(a)});return o.length?[q2(o),G2(o)]:[1/0,-1/0]}var l=r?i.filter(function(a){return!Wn(a)}):i;return l.map(function(a){return no(a)||a instanceof Date?a:""})}var ebe=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,l=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var h=o.range,d=0;d<a;d++){var g=d>0?i[d-1].coordinate:i[a-1].coordinate,v=i[d].coordinate,b=d>=a-1?i[0].coordinate:i[d+1].coordinate,I=void 0;if(yu(v-g)!==yu(b-v)){var T=[];if(yu(b-v)===yu(h[1]-h[0])){I=b;var P=v+h[1]-h[0];T[0]=Math.min(P,(P+g)/2),T[1]=Math.max(P,(P+g)/2)}else{I=g;var $=b+h[1]-h[0];T[0]=Math.min(v,($+v)/2),T[1]=Math.max(v,($+v)/2)}var O=[Math.min(v,(I+v)/2),Math.max(v,(I+v)/2)];if(t>O[0]&&t<=O[1]||t>=T[0]&&t<=T[1]){l=i[d].index;break}}else{var k=Math.min(g,b),R=Math.max(g,b);if(t>(k+v)/2&&t<=(R+v)/2){l=i[d].index;break}}}else for(var j=0;j<a;j++)if(j===0&&t<=(r[j].coordinate+r[j+1].coordinate)/2||j>0&&j<a-1&&t>(r[j].coordinate+r[j-1].coordinate)/2&&t<=(r[j].coordinate+r[j+1].coordinate)/2||j===a-1&&t>(r[j].coordinate+r[j-1].coordinate)/2){l=r[j].index;break}return l},Mk=function(t){var n=t,r=n.type.displayName,i=t.props,o=i.stroke,l=i.fill,a;switch(r){case"Line":a=o;break;case"Area":case"Radar":a=o&&o!=="none"?o:l;break;default:a=l;break}return a},tbe=function(t){var n=t.barSize,r=t.stackGroups,i=r===void 0?{}:r;if(!i)return{};for(var o={},l=Object.keys(i),a=0,h=l.length;a<h;a++)for(var d=i[l[a]].stackGroups,g=Object.keys(d),v=0,b=g.length;v<b;v++){var I=d[g[v]],T=I.items,P=I.cateAxisId,$=T.filter(function(R){return ef(R.type).indexOf("Bar")>=0});if($&&$.length){var O=$[0].props.barSize,k=$[0].props[P];o[k]||(o[k]=[]),o[k].push({item:$[0],stackList:$.slice(1),barSize:Wn(O)?n:O})}}return o},nbe=function(t){var n=t.barGap,r=t.barCategoryGap,i=t.bandSize,o=t.sizeList,l=o===void 0?[]:o,a=t.maxBarSize,h=l.length;if(h<1)return null;var d=Lg(n,i,0,!0),g,v=[];if(l[0].barSize===+l[0].barSize){var b=!1,I=i/h,T=l.reduce(function(j,F){return j+F.barSize||0},0);T+=(h-1)*d,T>=i&&(T-=(h-1)*d,d=0),T>=i&&I>0&&(b=!0,I*=.9,T=h*I);var P=(i-T)/2>>0,$={offset:P-d,size:0};g=l.reduce(function(j,F){var U={item:F.item,position:{offset:$.offset+$.size+d,size:b?I:F.barSize}},G=[].concat(E4(j),[U]);return $=G[G.length-1].position,F.stackList&&F.stackList.length&&F.stackList.forEach(function(Z){G.push({item:Z,position:$})}),G},v)}else{var O=Lg(r,i,0,!0);i-2*O-(h-1)*d<=0&&(d=0);var k=(i-2*O-(h-1)*d)/h;k>1&&(k>>=0);var R=a===+a?Math.min(k,a):k;g=l.reduce(function(j,F,U){var G=[].concat(E4(j),[{item:F.item,position:{offset:O+(k+d)*U+(k-R)/2,size:R}}]);return F.stackList&&F.stackList.length&&F.stackList.forEach(function(Z){G.push({item:Z,position:G[G.length-1].position})}),G},v)}return g},rbe=function(t,n,r,i){var o=r.children,l=r.width,a=r.margin,h=l-(a.left||0)-(a.right||0),d=eV({children:o,legendWidth:h});if(d){var g=i||{},v=g.width,b=g.height,I=d.align,T=d.verticalAlign,P=d.layout;if((P==="vertical"||P==="horizontal"&&T==="middle")&&I!=="center"&&It(t[I]))return gl(gl({},t),{},wg({},I,t[I]+(v||0)));if((P==="horizontal"||P==="vertical"&&I==="center")&&T!=="middle"&&It(t[T]))return gl(gl({},t),{},wg({},T,t[T]+(b||0)))}return t},ibe=function(t,n,r){return Wn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},tV=function(t,n,r,i,o){var l=n.props.children,a=Sl(l,a1).filter(function(d){return ibe(i,o,d.props.direction)});if(a&&a.length){var h=a.map(function(d){return d.props.dataKey});return t.reduce(function(d,g){var v=Ds(g,r,0),b=Array.isArray(v)?[q2(v),G2(v)]:[v,v],I=h.reduce(function(T,P){var $=Ds(g,P,0),O=b[0]-Math.abs(Array.isArray($)?$[0]:$),k=b[1]+Math.abs(Array.isArray($)?$[1]:$);return[Math.min(O,T[0]),Math.max(k,T[1])]},[1/0,-1/0]);return[Math.min(I[0],d[0]),Math.max(I[1],d[1])]},[1/0,-1/0])}return null},obe=function(t,n,r,i,o){var l=n.map(function(a){return tV(t,a,r,o,i)}).filter(function(a){return!Wn(a)});return l&&l.length?l.reduce(function(a,h){return[Math.min(a[0],h[0]),Math.max(a[1],h[1])]},[1/0,-1/0]):null},nV=function(t,n,r,i,o){var l=n.map(function(h){var d=h.props.dataKey;return r==="number"&&d&&tV(t,h,d,i)||r0(t,d,r,o)});if(r==="number")return l.reduce(function(h,d){return[Math.min(h[0],d[0]),Math.max(h[1],d[1])]},[1/0,-1/0]);var a={};return l.reduce(function(h,d){for(var g=0,v=d.length;g<v;g++)a[d[g]]||(a[d[g]]=!0,h.push(d[g]));return h},[])},rV=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},C4=function(t,n,r,i){if(i)return t.map(function(h){return h.coordinate});var o,l,a=t.map(function(h){return h.coordinate===n&&(o=!0),h.coordinate===r&&(l=!0),h.coordinate});return o||a.push(n),l||a.push(r),a},dh=function(t,n,r){if(!t)return null;var i=t.scale,o=t.duplicateDomain,l=t.type,a=t.range,h=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||r)&&l==="category"&&i.bandwidth?i.bandwidth()/h:0;if(d=t.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?yu(a[0]-a[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var g=(t.ticks||t.niceTicks).map(function(v){var b=o?o.indexOf(v):v;return{coordinate:i(b)+d,value:v,offset:d}});return g.filter(function(v){return!Qx(v.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(v,b){return{coordinate:i(v)+d,value:v,index:b,offset:d}}):i.ticks&&!r?i.ticks(t.tickCount).map(function(v){return{coordinate:i(v)+d,value:v,offset:d}}):i.domain().map(function(v,b){return{coordinate:i(v)+d,value:o?o[v]:v,index:b,offset:d}})},GT=new WeakMap,uw=function(t,n){if(typeof n!="function")return t;GT.has(t)||GT.set(t,new WeakMap);var r=GT.get(t);if(r.has(n))return r.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},abe=function(t,n,r){var i=t.scale,o=t.type,l=t.layout,a=t.axisType;if(i==="auto")return l==="radial"&&a==="radiusAxis"?{scale:V0(),realScaleType:"band"}:l==="radial"&&a==="angleAxis"?{scale:JS(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:n0(),realScaleType:"point"}:o==="category"?{scale:V0(),realScaleType:"band"}:{scale:JS(),realScaleType:"linear"};if(Jx(i)){var h="scale".concat(M2(i));return{scale:(y4[h]||n0)(),realScaleType:y4[h]?h:"point"}}return $n(i)?{scale:i}:{scale:n0(),realScaleType:"point"}},I4=1e-4,sbe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,i=t.range(),o=Math.min(i[0],i[1])-I4,l=Math.max(i[0],i[1])+I4,a=t(n[0]),h=t(n[r-1]);(a<o||a>l||h<o||h>l)&&t.domain([n[0],n[r-1]])}},lbe=function(t,n){if(!t)return null;for(var r=0,i=t.length;r<i;r++)if(t[r].item===n)return t[r].position;return null},ube=function(t,n){if(!n||n.length!==2||!It(n[0])||!It(n[1]))return t;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[t[0],t[1]];return(!It(t[0])||t[0]<r)&&(o[0]=r),(!It(t[1])||t[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},cbe=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var o=0,l=0,a=0;a<n;++a){var h=Qx(t[a][r][1])?t[a][r][0]:t[a][r][1];h>=0?(t[a][r][0]=o,t[a][r][1]=o+h,o=t[a][r][1]):(t[a][r][0]=l,t[a][r][1]=l+h,l=t[a][r][1])}},fbe=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var o=0,l=0;l<n;++l){var a=Qx(t[l][r][1])?t[l][r][0]:t[l][r][1];a>=0?(t[l][r][0]=o,t[l][r][1]=o+a,o=t[l][r][1]):(t[l][r][0]=0,t[l][r][1]=0)}},hbe={sign:cbe,expand:lle,none:Dg,silhouette:ule,wiggle:cle,positive:fbe},dbe=function(t,n,r){var i=n.map(function(a){return a.props.dataKey}),o=hbe[r],l=sle().keys(i).value(function(a,h){return+Ds(a,h,0)}).order($A).offset(o);return l(t)},pbe=function(t,n,r,i,o,l){if(!t)return null;var a=l?n.reverse():n,h={},d=a.reduce(function(v,b){var I=b.props,T=I.stackId,P=I.hide;if(P)return v;var $=b.props[r],O=v[$]||{hasStack:!1,stackGroups:{}};if(no(T)){var k=O.stackGroups[T]||{numericAxisId:r,cateAxisId:i,items:[]};k.items.push(b),O.hasStack=!0,O.stackGroups[T]=k}else O.stackGroups[e1("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[b]};return gl(gl({},v),{},wg({},$,O))},h),g={};return Object.keys(d).reduce(function(v,b){var I=d[b];if(I.hasStack){var T={};I.stackGroups=Object.keys(I.stackGroups).reduce(function(P,$){var O=I.stackGroups[$];return gl(gl({},P),{},wg({},$,{numericAxisId:r,cateAxisId:i,items:O.items,stackedData:dbe(t,O.items,o)}))},T)}return gl(gl({},v),{},wg({},b,I))},g)},mbe=function(t,n){var r=n.realScaleType,i=n.type,o=n.tickCount,l=n.originalDomain,a=n.allowDecimals,h=r||n.scale;if(h!=="auto"&&h!=="linear")return null;if(o&&i==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=t.domain();if(!d.length)return null;var g=L1e(d,o,a);return t.domain([q2(g),G2(g)]),{niceTicks:g}}if(o&&i==="number"){var v=t.domain(),b=D1e(v,o,a);return{niceTicks:b}}return null},T4=function(t){var n=t.axis,r=t.ticks,i=t.bandSize,o=t.entry,l=t.index,a=t.dataKey;if(n.type==="category"){if(!n.allowDuplicatedCategory&&n.dataKey&&!Wn(o[n.dataKey])){var h=CS(r,"value",o[n.dataKey]);if(h)return h.coordinate+i/2}return r[l]?r[l].coordinate+i/2:null}var d=Ds(o,Wn(a)?n.dataKey:a);return Wn(d)?null:n.scale(d)},P4=function(t){var n=t.axis,r=t.ticks,i=t.offset,o=t.bandSize,l=t.entry,a=t.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var h=Ds(l,n.dataKey,n.domain[a]);return Wn(h)?null:n.scale(h)-o/2+i},gbe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},ybe=function(t,n){var r=t.props.stackId;if(no(r)){var i=n[r];if(i){var o=i.items.indexOf(t);return o>=0?i.stackedData[o]:null}}return null},vbe=function(t){return t.reduce(function(n,r){return[q2(r.concat([n[0]]).filter(It)),G2(r.concat([n[1]]).filter(It))]},[1/0,-1/0])},iV=function(t,n,r){return Object.keys(t).reduce(function(i,o){var l=t[o],a=l.stackedData,h=a.reduce(function(d,g){var v=vbe(g.slice(n,r+1));return[Math.min(d[0],v[0]),Math.max(d[1],v[1])]},[1/0,-1/0]);return[Math.min(h[0],i[0]),Math.max(h[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},A4=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,O4=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pO=function(t,n,r){if($n(t))return t(n,r);if(!Array.isArray(t))return n;var i=[];if(It(t[0]))i[0]=r?t[0]:Math.min(t[0],n[0]);else if(A4.test(t[0])){var o=+A4.exec(t[0])[1];i[0]=n[0]-o}else $n(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(It(t[1]))i[1]=r?t[1]:Math.max(t[1],n[1]);else if(O4.test(t[1])){var l=+O4.exec(t[1])[1];i[1]=n[1]+l}else $n(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},iE=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!r||i>0)return i}if(t&&n&&n.length>=2){for(var o=ik(n,function(v){return v.coordinate}),l=1/0,a=1,h=o.length;a<h;a++){var d=o[a],g=o[a-1];l=Math.min((d.coordinate||0)-(g.coordinate||0),l)}return l===1/0?0:l}return r?void 0:0},M4=function(t,n,r){return!t||!t.length||W2(t,wl(r,"type.defaultProps.domain"))?n:t},oV=function(t,n){var r=t.props,i=r.dataKey,o=r.name,l=r.unit,a=r.formatter,h=r.tooltipType,d=r.chartType;return gl(gl({},jn(t)),{},{dataKey:i,unit:l,formatter:a,name:o||i,color:Mk(t),value:Ds(n,i),type:h,payload:n,chartType:d})};function J0(e){"@babel/helpers - typeof";return J0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J0(e)}function $4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function k4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$4(Object(n),!0).forEach(function(r){_be(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _be(e,t,n){return t=xbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xbe(e){var t=bbe(e,"string");return J0(t)==="symbol"?t:String(t)}function bbe(e,t){if(J0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(J0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oE=Math.PI/180,wbe=function(t){return t*180/Math.PI},qo=function(t,n,r,i){return{x:t+Math.cos(-oE*i)*r,y:n+Math.sin(-oE*i)*r}},Sbe=function(t,n){var r=t.x,i=t.y,o=n.x,l=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-l,2))},Ebe=function(t,n){var r=t.x,i=t.y,o=n.cx,l=n.cy,a=Sbe({x:r,y:i},{x:o,y:l});if(a<=0)return{radius:a};var h=(r-o)/a,d=Math.acos(h);return i>l&&(d=2*Math.PI-d),{radius:a,angle:wbe(d),angleInRadian:d}},Cbe=function(t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),l=Math.min(i,o);return{startAngle:n-l*360,endAngle:r-l*360}},Ibe=function(t,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),l=Math.floor(i/360),a=Math.min(o,l);return t+a*360},N4=function(t,n){var r=t.x,i=t.y,o=Ebe({x:r,y:i},n),l=o.radius,a=o.angle,h=n.innerRadius,d=n.outerRadius;if(l<h||l>d)return!1;if(l===0)return!0;var g=Cbe(n),v=g.startAngle,b=g.endAngle,I=a,T;if(v<=b){for(;I>b;)I-=360;for(;I<v;)I+=360;T=I>=v&&I<=b}else{for(;I>v;)I-=360;for(;I<b;)I+=360;T=I>=b&&I<=v}return T?k4(k4({},n),{},{radius:l,angle:Ibe(I,n)}):null};function Q0(e){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q0(e)}var Tbe=["offset"];function Pbe(e){return $be(e)||Mbe(e)||Obe(e)||Abe()}function Abe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Obe(e,t){if(e){if(typeof e=="string")return mO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mO(e,t)}}function Mbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $be(e){if(Array.isArray(e))return mO(e)}function mO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kbe(e,t){if(e==null)return{};var n=Nbe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Nbe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function L4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L4(Object(n),!0).forEach(function(r){Lbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lbe(e,t,n){return t=Dbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dbe(e){var t=Rbe(e,"string");return Q0(t)==="symbol"?t:String(t)}function Rbe(e,t){if(Q0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Q0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ex.apply(this,arguments)}var zbe=function(t){var n=t.value,r=t.formatter,i=Wn(t.children)?n:t.children;return $n(r)?r(i):i},Fbe=function(t,n){var r=yu(n-t),i=Math.min(Math.abs(n-t),360);return r*i},Bbe=function(t,n,r){var i=t.position,o=t.viewBox,l=t.offset,a=t.className,h=o,d=h.cx,g=h.cy,v=h.innerRadius,b=h.outerRadius,I=h.startAngle,T=h.endAngle,P=h.clockWise,$=(v+b)/2,O=Fbe(I,T),k=O>=0?1:-1,R,j;i==="insideStart"?(R=I+k*l,j=P):i==="insideEnd"?(R=T-k*l,j=!P):i==="end"&&(R=T+k*l,j=P),j=O<=0?j:!j;var F=qo(d,g,$,R),U=qo(d,g,$,R+(j?1:-1)*359),G="M".concat(F.x,",").concat(F.y,`
    A`).concat($,",").concat($,",0,1,").concat(j?0:1,`,
    `).concat(U.x,",").concat(U.y),Z=Wn(t.id)?e1("recharts-radial-line-"):t.id;return Re.createElement("text",ex({},r,{dominantBaseline:"central",className:ir("recharts-radial-bar-label",a)}),Re.createElement("defs",null,Re.createElement("path",{id:Z,d:G})),Re.createElement("textPath",{xlinkHref:"#".concat(Z)},n))},jbe=function(t){var n=t.viewBox,r=t.offset,i=t.position,o=n,l=o.cx,a=o.cy,h=o.innerRadius,d=o.outerRadius,g=o.startAngle,v=o.endAngle,b=(g+v)/2;if(i==="outside"){var I=qo(l,a,d+r,b),T=I.x,P=I.y;return{x:T,y:P,textAnchor:T>=l?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:l,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:l,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:l,y:a,textAnchor:"middle",verticalAnchor:"end"};var $=(h+d)/2,O=qo(l,a,$,b),k=O.x,R=O.y;return{x:k,y:R,textAnchor:"middle",verticalAnchor:"middle"}},Ube=function(t){var n=t.viewBox,r=t.parentViewBox,i=t.offset,o=t.position,l=n,a=l.x,h=l.y,d=l.width,g=l.height,v=g>=0?1:-1,b=v*i,I=v>0?"end":"start",T=v>0?"start":"end",P=d>=0?1:-1,$=P*i,O=P>0?"end":"start",k=P>0?"start":"end";if(o==="top"){var R={x:a+d/2,y:h-v*i,textAnchor:"middle",verticalAnchor:I};return Qi(Qi({},R),r?{height:Math.max(h-r.y,0),width:d}:{})}if(o==="bottom"){var j={x:a+d/2,y:h+g+b,textAnchor:"middle",verticalAnchor:T};return Qi(Qi({},j),r?{height:Math.max(r.y+r.height-(h+g),0),width:d}:{})}if(o==="left"){var F={x:a-$,y:h+g/2,textAnchor:O,verticalAnchor:"middle"};return Qi(Qi({},F),r?{width:Math.max(F.x-r.x,0),height:g}:{})}if(o==="right"){var U={x:a+d+$,y:h+g/2,textAnchor:k,verticalAnchor:"middle"};return Qi(Qi({},U),r?{width:Math.max(r.x+r.width-U.x,0),height:g}:{})}var G=r?{width:d,height:g}:{};return o==="insideLeft"?Qi({x:a+$,y:h+g/2,textAnchor:k,verticalAnchor:"middle"},G):o==="insideRight"?Qi({x:a+d-$,y:h+g/2,textAnchor:O,verticalAnchor:"middle"},G):o==="insideTop"?Qi({x:a+d/2,y:h+b,textAnchor:"middle",verticalAnchor:T},G):o==="insideBottom"?Qi({x:a+d/2,y:h+g-b,textAnchor:"middle",verticalAnchor:I},G):o==="insideTopLeft"?Qi({x:a+$,y:h+b,textAnchor:k,verticalAnchor:T},G):o==="insideTopRight"?Qi({x:a+d-$,y:h+b,textAnchor:O,verticalAnchor:T},G):o==="insideBottomLeft"?Qi({x:a+$,y:h+g-b,textAnchor:k,verticalAnchor:I},G):o==="insideBottomRight"?Qi({x:a+d-$,y:h+g-b,textAnchor:O,verticalAnchor:I},G):zy(o)&&(It(o.x)||ep(o.x))&&(It(o.y)||ep(o.y))?Qi({x:a+Lg(o.x,d),y:h+Lg(o.y,g),textAnchor:"end",verticalAnchor:"end"},G):Qi({x:a+d/2,y:h+g/2,textAnchor:"middle",verticalAnchor:"middle"},G)},Vbe=function(t){return"cx"in t&&It(t.cx)};function xo(e){var t=e.offset,n=t===void 0?5:t,r=kbe(e,Tbe),i=Qi({offset:n},r),o=i.viewBox,l=i.position,a=i.value,h=i.children,d=i.content,g=i.className,v=g===void 0?"":g,b=i.textBreakAll;if(!o||Wn(a)&&Wn(h)&&!D.isValidElement(d)&&!$n(d))return null;if(D.isValidElement(d))return D.cloneElement(d,i);var I;if($n(d)){if(I=D.createElement(d,i),D.isValidElement(I))return I}else I=zbe(i);var T=Vbe(o),P=jn(i,!0);if(T&&(l==="insideStart"||l==="insideEnd"||l==="end"))return Bbe(i,I,P);var $=T?jbe(i):Ube(i);return Re.createElement(qS,ex({className:ir("recharts-label",v)},P,$,{breakAll:b}),I)}xo.displayName="Label";var aV=function(t){var n=t.cx,r=t.cy,i=t.angle,o=t.startAngle,l=t.endAngle,a=t.r,h=t.radius,d=t.innerRadius,g=t.outerRadius,v=t.x,b=t.y,I=t.top,T=t.left,P=t.width,$=t.height,O=t.clockWise,k=t.labelViewBox;if(k)return k;if(It(P)&&It($)){if(It(v)&&It(b))return{x:v,y:b,width:P,height:$};if(It(I)&&It(T))return{x:I,y:T,width:P,height:$}}return It(v)&&It(b)?{x:v,y:b,width:0,height:0}:It(n)&&It(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:l||i||0,innerRadius:d||0,outerRadius:g||h||a||0,clockWise:O}:t.viewBox?t.viewBox:{}},Gbe=function(t,n){return t?t===!0?Re.createElement(xo,{key:"label-implicit",viewBox:n}):no(t)?Re.createElement(xo,{key:"label-implicit",viewBox:n,value:t}):D.isValidElement(t)?t.type===xo?D.cloneElement(t,{key:"label-implicit",viewBox:n}):Re.createElement(xo,{key:"label-implicit",content:t,viewBox:n}):$n(t)?Re.createElement(xo,{key:"label-implicit",content:t,viewBox:n}):zy(t)?Re.createElement(xo,ex({viewBox:n},t,{key:"label-implicit"})):null:null},qbe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var i=t.children,o=aV(t),l=Sl(i,xo).map(function(h,d){return D.cloneElement(h,{viewBox:n||o,key:"label-".concat(d)})});if(!r)return l;var a=Gbe(t.label,n||o);return[a].concat(Pbe(l))};xo.parseViewBox=aV;xo.renderCallByParent=qbe;function Wbe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Hbe=Wbe;const Xbe=hr(Hbe);function tx(e){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tx(e)}var Zbe=["valueAccessor"],Kbe=["data","dataKey","clockWise","id","textBreakAll"];function Ybe(e){return twe(e)||ewe(e)||Qbe(e)||Jbe()}function Jbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qbe(e,t){if(e){if(typeof e=="string")return gO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gO(e,t)}}function ewe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function twe(e){if(Array.isArray(e))return gO(e)}function gO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aE(){return aE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aE.apply(this,arguments)}function D4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function R4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D4(Object(n),!0).forEach(function(r){nwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nwe(e,t,n){return t=rwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rwe(e){var t=iwe(e,"string");return tx(t)==="symbol"?t:String(t)}function iwe(e,t){if(tx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z4(e,t){if(e==null)return{};var n=owe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function owe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var awe=function(t){return Array.isArray(t.value)?Xbe(t.value):t.value};function Lh(e){var t=e.valueAccessor,n=t===void 0?awe:t,r=z4(e,Zbe),i=r.data,o=r.dataKey,l=r.clockWise,a=r.id,h=r.textBreakAll,d=z4(r,Kbe);return!i||!i.length?null:Re.createElement($i,{className:"recharts-label-list"},i.map(function(g,v){var b=Wn(o)?n(g,v):Ds(g&&g.payload,o),I=Wn(a)?{}:{id:"".concat(a,"-").concat(v)};return Re.createElement(xo,aE({},jn(g,!0),d,I,{parentViewBox:g.parentViewBox,value:b,textBreakAll:h,viewBox:xo.parseViewBox(Wn(l)?g:R4(R4({},g),{},{clockWise:l})),key:"label-".concat(v),index:v}))}))}Lh.displayName="LabelList";function swe(e,t){return e?e===!0?Re.createElement(Lh,{key:"labelList-implicit",data:t}):Re.isValidElement(e)||$n(e)?Re.createElement(Lh,{key:"labelList-implicit",data:t,content:e}):zy(e)?Re.createElement(Lh,aE({data:t},e,{key:"labelList-implicit"})):null:null}function lwe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=Sl(r,Lh).map(function(l,a){return D.cloneElement(l,{data:t,key:"labelList-".concat(a)})});if(!n)return i;var o=swe(e.label,t);return[o].concat(Ybe(i))}Lh.renderCallByParent=lwe;function nx(e){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nx(e)}function yO(){return yO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yO.apply(this,arguments)}function F4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function B4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F4(Object(n),!0).forEach(function(r){uwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uwe(e,t,n){return t=cwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cwe(e){var t=fwe(e,"string");return nx(t)==="symbol"?t:String(t)}function fwe(e,t){if(nx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hwe=function(t,n){var r=yu(n-t),i=Math.min(Math.abs(n-t),359.999);return r*i},cw=function(t){var n=t.cx,r=t.cy,i=t.radius,o=t.angle,l=t.sign,a=t.isExternal,h=t.cornerRadius,d=t.cornerIsExternal,g=h*(a?1:-1)+i,v=Math.asin(h/g)/oE,b=d?o:o+l*v,I=qo(n,r,g,b),T=qo(n,r,i,b),P=d?o-l*v:o,$=qo(n,r,g*Math.cos(v*oE),P);return{center:I,circleTangency:T,lineTangency:$,theta:v}},sV=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,o=t.outerRadius,l=t.startAngle,a=t.endAngle,h=hwe(l,a),d=l+h,g=qo(n,r,o,l),v=qo(n,r,o,d),b="M ".concat(g.x,",").concat(g.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(h)>180),",").concat(+(l>d),`,
    `).concat(v.x,",").concat(v.y,`
  `);if(i>0){var I=qo(n,r,i,l),T=qo(n,r,i,d);b+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(h)>180),",").concat(+(l<=d),`,
            `).concat(I.x,",").concat(I.y," Z")}else b+="L ".concat(n,",").concat(r," Z");return b},dwe=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,o=t.outerRadius,l=t.cornerRadius,a=t.forceCornerRadius,h=t.cornerIsExternal,d=t.startAngle,g=t.endAngle,v=yu(g-d),b=cw({cx:n,cy:r,radius:o,angle:d,sign:v,cornerRadius:l,cornerIsExternal:h}),I=b.circleTangency,T=b.lineTangency,P=b.theta,$=cw({cx:n,cy:r,radius:o,angle:g,sign:-v,cornerRadius:l,cornerIsExternal:h}),O=$.circleTangency,k=$.lineTangency,R=$.theta,j=h?Math.abs(d-g):Math.abs(d-g)-P-R;if(j<0)return a?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):sV({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:d,endAngle:g});var F="M ".concat(T.x,",").concat(T.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(v<0),",").concat(I.x,",").concat(I.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(j>180),",").concat(+(v<0),",").concat(O.x,",").concat(O.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(v<0),",").concat(k.x,",").concat(k.y,`
  `);if(i>0){var U=cw({cx:n,cy:r,radius:i,angle:d,sign:v,isExternal:!0,cornerRadius:l,cornerIsExternal:h}),G=U.circleTangency,Z=U.lineTangency,ne=U.theta,oe=cw({cx:n,cy:r,radius:i,angle:g,sign:-v,isExternal:!0,cornerRadius:l,cornerIsExternal:h}),ye=oe.circleTangency,fe=oe.lineTangency,$e=oe.theta,ae=h?Math.abs(d-g):Math.abs(d-g)-ne-$e;if(ae<0&&l===0)return"".concat(F,"L").concat(n,",").concat(r,"Z");F+="L".concat(fe.x,",").concat(fe.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(v<0),",").concat(ye.x,",").concat(ye.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ae>180),",").concat(+(v>0),",").concat(G.x,",").concat(G.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(v<0),",").concat(Z.x,",").concat(Z.y,"Z")}else F+="L".concat(n,",").concat(r,"Z");return F},pwe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},lV=function(t){var n=B4(B4({},pwe),t),r=n.cx,i=n.cy,o=n.innerRadius,l=n.outerRadius,a=n.cornerRadius,h=n.forceCornerRadius,d=n.cornerIsExternal,g=n.startAngle,v=n.endAngle,b=n.className;if(l<o||g===v)return null;var I=ir("recharts-sector",b),T=l-o,P=Lg(a,T,0,!0),$;return P>0&&Math.abs(g-v)<360?$=dwe({cx:r,cy:i,innerRadius:o,outerRadius:l,cornerRadius:Math.min(P,T/2),forceCornerRadius:h,cornerIsExternal:d,startAngle:g,endAngle:v}):$=sV({cx:r,cy:i,innerRadius:o,outerRadius:l,startAngle:g,endAngle:v}),Re.createElement("path",yO({},jn(n,!0),{className:I,d:$,role:"img"}))};function rx(e){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rx(e)}function vO(){return vO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vO.apply(this,arguments)}function j4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function U4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j4(Object(n),!0).forEach(function(r){mwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mwe(e,t,n){return t=gwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gwe(e){var t=ywe(e,"string");return rx(t)==="symbol"?t:String(t)}function ywe(e,t){if(rx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V4={curveBasisClosed:Kse,curveBasisOpen:Yse,curveBasis:Zse,curveBumpX:Lse,curveBumpY:Dse,curveLinearClosed:Jse,curveLinear:k2,curveMonotoneX:Qse,curveMonotoneY:ele,curveNatural:tle,curveStep:nle,curveStepAfter:ile,curveStepBefore:rle},fw=function(t){return t.x===+t.x&&t.y===+t.y},I_=function(t){return t.x},T_=function(t){return t.y},vwe=function(t,n){if($n(t))return t;var r="curve".concat(M2(t));return(r==="curveMonotone"||r==="curveBump")&&n?V4["".concat(r).concat(n==="vertical"?"Y":"X")]:V4[r]||k2},_we=function(t){var n=t.type,r=n===void 0?"linear":n,i=t.points,o=i===void 0?[]:i,l=t.baseLine,a=t.layout,h=t.connectNulls,d=h===void 0?!1:h,g=vwe(r,a),v=d?o.filter(function(P){return fw(P)}):o,b;if(Array.isArray(l)){var I=d?l.filter(function(P){return fw(P)}):l,T=v.map(function(P,$){return U4(U4({},P),{},{base:I[$]})});return a==="vertical"?b=ew().y(T_).x1(I_).x0(function(P){return P.base.x}):b=ew().x(I_).y1(T_).y0(function(P){return P.base.y}),b.defined(fw).curve(g),b(T)}return a==="vertical"&&It(l)?b=ew().y(T_).x1(I_).x0(l):It(l)?b=ew().x(I_).y1(T_).y0(l):b=o9().x(I_).y(T_),b.defined(fw).curve(g),b(v)},_O=function(t){var n=t.className,r=t.points,i=t.path,o=t.pathRef;if((!r||!r.length)&&!i)return null;var l=r&&r.length?_we(t):i;return Re.createElement("path",vO({},jn(t),IS(t),{className:ir("recharts-curve",n),d:l,ref:o}))};function ix(e){"@babel/helpers - typeof";return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ix(e)}function sE(){return sE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sE.apply(this,arguments)}function xwe(e,t){return Ewe(e)||Swe(e,t)||wwe(e,t)||bwe()}function bwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wwe(e,t){if(e){if(typeof e=="string")return G4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G4(e,t)}}function G4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Swe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function Ewe(e){if(Array.isArray(e))return e}function q4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function W4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(n),!0).forEach(function(r){Cwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cwe(e,t,n){return t=Iwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Iwe(e){var t=Twe(e,"string");return ix(t)==="symbol"?t:String(t)}function Twe(e,t){if(ix(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ix(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H4=function(t,n,r,i,o){var l=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,h=r>=0?1:-1,d=i>=0&&r>=0||i<0&&r<0?1:0,g;if(l>0&&o instanceof Array){for(var v=[0,0,0,0],b=0,I=4;b<I;b++)v[b]=o[b]>l?l:o[b];g="M".concat(t,",").concat(n+a*v[0]),v[0]>0&&(g+="A ".concat(v[0],",").concat(v[0],",0,0,").concat(d,",").concat(t+h*v[0],",").concat(n)),g+="L ".concat(t+r-h*v[1],",").concat(n),v[1]>0&&(g+="A ".concat(v[1],",").concat(v[1],",0,0,").concat(d,`,
        `).concat(t+r,",").concat(n+a*v[1])),g+="L ".concat(t+r,",").concat(n+i-a*v[2]),v[2]>0&&(g+="A ".concat(v[2],",").concat(v[2],",0,0,").concat(d,`,
        `).concat(t+r-h*v[2],",").concat(n+i)),g+="L ".concat(t+h*v[3],",").concat(n+i),v[3]>0&&(g+="A ".concat(v[3],",").concat(v[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+i-a*v[3])),g+="Z"}else if(l>0&&o===+o&&o>0){var T=Math.min(l,o);g="M ".concat(t,",").concat(n+a*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(d,",").concat(t+h*T,",").concat(n,`
            L `).concat(t+r-h*T,",").concat(n,`
            A `).concat(T,",").concat(T,",0,0,").concat(d,",").concat(t+r,",").concat(n+a*T,`
            L `).concat(t+r,",").concat(n+i-a*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(d,",").concat(t+r-h*T,",").concat(n+i,`
            L `).concat(t+h*T,",").concat(n+i,`
            A `).concat(T,",").concat(T,",0,0,").concat(d,",").concat(t,",").concat(n+i-a*T," Z")}else g="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return g},Pwe=function(t,n){if(!t||!n)return!1;var r=t.x,i=t.y,o=n.x,l=n.y,a=n.width,h=n.height;if(Math.abs(a)>0&&Math.abs(h)>0){var d=Math.min(o,o+a),g=Math.max(o,o+a),v=Math.min(l,l+h),b=Math.max(l,l+h);return r>=d&&r<=g&&i>=v&&i<=b}return!1},Awe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$k=function(t){var n=W4(W4({},Awe),t),r=D.useRef(),i=D.useState(-1),o=xwe(i,2),l=o[0],a=o[1];D.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var j=r.current.getTotalLength();j&&a(j)}catch{}},[]);var h=n.x,d=n.y,g=n.width,v=n.height,b=n.radius,I=n.className,T=n.animationEasing,P=n.animationDuration,$=n.animationBegin,O=n.isAnimationActive,k=n.isUpdateAnimationActive;if(h!==+h||d!==+d||g!==+g||v!==+v||g===0||v===0)return null;var R=ir("recharts-rectangle",I);return k?Re.createElement(pf,{canBegin:l>0,from:{width:g,height:v,x:h,y:d},to:{width:g,height:v,x:h,y:d},duration:P,animationEasing:T,isActive:k},function(j){var F=j.width,U=j.height,G=j.x,Z=j.y;return Re.createElement(pf,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:$,duration:P,isActive:O,easing:T},Re.createElement("path",sE({},jn(n,!0),{className:R,d:H4(G,Z,F,U,b),ref:r})))}):Re.createElement("path",sE({},jn(n,!0),{className:R,d:H4(h,d,g,v,b)}))};function xO(){return xO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xO.apply(this,arguments)}var kk=function(t){var n=t.cx,r=t.cy,i=t.r,o=t.className,l=ir("recharts-dot",o);return n===+n&&r===+r&&i===+i?Re.createElement("circle",xO({},jn(t),IS(t),{className:l,cx:n,cy:r,r:i})):null};function ox(e){"@babel/helpers - typeof";return ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ox(e)}var Owe=["x","y","top","left","width","height","className"];function bO(){return bO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bO.apply(this,arguments)}function X4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mwe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X4(Object(n),!0).forEach(function(r){$we(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $we(e,t,n){return t=kwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kwe(e){var t=Nwe(e,"string");return ox(t)==="symbol"?t:String(t)}function Nwe(e,t){if(ox(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ox(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lwe(e,t){if(e==null)return{};var n=Dwe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Dwe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var Rwe=function(t,n,r,i,o,l){return"M".concat(t,",").concat(o,"v").concat(i,"M").concat(l,",").concat(n,"h").concat(r)},zwe=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,o=i===void 0?0:i,l=t.top,a=l===void 0?0:l,h=t.left,d=h===void 0?0:h,g=t.width,v=g===void 0?0:g,b=t.height,I=b===void 0?0:b,T=t.className,P=Lwe(t,Owe),$=Mwe({x:r,y:o,top:a,left:d,width:v,height:I},P);return!It(r)||!It(o)||!It(v)||!It(I)||!It(a)||!It(d)?null:Re.createElement("path",bO({},jn($,!0),{className:ir("recharts-cross",T),d:Rwe(r,o,v,I,a,d)}))},Fwe=P9,Bwe=Fwe(Object.getPrototypeOf,Object),jwe=Bwe,Uwe=Nf,Vwe=jwe,Gwe=Lf,qwe="[object Object]",Wwe=Function.prototype,Hwe=Object.prototype,uV=Wwe.toString,Xwe=Hwe.hasOwnProperty,Zwe=uV.call(Object);function Kwe(e){if(!Gwe(e)||Uwe(e)!=qwe)return!1;var t=Vwe(e);if(t===null)return!0;var n=Xwe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&uV.call(n)==Zwe}var Ywe=Kwe;const Jwe=hr(Ywe);var Qwe=Nf,eSe=Lf,tSe="[object Boolean]";function nSe(e){return e===!0||e===!1||eSe(e)&&Qwe(e)==tSe}var rSe=nSe;const iSe=hr(rSe);function ax(e){"@babel/helpers - typeof";return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ax(e)}function lE(){return lE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lE.apply(this,arguments)}function oSe(e,t){return uSe(e)||lSe(e,t)||sSe(e,t)||aSe()}function aSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sSe(e,t){if(e){if(typeof e=="string")return Z4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z4(e,t)}}function Z4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lSe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function uSe(e){if(Array.isArray(e))return e}function K4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Y4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K4(Object(n),!0).forEach(function(r){cSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cSe(e,t,n){return t=fSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fSe(e){var t=hSe(e,"string");return ax(t)==="symbol"?t:String(t)}function hSe(e,t){if(ax(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ax(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J4=function(t,n,r,i,o){var l=r-i,a;return a="M ".concat(t,",").concat(n),a+="L ".concat(t+r,",").concat(n),a+="L ".concat(t+r-l/2,",").concat(n+o),a+="L ".concat(t+r-l/2-i,",").concat(n+o),a+="L ".concat(t,",").concat(n," Z"),a},dSe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pSe=function(t){var n=Y4(Y4({},dSe),t),r=D.useRef(),i=D.useState(-1),o=oSe(i,2),l=o[0],a=o[1];D.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var R=r.current.getTotalLength();R&&a(R)}catch{}},[]);var h=n.x,d=n.y,g=n.upperWidth,v=n.lowerWidth,b=n.height,I=n.className,T=n.animationEasing,P=n.animationDuration,$=n.animationBegin,O=n.isUpdateAnimationActive;if(h!==+h||d!==+d||g!==+g||v!==+v||b!==+b||g===0&&v===0||b===0)return null;var k=ir("recharts-trapezoid",I);return O?Re.createElement(pf,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:b,x:h,y:d},to:{upperWidth:g,lowerWidth:v,height:b,x:h,y:d},duration:P,animationEasing:T,isActive:O},function(R){var j=R.upperWidth,F=R.lowerWidth,U=R.height,G=R.x,Z=R.y;return Re.createElement(pf,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:$,duration:P,easing:T},Re.createElement("path",lE({},jn(n,!0),{className:k,d:J4(G,Z,j,F,U),ref:r})))}):Re.createElement("g",null,Re.createElement("path",lE({},jn(n,!0),{className:k,d:J4(h,d,g,v,b)})))},mSe=["option","shapeType","propTransformer","activeClassName","isActive"];function sx(e){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(e)}function gSe(e,t){if(e==null)return{};var n=ySe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ySe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Q4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q4(Object(n),!0).forEach(function(r){vSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vSe(e,t,n){return t=_Se(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Se(e){var t=xSe(e,"string");return sx(t)==="symbol"?t:String(t)}function xSe(e,t){if(sx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bSe(e,t){return uE(uE({},t),e)}function wSe(e,t){return e==="symbols"}function ez(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Re.createElement($k,n);case"trapezoid":return Re.createElement(pSe,n);case"sector":return Re.createElement(lV,n);case"symbols":if(wSe(t))return Re.createElement(K$,n);break;default:return null}}function SSe(e){return D.isValidElement(e)?e.props:e}function ESe(e){var t=e.option,n=e.shapeType,r=e.propTransformer,i=r===void 0?bSe:r,o=e.activeClassName,l=o===void 0?"recharts-active-shape":o,a=e.isActive,h=gSe(e,mSe),d;if(D.isValidElement(t))d=D.cloneElement(t,uE(uE({},h),SSe(t)));else if($n(t))d=t(h);else if(Jwe(t)&&!iSe(t)){var g=i(t,h);d=Re.createElement(ez,{shapeType:n,elementProps:g})}else{var v=h;d=Re.createElement(ez,{shapeType:n,elementProps:v})}return a?Re.createElement($i,{className:l},d):d}function Z2(e,t){return t!=null&&"trapezoids"in e.props}function K2(e,t){return t!=null&&"sectors"in e.props}function lx(e,t){return t!=null&&"points"in e.props}function CSe(e,t){var n,r,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,o=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return i&&o}function ISe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function TSe(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function PSe(e,t){var n;return Z2(e,t)?n=CSe:K2(e,t)?n=ISe:lx(e,t)&&(n=TSe),n}function ASe(e,t){var n;return Z2(e,t)?n="trapezoids":K2(e,t)?n="sectors":lx(e,t)&&(n="points"),n}function OSe(e,t){if(Z2(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(K2(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return lx(e,t)?t.payload:{}}function MSe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=ASe(n,t),o=OSe(n,t),l=r.filter(function(h,d){var g=W2(o,h),v=n.props[i].filter(function(T){var P=PSe(n,t);return P(T,t)}),b=n.props[i].indexOf(v[v.length-1]),I=d===b;return g&&I}),a=r.indexOf(l[l.length-1]);return a}var $Se=Math.ceil,kSe=Math.max;function NSe(e,t,n,r){for(var i=-1,o=kSe($Se((t-e)/(n||1)),0),l=Array(o);o--;)l[r?o:++i]=e,e+=n;return l}var LSe=NSe,DSe=tU,tz=1/0,RSe=17976931348623157e292;function zSe(e){if(!e)return e===0?e:0;if(e=DSe(e),e===tz||e===-tz){var t=e<0?-1:1;return t*RSe}return e===e?e:0}var cV=zSe,FSe=LSe,BSe=R2,qT=cV;function jSe(e){return function(t,n,r){return r&&typeof r!="number"&&BSe(t,n,r)&&(n=r=void 0),t=qT(t),n===void 0?(n=t,t=0):n=qT(n),r=r===void 0?t<n?1:-1:qT(r),FSe(t,n,r,e)}}var USe=jSe,VSe=USe,GSe=VSe(),qSe=GSe;const cE=hr(qSe);function ux(e){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ux(e)}function nz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nz(Object(n),!0).forEach(function(r){fV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fV(e,t,n){return t=WSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WSe(e){var t=HSe(e,"string");return ux(t)==="symbol"?t:String(t)}function HSe(e,t){if(ux(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ux(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XSe=["Webkit","Moz","O","ms"],ZSe=function(t,n){if(!t)return null;var r=t.replace(/(\w)/,function(o){return o.toUpperCase()}),i=XSe.reduce(function(o,l){return rz(rz({},o),{},fV({},l+r,n))},{});return i[t]=n,i};function Hg(e){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hg(e)}function fE(){return fE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fE.apply(this,arguments)}function iz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function WT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iz(Object(n),!0).forEach(function(r){Ss(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hV(r.key),r)}}function YSe(e,t,n){return t&&oz(e.prototype,t),n&&oz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function JSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wO(e,t)}function wO(e,t){return wO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wO(e,t)}function QSe(e){var t=tEe();return function(){var r=hE(e),i;if(t){var o=hE(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return eEe(this,i)}}function eEe(e,t){if(t&&(Hg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ju(e)}function Ju(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hE(e){return hE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hE(e)}function Ss(e,t,n){return t=hV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hV(e){var t=nEe(e,"string");return Hg(t)==="symbol"?t:String(t)}function nEe(e,t){if(Hg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rEe=function(t){var n=t.data,r=t.startIndex,i=t.endIndex,o=t.x,l=t.width,a=t.travellerWidth;if(!n||!n.length)return{};var h=n.length,d=n0().domain(cE(0,h)).range([o,o+l-a]),g=d.domain().map(function(v){return d(v)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(r),endX:d(i),scale:d,scaleValues:g}},az=function(t){return t.changedTouches&&!!t.changedTouches.length},cx=function(e){JSe(n,e);var t=QSe(n);function n(r){var i;return KSe(this,n),i=t.call(this,r),Ss(Ju(i),"handleDrag",function(o){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(o):i.state.isSlideMoving&&i.handleSlideDrag(o)}),Ss(Ju(i),"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&i.handleDrag(o.changedTouches[0])}),Ss(Ju(i),"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=i.props,l=o.endIndex,a=o.onDragEnd,h=o.startIndex;a==null||a({endIndex:l,startIndex:h})}),i.detachDragEndListener()}),Ss(Ju(i),"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),Ss(Ju(i),"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),Ss(Ju(i),"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),Ss(Ju(i),"handleSlideDragStart",function(o){var l=az(o)?o.changedTouches[0]:o;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:l.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(Ju(i),"startX"),endX:i.handleTravellerDragStart.bind(Ju(i),"endX")},i.state={},i}return YSe(n,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var o=i.startX,l=i.endX,a=this.state.scaleValues,h=this.props,d=h.gap,g=h.data,v=g.length-1,b=Math.min(o,l),I=Math.max(o,l),T=n.getIndexInRange(a,b),P=n.getIndexInRange(a,I);return{startIndex:T-T%d,endIndex:P===v?v:P-P%d}}},{key:"getTextOfTick",value:function(i){var o=this.props,l=o.data,a=o.tickFormatter,h=o.dataKey,d=Ds(l[i],h,i);return $n(a)?a(d,i):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var o=this.state,l=o.slideMoveStartX,a=o.startX,h=o.endX,d=this.props,g=d.x,v=d.width,b=d.travellerWidth,I=d.startIndex,T=d.endIndex,P=d.onChange,$=i.pageX-l;$>0?$=Math.min($,g+v-b-h,g+v-b-a):$<0&&($=Math.max($,g-a,g-h));var O=this.getIndex({startX:a+$,endX:h+$});(O.startIndex!==I||O.endIndex!==T)&&P&&P(O),this.setState({startX:a+$,endX:h+$,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,o){var l=az(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:l.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var o,l=this.state,a=l.brushMoveStartX,h=l.movingTravellerId,d=l.endX,g=l.startX,v=this.state[h],b=this.props,I=b.x,T=b.width,P=b.travellerWidth,$=b.onChange,O=b.gap,k=b.data,R={startX:this.state.startX,endX:this.state.endX},j=i.pageX-a;j>0?j=Math.min(j,I+T-P-v):j<0&&(j=Math.max(j,I-v)),R[h]=v+j;var F=this.getIndex(R),U=F.startIndex,G=F.endIndex,Z=function(){var oe=k.length-1;return h==="startX"&&(d>g?U%O===0:G%O===0)||d<g&&G===oe||h==="endX"&&(d>g?G%O===0:U%O===0)||d>g&&G===oe};this.setState((o={},Ss(o,h,v+j),Ss(o,"brushMoveStartX",i.pageX),o),function(){$&&Z()&&$(F)})}},{key:"handleTravellerMoveKeyboard",value:function(i,o){var l=this,a=this.state,h=a.scaleValues,d=a.startX,g=a.endX,v=this.state[o],b=h.indexOf(v);if(b!==-1){var I=b+i;if(!(I===-1||I>=h.length)){var T=h[I];o==="startX"&&T>=g||o==="endX"&&T<=d||this.setState(Ss({},o,T),function(){l.props.onChange(l.getIndex({startX:l.state.startX,endX:l.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,o=i.x,l=i.y,a=i.width,h=i.height,d=i.fill,g=i.stroke;return Re.createElement("rect",{stroke:g,fill:d,x:o,y:l,width:a,height:h})}},{key:"renderPanorama",value:function(){var i=this.props,o=i.x,l=i.y,a=i.width,h=i.height,d=i.data,g=i.children,v=i.padding,b=D.Children.only(g);return b?Re.cloneElement(b,{x:o,y:l,width:a,height:h,margin:v,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(i,o){var l=this,a=this.props,h=a.y,d=a.travellerWidth,g=a.height,v=a.traveller,b=a.ariaLabel,I=a.data,T=a.startIndex,P=a.endIndex,$=Math.max(i,this.props.x),O=WT(WT({},jn(this.props)),{},{x:$,y:h,width:d,height:g}),k=b||"Min value: ".concat(I[T].name,", Max value: ").concat(I[P].name);return Re.createElement($i,{tabIndex:0,role:"slider","aria-label":k,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,o))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},n.renderTraveller(v,O))}},{key:"renderSlide",value:function(i,o){var l=this.props,a=l.y,h=l.height,d=l.stroke,g=l.travellerWidth,v=Math.min(i,o)+g,b=Math.max(Math.abs(o-i)-g,0);return Re.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:v,y:a,width:b,height:h})}},{key:"renderText",value:function(){var i=this.props,o=i.startIndex,l=i.endIndex,a=i.y,h=i.height,d=i.travellerWidth,g=i.stroke,v=this.state,b=v.startX,I=v.endX,T=5,P={pointerEvents:"none",fill:g};return Re.createElement($i,{className:"recharts-brush-texts"},Re.createElement(qS,fE({textAnchor:"end",verticalAnchor:"middle",x:Math.min(b,I)-T,y:a+h/2},P),this.getTextOfTick(o)),Re.createElement(qS,fE({textAnchor:"start",verticalAnchor:"middle",x:Math.max(b,I)+d+T,y:a+h/2},P),this.getTextOfTick(l)))}},{key:"render",value:function(){var i=this.props,o=i.data,l=i.className,a=i.children,h=i.x,d=i.y,g=i.width,v=i.height,b=i.alwaysShowText,I=this.state,T=I.startX,P=I.endX,$=I.isTextActive,O=I.isSlideMoving,k=I.isTravellerMoving,R=I.isTravellerFocused;if(!o||!o.length||!It(h)||!It(d)||!It(g)||!It(v)||g<=0||v<=0)return null;var j=ir("recharts-brush",l),F=Re.Children.count(a)===1,U=ZSe("userSelect","none");return Re.createElement($i,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:U},this.renderBackground(),F&&this.renderPanorama(),this.renderSlide(T,P),this.renderTravellerLayer(T,"startX"),this.renderTravellerLayer(P,"endX"),($||O||k||R||b)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var o=i.x,l=i.y,a=i.width,h=i.height,d=i.stroke,g=Math.floor(l+h/2)-1;return Re.createElement(Re.Fragment,null,Re.createElement("rect",{x:o,y:l,width:a,height:h,fill:d,stroke:"none"}),Re.createElement("line",{x1:o+1,y1:g,x2:o+a-1,y2:g,fill:"none",stroke:"#fff"}),Re.createElement("line",{x1:o+1,y1:g+2,x2:o+a-1,y2:g+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,o){var l;return Re.isValidElement(i)?l=Re.cloneElement(i,o):$n(i)?l=i(o):l=n.renderDefaultTraveller(o),l}},{key:"getDerivedStateFromProps",value:function(i,o){var l=i.data,a=i.width,h=i.x,d=i.travellerWidth,g=i.updateId,v=i.startIndex,b=i.endIndex;if(l!==o.prevData||g!==o.prevUpdateId)return WT({prevData:l,prevTravellerWidth:d,prevUpdateId:g,prevX:h,prevWidth:a},l&&l.length?rEe({data:l,width:a,x:h,travellerWidth:d,startIndex:v,endIndex:b}):{scale:null,scaleValues:null});if(o.scale&&(a!==o.prevWidth||h!==o.prevX||d!==o.prevTravellerWidth)){o.scale.range([h,h+a-d]);var I=o.scale.domain().map(function(T){return o.scale(T)});return{prevData:l,prevTravellerWidth:d,prevUpdateId:g,prevX:h,prevWidth:a,startX:o.scale(i.startIndex),endX:o.scale(i.endIndex),scaleValues:I}}return null}},{key:"getIndexInRange",value:function(i,o){for(var l=i.length,a=0,h=l-1;h-a>1;){var d=Math.floor((a+h)/2);i[d]>o?h=d:a=d}return o>=i[h]?h:a}}]),n}(D.PureComponent);Ss(cx,"displayName","Brush");Ss(cx,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var iEe=rk;function oEe(e,t){var n;return iEe(e,function(r,i,o){return n=t(r,i,o),!n}),!!n}var aEe=oEe,sEe=x9,lEe=ld,uEe=aEe,cEe=ds,fEe=R2;function hEe(e,t,n){var r=cEe(e)?sEe:uEe;return n&&fEe(e,t,n)&&(t=void 0),r(e,lEe(t))}var dEe=hEe;const pEe=hr(dEe);var fc=function(t,n){var r=t.alwaysShow,i=t.ifOverflow;return r&&(i="extendDomain"),i===n},sz=U9;function mEe(e,t,n){t=="__proto__"&&sz?sz(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var gEe=mEe,yEe=gEe,vEe=B9,_Ee=ld;function xEe(e,t){var n={};return t=_Ee(t),vEe(e,function(r,i,o){yEe(n,i,t(r,i,o))}),n}var bEe=xEe;const wEe=hr(bEe);function SEe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var EEe=SEe,CEe=rk;function IEe(e,t){var n=!0;return CEe(e,function(r,i,o){return n=!!t(r,i,o),n}),n}var TEe=IEe,PEe=EEe,AEe=TEe,OEe=ld,MEe=ds,$Ee=R2;function kEe(e,t,n){var r=MEe(e)?PEe:AEe;return n&&$Ee(e,t,n)&&(t=void 0),r(e,OEe(t))}var NEe=kEe;const dV=hr(NEe);function fx(e){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fx(e)}var LEe=["x","y"];function SO(){return SO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SO.apply(this,arguments)}function lz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function P_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lz(Object(n),!0).forEach(function(r){DEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DEe(e,t,n){return t=REe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function REe(e){var t=zEe(e,"string");return fx(t)==="symbol"?t:String(t)}function zEe(e,t){if(fx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FEe(e,t){if(e==null)return{};var n=BEe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function BEe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function jEe(e,t){var n=e.x,r=e.y,i=FEe(e,LEe),o="".concat(n),l=parseInt(o,10),a="".concat(r),h=parseInt(a,10),d="".concat(t.height||i.height),g=parseInt(d,10),v="".concat(t.width||i.width),b=parseInt(v,10);return P_(P_(P_(P_(P_({},t),i),l?{x:l}:{}),h?{y:h}:{}),{},{height:g,width:b,name:t.name,radius:t.radius})}function uz(e){return Re.createElement(ESe,SO({shapeType:"rectangle",propTransformer:jEe,activeClassName:"recharts-active-bar"},e))}var UEe=["value","background"];function Xg(e){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg(e)}function VEe(e,t){if(e==null)return{};var n=GEe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function GEe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function dE(){return dE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dE.apply(this,arguments)}function cz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cz(Object(n),!0).forEach(function(r){Eh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pV(r.key),r)}}function WEe(e,t,n){return t&&fz(e.prototype,t),n&&fz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function HEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EO(e,t)}function EO(e,t){return EO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EO(e,t)}function XEe(e){var t=KEe();return function(){var r=pE(e),i;if(t){var o=pE(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return ZEe(this,i)}}function ZEe(e,t){if(t&&(Xg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z_(e)}function z_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pE(e){return pE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pE(e)}function Eh(e,t,n){return t=pV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pV(e){var t=YEe(e,"string");return Xg(t)==="symbol"?t:String(t)}function YEe(e,t){if(Xg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y2=function(e){HEe(n,e);var t=XEe(n);function n(){var r;qEe(this,n);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=t.call.apply(t,[this].concat(o)),Eh(z_(r),"state",{isAnimationFinished:!1}),Eh(z_(r),"id",e1("recharts-bar-")),Eh(z_(r),"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),a&&a()}),Eh(z_(r),"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),a&&a()}),r}return WEe(n,[{key:"renderRectanglesStatically",value:function(i){var o=this,l=this.props,a=l.shape,h=l.dataKey,d=l.activeIndex,g=l.activeBar,v=jn(this.props);return i&&i.map(function(b,I){var T=I===d,P=T?g:a,$=mo(mo(mo({},v),b),{},{isActive:T,option:P,index:I,dataKey:h,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return Re.createElement($i,dE({className:"recharts-bar-rectangle"},TS(o.props,b,I),{key:"rectangle-".concat(b==null?void 0:b.x,"-").concat(b==null?void 0:b.y,"-").concat(b==null?void 0:b.value)}),Re.createElement(uz,$))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,o=this.props,l=o.data,a=o.layout,h=o.isAnimationActive,d=o.animationBegin,g=o.animationDuration,v=o.animationEasing,b=o.animationId,I=this.state.prevData;return Re.createElement(pf,{begin:d,duration:g,isActive:h,easing:v,from:{t:0},to:{t:1},key:"bar-".concat(b),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var P=T.t,$=l.map(function(O,k){var R=I&&I[k];if(R){var j=du(R.x,O.x),F=du(R.y,O.y),U=du(R.width,O.width),G=du(R.height,O.height);return mo(mo({},O),{},{x:j(P),y:F(P),width:U(P),height:G(P)})}if(a==="horizontal"){var Z=du(0,O.height),ne=Z(P);return mo(mo({},O),{},{y:O.y+O.height-ne,height:ne})}var oe=du(0,O.width),ye=oe(P);return mo(mo({},O),{},{width:ye})});return Re.createElement($i,null,i.renderRectanglesStatically($))})}},{key:"renderRectangles",value:function(){var i=this.props,o=i.data,l=i.isAnimationActive,a=this.state.prevData;return l&&o&&o.length&&(!a||!W2(a,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var i=this,o=this.props,l=o.data,a=o.dataKey,h=o.activeIndex,d=jn(this.props.background);return l.map(function(g,v){g.value;var b=g.background,I=VEe(g,UEe);if(!b)return null;var T=mo(mo(mo(mo(mo({},I),{},{fill:"#eee"},b),d),TS(i.props,g,v)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:a,index:v,key:"background-bar-".concat(v),className:"recharts-bar-background-rectangle"});return Re.createElement(uz,dE({option:i.props.background,isActive:v===h},T))})}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,a=l.data,h=l.xAxis,d=l.yAxis,g=l.layout,v=l.children,b=Sl(v,a1);if(!b)return null;var I=g==="vertical"?a[0].height/2:a[0].width/2,T=function(O,k){var R=Array.isArray(O.value)?O.value[1]:O.value;return{x:O.x,y:O.y,value:R,errorVal:Ds(O,k)}},P={clipPath:i?"url(#clipPath-".concat(o,")"):null};return Re.createElement($i,P,b.map(function($){return Re.cloneElement($,{key:"error-bar-".concat(o,"-").concat($.props.dataKey),data:a,xAxis:h,yAxis:d,layout:g,offset:I,dataPointFormatter:T})}))}},{key:"render",value:function(){var i=this.props,o=i.hide,l=i.data,a=i.className,h=i.xAxis,d=i.yAxis,g=i.left,v=i.top,b=i.width,I=i.height,T=i.isAnimationActive,P=i.background,$=i.id;if(o||!l||!l.length)return null;var O=this.state.isAnimationFinished,k=ir("recharts-bar",a),R=h&&h.allowDataOverflow,j=d&&d.allowDataOverflow,F=R||j,U=Wn($)?this.id:$;return Re.createElement($i,{className:k},R||j?Re.createElement("defs",null,Re.createElement("clipPath",{id:"clipPath-".concat(U)},Re.createElement("rect",{x:R?g:g-b/2,y:j?v:v-I/2,width:R?b:b*2,height:j?I:I*2}))):null,Re.createElement($i,{className:"recharts-bar-rectangles",clipPath:F?"url(#clipPath-".concat(U,")"):null},P?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(F,U),(!T||O)&&Lh.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:o.curData}:i.data!==o.curData?{curData:i.data}:null}}]),n}(D.PureComponent);Eh(Y2,"displayName","Bar");Eh(Y2,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!0,isAnimationActive:!tf.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Eh(Y2,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,o=e.xAxis,l=e.yAxis,a=e.xAxisTicks,h=e.yAxisTicks,d=e.stackedData,g=e.dataStartIndex,v=e.displayedData,b=e.offset,I=lbe(r,n);if(!I)return null;var T=t.layout,P=n.props,$=P.dataKey,O=P.children,k=P.minPointSize,R=T==="horizontal"?l:o,j=d?R.scale.domain():null,F=gbe({numericAxis:R}),U=Sl(O,rU),G=v.map(function(Z,ne){var oe,ye,fe,$e,ae,be;if(d?oe=ube(d[g+ne],j):(oe=Ds(Z,$),Array.isArray(oe)||(oe=[F,oe])),T==="horizontal"){var Te,Le=[l.scale(oe[0]),l.scale(oe[1])],Ee=Le[0],de=Le[1];ye=P4({axis:o,ticks:a,bandSize:i,offset:I.offset,entry:Z,index:ne}),fe=(Te=de??Ee)!==null&&Te!==void 0?Te:void 0,$e=I.size;var De=Ee-de;if(ae=Number.isNaN(De)?0:De,be={x:ye,y:l.y,width:$e,height:l.height},Math.abs(k)>0&&Math.abs(ae)<Math.abs(k)){var He=yu(ae||k)*(Math.abs(k)-Math.abs(ae));fe-=He,ae+=He}}else{var je=[o.scale(oe[0]),o.scale(oe[1])],et=je[0],Et=je[1];if(ye=et,fe=P4({axis:l,ticks:h,bandSize:i,offset:I.offset,entry:Z,index:ne}),$e=Et-et,ae=I.size,be={x:o.x,y:fe,width:o.width,height:ae},Math.abs(k)>0&&Math.abs($e)<Math.abs(k)){var zt=yu($e||k)*(Math.abs(k)-Math.abs($e));$e+=zt}}return mo(mo(mo({},Z),{},{x:ye,y:fe,width:$e,height:ae,value:d?oe:oe[1],payload:Z,background:be},U&&U[ne]&&U[ne].props),{},{tooltipPayload:[oV(n,Z)],tooltipPosition:{x:ye+$e/2,y:fe+ae/2}})});return mo({data:G,layout:T},b)});function hx(e){"@babel/helpers - typeof";return hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hx(e)}function JEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mV(r.key),r)}}function QEe(e,t,n){return t&&hz(e.prototype,t),n&&hz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dz(Object(n),!0).forEach(function(r){J2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function J2(e,t,n){return t=mV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mV(e){var t=e2e(e,"string");return hx(t)==="symbol"?t:String(t)}function e2e(e,t){if(hx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t2e=function(t,n,r,i,o){var l=t.width,a=t.height,h=t.layout,d=t.children,g=Object.keys(n),v={left:r.left,leftMirror:r.left,right:l-r.right,rightMirror:l-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},b=!!Zc(d,Y2);return g.reduce(function(I,T){var P=n[T],$=P.orientation,O=P.domain,k=P.padding,R=k===void 0?{}:k,j=P.mirror,F=P.reversed,U="".concat($).concat(j?"Mirror":""),G,Z,ne,oe,ye;if(P.type==="number"&&(P.padding==="gap"||P.padding==="no-gap")){var fe=O[1]-O[0],$e=1/0,ae=P.categoricalDomain.sort();ae.forEach(function(Et,zt){zt>0&&($e=Math.min((Et||0)-(ae[zt-1]||0),$e))});var be=$e/fe,Te=P.layout==="vertical"?r.height:r.width;if(P.padding==="gap"&&(G=be*Te/2),P.padding==="no-gap"){var Le=Lg(t.barCategoryGap,be*Te),Ee=be*Te/2;G=Ee-Le-(Ee-Le)/Te*Le}}i==="xAxis"?Z=[r.left+(R.left||0)+(G||0),r.left+r.width-(R.right||0)-(G||0)]:i==="yAxis"?Z=h==="horizontal"?[r.top+r.height-(R.bottom||0),r.top+(R.top||0)]:[r.top+(R.top||0)+(G||0),r.top+r.height-(R.bottom||0)-(G||0)]:Z=P.range,F&&(Z=[Z[1],Z[0]]);var de=abe(P,o,b),De=de.scale,He=de.realScaleType;De.domain(O).range(Z),sbe(De);var je=mbe(De,cu(cu({},P),{},{realScaleType:He}));i==="xAxis"?(ye=$==="top"&&!j||$==="bottom"&&j,ne=r.left,oe=v[U]-ye*P.height):i==="yAxis"&&(ye=$==="left"&&!j||$==="right"&&j,ne=v[U]-ye*P.width,oe=r.top);var et=cu(cu(cu({},P),je),{},{realScaleType:He,x:ne,y:oe,scale:De,width:i==="xAxis"?r.width:P.width,height:i==="yAxis"?r.height:P.height});return et.bandSize=iE(et,je),!P.hide&&i==="xAxis"?v[U]+=(ye?-1:1)*et.height:P.hide||(v[U]+=(ye?-1:1)*et.width),cu(cu({},I),{},J2({},T,et))},{})},gV=function(t,n){var r=t.x,i=t.y,o=n.x,l=n.y;return{x:Math.min(r,o),y:Math.min(i,l),width:Math.abs(o-r),height:Math.abs(l-i)}},n2e=function(t){var n=t.x1,r=t.y1,i=t.x2,o=t.y2;return gV({x:n,y:r},{x:i,y:o})},yV=function(){function e(t){JEe(this,e),this.scale=t}return QEe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+h}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}]),e}();J2(yV,"EPS",1e-4);var Nk=function(t){var n=Object.keys(t).reduce(function(r,i){return cu(cu({},r),{},J2({},i,yV.create(t[i])))},{});return cu(cu({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=o.bandAware,a=o.position;return wEe(i,function(h,d){return n[d].apply(h,{bandAware:l,position:a})})},isInRange:function(i){return dV(i,function(o,l){return n[l].isInRange(o)})}})};function r2e(e){return(e%180+180)%180}var i2e=function(t){var n=t.width,r=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=r2e(i),l=o*Math.PI/180,a=Math.atan(r/n),h=l>a&&l<Math.PI-a?r/Math.sin(l):n/Math.cos(l);return Math.abs(h)};function dx(e){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dx(e)}function pz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pz(Object(n),!0).forEach(function(r){o2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o2e(e,t,n){return t=a2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a2e(e){var t=s2e(e,"string");return dx(t)==="symbol"?t:String(t)}function s2e(e,t){if(dx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(dx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l2e(e,t){return h2e(e)||f2e(e,t)||c2e(e,t)||u2e()}function u2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c2e(e,t){if(e){if(typeof e=="string")return gz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gz(e,t)}}function gz(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function h2e(e){if(Array.isArray(e))return e}function CO(){return CO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CO.apply(this,arguments)}var d2e=function(t,n){var r;return Re.isValidElement(t)?r=Re.cloneElement(t,n):$n(t)?r=t(n):r=Re.createElement("line",CO({},n,{className:"recharts-reference-line-line"})),r},p2e=function(t,n,r,i,o){var l=o.viewBox,a=l.x,h=l.y,d=l.width,g=l.height,v=o.position;if(r){var b=o.y,I=o.yAxis.orientation,T=t.y.apply(b,{position:v});if(fc(o,"discard")&&!t.y.isInRange(T))return null;var P=[{x:a+d,y:T},{x:a,y:T}];return I==="left"?P.reverse():P}if(n){var $=o.x,O=o.xAxis.orientation,k=t.x.apply($,{position:v});if(fc(o,"discard")&&!t.x.isInRange(k))return null;var R=[{x:k,y:h+g},{x:k,y:h}];return O==="top"?R.reverse():R}if(i){var j=o.segment,F=j.map(function(U){return t.apply(U,{position:v})});return fc(o,"discard")&&pEe(F,function(U){return!t.isInRange(U)})?null:F}return null};function Lk(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxis,o=e.yAxis,l=e.shape,a=e.className,h=e.alwaysShow,d=e.clipPathId;lp(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=Nk({x:i.scale,y:o.scale}),v=no(t),b=no(n),I=r&&r.length===2,T=p2e(g,v,b,I,e);if(!T)return null;var P=l2e(T,2),$=P[0],O=$.x,k=$.y,R=P[1],j=R.x,F=R.y,U=fc(e,"hidden")?"url(#".concat(d,")"):void 0,G=mz(mz({clipPath:U},jn(e,!0)),{},{x1:O,y1:k,x2:j,y2:F});return Re.createElement($i,{className:ir("recharts-reference-line",a)},d2e(l,G),xo.renderCallByParent(e,n2e({x1:O,y1:k,x2:j,y2:F})))}Lk.displayName="ReferenceLine";Lk.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function px(e){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},px(e)}function IO(){return IO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IO.apply(this,arguments)}function yz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yz(Object(n),!0).forEach(function(r){m2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m2e(e,t,n){return t=g2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g2e(e){var t=y2e(e,"string");return px(t)==="symbol"?t:String(t)}function y2e(e,t){if(px(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(px(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v2e=function(t){var n=t.x,r=t.y,i=t.xAxis,o=t.yAxis,l=Nk({x:i.scale,y:o.scale}),a=l.apply({x:n,y:r},{bandAware:!0});return fc(t,"discard")&&!l.isInRange(a)?null:a};function s1(e){var t=e.x,n=e.y,r=e.r,i=e.alwaysShow,o=e.clipPathId,l=no(t),a=no(n);if(lp(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!a)return null;var h=v2e(e);if(!h)return null;var d=h.x,g=h.y,v=e.shape,b=e.className,I=fc(e,"hidden")?"url(#".concat(o,")"):void 0,T=vz(vz({clipPath:I},jn(e,!0)),{},{cx:d,cy:g});return Re.createElement($i,{className:ir("recharts-reference-dot",b)},s1.renderDot(v,T),xo.renderCallByParent(e,{x:d-r,y:g-r,width:2*r,height:2*r}))}s1.displayName="ReferenceDot";s1.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};s1.renderDot=function(e,t){var n;return Re.isValidElement(e)?n=Re.cloneElement(e,t):$n(e)?n=e(t):n=Re.createElement(kk,IO({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n};function mx(e){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mx(e)}function TO(){return TO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TO.apply(this,arguments)}function _z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_z(Object(n),!0).forEach(function(r){_2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_z(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _2e(e,t,n){return t=x2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x2e(e){var t=b2e(e,"string");return mx(t)==="symbol"?t:String(t)}function b2e(e,t){if(mx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w2e=function(t,n,r,i,o){var l=o.x1,a=o.x2,h=o.y1,d=o.y2,g=o.xAxis,v=o.yAxis;if(!g||!v)return null;var b=Nk({x:g.scale,y:v.scale}),I={x:t?b.x.apply(l,{position:"start"}):b.x.rangeMin,y:r?b.y.apply(h,{position:"start"}):b.y.rangeMin},T={x:n?b.x.apply(a,{position:"end"}):b.x.rangeMax,y:i?b.y.apply(d,{position:"end"}):b.y.rangeMax};return fc(o,"discard")&&(!b.isInRange(I)||!b.isInRange(T))?null:gV(I,T)};function l1(e){var t=e.x1,n=e.x2,r=e.y1,i=e.y2,o=e.className,l=e.alwaysShow,a=e.clipPathId;lp(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=no(t),d=no(n),g=no(r),v=no(i),b=e.shape;if(!h&&!d&&!g&&!v&&!b)return null;var I=w2e(h,d,g,v,e);if(!I&&!b)return null;var T=fc(e,"hidden")?"url(#".concat(a,")"):void 0;return Re.createElement($i,{className:ir("recharts-reference-area",o)},l1.renderRect(b,xz(xz({clipPath:T},jn(e,!0)),I)),xo.renderCallByParent(e,I))}l1.displayName="ReferenceArea";l1.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};l1.renderRect=function(e,t){var n;return Re.isValidElement(e)?n=Re.cloneElement(e,t):$n(e)?n=e(t):n=Re.createElement($k,TO({},t,{className:"recharts-reference-area-rect"})),n};function vV(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)if(n===void 0||n(e[i])===!0)r.push(e[i]);else return;return r}function S2e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return i2e(r,n)}function E2e(e,t,n){var r=n==="width",i=e.x,o=e.y,l=e.width,a=e.height;return t===1?{start:r?i:o,end:r?i+l:o+a}:{start:r?i+l:o+a,end:r?i:o}}function mE(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function C2e(e,t){return vV(e,t+1)}function I2e(e,t,n,r,i){for(var o=(r||[]).slice(),l=t.start,a=t.end,h=0,d=1,g=l,v=function(){var T=r==null?void 0:r[h];if(T===void 0)return{v:vV(r,d)};var P=h,$,O=function(){return $===void 0&&($=n(T,P)),$},k=T.coordinate,R=h===0||mE(e,k,O,g,a);R||(h=0,g=l,d+=1),R&&(g=k+e*(O()/2+i),h+=d)},b;d<=o.length;)if(b=v(),b)return b.v;return[]}function gx(e){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gx(e)}function bz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bz(Object(n),!0).forEach(function(r){T2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T2e(e,t,n){return t=P2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P2e(e){var t=A2e(e,"string");return gx(t)==="symbol"?t:String(t)}function A2e(e,t){if(gx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O2e(e,t,n,r,i){for(var o=(r||[]).slice(),l=o.length,a=t.start,h=t.end,d=function(b){var I=o[b],T,P=function(){return T===void 0&&(T=n(I,b)),T};if(b===l-1){var $=e*(I.coordinate+e*P()/2-h);o[b]=I=la(la({},I),{},{tickCoord:$>0?I.coordinate-$*e:I.coordinate})}else o[b]=I=la(la({},I),{},{tickCoord:I.coordinate});var O=mE(e,I.tickCoord,P,a,h);O&&(h=I.tickCoord-e*(P()/2+i),o[b]=la(la({},I),{},{isShow:!0}))},g=l-1;g>=0;g--)d(g);return o}function M2e(e,t,n,r,i,o){var l=(r||[]).slice(),a=l.length,h=t.start,d=t.end;if(o){var g=r[a-1],v=n(g,a-1),b=e*(g.coordinate+e*v/2-d);l[a-1]=g=la(la({},g),{},{tickCoord:b>0?g.coordinate-b*e:g.coordinate});var I=mE(e,g.tickCoord,function(){return v},h,d);I&&(d=g.tickCoord-e*(v/2+i),l[a-1]=la(la({},g),{},{isShow:!0}))}for(var T=o?a-1:a,P=function(k){var R=l[k],j,F=function(){return j===void 0&&(j=n(R,k)),j};if(k===0){var U=e*(R.coordinate-e*F()/2-h);l[k]=R=la(la({},R),{},{tickCoord:U<0?R.coordinate-U*e:R.coordinate})}else l[k]=R=la(la({},R),{},{tickCoord:R.coordinate});var G=mE(e,R.tickCoord,F,h,d);G&&(h=R.tickCoord+e*(F()/2+i),l[k]=la(la({},R),{},{isShow:!0}))},$=0;$<T;$++)P($);return l}function PO(e,t,n){var r=e.tick,i=e.ticks,o=e.viewBox,l=e.minTickGap,a=e.orientation,h=e.interval,d=e.tickFormatter,g=e.unit,v=e.angle;if(!i||!i.length||!r)return[];if(It(h)||tf.isSsr)return C2e(i,typeof h=="number"&&It(h)?h:0);var b=[],I=a==="top"||a==="bottom"?"width":"height",T=g&&I==="width"?t0(g,{fontSize:t,letterSpacing:n}):{width:0,height:0},P=function(R,j){var F=$n(d)?d(R.value,j):R.value;return I==="width"?S2e(t0(F,{fontSize:t,letterSpacing:n}),T,v):t0(F,{fontSize:t,letterSpacing:n})[I]},$=i.length>=2?yu(i[1].coordinate-i[0].coordinate):1,O=E2e(o,$,I);return h==="equidistantPreserveStart"?I2e($,O,P,i,l):(h==="preserveStart"||h==="preserveStartEnd"?b=M2e($,O,P,i,l,h==="preserveStartEnd"):b=O2e($,O,P,i,l),b.filter(function(k){return k.isShow}))}var $2e=["viewBox"],k2e=["viewBox"],N2e=["ticks"];function Zg(e){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zg(e)}function lg(){return lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lg.apply(this,arguments)}function wz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wz(Object(n),!0).forEach(function(r){Dk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HT(e,t){if(e==null)return{};var n=L2e(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function L2e(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function D2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_V(r.key),r)}}function R2e(e,t,n){return t&&Sz(e.prototype,t),n&&Sz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function z2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AO(e,t)}function AO(e,t){return AO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AO(e,t)}function F2e(e){var t=U2e();return function(){var r=gE(e),i;if(t){var o=gE(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return B2e(this,i)}}function B2e(e,t){if(t&&(Zg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j2e(e)}function j2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gE(e){return gE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gE(e)}function Dk(e,t,n){return t=_V(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _V(e){var t=V2e(e,"string");return Zg(t)==="symbol"?t:String(t)}function V2e(e,t){if(Zg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i0=function(e){z2e(n,e);var t=F2e(n);function n(r){var i;return D2e(this,n),i=t.call(this,r),i.state={fontSize:"",letterSpacing:""},i}return R2e(n,[{key:"shouldComponentUpdate",value:function(i,o){var l=i.viewBox,a=HT(i,$2e),h=this.props,d=h.viewBox,g=HT(h,k2e);return!xg(l,d)||!xg(a,g)||!xg(o,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var o=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var o=this.props,l=o.x,a=o.y,h=o.width,d=o.height,g=o.orientation,v=o.tickSize,b=o.mirror,I=o.tickMargin,T,P,$,O,k,R,j=b?-1:1,F=i.tickSize||v,U=It(i.tickCoord)?i.tickCoord:i.coordinate;switch(g){case"top":T=P=i.coordinate,O=a+ +!b*d,$=O-j*F,R=$-j*I,k=U;break;case"left":$=O=i.coordinate,P=l+ +!b*h,T=P-j*F,k=T-j*I,R=U;break;case"right":$=O=i.coordinate,P=l+ +b*h,T=P+j*F,k=T+j*I,R=U;break;default:T=P=i.coordinate,O=a+ +b*d,$=O+j*F,R=$+j*I,k=U;break}return{line:{x1:T,y1:$,x2:P,y2:O},tick:{x:k,y:R}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,o=i.orientation,l=i.mirror,a;switch(o){case"left":a=l?"start":"end";break;case"right":a=l?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,o=i.orientation,l=i.mirror,a="end";switch(o){case"left":case"right":a="middle";break;case"top":a=l?"start":"end";break;default:a=l?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.x,l=i.y,a=i.width,h=i.height,d=i.orientation,g=i.mirror,v=i.axisLine,b=Ta(Ta(Ta({},jn(this.props)),jn(v)),{},{fill:"none"});if(d==="top"||d==="bottom"){var I=+(d==="top"&&!g||d==="bottom"&&g);b=Ta(Ta({},b),{},{x1:o,y1:l+I*h,x2:o+a,y2:l+I*h})}else{var T=+(d==="left"&&!g||d==="right"&&g);b=Ta(Ta({},b),{},{x1:o+T*a,y1:l,x2:o+T*a,y2:l+h})}return Re.createElement("line",lg({},b,{className:ir("recharts-cartesian-axis-line",wl(v,"className"))}))}},{key:"renderTicks",value:function(i,o,l){var a=this,h=this.props,d=h.tickLine,g=h.stroke,v=h.tick,b=h.tickFormatter,I=h.unit,T=PO(Ta(Ta({},this.props),{},{ticks:i}),o,l),P=this.getTickTextAnchor(),$=this.getTickVerticalAnchor(),O=jn(this.props),k=jn(v),R=Ta(Ta({},O),{},{fill:"none"},jn(d)),j=T.map(function(F,U){var G=a.getTickLineCoord(F),Z=G.line,ne=G.tick,oe=Ta(Ta(Ta(Ta({textAnchor:P,verticalAnchor:$},O),{},{stroke:"none",fill:g},k),ne),{},{index:U,payload:F,visibleTicksCount:T.length,tickFormatter:b});return Re.createElement($i,lg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(F.value,"-").concat(F.coordinate,"-").concat(F.tickCoord)},TS(a.props,F,U)),d&&Re.createElement("line",lg({},R,Z,{className:ir("recharts-cartesian-axis-tick-line",wl(d,"className"))})),v&&n.renderTickItem(v,oe,"".concat($n(b)?b(F.value,U):F.value).concat(I||"")))});return Re.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var i=this,o=this.props,l=o.axisLine,a=o.width,h=o.height,d=o.ticksGenerator,g=o.className,v=o.hide;if(v)return null;var b=this.props,I=b.ticks,T=HT(b,N2e),P=I;return $n(d)&&(P=I&&I.length>0?d(this.props):d(T)),a<=0||h<=0||!P||!P.length?null:Re.createElement($i,{className:ir("recharts-cartesian-axis",g),ref:function(O){i.layerReference=O}},l&&this.renderAxisLine(),this.renderTicks(P,this.state.fontSize,this.state.letterSpacing),xo.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,o,l){var a;return Re.isValidElement(i)?a=Re.cloneElement(i,o):$n(i)?a=i(o):a=Re.createElement(qS,lg({},o,{className:"recharts-cartesian-axis-tick-value"}),l),a}}]),n}(D.Component);Dk(i0,"displayName","CartesianAxis");Dk(i0,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var G2e=["x1","y1","x2","y2","key"],q2e=["offset"];function Kg(e){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(e)}function OO(){return OO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OO.apply(this,arguments)}function Ez(e,t){if(e==null)return{};var n=W2e(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function W2e(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Cz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cz(Object(n),!0).forEach(function(r){Rk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xV(r.key),r)}}function X2e(e,t,n){return t&&Iz(e.prototype,t),n&&Iz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MO(e,t)}function MO(e,t){return MO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MO(e,t)}function K2e(e){var t=Q2e();return function(){var r=yE(e),i;if(t){var o=yE(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Y2e(this,i)}}function Y2e(e,t){if(t&&(Kg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J2e(e)}function J2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yE(e){return yE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yE(e)}function Rk(e,t,n){return t=xV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xV(e){var t=eCe(e,"string");return Kg(t)==="symbol"?t:String(t)}function eCe(e,t){if(Kg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zk=function(e){Z2e(n,e);var t=K2e(n);function n(){return H2e(this,n),t.apply(this,arguments)}return X2e(n,[{key:"renderHorizontal",value:function(i){var o=this,l=this.props,a=l.x,h=l.width,d=l.horizontal;if(!i||!i.length)return null;var g=i.map(function(v,b){var I=sh(sh({},o.props),{},{x1:a,y1:v,x2:a+h,y2:v,key:"line-".concat(b),index:b});return n.renderLineItem(d,I)});return Re.createElement("g",{className:"recharts-cartesian-grid-horizontal"},g)}},{key:"renderVertical",value:function(i){var o=this,l=this.props,a=l.y,h=l.height,d=l.vertical;if(!i||!i.length)return null;var g=i.map(function(v,b){var I=sh(sh({},o.props),{},{x1:v,y1:a,x2:v,y2:a+h,key:"line-".concat(b),index:b});return n.renderLineItem(d,I)});return Re.createElement("g",{className:"recharts-cartesian-grid-vertical"},g)}},{key:"renderVerticalStripes",value:function(i){var o=this.props.verticalFill;if(!o||!o.length)return null;var l=this.props,a=l.fillOpacity,h=l.x,d=l.y,g=l.width,v=l.height,b=i.map(function(T){return Math.round(T+h-h)}).sort(function(T,P){return T-P});h!==b[0]&&b.unshift(0);var I=b.map(function(T,P){var $=!b[P+1],O=$?h+g-T:b[P+1]-T;if(O<=0)return null;var k=P%o.length;return Re.createElement("rect",{key:"react-".concat(P),x:T,y:d,width:O,height:v,stroke:"none",fill:o[k],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Re.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},I)}},{key:"renderHorizontalStripes",value:function(i){var o=this.props.horizontalFill;if(!o||!o.length)return null;var l=this.props,a=l.fillOpacity,h=l.x,d=l.y,g=l.width,v=l.height,b=i.map(function(T){return Math.round(T+d-d)}).sort(function(T,P){return T-P});d!==b[0]&&b.unshift(0);var I=b.map(function(T,P){var $=!b[P+1],O=$?d+v-T:b[P+1]-T;if(O<=0)return null;var k=P%o.length;return Re.createElement("rect",{key:"react-".concat(P),y:T,x:h,height:O,width:g,stroke:"none",fill:o[k],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Re.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},I)}},{key:"renderBackground",value:function(){var i=this.props.fill;if(!i||i==="none")return null;var o=this.props,l=o.fillOpacity,a=o.x,h=o.y,d=o.width,g=o.height;return Re.createElement("rect",{x:a,y:h,width:d,height:g,stroke:"none",fill:i,fillOpacity:l,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var i=this.props,o=i.x,l=i.y,a=i.width,h=i.height,d=i.horizontal,g=i.vertical,v=i.horizontalCoordinatesGenerator,b=i.verticalCoordinatesGenerator,I=i.xAxis,T=i.yAxis,P=i.offset,$=i.chartWidth,O=i.chartHeight,k=i.syncWithTicks,R=i.horizontalValues,j=i.verticalValues;if(!It(a)||a<=0||!It(h)||h<=0||!It(o)||o!==+o||!It(l)||l!==+l)return null;var F=this.props,U=F.horizontalPoints,G=F.verticalPoints;if((!U||!U.length)&&$n(v)){var Z=R&&R.length;U=v({yAxis:T?sh(sh({},T),{},{ticks:Z?R:T.ticks}):void 0,width:$,height:O,offset:P},Z?!0:k)}if((!G||!G.length)&&$n(b)){var ne=j&&j.length;G=b({xAxis:I?sh(sh({},I),{},{ticks:ne?j:I.ticks}):void 0,width:$,height:O,offset:P},ne?!0:k)}return Re.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),d&&this.renderHorizontal(U),g&&this.renderVertical(G),d&&this.renderHorizontalStripes(U),g&&this.renderVerticalStripes(G))}}],[{key:"renderLineItem",value:function(i,o){var l;if(Re.isValidElement(i))l=Re.cloneElement(i,o);else if($n(i))l=i(o);else{var a=o.x1,h=o.y1,d=o.x2,g=o.y2,v=o.key,b=Ez(o,G2e),I=jn(b);I.offset;var T=Ez(I,q2e);l=Re.createElement("line",OO({},T,{x1:a,y1:h,x2:d,y2:g,fill:"none",key:v}))}return l}}]),n}(D.PureComponent);Rk(zk,"displayName","CartesianGrid");Rk(zk,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]});var tCe=["type","layout","connectNulls","ref"];function Yg(e){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yg(e)}function nCe(e,t){if(e==null)return{};var n=rCe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rCe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function o0(){return o0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o0.apply(this,arguments)}function Tz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ws(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tz(Object(n),!0).forEach(function(r){fu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vm(e){return sCe(e)||aCe(e)||oCe(e)||iCe()}function iCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oCe(e,t){if(e){if(typeof e=="string")return $O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $O(e,t)}}function aCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sCe(e){if(Array.isArray(e))return $O(e)}function $O(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bV(r.key),r)}}function uCe(e,t,n){return t&&Pz(e.prototype,t),n&&Pz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kO(e,t)}function kO(e,t){return kO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kO(e,t)}function fCe(e){var t=dCe();return function(){var r=vE(e),i;if(t){var o=vE(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return hCe(this,i)}}function hCe(e,t){if(t&&(Yg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ph(e)}function ph(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vE(e){return vE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vE(e)}function fu(e,t,n){return t=bV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bV(e){var t=pCe(e,"string");return Yg(t)==="symbol"?t:String(t)}function pCe(e,t){if(Yg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u1=function(e){cCe(n,e);var t=fCe(n);function n(){var r;lCe(this,n);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=t.call.apply(t,[this].concat(o)),fu(ph(r),"state",{isAnimationFinished:!0,totalLength:0}),fu(ph(r),"generateSimpleStrokeDasharray",function(a,h){return"".concat(h,"px ").concat(a-h,"px")}),fu(ph(r),"getStrokeDasharray",function(a,h,d){var g=d.reduce(function(k,R){return k+R});if(!g)return r.generateSimpleStrokeDasharray(h,a);for(var v=Math.floor(a/g),b=a%g,I=h-a,T=[],P=0,$=0;P<d.length;$+=d[P],++P)if($+d[P]>b){T=[].concat(Vm(d.slice(0,P)),[b-$]);break}var O=T.length%2===0?[0,I]:[I];return[].concat(Vm(n.repeat(d,v)),Vm(T),O).map(function(k){return"".concat(k,"px")}).join(", ")}),fu(ph(r),"id",e1("recharts-line-")),fu(ph(r),"pathRef",function(a){r.mainCurve=a}),fu(ph(r),"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),fu(ph(r),"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return uCe(n,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();i!==this.state.totalLength&&this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,a=l.points,h=l.xAxis,d=l.yAxis,g=l.layout,v=l.children,b=Sl(v,a1);if(!b)return null;var I=function($,O){return{x:$.x,y:$.y,value:$.value,errorVal:Ds($.payload,O)}},T={clipPath:i?"url(#clipPath-".concat(o,")"):null};return Re.createElement($i,T,b.map(function(P){return Re.cloneElement(P,{key:"bar-".concat(P.props.dataKey),data:a,xAxis:h,yAxis:d,layout:g,dataPointFormatter:I})}))}},{key:"renderDots",value:function(i,o,l){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var h=this.props,d=h.dot,g=h.points,v=h.dataKey,b=jn(this.props),I=jn(d,!0),T=g.map(function($,O){var k=ws(ws(ws({key:"dot-".concat(O),r:3},b),I),{},{value:$.value,dataKey:v,cx:$.x,cy:$.y,index:O,payload:$.payload});return n.renderDotItem(d,k)}),P={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(l,")"):null};return Re.createElement($i,o0({className:"recharts-line-dots",key:"dots"},P),T)}},{key:"renderCurveStatically",value:function(i,o,l,a){var h=this.props,d=h.type,g=h.layout,v=h.connectNulls;h.ref;var b=nCe(h,tCe),I=ws(ws(ws({},jn(b,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(l,")"):null,points:i},a),{},{type:d,layout:g,connectNulls:v});return Re.createElement(_O,o0({},I,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,o){var l=this,a=this.props,h=a.points,d=a.strokeDasharray,g=a.isAnimationActive,v=a.animationBegin,b=a.animationDuration,I=a.animationEasing,T=a.animationId,P=a.animateNewValues,$=a.width,O=a.height,k=this.state,R=k.prevPoints,j=k.totalLength;return Re.createElement(pf,{begin:v,duration:b,isActive:g,easing:I,from:{t:0},to:{t:1},key:"line-".concat(T),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(F){var U=F.t;if(R){var G=R.length/h.length,Z=h.map(function($e,ae){var be=Math.floor(ae*G);if(R[be]){var Te=R[be],Le=du(Te.x,$e.x),Ee=du(Te.y,$e.y);return ws(ws({},$e),{},{x:Le(U),y:Ee(U)})}if(P){var de=du($*2,$e.x),De=du(O/2,$e.y);return ws(ws({},$e),{},{x:de(U),y:De(U)})}return ws(ws({},$e),{},{x:$e.x,y:$e.y})});return l.renderCurveStatically(Z,i,o)}var ne=du(0,j),oe=ne(U),ye;if(d){var fe="".concat(d).split(/[,\s]+/gim).map(function($e){return parseFloat($e)});ye=l.getStrokeDasharray(oe,j,fe)}else ye=l.generateSimpleStrokeDasharray(j,oe);return l.renderCurveStatically(h,i,o,{strokeDasharray:ye})})}},{key:"renderCurve",value:function(i,o){var l=this.props,a=l.points,h=l.isAnimationActive,d=this.state,g=d.prevPoints,v=d.totalLength;return h&&a&&a.length&&(!g&&v>0||!W2(g,a))?this.renderCurveWithAnimation(i,o):this.renderCurveStatically(a,i,o)}},{key:"render",value:function(){var i,o=this.props,l=o.hide,a=o.dot,h=o.points,d=o.className,g=o.xAxis,v=o.yAxis,b=o.top,I=o.left,T=o.width,P=o.height,$=o.isAnimationActive,O=o.id;if(l||!h||!h.length)return null;var k=this.state.isAnimationFinished,R=h.length===1,j=ir("recharts-line",d),F=g&&g.allowDataOverflow,U=v&&v.allowDataOverflow,G=F||U,Z=Wn(O)?this.id:O,ne=(i=jn(a))!==null&&i!==void 0?i:{r:3,strokeWidth:2},oe=ne.r,ye=oe===void 0?3:oe,fe=ne.strokeWidth,$e=fe===void 0?2:fe,ae=$ae(a)?a:{},be=ae.clipDot,Te=be===void 0?!0:be,Le=ye*2+$e;return Re.createElement($i,{className:j},F||U?Re.createElement("defs",null,Re.createElement("clipPath",{id:"clipPath-".concat(Z)},Re.createElement("rect",{x:F?I:I-T/2,y:U?b:b-P/2,width:F?T:T*2,height:U?P:P*2})),!Te&&Re.createElement("clipPath",{id:"clipPath-dots-".concat(Z)},Re.createElement("rect",{x:I-Le/2,y:b-Le/2,width:T+Le,height:P+Le}))):null,!R&&this.renderCurve(G,Z),this.renderErrorBar(G,Z),(R||a)&&this.renderDots(G,Te,Z),(!$||k)&&Lh.renderCallByParent(this.props,h))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:o.curPoints}:i.points!==o.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,o){for(var l=i.length%2!==0?[].concat(Vm(i),[0]):i,a=[],h=0;h<o;++h)a=[].concat(Vm(a),Vm(l));return a}},{key:"renderDotItem",value:function(i,o){var l;if(Re.isValidElement(i))l=Re.cloneElement(i,o);else if($n(i))l=i(o);else{var a=ir("recharts-line-dot",i?i.className:"");l=Re.createElement(kk,o0({},o,{className:a}))}return l}}]),n}(D.PureComponent);fu(u1,"displayName","Line");fu(u1,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!tf.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});fu(u1,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.dataKey,a=e.bandSize,h=e.displayedData,d=e.offset,g=t.layout,v=h.map(function(b,I){var T=Ds(b,l);return g==="horizontal"?{x:T4({axis:n,ticks:i,bandSize:a,entry:b,index:I}),y:Wn(T)?null:r.scale(T),value:T,payload:b}:{x:Wn(T)?null:n.scale(T),y:T4({axis:r,ticks:o,bandSize:a,entry:b,index:I}),value:T,payload:b}});return ws({points:v,layout:g},d)});var Q2=function(){return null};Q2.displayName="XAxis";Q2.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var eC=function(){return null};eC.displayName="YAxis";eC.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var mCe=ld,gCe=t1,yCe=L2;function vCe(e){return function(t,n,r){var i=Object(t);if(!gCe(t)){var o=mCe(n);t=yCe(t),n=function(a){return o(i[a],a,i)}}var l=e(t,n,r);return l>-1?i[o?t[l]:l]:void 0}}var _Ce=vCe,xCe=cV;function bCe(e){var t=xCe(e),n=t%1;return t===t?n?t-n:t:0}var wCe=bCe,SCe=N9,ECe=ld,CCe=wCe,ICe=Math.max;function TCe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:CCe(n);return i<0&&(i=ICe(r+i,0)),SCe(e,ECe(t),i)}var PCe=TCe,ACe=_Ce,OCe=PCe,MCe=ACe(OCe),$Ce=MCe;const kCe=hr($Ce);var NCe="Invariant failed";function LCe(e,t){if(!e)throw new Error(NCe)}function wV(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,o=e.endAngle,l=qo(t,n,r,i),a=qo(t,n,r,o);return{points:[l,a],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}function Az(e){return FCe(e)||zCe(e)||RCe(e)||DCe()}function DCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RCe(e,t){if(e){if(typeof e=="string")return NO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NO(e,t)}}function zCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FCe(e){if(Array.isArray(e))return NO(e)}function NO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var LO=function(t,n,r,i,o){var l=Sl(t,Lk),a=Sl(t,s1),h=[].concat(Az(l),Az(a)),d=Sl(t,l1),g="".concat(i,"Id"),v=i[0],b=n;if(h.length&&(b=h.reduce(function(P,$){if($.props[g]===r&&fc($.props,"extendDomain")&&It($.props[v])){var O=$.props[v];return[Math.min(P[0],O),Math.max(P[1],O)]}return P},b)),d.length){var I="".concat(v,"1"),T="".concat(v,"2");b=d.reduce(function(P,$){if($.props[g]===r&&fc($.props,"extendDomain")&&It($.props[I])&&It($.props[T])){var O=$.props[I],k=$.props[T];return[Math.min(P[0],O,k),Math.max(P[1],O,k)]}return P},b)}return o&&o.length&&(b=o.reduce(function(P,$){return It($)?[Math.min(P[0],$),Math.max(P[1],$)]:P},b)),b},SV={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(h,d,g){this.fn=h,this.context=d,this.once=g||!1}function o(h,d,g,v,b){if(typeof g!="function")throw new TypeError("The listener must be a function");var I=new i(g,v||h,b),T=n?n+d:d;return h._events[T]?h._events[T].fn?h._events[T]=[h._events[T],I]:h._events[T].push(I):(h._events[T]=I,h._eventsCount++),h}function l(h,d){--h._eventsCount===0?h._events=new r:delete h._events[d]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],g,v;if(this._eventsCount===0)return d;for(v in g=this._events)t.call(g,v)&&d.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(g)):d},a.prototype.listeners=function(d){var g=n?n+d:d,v=this._events[g];if(!v)return[];if(v.fn)return[v.fn];for(var b=0,I=v.length,T=new Array(I);b<I;b++)T[b]=v[b].fn;return T},a.prototype.listenerCount=function(d){var g=n?n+d:d,v=this._events[g];return v?v.fn?1:v.length:0},a.prototype.emit=function(d,g,v,b,I,T){var P=n?n+d:d;if(!this._events[P])return!1;var $=this._events[P],O=arguments.length,k,R;if($.fn){switch($.once&&this.removeListener(d,$.fn,void 0,!0),O){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,g),!0;case 3:return $.fn.call($.context,g,v),!0;case 4:return $.fn.call($.context,g,v,b),!0;case 5:return $.fn.call($.context,g,v,b,I),!0;case 6:return $.fn.call($.context,g,v,b,I,T),!0}for(R=1,k=new Array(O-1);R<O;R++)k[R-1]=arguments[R];$.fn.apply($.context,k)}else{var j=$.length,F;for(R=0;R<j;R++)switch($[R].once&&this.removeListener(d,$[R].fn,void 0,!0),O){case 1:$[R].fn.call($[R].context);break;case 2:$[R].fn.call($[R].context,g);break;case 3:$[R].fn.call($[R].context,g,v);break;case 4:$[R].fn.call($[R].context,g,v,b);break;default:if(!k)for(F=1,k=new Array(O-1);F<O;F++)k[F-1]=arguments[F];$[R].fn.apply($[R].context,k)}}return!0},a.prototype.on=function(d,g,v){return o(this,d,g,v,!1)},a.prototype.once=function(d,g,v){return o(this,d,g,v,!0)},a.prototype.removeListener=function(d,g,v,b){var I=n?n+d:d;if(!this._events[I])return this;if(!g)return l(this,I),this;var T=this._events[I];if(T.fn)T.fn===g&&(!b||T.once)&&(!v||T.context===v)&&l(this,I);else{for(var P=0,$=[],O=T.length;P<O;P++)(T[P].fn!==g||b&&!T[P].once||v&&T[P].context!==v)&&$.push(T[P]);$.length?this._events[I]=$.length===1?$[0]:$:l(this,I)}return this},a.prototype.removeAllListeners=function(d){var g;return d?(g=n?n+d:d,this._events[g]&&l(this,g)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(SV);var BCe=SV.exports;const jCe=hr(BCe);var XT=new jCe,ZT="recharts.syncMouseEvents";function yx(e){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yx(e)}function UCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,EV(r.key),r)}}function VCe(e,t,n){return t&&Oz(e.prototype,t),n&&Oz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function KT(e,t,n){return t=EV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EV(e){var t=GCe(e,"string");return yx(t)==="symbol"?t:String(t)}function GCe(e,t){if(yx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(yx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qCe=function(){function e(){UCe(this,e),KT(this,"activeIndex",0),KT(this,"coordinateList",[]),KT(this,"layout","horizontal")}return VCe(e,[{key:"setDetails",value:function(n){var r=n.coordinateList,i=r===void 0?[]:r,o=n.container,l=o===void 0?null:o,a=n.layout,h=a===void 0?null:a,d=n.offset,g=d===void 0?null:d,v=n.mouseHandlerCallback,b=v===void 0?null:v;this.coordinateList=i??this.coordinateList,this.container=l??this.container,this.layout=h??this.layout,this.offset=g??this.offset,this.mouseHandlerCallback=b??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,l=i.y,a=i.height,h=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,g=((r=window)===null||r===void 0?void 0:r.scrollY)||0,v=o+h+d,b=l+this.offset.top+a/2+g;this.mouseHandlerCallback({pageX:v,pageY:b})}}}]),e}();function WCe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],i=e==null?void 0:e[1];if(r&&i&&It(r)&&It(i))return!0}return!1}function HCe(e,t,n){var r,i,o,l;if(e==="horizontal")r=t.x,o=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,o=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var a=t.cx,h=t.cy,d=t.innerRadius,g=t.outerRadius,v=t.angle,b=qo(a,h,d,v),I=qo(a,h,g,v);r=b.x,i=b.y,o=I.x,l=I.y}else return wV(t);return[{x:r,y:i},{x:o,y:l}]}function XCe(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}var ZCe=["item"],KCe=["children","className","width","height","style","compact","title","desc"];function Jg(e){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(e)}function Mz(e,t){return QCe(e)||JCe(e,t)||CV(e,t)||YCe()}function YCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,a=[],h=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}function QCe(e){if(Array.isArray(e))return e}function ug(){return ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ug.apply(this,arguments)}function $z(e,t){if(e==null)return{};var n=eIe(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eIe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function tIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IV(r.key),r)}}function nIe(e,t,n){return t&&kz(e.prototype,t),n&&kz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DO(e,t)}function DO(e,t){return DO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DO(e,t)}function iIe(e){var t=aIe();return function(){var r=_E(e),i;if(t){var o=_E(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return oIe(this,i)}}function oIe(e,t){if(t&&(Jg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return An(e)}function An(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aIe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _E(e){return _E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_E(e)}function Qg(e){return uIe(e)||lIe(e)||CV(e)||sIe()}function sIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CV(e,t){if(e){if(typeof e=="string")return RO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RO(e,t)}}function lIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uIe(e){if(Array.isArray(e))return RO(e)}function RO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nz(Object(n),!0).forEach(function(r){Qt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qt(e,t,n){return t=IV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IV(e){var t=cIe(e,"string");return Jg(t)==="symbol"?t:String(t)}function cIe(e,t){if(Jg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fIe={xAxis:["bottom","top"],yAxis:["left","right"]},hIe={width:"100%",height:"100%"},TV={x:0,y:0},dIe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},pIe=function(t,n,r,i){var o=n.find(function(g){return g&&g.index===r});if(o){if(t==="horizontal")return{x:o.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:o.coordinate};if(t==="centric"){var l=o.coordinate,a=i.radius;return tt(tt(tt({},i),qo(i.cx,i.cy,a,l)),{},{angle:l,radius:a})}var h=o.coordinate,d=i.angle;return tt(tt(tt({},i),qo(i.cx,i.cy,h,d)),{},{angle:d,radius:h})}return TV},tC=function(t,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,l=(r??[]).reduce(function(a,h){var d=h.props.data;return d&&d.length?[].concat(Qg(a),Qg(d)):a},[]);return l.length>0?l:t&&t.length&&It(i)&&It(o)?t.slice(i,o+1):[]};function PV(e){return e==="number"?[0,"auto"]:void 0}var AV=function(t,n,r,i){var o=t.graphicalItems,l=t.tooltipAxis,a=tC(n,t);return r<0||!o||!o.length||r>=a.length?null:o.reduce(function(h,d){var g,v=d.props.hide;if(v)return h;var b=(g=d.props.data)!==null&&g!==void 0?g:n;b&&t.dataStartIndex+t.dataEndIndex!==0&&(b=b.slice(t.dataStartIndex,t.dataEndIndex+1));var I;if(l.dataKey&&!l.allowDuplicatedCategory){var T=b===void 0?a:b;I=CS(T,l.dataKey,i)}else I=b&&b[r]||a[r];return I?[].concat(Qg(h),[oV(d,I)]):h},[])},Lz=function(t,n,r,i){var o=i||{x:t.chartX,y:t.chartY},l=dIe(o,r),a=t.orderedTooltipTicks,h=t.tooltipAxis,d=t.tooltipTicks,g=ebe(l,a,d,h);if(g>=0&&d){var v=d[g]&&d[g].value,b=AV(t,n,g,v),I=pIe(r,a,g,o);return{activeTooltipIndex:g,activeLabel:v,activePayload:b,activeCoordinate:I}}return null},mIe=function(t,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,l=n.axisIdKey,a=n.stackGroups,h=n.dataStartIndex,d=n.dataEndIndex,g=t.layout,v=t.children,b=t.stackOffset,I=rV(g,o);return r.reduce(function(T,P){var $,O=P.props,k=O.type,R=O.dataKey,j=O.allowDataOverflow,F=O.allowDuplicatedCategory,U=O.scale,G=O.ticks,Z=O.includeHidden,ne=P.props[l];if(T[ne])return T;var oe=tC(t.data,{graphicalItems:i.filter(function(je){return je.props[l]===ne}),dataStartIndex:h,dataEndIndex:d}),ye=oe.length,fe,$e,ae;WCe(P.props.domain,j,k)&&(fe=pO(P.props.domain,null,j),I&&(k==="number"||U!=="auto")&&(ae=r0(oe,R,"category")));var be=PV(k);if(!fe||fe.length===0){var Te,Le=(Te=P.props.domain)!==null&&Te!==void 0?Te:be;if(R){if(fe=r0(oe,R,k),k==="category"&&I){var Ee=Sae(fe);F&&Ee?($e=fe,fe=cE(0,ye)):F||(fe=M4(Le,fe,P).reduce(function(je,et){return je.indexOf(et)>=0?je:[].concat(Qg(je),[et])},[]))}else if(k==="category")F?fe=fe.filter(function(je){return je!==""&&!Wn(je)}):fe=M4(Le,fe,P).reduce(function(je,et){return je.indexOf(et)>=0||et===""||Wn(et)?je:[].concat(Qg(je),[et])},[]);else if(k==="number"){var de=obe(oe,i.filter(function(je){return je.props[l]===ne&&(Z||!je.props.hide)}),R,o,g);de&&(fe=de)}I&&(k==="number"||U!=="auto")&&(ae=r0(oe,R,"category"))}else I?fe=cE(0,ye):a&&a[ne]&&a[ne].hasStack&&k==="number"?fe=b==="expand"?[0,1]:iV(a[ne].stackGroups,h,d):fe=nV(oe,i.filter(function(je){return je.props[l]===ne&&(Z||!je.props.hide)}),k,g,!0);if(k==="number")fe=LO(v,fe,ne,o,G),Le&&(fe=pO(Le,fe,j));else if(k==="category"&&Le){var De=Le,He=fe.every(function(je){return De.indexOf(je)>=0});He&&(fe=De)}}return tt(tt({},T),{},Qt({},ne,tt(tt({},P.props),{},{axisType:o,domain:fe,categoricalDomain:ae,duplicateDomain:$e,originalDomain:($=P.props.domain)!==null&&$!==void 0?$:be,isCategorical:I,layout:g})))},{})},gIe=function(t,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,l=n.axisIdKey,a=n.stackGroups,h=n.dataStartIndex,d=n.dataEndIndex,g=t.layout,v=t.children,b=tC(t.data,{graphicalItems:r,dataStartIndex:h,dataEndIndex:d}),I=b.length,T=rV(g,o),P=-1;return r.reduce(function($,O){var k=O.props[l],R=PV("number");if(!$[k]){P++;var j;return T?j=cE(0,I):a&&a[k]&&a[k].hasStack?(j=iV(a[k].stackGroups,h,d),j=LO(v,j,k,o)):(j=pO(R,nV(b,r.filter(function(F){return F.props[l]===k&&!F.props.hide}),"number",g),i.defaultProps.allowDataOverflow),j=LO(v,j,k,o)),tt(tt({},$),{},Qt({},k,tt(tt({axisType:o},i.defaultProps),{},{hide:!0,orientation:wl(fIe,"".concat(o,".").concat(P%2),null),domain:j,originalDomain:R,isCategorical:T,layout:g})))}return $},{})},yIe=function(t,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,l=n.graphicalItems,a=n.stackGroups,h=n.dataStartIndex,d=n.dataEndIndex,g=t.children,v="".concat(i,"Id"),b=Sl(g,o),I={};return b&&b.length?I=mIe(t,{axes:b,graphicalItems:l,axisType:i,axisIdKey:v,stackGroups:a,dataStartIndex:h,dataEndIndex:d}):l&&l.length&&(I=gIe(t,{Axis:o,graphicalItems:l,axisType:i,axisIdKey:v,stackGroups:a,dataStartIndex:h,dataEndIndex:d})),I},vIe=function(t){var n=hh(t),r=dh(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:ik(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:iE(n,r)}},Dz=function(t){var n=t.children,r=t.defaultShowTooltip,i=Zc(n,cx),o=0,l=0;return t.data&&t.data.length!==0&&(l=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(l=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!r}},_Ie=function(t){return!t||!t.length?!1:t.some(function(n){var r=ef(n&&n.type);return r&&r.indexOf("Bar")>=0})},Rz=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},xIe=function(t,n){var r=t.props,i=t.graphicalItems,o=t.xAxisMap,l=o===void 0?{}:o,a=t.yAxisMap,h=a===void 0?{}:a,d=r.width,g=r.height,v=r.children,b=r.margin||{},I=Zc(v,cx),T=Zc(v,Fg),P=Object.keys(h).reduce(function(F,U){var G=h[U],Z=G.orientation;return!G.mirror&&!G.hide?tt(tt({},F),{},Qt({},Z,F[Z]+G.width)):F},{left:b.left||0,right:b.right||0}),$=Object.keys(l).reduce(function(F,U){var G=l[U],Z=G.orientation;return!G.mirror&&!G.hide?tt(tt({},F),{},Qt({},Z,wl(F,"".concat(Z))+G.height)):F},{top:b.top||0,bottom:b.bottom||0}),O=tt(tt({},$),P),k=O.bottom;I&&(O.bottom+=I.props.height||cx.defaultProps.height),T&&n&&(O=rbe(O,i,r,n));var R=d-O.left-O.right,j=g-O.top-O.bottom;return tt(tt({brushBottom:k},O),{},{width:Math.max(R,0),height:Math.max(j,0)})},bIe=function(t){var n,r=t.chartName,i=t.GraphicalChild,o=t.defaultTooltipEventType,l=o===void 0?"axis":o,a=t.validateTooltipEventTypes,h=a===void 0?["axis"]:a,d=t.axisComponents,g=t.legendContent,v=t.formatAxisMap,b=t.defaultProps,I=function($,O){var k=O.graphicalItems,R=O.stackGroups,j=O.offset,F=O.updateId,U=O.dataStartIndex,G=O.dataEndIndex,Z=$.barSize,ne=$.layout,oe=$.barGap,ye=$.barCategoryGap,fe=$.maxBarSize,$e=Rz(ne),ae=$e.numericAxisName,be=$e.cateAxisName,Te=_Ie(k),Le=Te&&tbe({barSize:Z,stackGroups:R}),Ee=[];return k.forEach(function(de,De){var He=tC($.data,{graphicalItems:[de],dataStartIndex:U,dataEndIndex:G}),je=de.props,et=je.dataKey,Et=je.maxBarSize,zt=de.props["".concat(ae,"Id")],Yt=de.props["".concat(be,"Id")],St={},Vt=d.reduce(function(Dn,ar){var bn,cn=O["".concat(ar.axisType,"Map")],ko=de.props["".concat(ar.axisType,"Id")];cn&&cn[ko]||ar.axisType==="zAxis"||LCe(!1);var Di=cn[ko];return tt(tt({},Dn),{},(bn={},Qt(bn,ar.axisType,Di),Qt(bn,"".concat(ar.axisType,"Ticks"),dh(Di)),bn))},St),Qe=Vt[be],dt=Vt["".concat(be,"Ticks")],vt=R&&R[zt]&&R[zt].hasStack&&ybe(de,R[zt].stackGroups),We=ef(de.type).indexOf("Bar")>=0,Ot=iE(Qe,dt),Ct=[];if(We){var Tt,Tn,yn=Wn(Et)?fe:Et,sn=(Tt=(Tn=iE(Qe,dt,!0))!==null&&Tn!==void 0?Tn:yn)!==null&&Tt!==void 0?Tt:0;Ct=nbe({barGap:oe,barCategoryGap:ye,bandSize:sn!==Ot?sn:Ot,sizeList:Le[Yt],maxBarSize:yn}),sn!==Ot&&(Ct=Ct.map(function(Dn){return tt(tt({},Dn),{},{position:tt(tt({},Dn.position),{},{offset:Dn.position.offset-sn/2})})}))}var br=de&&de.type&&de.type.getComposedData;if(br){var Ge;Ee.push({props:tt(tt({},br(tt(tt({},Vt),{},{displayedData:He,props:$,dataKey:et,item:de,bandSize:Ot,barPosition:Ct,offset:j,stackedData:vt,layout:ne,dataStartIndex:U,dataEndIndex:G}))),{},(Ge={key:de.key||"item-".concat(De)},Qt(Ge,ae,Vt[ae]),Qt(Ge,be,Vt[be]),Qt(Ge,"animationId",F),Ge)),childIndex:Lae(de,$.children),item:de})}}),Ee},T=function($,O){var k=$.props,R=$.dataStartIndex,j=$.dataEndIndex,F=$.updateId;if(!r3({props:k}))return null;var U=k.children,G=k.layout,Z=k.stackOffset,ne=k.data,oe=k.reverseStackOrder,ye=Rz(G),fe=ye.numericAxisName,$e=ye.cateAxisName,ae=Sl(U,i),be=pbe(ne,ae,"".concat(fe,"Id"),"".concat($e,"Id"),Z,oe),Te=d.reduce(function(He,je){var et="".concat(je.axisType,"Map");return tt(tt({},He),{},Qt({},et,yIe(k,tt(tt({},je),{},{graphicalItems:ae,stackGroups:je.axisType===fe&&be,dataStartIndex:R,dataEndIndex:j}))))},{}),Le=xIe(tt(tt({},Te),{},{props:k,graphicalItems:ae}),O==null?void 0:O.legendBBox);Object.keys(Te).forEach(function(He){Te[He]=v(k,Te[He],Le,He.replace("Map",""),r)});var Ee=Te["".concat($e,"Map")],de=vIe(Ee),De=I(k,tt(tt({},Te),{},{dataStartIndex:R,dataEndIndex:j,updateId:F,graphicalItems:ae,stackGroups:be,offset:Le}));return tt(tt({formattedGraphicalItems:De,graphicalItems:ae,offset:Le,stackGroups:be},de),Te)};return n=function(P){rIe(O,P);var $=iIe(O);function O(k){var R,j,F;return tIe(this,O),F=$.call(this,k),Qt(An(F),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Qt(An(F),"accessibilityManager",new qCe),Qt(An(F),"handleLegendBBoxUpdate",function(U){if(U){var G=F.state,Z=G.dataStartIndex,ne=G.dataEndIndex,oe=G.updateId;F.setState(tt({legendBBox:U},T({props:F.props,dataStartIndex:Z,dataEndIndex:ne,updateId:oe},tt(tt({},F.state),{},{legendBBox:U}))))}}),Qt(An(F),"handleReceiveSyncEvent",function(U,G,Z){if(F.props.syncId===U){if(Z===F.eventEmitterSymbol&&typeof F.props.syncMethod!="function")return;F.applySyncEvent(G)}}),Qt(An(F),"handleBrushChange",function(U){var G=U.startIndex,Z=U.endIndex;if(G!==F.state.dataStartIndex||Z!==F.state.dataEndIndex){var ne=F.state.updateId;F.setState(function(){return tt({dataStartIndex:G,dataEndIndex:Z},T({props:F.props,dataStartIndex:G,dataEndIndex:Z,updateId:ne},F.state))}),F.triggerSyncEvent({dataStartIndex:G,dataEndIndex:Z})}}),Qt(An(F),"handleMouseEnter",function(U){var G=F.getMouseInfo(U);if(G){var Z=tt(tt({},G),{},{isTooltipActive:!0});F.setState(Z),F.triggerSyncEvent(Z);var ne=F.props.onMouseEnter;$n(ne)&&ne(Z,U)}}),Qt(An(F),"triggeredAfterMouseMove",function(U){var G=F.getMouseInfo(U),Z=G?tt(tt({},G),{},{isTooltipActive:!0}):{isTooltipActive:!1};F.setState(Z),F.triggerSyncEvent(Z);var ne=F.props.onMouseMove;$n(ne)&&ne(Z,U)}),Qt(An(F),"handleItemMouseEnter",function(U){F.setState(function(){return{isTooltipActive:!0,activeItem:U,activePayload:U.tooltipPayload,activeCoordinate:U.tooltipPosition||{x:U.cx,y:U.cy}}})}),Qt(An(F),"handleItemMouseLeave",function(){F.setState(function(){return{isTooltipActive:!1}})}),Qt(An(F),"handleMouseMove",function(U){U.persist(),F.throttleTriggeredAfterMouseMove(U)}),Qt(An(F),"handleMouseLeave",function(U){var G={isTooltipActive:!1};F.setState(G),F.triggerSyncEvent(G);var Z=F.props.onMouseLeave;$n(Z)&&Z(G,U)}),Qt(An(F),"handleOuterEvent",function(U){var G=Nae(U),Z=wl(F.props,"".concat(G));if(G&&$n(Z)){var ne,oe;/.*touch.*/i.test(G)?oe=F.getMouseInfo(U.changedTouches[0]):oe=F.getMouseInfo(U),Z((ne=oe)!==null&&ne!==void 0?ne:{},U)}}),Qt(An(F),"handleClick",function(U){var G=F.getMouseInfo(U);if(G){var Z=tt(tt({},G),{},{isTooltipActive:!0});F.setState(Z),F.triggerSyncEvent(Z);var ne=F.props.onClick;$n(ne)&&ne(Z,U)}}),Qt(An(F),"handleMouseDown",function(U){var G=F.props.onMouseDown;if($n(G)){var Z=F.getMouseInfo(U);G(Z,U)}}),Qt(An(F),"handleMouseUp",function(U){var G=F.props.onMouseUp;if($n(G)){var Z=F.getMouseInfo(U);G(Z,U)}}),Qt(An(F),"handleTouchMove",function(U){U.changedTouches!=null&&U.changedTouches.length>0&&F.throttleTriggeredAfterMouseMove(U.changedTouches[0])}),Qt(An(F),"handleTouchStart",function(U){U.changedTouches!=null&&U.changedTouches.length>0&&F.handleMouseDown(U.changedTouches[0])}),Qt(An(F),"handleTouchEnd",function(U){U.changedTouches!=null&&U.changedTouches.length>0&&F.handleMouseUp(U.changedTouches[0])}),Qt(An(F),"triggerSyncEvent",function(U){F.props.syncId!==void 0&&XT.emit(ZT,F.props.syncId,U,F.eventEmitterSymbol)}),Qt(An(F),"applySyncEvent",function(U){var G=F.props,Z=G.layout,ne=G.syncMethod,oe=F.state.updateId,ye=U.dataStartIndex,fe=U.dataEndIndex;if(U.dataStartIndex!==void 0||U.dataEndIndex!==void 0)F.setState(tt({dataStartIndex:ye,dataEndIndex:fe},T({props:F.props,dataStartIndex:ye,dataEndIndex:fe,updateId:oe},F.state)));else if(U.activeTooltipIndex!==void 0){var $e=U.chartX,ae=U.chartY,be=U.activeTooltipIndex,Te=F.state,Le=Te.offset,Ee=Te.tooltipTicks;if(!Le)return;if(typeof ne=="function")be=ne(Ee,U);else if(ne==="value"){be=-1;for(var de=0;de<Ee.length;de++)if(Ee[de].value===U.activeLabel){be=de;break}}var De=tt(tt({},Le),{},{x:Le.left,y:Le.top}),He=Math.min($e,De.x+De.width),je=Math.min(ae,De.y+De.height),et=Ee[be]&&Ee[be].value,Et=AV(F.state,F.props.data,be),zt=Ee[be]?{x:Z==="horizontal"?Ee[be].coordinate:He,y:Z==="horizontal"?je:Ee[be].coordinate}:TV;F.setState(tt(tt({},U),{},{activeLabel:et,activeCoordinate:zt,activePayload:Et,activeTooltipIndex:be}))}else F.setState(U)}),Qt(An(F),"verticalCoordinatesGenerator",function(U,G){var Z=U.xAxis,ne=U.width,oe=U.height,ye=U.offset;return C4(PO(tt(tt(tt({},i0.defaultProps),Z),{},{ticks:dh(Z,!0),viewBox:{x:0,y:0,width:ne,height:oe}})),ye.left,ye.left+ye.width,G)}),Qt(An(F),"horizontalCoordinatesGenerator",function(U,G){var Z=U.yAxis,ne=U.width,oe=U.height,ye=U.offset;return C4(PO(tt(tt(tt({},i0.defaultProps),Z),{},{ticks:dh(Z,!0),viewBox:{x:0,y:0,width:ne,height:oe}})),ye.top,ye.top+ye.height,G)}),Qt(An(F),"axesTicksGenerator",function(U){return dh(U,!0)}),Qt(An(F),"renderCursor",function(U){var G,Z=F.state,ne=Z.isTooltipActive,oe=Z.activeCoordinate,ye=Z.activePayload,fe=Z.offset,$e=Z.activeTooltipIndex,ae=Z.tooltipAxisBandSize,be=F.getTooltipEventType(),Te=(G=U.props.active)!==null&&G!==void 0?G:ne;if(!U||!U.props.cursor||!Te||!oe||r!=="ScatterChart"&&be!=="axis")return null;var Le=F.props.layout,Ee,de=_O;if(r==="ScatterChart")Ee=oe,de=zwe;else if(r==="BarChart")Ee=XCe(Le,oe,fe,ae),de=$k;else if(Le==="radial"){var De=wV(oe),He=De.cx,je=De.cy,et=De.radius,Et=De.startAngle,zt=De.endAngle;Ee={cx:He,cy:je,startAngle:Et,endAngle:zt,innerRadius:et,outerRadius:et},de=lV}else Ee={points:HCe(Le,oe,fe)},de=_O;var Yt=U.key||"_recharts-cursor",St=tt(tt(tt(tt({stroke:"#ccc",pointerEvents:"none"},fe),Ee),jn(U.props.cursor)),{},{payload:ye,payloadIndex:$e,key:Yt,className:"recharts-tooltip-cursor"});return D.isValidElement(U.props.cursor)?D.cloneElement(U.props.cursor,St):D.createElement(de,St)}),Qt(An(F),"renderPolarAxis",function(U,G,Z){var ne=wl(U,"type.axisType"),oe=wl(F.state,"".concat(ne,"Map")),ye=oe&&oe[U.props["".concat(ne,"Id")]];return D.cloneElement(U,tt(tt({},ye),{},{className:ne,key:U.key||"".concat(G,"-").concat(Z),ticks:dh(ye,!0)}))}),Qt(An(F),"renderXAxis",function(U,G,Z){var ne=F.state.xAxisMap,oe=ne[U.props.xAxisId];return F.renderAxis(oe,U,G,Z)}),Qt(An(F),"renderYAxis",function(U,G,Z){var ne=F.state.yAxisMap,oe=ne[U.props.yAxisId];return F.renderAxis(oe,U,G,Z)}),Qt(An(F),"renderGrid",function(U){var G=F.state,Z=G.xAxisMap,ne=G.yAxisMap,oe=G.offset,ye=F.props,fe=ye.width,$e=ye.height,ae=hh(Z),be=kCe(ne,function(Ee){return dV(Ee.domain,Number.isFinite)}),Te=be||hh(ne),Le=U.props||{};return D.cloneElement(U,{key:U.key||"grid",x:It(Le.x)?Le.x:oe.left,y:It(Le.y)?Le.y:oe.top,width:It(Le.width)?Le.width:oe.width,height:It(Le.height)?Le.height:oe.height,xAxis:ae,yAxis:Te,offset:oe,chartWidth:fe,chartHeight:$e,verticalCoordinatesGenerator:Le.verticalCoordinatesGenerator||F.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:Le.horizontalCoordinatesGenerator||F.horizontalCoordinatesGenerator})}),Qt(An(F),"renderPolarGrid",function(U){var G=U.props,Z=G.radialLines,ne=G.polarAngles,oe=G.polarRadius,ye=F.state,fe=ye.radiusAxisMap,$e=ye.angleAxisMap,ae=hh(fe),be=hh($e),Te=be.cx,Le=be.cy,Ee=be.innerRadius,de=be.outerRadius;return D.cloneElement(U,{polarAngles:Array.isArray(ne)?ne:dh(be,!0).map(function(De){return De.coordinate}),polarRadius:Array.isArray(oe)?oe:dh(ae,!0).map(function(De){return De.coordinate}),cx:Te,cy:Le,innerRadius:Ee,outerRadius:de,key:U.key||"polar-grid",radialLines:Z})}),Qt(An(F),"renderLegend",function(){var U=F.state.formattedGraphicalItems,G=F.props,Z=G.children,ne=G.width,oe=G.height,ye=F.props.margin||{},fe=ne-(ye.left||0)-(ye.right||0),$e=eV({children:Z,formattedGraphicalItems:U,legendWidth:fe,legendContent:g});if(!$e)return null;var ae=$e.item,be=$z($e,ZCe);return D.cloneElement(ae,tt(tt({},be),{},{chartWidth:ne,chartHeight:oe,margin:ye,onBBoxUpdate:F.handleLegendBBoxUpdate}))}),Qt(An(F),"renderTooltip",function(){var U,G=F.props.children,Z=Zc(G,tp);if(!Z)return null;var ne=F.state,oe=ne.isTooltipActive,ye=ne.activeCoordinate,fe=ne.activePayload,$e=ne.activeLabel,ae=ne.offset,be=(U=Z.props.active)!==null&&U!==void 0?U:oe;return D.cloneElement(Z,{viewBox:tt(tt({},ae),{},{x:ae.left,y:ae.top}),active:be,label:$e,payload:be?fe:[],coordinate:ye})}),Qt(An(F),"renderBrush",function(U){var G=F.props,Z=G.margin,ne=G.data,oe=F.state,ye=oe.offset,fe=oe.dataStartIndex,$e=oe.dataEndIndex,ae=oe.updateId;return D.cloneElement(U,{key:U.key||"_recharts-brush",onChange:uw(F.handleBrushChange,U.props.onChange),data:ne,x:It(U.props.x)?U.props.x:ye.left,y:It(U.props.y)?U.props.y:ye.top+ye.height+ye.brushBottom-(Z.bottom||0),width:It(U.props.width)?U.props.width:ye.width,startIndex:fe,endIndex:$e,updateId:"brush-".concat(ae)})}),Qt(An(F),"renderReferenceElement",function(U,G,Z){if(!U)return null;var ne=An(F),oe=ne.clipPathId,ye=F.state,fe=ye.xAxisMap,$e=ye.yAxisMap,ae=ye.offset,be=U.props,Te=be.xAxisId,Le=be.yAxisId;return D.cloneElement(U,{key:U.key||"".concat(G,"-").concat(Z),xAxis:fe[Te],yAxis:$e[Le],viewBox:{x:ae.left,y:ae.top,width:ae.width,height:ae.height},clipPathId:oe})}),Qt(An(F),"renderActivePoints",function(U){var G=U.item,Z=U.activePoint,ne=U.basePoint,oe=U.childIndex,ye=U.isRange,fe=[],$e=G.props.key,ae=G.item.props,be=ae.activeDot,Te=ae.dataKey,Le=tt(tt({index:oe,dataKey:Te,cx:Z.x,cy:Z.y,r:4,fill:Mk(G.item),strokeWidth:2,stroke:"#fff",payload:Z.payload,value:Z.value,key:"".concat($e,"-activePoint-").concat(oe)},jn(be)),IS(be));return fe.push(O.renderActiveDot(be,Le)),ne?fe.push(O.renderActiveDot(be,tt(tt({},Le),{},{cx:ne.x,cy:ne.y,key:"".concat($e,"-basePoint-").concat(oe)}))):ye&&fe.push(null),fe}),Qt(An(F),"renderGraphicChild",function(U,G,Z){var ne=F.filterFormatItem(U,G,Z);if(!ne)return null;var oe=F.getTooltipEventType(),ye=F.state,fe=ye.isTooltipActive,$e=ye.tooltipAxis,ae=ye.activeTooltipIndex,be=ye.activeLabel,Te=F.props.children,Le=Zc(Te,tp),Ee=ne.props,de=Ee.points,De=Ee.isRange,He=Ee.baseLine,je=ne.item.props,et=je.activeDot,Et=je.hide,zt=je.activeBar,Yt=je.activeShape,St=!!(!Et&&fe&&Le&&(et||zt||Yt)),Vt={};oe!=="axis"&&Le&&Le.props.trigger==="click"?Vt={onClick:uw(F.handleItemMouseEnter,U.props.onClick)}:oe!=="axis"&&(Vt={onMouseLeave:uw(F.handleItemMouseLeave,U.props.onMouseLeave),onMouseEnter:uw(F.handleItemMouseEnter,U.props.onMouseEnter)});var Qe=D.cloneElement(U,tt(tt({},ne.props),Vt));function dt(ar){return typeof $e.dataKey=="function"?$e.dataKey(ar.payload):null}if(St)if(ae>=0){var vt,We;if($e.dataKey&&!$e.allowDuplicatedCategory){var Ot=typeof $e.dataKey=="function"?dt:"payload.".concat($e.dataKey.toString());vt=CS(de,Ot,be),We=De&&He&&CS(He,Ot,be)}else vt=de==null?void 0:de[ae],We=De&&He&&He[ae];if(Yt||zt){var Ct=U.props.activeIndex!==void 0?U.props.activeIndex:ae;return[D.cloneElement(U,tt(tt(tt({},ne.props),Vt),{},{activeIndex:Ct})),null,null]}if(!Wn(vt))return[Qe].concat(Qg(F.renderActivePoints({item:ne,activePoint:vt,basePoint:We,childIndex:ae,isRange:De})))}else{var Tt,Tn=(Tt=F.getItemByXY(F.state.activeCoordinate))!==null&&Tt!==void 0?Tt:{graphicalItem:Qe},yn=Tn.graphicalItem,sn=yn.item,br=sn===void 0?U:sn,Ge=yn.childIndex,Dn=tt(tt(tt({},ne.props),Vt),{},{activeIndex:Ge});return[D.cloneElement(br,Dn),null,null]}return De?[Qe,null,null]:[Qe,null]}),Qt(An(F),"renderCustomized",function(U,G,Z){return D.cloneElement(U,tt(tt({key:"recharts-customized-".concat(Z)},F.props),F.state))}),Qt(An(F),"renderMap",{CartesianGrid:{handler:F.renderGrid,once:!0},ReferenceArea:{handler:F.renderReferenceElement},ReferenceLine:{handler:F.renderReferenceElement},ReferenceDot:{handler:F.renderReferenceElement},XAxis:{handler:F.renderXAxis},YAxis:{handler:F.renderYAxis},Brush:{handler:F.renderBrush,once:!0},Bar:{handler:F.renderGraphicChild},Line:{handler:F.renderGraphicChild},Area:{handler:F.renderGraphicChild},Radar:{handler:F.renderGraphicChild},RadialBar:{handler:F.renderGraphicChild},Scatter:{handler:F.renderGraphicChild},Pie:{handler:F.renderGraphicChild},Funnel:{handler:F.renderGraphicChild},Tooltip:{handler:F.renderCursor,once:!0},PolarGrid:{handler:F.renderPolarGrid,once:!0},PolarAngleAxis:{handler:F.renderPolarAxis},PolarRadiusAxis:{handler:F.renderPolarAxis},Customized:{handler:F.renderCustomized}}),F.clipPathId="".concat((R=k.id)!==null&&R!==void 0?R:e1("recharts"),"-clip"),F.throttleTriggeredAfterMouseMove=nU(F.triggeredAfterMouseMove,(j=k.throttleDelay)!==null&&j!==void 0?j:1e3/60),F.state={},F}return nIe(O,[{key:"componentDidMount",value:function(){var R,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(R,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==R.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==R.margin){var F,U;this.accessibilityManager.setDetails({offset:{left:(F=this.props.margin.left)!==null&&F!==void 0?F:0,top:(U=this.props.margin.top)!==null&&U!==void 0?U:0}})}return null}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var R=Zc(this.props.children,tp);if(R&&typeof R.props.shared=="boolean"){var j=R.props.shared?"axis":"item";return h.indexOf(j)>=0?j:l}return l}},{key:"getMouseInfo",value:function(R){if(!this.container)return null;var j=this.container,F=j.getBoundingClientRect(),U=Nve(F),G={chartX:Math.round(R.pageX-U.left),chartY:Math.round(R.pageY-U.top)},Z=F.width/j.offsetWidth||1,ne=this.inRange(G.chartX,G.chartY,Z);if(!ne)return null;var oe=this.state,ye=oe.xAxisMap,fe=oe.yAxisMap,$e=this.getTooltipEventType();if($e!=="axis"&&ye&&fe){var ae=hh(ye).scale,be=hh(fe).scale,Te=ae&&ae.invert?ae.invert(G.chartX):null,Le=be&&be.invert?be.invert(G.chartY):null;return tt(tt({},G),{},{xValue:Te,yValue:Le})}var Ee=Lz(this.state,this.props.data,this.props.layout,ne);return Ee?tt(tt({},G),Ee):null}},{key:"inRange",value:function(R,j){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,U=this.props.layout,G=R/F,Z=j/F;if(U==="horizontal"||U==="vertical"){var ne=this.state.offset,oe=G>=ne.left&&G<=ne.left+ne.width&&Z>=ne.top&&Z<=ne.top+ne.height;return oe?{x:G,y:Z}:null}var ye=this.state,fe=ye.angleAxisMap,$e=ye.radiusAxisMap;if(fe&&$e){var ae=hh(fe);return N4({x:G,y:Z},ae)}return null}},{key:"parseEventsOfWrapper",value:function(){var R=this.props.children,j=this.getTooltipEventType(),F=Zc(R,tp),U={};F&&j==="axis"&&(F.props.trigger==="click"?U={onClick:this.handleClick}:U={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var G=IS(this.props,this.handleOuterEvent);return tt(tt({},G),U)}},{key:"addListener",value:function(){XT.on(ZT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){XT.removeListener(ZT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(R,j,F){for(var U=this.state.formattedGraphicalItems,G=0,Z=U.length;G<Z;G++){var ne=U[G];if(ne.item===R||ne.props.key===R.key||j===ef(ne.item.type)&&F===ne.childIndex)return ne}return null}},{key:"renderAxis",value:function(R,j,F,U){var G=this.props,Z=G.width,ne=G.height;return Re.createElement(i0,ug({},R,{className:ir("recharts-".concat(R.axisType," ").concat(R.axisType),R.className),key:j.key||"".concat(F,"-").concat(U),viewBox:{x:0,y:0,width:Z,height:ne},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var R=this.clipPathId,j=this.state.offset,F=j.left,U=j.top,G=j.height,Z=j.width;return Re.createElement("defs",null,Re.createElement("clipPath",{id:R},Re.createElement("rect",{x:F,y:U,height:G,width:Z})))}},{key:"getXScales",value:function(){var R=this.state.xAxisMap;return R?Object.entries(R).reduce(function(j,F){var U=Mz(F,2),G=U[0],Z=U[1];return tt(tt({},j),{},Qt({},G,Z.scale))},{}):null}},{key:"getYScales",value:function(){var R=this.state.yAxisMap;return R?Object.entries(R).reduce(function(j,F){var U=Mz(F,2),G=U[0],Z=U[1];return tt(tt({},j),{},Qt({},G,Z.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(R){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[R])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(R){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[R])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(R){var j=this.state,F=j.formattedGraphicalItems,U=j.activeItem;if(F&&F.length)for(var G=0,Z=F.length;G<Z;G++){var ne=F[G],oe=ne.props,ye=ne.item,fe=ef(ye.type);if(fe==="Bar"){var $e=(oe.data||[]).find(function(Le){return Pwe(R,Le)});if($e)return{graphicalItem:ne,payload:$e}}else if(fe==="RadialBar"){var ae=(oe.data||[]).find(function(Le){return N4(R,Le)});if(ae)return{graphicalItem:ne,payload:ae}}else if(Z2(ne,U)||K2(ne,U)||lx(ne,U)){var be=MSe({graphicalItem:ne,activeTooltipItem:U,itemData:ye.props.data}),Te=ye.props.activeIndex===void 0?be:ye.props.activeIndex;return{graphicalItem:tt(tt({},ne),{},{childIndex:Te}),payload:lx(ne,U)?ye.props.data[be]:ne.props.data[be]}}}return null}},{key:"render",value:function(){var R=this;if(!r3(this))return null;var j=this.props,F=j.children,U=j.className,G=j.width,Z=j.height,ne=j.style,oe=j.compact,ye=j.title,fe=j.desc,$e=$z(j,KCe),ae=jn($e);if(oe)return Re.createElement(CA,ug({},ae,{width:G,height:Z,title:ye,desc:fe}),this.renderClipPath(),o3(F,this.renderMap));if(this.props.accessibilityLayer){var be,Te;ae.tabIndex=(be=this.props.tabIndex)!==null&&be!==void 0?be:0,ae.role=(Te=this.props.role)!==null&&Te!==void 0?Te:"img",ae.onKeyDown=function(Ee){R.accessibilityManager.keyboardEvent(Ee)},ae.onFocus=function(){R.accessibilityManager.focus()}}var Le=this.parseEventsOfWrapper();return Re.createElement("div",ug({className:ir("recharts-wrapper",U),style:tt({position:"relative",cursor:"default",width:G,height:Z},ne)},Le,{ref:function(de){R.container=de},role:"region"}),Re.createElement(CA,ug({},ae,{width:G,height:Z,title:ye,desc:fe,style:hIe}),this.renderClipPath(),o3(F,this.renderMap)),this.renderLegend(),this.renderTooltip())}}]),O}(D.Component),Qt(n,"displayName",r),Qt(n,"defaultProps",tt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},b)),Qt(n,"getDerivedStateFromProps",function(P,$){var O=P.dataKey,k=P.data,R=P.children,j=P.width,F=P.height,U=P.layout,G=P.stackOffset,Z=P.margin;if($.updateId===void 0){var ne=Dz(P);return tt(tt(tt({},ne),{},{updateId:0},T(tt(tt({props:P},ne),{},{updateId:0}),$)),{},{prevDataKey:O,prevData:k,prevWidth:j,prevHeight:F,prevLayout:U,prevStackOffset:G,prevMargin:Z,prevChildren:R})}if(O!==$.prevDataKey||k!==$.prevData||j!==$.prevWidth||F!==$.prevHeight||U!==$.prevLayout||G!==$.prevStackOffset||!xg(Z,$.prevMargin)){var oe=Dz(P),ye={chartX:$.chartX,chartY:$.chartY,isTooltipActive:$.isTooltipActive},fe=tt(tt({},Lz($,k,U)),{},{updateId:$.updateId+1}),$e=tt(tt(tt({},oe),ye),fe);return tt(tt(tt({},$e),T(tt({props:P},$e),$)),{},{prevDataKey:O,prevData:k,prevWidth:j,prevHeight:F,prevLayout:U,prevStackOffset:G,prevMargin:Z,prevChildren:R})}if(!W7(R,$.prevChildren)){var ae=!Wn(k),be=ae?$.updateId:$.updateId+1;return tt(tt({updateId:be},T(tt(tt({props:P},$),{},{updateId:be}),$)),{},{prevChildren:R})}return null}),Qt(n,"renderActiveDot",function(P,$){var O;return D.isValidElement(P)?O=D.cloneElement(P,$):$n(P)?O=P($):O=Re.createElement(kk,$),Re.createElement($i,{className:"recharts-active-dot",key:$.key},O)}),n},wIe=bIe({chartName:"LineChart",GraphicalChild:u1,axisComponents:[{axisType:"xAxis",AxisComp:Q2},{axisType:"yAxis",AxisComp:eC}],formatAxisMap:t2e}),OV={exports:{}},MV={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c1=D;function SIe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var EIe=typeof Object.is=="function"?Object.is:SIe,CIe=c1.useSyncExternalStore,IIe=c1.useRef,TIe=c1.useEffect,PIe=c1.useMemo,AIe=c1.useDebugValue;MV.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=IIe(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=PIe(function(){function h(I){if(!d){if(d=!0,g=I,I=r(I),i!==void 0&&l.hasValue){var T=l.value;if(i(T,I))return v=T}return v=I}if(T=v,EIe(g,I))return T;var P=r(I);return i!==void 0&&i(T,P)?T:(g=I,v=P)}var d=!1,g,v,b=n===void 0?null:n;return[function(){return h(t())},b===null?void 0:function(){return h(b())}]},[t,n,r,i]);var a=CIe(e,o[0],o[1]);return TIe(function(){l.hasValue=!0,l.value=a},[a]),AIe(a),a};OV.exports=MV;var OIe=OV.exports,Os="default"in Zw?Re:Zw,zz=Symbol.for("react-redux-context"),Fz=typeof globalThis<"u"?globalThis:{};function MIe(){if(!Os.createContext)return{};const e=Fz[zz]??(Fz[zz]=new Map);let t=e.get(Os.createContext);return t||(t=Os.createContext(null),e.set(Os.createContext,t)),t}var Gh=MIe(),$Ie=()=>{throw new Error("uSES not initialized!")};function Fk(e=Gh){return function(){return Os.useContext(e)}}var $V=Fk(),kV=$Ie,kIe=e=>{kV=e},NIe=(e,t)=>e===t;function LIe(e=Gh){const t=e===Gh?$V:Fk(e);return function(r,i={}){const{equalityFn:o=NIe,devModeChecks:l={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:h,getServerState:d,stabilityCheck:g,identityFunctionCheck:v}=t();Os.useRef(!0);const b=Os.useCallback({[r.name](T){return r(T)}}[r.name],[r,g,l.stabilityCheck]),I=kV(h.addNestedSub,a.getState,d||a.getState,b,o);return Os.useDebugValue(I),I}}var NV=LIe();function DIe(e){e()}function RIe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){DIe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){let n=[],r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0,i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Bz={notify(){},get:()=>[]};function zIe(e,t){let n,r=Bz,i=0,o=!1;function l(P){g();const $=r.subscribe(P);let O=!1;return()=>{O||(O=!0,$(),v())}}function a(){r.notify()}function h(){T.onStateChange&&T.onStateChange()}function d(){return o}function g(){i++,n||(n=t?t.addNestedSub(h):e.subscribe(h),r=RIe())}function v(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Bz)}function b(){o||(o=!0,g())}function I(){o&&(o=!1,v())}const T={addNestedSub:l,notifyNestedSubs:a,handleChangeWrapper:h,isSubscribed:d,trySubscribe:b,tryUnsubscribe:I,getListeners:()=>r};return T}var FIe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BIe=FIe?Os.useLayoutEffect:Os.useEffect;function jIe({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:o="once"}){const l=Os.useMemo(()=>{const d=zIe(e);return{store:e,subscription:d,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:o}},[e,r,i,o]),a=Os.useMemo(()=>e.getState(),[e]);BIe(()=>{const{subscription:d}=l;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),a!==e.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[l,a]);const h=t||Gh;return Os.createElement(h.Provider,{value:l},n)}var UIe=jIe;function LV(e=Gh){const t=e===Gh?$V:Fk(e);return function(){const{store:r}=t();return r}}var VIe=LV();function GIe(e=Gh){const t=e===Gh?VIe:LV(e);return function(){return t().dispatch}}var qIe=GIe();kIe(OIe.useSyncExternalStoreWithSelector);function WIe({selectedYear:e,selectedAnimal:t}){const n=({active:d,payload:g,label:v,selectedAnimal:b})=>{if(d&&g&&g.length){const T=g[0].payload.total;return Pe.jsxs("div",{className:"custom-tooltip",style:{fontSize:"12px",backgroundColor:"#030712",color:"#606572",borderRadius:"5px",border:"0.5px solid #ccc",padding:"5px"},children:[Pe.jsxs("p",{className:"label",children:["Anne : ",Pe.jsx("b",{children:v})," "]}),Pe.jsxs("p",{className:"label",children:["Effectif : ",Pe.jsxs("b",{children:[T," ",b]})]})]})}return null},r=NV(d=>d.densityData.densityData),i=d=>{if(t&&e&&r)return r.properties[`${t.toUpperCase()}_${d}`];if(t==="chien"&&e)switch(d){case"2017":return 9860236;case"2018":return 9898810;case"2019":return 9930949;case"2020":return 9973306;default:return null}else if(t==="chat"&&e)switch(d){case"2017":return 5984099;case"2018":return 6313201;case"2019":return 6659837;case"2020":return 7022555;default:return null}},o=[{name:"2017",total:t&&e?i("2017"):9860236},{name:"2018",total:t&&e?i("2018"):9898810},{name:"2019",total:t&&e?i("2019"):9930949},{name:"2020",total:t&&e?i("2020"):9973306}],l=Math.min(...o.map(d=>d.total)),a=Math.max(...o.map(d=>d.total)),h=d=>d>=1e6?`${(d/1e6).toFixed(1)}M`:d.toString();return Pe.jsx(Tve,{width:"100%",height:550,children:Pe.jsxs(wIe,{data:o,children:[Pe.jsx(Q2,{dataKey:"name",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,children:Pe.jsx(xo,{value:"Anne",offset:0,position:"insideBottom",style:{fill:"#6d28d9",fontSize:"14px"}})}),Pe.jsx(eC,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:(d,g)=>g===0?"":h(d),domain:[l,a],children:Pe.jsx(xo,{value:"Population",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"#6d28d9",fontSize:"14px"}})}),Pe.jsx(tp,{contentStyle:{backgroundColor:"#030712",color:"#606572",borderRadius:"10px"},content:Pe.jsx(n,{selectedAnimal:t})}),Pe.jsx(Fg,{align:"left",verticalAlign:"bottom",wrapperStyle:{paddingBottom:"20px",paddingTop:"20px"}}),Pe.jsx(u1,{type:"monotone",dataKey:"total",name:t&&e?`volution du nombre de ${t} entre 2017 et 2020`:"volution du nombre de chien entre 2017 et 2020",stroke:"#6d28d9",strokeWidth:2}),Pe.jsx(zk,{stroke:"#6d28d9",strokeDasharray:"3 3",horizontal:!1,vertical:!0})]})})}var Ur="-ms-",a0="-moz-",or="-webkit-",DV="comm",nC="rule",Bk="decl",HIe="@import",RV="@keyframes",XIe="@layer",ZIe=Math.abs,jk=String.fromCharCode,zO=Object.assign;function KIe(e,t){return _o(e,0)^45?(((t<<2^_o(e,0))<<2^_o(e,1))<<2^_o(e,2))<<2^_o(e,3):0}function zV(e){return e.trim()}function Gc(e,t){return(e=t.exec(e))?e[0]:e}function Cn(e,t,n){return e.replace(t,n)}function Fw(e,t){return e.indexOf(t)}function _o(e,t){return e.charCodeAt(t)|0}function ey(e,t,n){return e.slice(t,n)}function ic(e){return e.length}function FV(e){return e.length}function F_(e,t){return t.push(e),e}function YIe(e,t){return e.map(t).join("")}function jz(e,t){return e.filter(function(n){return!Gc(n,t)})}var rC=1,ty=1,BV=0,Ol=0,zi=0,Zy="";function iC(e,t,n,r,i,o,l,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:rC,column:ty,length:l,return:"",siblings:a}}function mh(e,t){return zO(iC("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Gm(e){for(;e.root;)e=mh(e.root,{children:[e]});F_(e,e.siblings)}function JIe(){return zi}function QIe(){return zi=Ol>0?_o(Zy,--Ol):0,ty--,zi===10&&(ty=1,rC--),zi}function wu(){return zi=Ol<BV?_o(Zy,Ol++):0,ty++,zi===10&&(ty=1,rC++),zi}function fp(){return _o(Zy,Ol)}function Bw(){return Ol}function oC(e,t){return ey(Zy,e,t)}function FO(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eTe(e){return rC=ty=1,BV=ic(Zy=e),Ol=0,[]}function tTe(e){return Zy="",e}function YT(e){return zV(oC(Ol-1,BO(e===91?e+2:e===40?e+1:e)))}function nTe(e){for(;(zi=fp())&&zi<33;)wu();return FO(e)>2||FO(zi)>3?"":" "}function rTe(e,t){for(;--t&&wu()&&!(zi<48||zi>102||zi>57&&zi<65||zi>70&&zi<97););return oC(e,Bw()+(t<6&&fp()==32&&wu()==32))}function BO(e){for(;wu();)switch(zi){case e:return Ol;case 34:case 39:e!==34&&e!==39&&BO(zi);break;case 40:e===41&&BO(e);break;case 92:wu();break}return Ol}function iTe(e,t){for(;wu()&&e+zi!==57;)if(e+zi===84&&fp()===47)break;return"/*"+oC(t,Ol-1)+"*"+jk(e===47?e:wu())}function oTe(e){for(;!FO(fp());)wu();return oC(e,Ol)}function aTe(e){return tTe(jw("",null,null,null,[""],e=eTe(e),0,[0],e))}function jw(e,t,n,r,i,o,l,a,h){for(var d=0,g=0,v=l,b=0,I=0,T=0,P=1,$=1,O=1,k=0,R="",j=i,F=o,U=r,G=R;$;)switch(T=k,k=wu()){case 40:if(T!=108&&_o(G,v-1)==58){Fw(G+=Cn(YT(k),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:G+=YT(k);break;case 9:case 10:case 13:case 32:G+=nTe(T);break;case 92:G+=rTe(Bw()-1,7);continue;case 47:switch(fp()){case 42:case 47:F_(sTe(iTe(wu(),Bw()),t,n,h),h);break;default:G+="/"}break;case 123*P:a[d++]=ic(G)*O;case 125*P:case 59:case 0:switch(k){case 0:case 125:$=0;case 59+g:O==-1&&(G=Cn(G,/\f/g,"")),I>0&&ic(G)-v&&F_(I>32?Vz(G+";",r,n,v-1,h):Vz(Cn(G," ","")+";",r,n,v-2,h),h);break;case 59:G+=";";default:if(F_(U=Uz(G,t,n,d,g,i,a,R,j=[],F=[],v,o),o),k===123)if(g===0)jw(G,t,U,U,j,o,v,a,F);else switch(b===99&&_o(G,3)===110?100:b){case 100:case 108:case 109:case 115:jw(e,U,U,r&&F_(Uz(e,U,U,0,0,i,a,R,i,j=[],v,F),F),i,F,v,a,r?j:F);break;default:jw(G,U,U,U,[""],F,0,a,F)}}d=g=I=0,P=O=1,R=G="",v=l;break;case 58:v=1+ic(G),I=T;default:if(P<1){if(k==123)--P;else if(k==125&&P++==0&&QIe()==125)continue}switch(G+=jk(k),k*P){case 38:O=g>0?1:(G+="\f",-1);break;case 44:a[d++]=(ic(G)-1)*O,O=1;break;case 64:fp()===45&&(G+=YT(wu())),b=fp(),g=v=ic(R=G+=oTe(Bw())),k++;break;case 45:T===45&&ic(G)==2&&(P=0)}}return o}function Uz(e,t,n,r,i,o,l,a,h,d,g,v){for(var b=i-1,I=i===0?o:[""],T=FV(I),P=0,$=0,O=0;P<r;++P)for(var k=0,R=ey(e,b+1,b=ZIe($=l[P])),j=e;k<T;++k)(j=zV($>0?I[k]+" "+R:Cn(R,/&\f/g,I[k])))&&(h[O++]=j);return iC(e,t,n,i===0?nC:a,h,d,g,v)}function sTe(e,t,n,r){return iC(e,t,n,DV,jk(JIe()),ey(e,2,-2),0,r)}function Vz(e,t,n,r,i){return iC(e,t,n,Bk,ey(e,0,r),ey(e,r+1,-1),r,i)}function jV(e,t,n){switch(KIe(e,t)){case 5103:return or+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return or+e+e;case 4789:return a0+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return or+e+a0+e+Ur+e+e;case 5936:switch(_o(e,t+11)){case 114:return or+e+Ur+Cn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return or+e+Ur+Cn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return or+e+Ur+Cn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return or+e+Ur+e+e;case 6165:return or+e+Ur+"flex-"+e+e;case 5187:return or+e+Cn(e,/(\w+).+(:[^]+)/,or+"box-$1$2"+Ur+"flex-$1$2")+e;case 5443:return or+e+Ur+"flex-item-"+Cn(e,/flex-|-self/g,"")+(Gc(e,/flex-|baseline/)?"":Ur+"grid-row-"+Cn(e,/flex-|-self/g,""))+e;case 4675:return or+e+Ur+"flex-line-pack"+Cn(e,/align-content|flex-|-self/g,"")+e;case 5548:return or+e+Ur+Cn(e,"shrink","negative")+e;case 5292:return or+e+Ur+Cn(e,"basis","preferred-size")+e;case 6060:return or+"box-"+Cn(e,"-grow","")+or+e+Ur+Cn(e,"grow","positive")+e;case 4554:return or+Cn(e,/([^-])(transform)/g,"$1"+or+"$2")+e;case 6187:return Cn(Cn(Cn(e,/(zoom-|grab)/,or+"$1"),/(image-set)/,or+"$1"),e,"")+e;case 5495:case 3959:return Cn(e,/(image-set\([^]*)/,or+"$1$`$1");case 4968:return Cn(Cn(e,/(.+:)(flex-)?(.*)/,or+"box-pack:$3"+Ur+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+or+e+e;case 4200:if(!Gc(e,/flex-|baseline/))return Ur+"grid-column-align"+ey(e,t)+e;break;case 2592:case 3360:return Ur+Cn(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(r,i){return t=i,Gc(r.props,/grid-\w+-end/)})?~Fw(e+(n=n[t].value),"span")?e:Ur+Cn(e,"-start","")+e+Ur+"grid-row-span:"+(~Fw(n,"span")?Gc(n,/\d+/):+Gc(n,/\d+/)-+Gc(e,/\d+/))+";":Ur+Cn(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(r){return Gc(r.props,/grid-\w+-start/)})?e:Ur+Cn(Cn(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Cn(e,/(.+)-inline(.+)/,or+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ic(e)-1-t>6)switch(_o(e,t+1)){case 109:if(_o(e,t+4)!==45)break;case 102:return Cn(e,/(.+:)(.+)-([^]+)/,"$1"+or+"$2-$3$1"+a0+(_o(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Fw(e,"stretch")?jV(Cn(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return Cn(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,o,l,a,h,d){return Ur+i+":"+o+d+(l?Ur+i+"-span:"+(a?h:+h-+o)+d:"")+e});case 4949:if(_o(e,t+6)===121)return Cn(e,":",":"+or)+e;break;case 6444:switch(_o(e,_o(e,14)===45?18:11)){case 120:return Cn(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+or+(_o(e,14)===45?"inline-":"")+"box$3$1"+or+"$2$3$1"+Ur+"$2box$3")+e;case 100:return Cn(e,":",":"+Ur)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Cn(e,"scroll-","scroll-snap-")+e}return e}function xE(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function lTe(e,t,n,r){switch(e.type){case XIe:if(e.children.length)break;case HIe:case Bk:return e.return=e.return||e.value;case DV:return"";case RV:return e.return=e.value+"{"+xE(e.children,r)+"}";case nC:if(!ic(e.value=e.props.join(",")))return""}return ic(n=xE(e.children,r))?e.return=e.value+"{"+n+"}":""}function uTe(e){var t=FV(e);return function(n,r,i,o){for(var l="",a=0;a<t;a++)l+=e[a](n,r,i,o)||"";return l}}function cTe(e){return function(t){t.root||(t=t.return)&&e(t)}}function fTe(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Bk:e.return=jV(e.value,e.length,n);return;case RV:return xE([mh(e,{value:Cn(e.value,"@","@"+or)})],r);case nC:if(e.length)return YIe(n=e.props,function(i){switch(Gc(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Gm(mh(e,{props:[Cn(i,/:(read-\w+)/,":"+a0+"$1")]})),Gm(mh(e,{props:[i]})),zO(e,{props:jz(n,r)});break;case"::placeholder":Gm(mh(e,{props:[Cn(i,/:(plac\w+)/,":"+or+"input-$1")]})),Gm(mh(e,{props:[Cn(i,/:(plac\w+)/,":"+a0+"$1")]})),Gm(mh(e,{props:[Cn(i,/:(plac\w+)/,Ur+"input-$1")]})),Gm(mh(e,{props:[i]})),zO(e,{props:jz(n,r)});break}return""})}}var hTe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Es={},ny=typeof process<"u"&&Es!==void 0&&(Es.REACT_APP_SC_ATTR||Es.SC_ATTR)||"data-styled",Uk=typeof window<"u"&&"HTMLElement"in window,dTe=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Es!==void 0&&Es.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Es.REACT_APP_SC_DISABLE_SPEEDY!==""?Es.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Es.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Es!==void 0&&Es.SC_DISABLE_SPEEDY!==void 0&&Es.SC_DISABLE_SPEEDY!==""&&Es.SC_DISABLE_SPEEDY!=="false"&&Es.SC_DISABLE_SPEEDY),aC=Object.freeze([]),ry=Object.freeze({});function pTe(e,t,n){return n===void 0&&(n=ry),e.theme!==n.theme&&e.theme||t||n.theme}var UV=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),mTe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,gTe=/(^-|-$)/g;function Gz(e){return e.replace(mTe,"-").replace(gTe,"")}var yTe=/(a)(d)/gi,qz=function(e){return String.fromCharCode(e+(e>25?39:97))};function jO(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=qz(t%52)+n;return(qz(t%52)+n).replace(yTe,"$1-$2")}var JT,cg=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},VV=function(e){return cg(5381,e)};function vTe(e){return jO(VV(e)>>>0)}function _Te(e){return e.displayName||e.name||"Component"}function QT(e){return typeof e=="string"&&!0}var GV=typeof Symbol=="function"&&Symbol.for,qV=GV?Symbol.for("react.memo"):60115,xTe=GV?Symbol.for("react.forward_ref"):60112,bTe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},wTe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},WV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},STe=((JT={})[xTe]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},JT[qV]=WV,JT);function Wz(e){return("type"in(t=e)&&t.type.$$typeof)===qV?WV:"$$typeof"in e?STe[e.$$typeof]:bTe;var t}var ETe=Object.defineProperty,CTe=Object.getOwnPropertyNames,Hz=Object.getOwnPropertySymbols,ITe=Object.getOwnPropertyDescriptor,TTe=Object.getPrototypeOf,Xz=Object.prototype;function HV(e,t,n){if(typeof t!="string"){if(Xz){var r=TTe(t);r&&r!==Xz&&HV(e,r,n)}var i=CTe(t);Hz&&(i=i.concat(Hz(t)));for(var o=Wz(e),l=Wz(t),a=0;a<i.length;++a){var h=i[a];if(!(h in wTe||n&&n[h]||l&&h in l||o&&h in o)){var d=ITe(t,h);try{ETe(e,h,d)}catch{}}}}return e}function iy(e){return typeof e=="function"}function Vk(e){return typeof e=="object"&&"styledComponentId"in e}function ip(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Zz(e,t){if(e.length===0)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function vx(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function UO(e,t,n){if(n===void 0&&(n=!1),!n&&!vx(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=UO(e[r],t[r]);else if(vx(t))for(var r in t)e[r]=UO(e[r],t[r]);return e}function Gk(e,t){Object.defineProperty(e,"toString",{value:t})}function f1(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var PTe=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var n=0,r=0;r<t;r++)n+=this.groupSizes[r];return n},e.prototype.insertRules=function(t,n){if(t>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,o=i;t>=o;)if((o<<=1)<0)throw f1(16,"".concat(t));this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var l=i;l<o;l++)this.groupSizes[l]=0}for(var a=this.indexOfGroup(t+1),h=(l=0,n.length);l<h;l++)this.tag.insertRule(a,n[l])&&(this.groupSizes[t]++,a++)},e.prototype.clearGroup=function(t){if(t<this.length){var n=this.groupSizes[t],r=this.indexOfGroup(t),i=r+n;this.groupSizes[t]=0;for(var o=r;o<i;o++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(t){var n="";if(t>=this.length||this.groupSizes[t]===0)return n;for(var r=this.groupSizes[t],i=this.indexOfGroup(t),o=i+r,l=i;l<o;l++)n+="".concat(this.tag.getRule(l)).concat(`/*!sc*/
`);return n},e}(),Uw=new Map,bE=new Map,Vw=1,hw=function(e){if(Uw.has(e))return Uw.get(e);for(;bE.has(Vw);)Vw++;var t=Vw++;return Uw.set(e,t),bE.set(t,e),t},ATe=function(e,t){Vw=t+1,Uw.set(e,t),bE.set(t,e)},OTe="style[".concat(ny,"][").concat("data-styled-version",'="').concat("6.1.1",'"]'),MTe=new RegExp("^".concat(ny,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),$Te=function(e,t,n){for(var r,i=n.split(","),o=0,l=i.length;o<l;o++)(r=i[o])&&e.registerName(t,r)},kTe=function(e,t){for(var n,r=((n=t.textContent)!==null&&n!==void 0?n:"").split(`/*!sc*/
`),i=[],o=0,l=r.length;o<l;o++){var a=r[o].trim();if(a){var h=a.match(MTe);if(h){var d=0|parseInt(h[1],10),g=h[2];d!==0&&(ATe(g,d),$Te(e,g,h[3]),e.getTag().insertRules(d,i)),i.length=0}else i.push(a)}}};function NTe(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var XV=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(a){var h=Array.from(a.querySelectorAll("style[".concat(ny,"]")));return h[h.length-1]}(n),o=i!==void 0?i.nextSibling:null;r.setAttribute(ny,"active"),r.setAttribute("data-styled-version","6.1.1");var l=NTe();return l&&r.setAttribute("nonce",l),n.insertBefore(r,o),r},LTe=function(){function e(t){this.element=XV(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,o=r.length;i<o;i++){var l=r[i];if(l.ownerNode===n)return l}throw f1(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,n){try{return this.sheet.insertRule(n,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var n=this.sheet.cssRules[t];return n&&n.cssText?n.cssText:""},e}(),DTe=function(){function e(t){this.element=XV(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,n){if(t<=this.length&&t>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),RTe=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,n){return t<=this.length&&(this.rules.splice(t,0,n),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),Kz=Uk,zTe={isServer:!Uk,useCSSOMInjection:!dTe},ZV=function(){function e(t,n,r){t===void 0&&(t=ry),n===void 0&&(n={});var i=this;this.options=_r(_r({},zTe),t),this.gs=n,this.names=new Map(r),this.server=!!t.isServer,!this.server&&Uk&&Kz&&(Kz=!1,function(o){for(var l=document.querySelectorAll(OTe),a=0,h=l.length;a<h;a++){var d=l[a];d&&d.getAttribute(ny)!=="active"&&(kTe(o,d),d.parentNode&&d.parentNode.removeChild(d))}}(this)),Gk(this,function(){return function(o){for(var l=o.getTag(),a=l.length,h="",d=function(v){var b=function(O){return bE.get(O)}(v);if(b===void 0)return"continue";var I=o.names.get(b),T=l.getGroup(v);if(I===void 0||T.length===0)return"continue";var P="".concat(ny,".g").concat(v,'[id="').concat(b,'"]'),$="";I!==void 0&&I.forEach(function(O){O.length>0&&($+="".concat(O,","))}),h+="".concat(T).concat(P,'{content:"').concat($,'"}').concat(`/*!sc*/
`)},g=0;g<a;g++)d(g);return h}(i)})}return e.registerId=function(t){return hw(t)},e.prototype.reconstructWithOptions=function(t,n){return n===void 0&&(n=!0),new e(_r(_r({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new RTe(i):r?new LTe(i):new DTe(i)}(this.options),new PTe(t)));var t},e.prototype.hasNameForId=function(t,n){return this.names.has(t)&&this.names.get(t).has(n)},e.prototype.registerName=function(t,n){if(hw(t),this.names.has(t))this.names.get(t).add(n);else{var r=new Set;r.add(n),this.names.set(t,r)}},e.prototype.insertRules=function(t,n,r){this.registerName(t,n),this.getTag().insertRules(hw(t),r)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(hw(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),FTe=/&/g,BTe=/^\s*\/\/.*$/gm;function KV(e,t){return e.map(function(n){return n.type==="rule"&&(n.value="".concat(t," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(t," ")),n.props=n.props.map(function(r){return"".concat(t," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=KV(n.children,t)),n})}function jTe(e){var t,n,r,i=e===void 0?ry:e,o=i.options,l=o===void 0?ry:o,a=i.plugins,h=a===void 0?aC:a,d=function(b,I,T){return T===n||T.startsWith(n)&&T.endsWith(n)&&T.replaceAll(n,"").length>0?".".concat(t):b},g=h.slice();g.push(function(b){b.type===nC&&b.value.includes("&")&&(b.props[0]=b.props[0].replace(FTe,n).replace(r,d))}),l.prefix&&g.push(fTe),g.push(lTe);var v=function(b,I,T,P){I===void 0&&(I=""),T===void 0&&(T=""),P===void 0&&(P="&"),t=P,n=I,r=new RegExp("\\".concat(n,"\\b"),"g");var $=b.replace(BTe,""),O=aTe(T||I?"".concat(T," ").concat(I," { ").concat($," }"):$);l.namespace&&(O=KV(O,l.namespace));var k=[];return xE(O,uTe(g.concat(cTe(function(R){return k.push(R)})))),k};return v.hash=h.length?h.reduce(function(b,I){return I.name||f1(15),cg(b,I.name)},5381).toString():"",v}var UTe=new ZV,VO=jTe(),YV=Re.createContext({shouldForwardProp:void 0,styleSheet:UTe,stylis:VO});YV.Consumer;Re.createContext(void 0);function Yz(){return D.useContext(YV)}var VTe=function(){function e(t,n){var r=this;this.inject=function(i,o){o===void 0&&(o=VO);var l=r.name+o.hash;i.hasNameForId(r.id,l)||i.insertRules(r.id,l,o(r.rules,l,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=n,Gk(this,function(){throw f1(12,String(r.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=VO),this.name+t.hash},e}(),GTe=function(e){return e>="A"&&e<="Z"};function Jz(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(n===1&&r==="-"&&e[0]==="-")return e;GTe(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var JV=function(e){return e==null||e===!1||e===""},QV=function(e){var t,n,r=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!JV(o)&&(Array.isArray(o)&&o.isCss||iy(o)?r.push("".concat(Jz(i),":"),o,";"):vx(o)?r.push.apply(r,kg(kg(["".concat(i," {")],QV(o),!1),["}"],!1)):r.push("".concat(Jz(i),": ").concat((t=i,(n=o)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||t in hTe||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function hp(e,t,n,r){if(JV(e))return[];if(Vk(e))return[".".concat(e.styledComponentId)];if(iy(e)){if(!iy(o=e)||o.prototype&&o.prototype.isReactComponent||!t)return[e];var i=e(t);return hp(i,t,n,r)}var o;return e instanceof VTe?n?(e.inject(n,r),[e.getName(r)]):[e]:vx(e)?QV(e):Array.isArray(e)?Array.prototype.concat.apply(aC,e.map(function(l){return hp(l,t,n,r)})):[e.toString()]}function qTe(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(iy(n)&&!Vk(n))return!1}return!0}var WTe=VV("6.1.1"),HTe=function(){function e(t,n,r){this.rules=t,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&qTe(t),this.componentId=n,this.baseHash=cg(WTe,n),this.baseStyle=r,ZV.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=ip(i,this.staticRulesId);else{var o=Zz(hp(this.rules,t,n,r)),l=jO(cg(this.baseHash,o)>>>0);if(!n.hasNameForId(this.componentId,l)){var a=r(o,".".concat(l),void 0,this.componentId);n.insertRules(this.componentId,l,a)}i=ip(i,l),this.staticRulesId=l}else{for(var h=cg(this.baseHash,r.hash),d="",g=0;g<this.rules.length;g++){var v=this.rules[g];if(typeof v=="string")d+=v;else if(v){var b=Zz(hp(v,t,n,r));h=cg(h,b+g),d+=b}}if(d){var I=jO(h>>>0);n.hasNameForId(this.componentId,I)||n.insertRules(this.componentId,I,r(d,".".concat(I),void 0,this.componentId)),i=ip(i,I)}}return i},e}(),eG=Re.createContext(void 0);eG.Consumer;var eP={};function XTe(e,t,n){var r=Vk(e),i=e,o=!QT(e),l=t.attrs,a=l===void 0?aC:l,h=t.componentId,d=h===void 0?function(j,F){var U=typeof j!="string"?"sc":Gz(j);eP[U]=(eP[U]||0)+1;var G="".concat(U,"-").concat(vTe("6.1.1"+U+eP[U]));return F?"".concat(F,"-").concat(G):G}(t.displayName,t.parentComponentId):h,g=t.displayName,v=g===void 0?function(j){return QT(j)?"styled.".concat(j):"Styled(".concat(_Te(j),")")}(e):g,b=t.displayName&&t.componentId?"".concat(Gz(t.displayName),"-").concat(t.componentId):t.componentId||d,I=r&&i.attrs?i.attrs.concat(a).filter(Boolean):a,T=t.shouldForwardProp;if(r&&i.shouldForwardProp){var P=i.shouldForwardProp;if(t.shouldForwardProp){var $=t.shouldForwardProp;T=function(j,F){return P(j,F)&&$(j,F)}}else T=P}var O=new HTe(n,b,r?i.componentStyle:void 0);function k(j,F){return function(U,G,Z){var ne=U.attrs,oe=U.componentStyle,ye=U.defaultProps,fe=U.foldedComponentIds,$e=U.styledComponentId,ae=U.target,be=Re.useContext(eG),Te=Yz(),Le=U.shouldForwardProp||Te.shouldForwardProp,Ee=function(Et,zt,Yt){for(var St,Vt=_r(_r({},zt),{className:void 0,theme:Yt}),Qe=0;Qe<Et.length;Qe+=1){var dt=iy(St=Et[Qe])?St(Vt):St;for(var vt in dt)Vt[vt]=vt==="className"?ip(Vt[vt],dt[vt]):vt==="style"?_r(_r({},Vt[vt]),dt[vt]):dt[vt]}return zt.className&&(Vt.className=ip(Vt.className,zt.className)),Vt}(ne,G,pTe(G,be,ye)||ry),de=Ee.as||ae,De={};for(var He in Ee)Ee[He]===void 0||He[0]==="$"||He==="as"||He==="theme"||(He==="forwardedAs"?De.as=Ee.forwardedAs:Le&&!Le(He,de)||(De[He]=Ee[He]));var je=function(Et,zt){var Yt=Yz(),St=Et.generateAndInjectStyles(zt,Yt.styleSheet,Yt.stylis);return St}(oe,Ee),et=ip(fe,$e);return je&&(et+=" "+je),Ee.className&&(et+=" "+Ee.className),De[QT(de)&&!UV.has(de)?"class":"className"]=et,De.ref=Z,D.createElement(de,De)}(R,j,F)}k.displayName=v;var R=Re.forwardRef(k);return R.attrs=I,R.componentStyle=O,R.displayName=v,R.shouldForwardProp=T,R.foldedComponentIds=r?ip(i.foldedComponentIds,i.styledComponentId):"",R.styledComponentId=b,R.target=r?i.target:e,Object.defineProperty(R,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(j){this._foldedDefaultProps=r?function(F){for(var U=[],G=1;G<arguments.length;G++)U[G-1]=arguments[G];for(var Z=0,ne=U;Z<ne.length;Z++)UO(F,ne[Z],!0);return F}({},i.defaultProps,j):j}}),Gk(R,function(){return".".concat(R.styledComponentId)}),o&&HV(R,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),R}function Qz(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var eF=function(e){return Object.assign(e,{isCss:!0})};function ZTe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(iy(e)||vx(e)){var r=e;return eF(hp(Qz(aC,kg([r],t,!0))))}var i=e;return t.length===0&&i.length===1&&typeof i[0]=="string"?hp(i):eF(hp(Qz(i,t)))}function GO(e,t,n){if(n===void 0&&(n=ry),!t)throw f1(1,t);var r=function(i){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return e(t,n,ZTe.apply(void 0,kg([i],o,!1)))};return r.attrs=function(i){return GO(e,t,_r(_r({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return GO(e,t,_r(_r({},n),i))},r}var tG=function(e){return GO(XTe,e)},qk=tG;UV.forEach(function(e){qk[e]=tG(e)});var nG={exports:{}};(function(e,t){(function(n,r){e.exports=r()})($_,function(){var n,r,i;function o(a,h){if(!n)n=h;else if(!r)r=h;else{var d="var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk);",g={};n(g),i=h(g),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([d],{type:"text/javascript"})))}}o(["exports"],function(a){function h(c,s,f,m){return new(f||(f=Promise))(function(_,S){function C(B){try{L(m.next(B))}catch(q){S(q)}}function A(B){try{L(m.throw(B))}catch(q){S(q)}}function L(B){var q;B.done?_(B.value):(q=B.value,q instanceof f?q:new f(function(X){X(q)})).then(C,A)}L((m=m.apply(c,s||[])).next())})}function d(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var g=v;function v(c,s){this.x=c,this.y=s}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,s){return this.clone()._rotateAround(c,s)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var s=c.x-this.x,f=c.y-this.y;return s*s+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult:function(c){var s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var s=Math.cos(c),f=Math.sin(c),m=f*this.x+s*this.y;return this.x=s*this.x-f*this.y,this.y=m,this},_rotateAround:function(c,s){var f=Math.cos(c),m=Math.sin(c),_=s.y+m*(this.x-s.x)+f*(this.y-s.y);return this.x=s.x+f*(this.x-s.x)-m*(this.y-s.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(c){return c instanceof v?c:Array.isArray(c)?new v(c[0],c[1]):c};var b=d(g),I=T;function T(c,s,f,m){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(m-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=f,this.p2y=m}T.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,m=0;m<8;m++){var _=this.sampleCurveX(f)-c;if(Math.abs(_)<s)return f;var S=this.sampleCurveDerivativeX(f);if(Math.abs(S)<1e-6)break;f-=_/S}var C=0,A=1;for(f=c,m=0;m<20&&(_=this.sampleCurveX(f),!(Math.abs(_-c)<s));m++)c>_?C=f:A=f,f=.5*(A-C)+C;return f},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};var P=d(I);let $,O;function k(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function R(){if(O==null&&(O=!1,k())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let m=0;m<5*5;m++){const _=4*m;s.fillStyle=`rgb(${_},${_+1},${_+2})`,s.fillRect(m%5,Math.floor(m/5),1,1)}const f=s.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&f[m]!==m){O=!0;break}}}return O||!1}function j(c,s,f,m){const _=new P(c,s,f,m);return function(S){return _.solve(S)}}const F=j(.25,.1,.25,1);function U(c,s,f){return Math.min(f,Math.max(s,c))}function G(c,s,f){const m=f-s,_=((c-s)%m+m)%m+s;return _===s?f:_}function Z(c,...s){for(const f of s)for(const m in f)c[m]=f[m];return c}let ne=1;function oe(c,s,f){const m={};for(const _ in c)m[_]=s.call(f||this,c[_],_,c);return m}function ye(c,s,f){const m={};for(const _ in c)s.call(f||this,c[_],_,c)&&(m[_]=c[_]);return m}function fe(c){return Array.isArray(c)?c.map(fe):typeof c=="object"&&c?oe(c,fe):c}const $e={};function ae(c){$e[c]||(typeof console<"u"&&console.warn(c),$e[c]=!0)}function be(c,s,f){return(f.y-c.y)*(s.x-c.x)>(s.y-c.y)*(f.x-c.x)}function Te(c){let s=0;for(let f,m,_=0,S=c.length,C=S-1;_<S;C=_++)f=c[_],m=c[C],s+=(m.x-f.x)*(f.y+m.y);return s}function Le(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ee=null;function de(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const De="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function He(c,s,f,m,_){return h(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(c,{timestamp:0});try{const C=S==null?void 0:S.format;if(!C||!C.startsWith("BGR")&&!C.startsWith("RGB"))throw new Error(`Unrecognized format ${C}`);const A=C.startsWith("BGR"),L=new Uint8ClampedArray(m*_*4);if(yield S.copyTo(L,function(B,q,X,Y,te){const re=4*Math.max(-q,0),le=(Math.max(0,X)-X)*Y*4+re,ve=4*Y,xe=Math.max(0,q),Me=Math.max(0,X);return{rect:{x:xe,y:Me,width:Math.min(B.width,q+Y)-xe,height:Math.min(B.height,X+te)-Me},layout:[{offset:le,stride:ve}]}}(c,s,f,m,_)),A)for(let B=0;B<L.length;B+=4){const q=L[B];L[B]=L[B+2],L[B+2]=q}return L}finally{S.close()}})}let je,et,Et,zt;const Yt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const s=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(c,s=0){return this.getImageCanvasContext(c).getImageData(-s,-s,c.width+2*s,c.height+2*s)},getImageCanvasContext(c){const s=window.document.createElement("canvas"),f=s.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return s.width=c.width,s.height=c.height,f.drawImage(c,0,0,c.width,c.height),f},resolveURL:c=>(Et||(Et=document.createElement("a")),Et.href=c,Et.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(zt==null&&(zt=matchMedia("(prefers-reduced-motion: reduce)")),zt.matches)}},St={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Vt extends Error{constructor(s,f,m,_){super(`AJAXError: ${f} (${s}): ${m}`),this.status=s,this.statusText=f,this.url=m,this.body=_}}const Qe=Le()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,dt=c=>St.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))];function vt(c,s){const f=new AbortController,m=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,cache:c.cache,referrer:Qe(),signal:f.signal});let _=!1,S=!1;return c.type==="json"&&m.headers.set("Accept","application/json"),S||fetch(m).then(C=>C.ok?(A=>{(c.type==="arrayBuffer"||c.type==="image"?A.arrayBuffer():c.type==="json"?A.json():A.text()).then(L=>{S||(_=!0,s(null,L,A.headers.get("Cache-Control"),A.headers.get("Expires")))}).catch(L=>{S||s(new Error(L.message))})})(C):C.blob().then(A=>s(new Vt(C.status,C.statusText,c.url,A)))).catch(C=>{C.code!==20&&s(new Error(C.message))}),{cancel:()=>{S=!0,_||f.abort()}}}const We=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(Le()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s);if(!Le())return(dt(c.url)||vt)(c,s)}if(!(/^file:/.test(f=c.url)||/^file:/.test(Qe())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return vt(c,s);if(Le()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s,void 0,!0)}var f;return function(m,_){const S=new XMLHttpRequest;S.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(S.responseType="arraybuffer");for(const C in m.headers)S.setRequestHeader(C,m.headers[C]);return m.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=m.credentials==="include",S.onerror=()=>{_(new Error(S.statusText))},S.onload=()=>{if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let C=S.response;if(m.type==="json")try{C=JSON.parse(S.response)}catch(A){return _(A)}_(null,C,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else{const C=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});_(new Vt(S.status,S.statusText,m.url,C))}},S.send(m.body),{cancel:()=>S.abort()}}(c,s)},Ot=function(c,s){return We(Z(c,{type:"arrayBuffer"}),s)};function Ct(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const s=new URL(c),f=window.location;return s.protocol===f.protocol&&s.host===f.host}function Tt(c,s,f){f[c]&&f[c].indexOf(s)!==-1||(f[c]=f[c]||[],f[c].push(s))}function Tn(c,s,f){if(f&&f[c]){const m=f[c].indexOf(s);m!==-1&&f[c].splice(m,1)}}class yn{constructor(s,f={}){Z(this,f),this.type=s}}class sn extends yn{constructor(s,f={}){super("error",Z({error:s},f))}}class br{on(s,f){return this._listeners=this._listeners||{},Tt(s,f,this._listeners),this}off(s,f){return Tn(s,f,this._listeners),Tn(s,f,this._oneTimeListeners),this}once(s,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},Tt(s,f,this._oneTimeListeners),this):new Promise(m=>this.once(s,m))}fire(s,f){typeof s=="string"&&(s=new yn(s,f||{}));const m=s.type;if(this.listens(m)){s.target=this;const _=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const A of _)A.call(this,s);const S=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const A of S)Tn(m,A,this._oneTimeListeners),A.call(this,s);const C=this._eventedParent;C&&(Z(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(s))}else s instanceof sn&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,f){return this._eventedParent=s,this._eventedParentData=f,this}}var Ge={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Dn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ar(c,s){const f={};for(const m in c)m!=="ref"&&(f[m]=c[m]);return Dn.forEach(m=>{m in s&&(f[m]=s[m])}),f}function bn(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let f=0;f<c.length;f++)if(!bn(c[f],s[f]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(const f in c)if(!bn(c[f],s[f]))return!1;return!0}return c===s}const cn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ko(c,s,f){f.push({command:cn.addSource,args:[c,s[c]]})}function Di(c,s,f){s.push({command:cn.removeSource,args:[c]}),f[c]=!0}function Va(c,s,f,m){Di(c,f,m),ko(c,s,f)}function Bu(c,s,f){let m;for(m in c[f])if(Object.prototype.hasOwnProperty.call(c[f],m)&&m!=="data"&&!bn(c[f][m],s[f][m]))return!1;for(m in s[f])if(Object.prototype.hasOwnProperty.call(s[f],m)&&m!=="data"&&!bn(c[f][m],s[f][m]))return!1;return!0}function Ys(c,s,f,m,_,S){let C;for(C in s=s||{},c=c||{})Object.prototype.hasOwnProperty.call(c,C)&&(bn(c[C],s[C])||f.push({command:S,args:[m,C,s[C],_]}));for(C in s)Object.prototype.hasOwnProperty.call(s,C)&&!Object.prototype.hasOwnProperty.call(c,C)&&(bn(c[C],s[C])||f.push({command:S,args:[m,C,s[C],_]}))}function Js(c){return c.id}function Wl(c,s){return c[s.id]=s,c}class ut{constructor(s,f,m,_){this.message=(s?`${s}: `:"")+m,_&&(this.identifier=_),f!=null&&f.__line__&&(this.line=f.__line__)}}function Yo(c,...s){for(const f of s)for(const m in f)c[m]=f[m];return c}class sr extends Error{constructor(s,f){super(f),this.message=f,this.key=s}}class Hl{constructor(s,f=[]){this.parent=s,this.bindings={};for(const[m,_]of f)this.bindings[m]=_}concat(s){return new Hl(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const gs={kind:"null"},ft={kind:"number"},ln={kind:"string"},en={kind:"boolean"},Hi={kind:"color"},Ga={kind:"object"},rn={kind:"value"},ys={kind:"collator"},me={kind:"formatted"},K={kind:"padding"},J={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function Q(c,s){return{kind:"array",itemType:c,N:s}}function he(c){if(c.kind==="array"){const s=he(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const Ae=[gs,ft,ln,en,Hi,me,Ga,Q(rn),K,J,ie];function we(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!we(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const f of Ae)if(!we(f,s))return null}}return`Expected ${he(c)} but found ${he(s)} instead.`}function pe(c,s){return s.some(f=>f.kind===c.kind)}function Ce(c,s){return s.some(f=>f==="null"?c===null:f==="array"?Array.isArray(c):f==="object"?c&&!Array.isArray(c)&&typeof c=="object":f===typeof c)}function Xe(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}const Ze=.96422,Ye=.82521,Dt=4/29,Jt=6/29,Mt=3*Jt*Jt,qt=Jt*Jt*Jt,nn=Math.PI/180,Gn=180/Math.PI;function er(c){return(c%=360)<0&&(c+=360),c}function On([c,s,f,m]){let _,S;const C=lo((.2225045*(c=Pn(c))+.7168786*(s=Pn(s))+.0606169*(f=Pn(f)))/1);c===s&&s===f?_=S=C:(_=lo((.4360747*c+.3850649*s+.1430804*f)/Ze),S=lo((.0139322*c+.0971045*s+.7141733*f)/Ye));const A=116*C-16;return[A<0?0:A,500*(_-C),200*(C-S),m]}function Pn(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function lo(c){return c>qt?Math.pow(c,1/3):c/Mt+Dt}function lr([c,s,f,m]){let _=(c+16)/116,S=isNaN(s)?_:_+s/500,C=isNaN(f)?_:_-f/200;return _=1*Xi(_),S=Ze*Xi(S),C=Ye*Xi(C),[vi(3.1338561*S-1.6168667*_-.4906146*C),vi(-.9787684*S+1.9161415*_+.033454*C),vi(.0719453*S-.2289914*_+1.4052427*C),m]}function vi(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function Xi(c){return c>Jt?c*c*c:Mt*(c-Dt)}function qa(c){return parseInt(c.padEnd(2,c),16)/255}function _1(c,s){return zf(s?c/100:c,0,1)}function zf(c,s,f){return Math.min(Math.max(s,c),f)}function Ff(c){return!c.some(Number.isNaN)}const TC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Zn{constructor(s,f,m,_=1,S=!0){this.r=s,this.g=f,this.b=m,this.a=_,S||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[s,f,m,_]))}static parse(s){if(s instanceof Zn)return s;if(typeof s!="string")return;const f=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=TC[m];if(_){const[C,A,L]=_;return[C/255,A/255,L/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const C=m.length<6?1:2;let A=1;return[qa(m.slice(A,A+=C)),qa(m.slice(A,A+=C)),qa(m.slice(A,A+=C)),qa(m.slice(A,A+C)||"ff")]}if(m.startsWith("rgb")){const C=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[A,L,B,q,X,Y,te,re,le,ve,xe,Me]=C,Se=[q||" ",te||" ",ve].join("");if(Se==="  "||Se==="  /"||Se===",,"||Se===",,,"){const ke=[B,Y,le].join(""),Be=ke==="%%%"?100:ke===""?255:0;if(Be){const Je=[zf(+L/Be,0,1),zf(+X/Be,0,1),zf(+re/Be,0,1),xe?_1(+xe,Me):1];if(Ff(Je))return Je}}return}}const S=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[C,A,L,B,q,X,Y,te,re]=S,le=[L||" ",q||" ",Y].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const ve=[+A,zf(+B,0,100),zf(+X,0,100),te?_1(+te,re):1];if(Ff(ve))return function([xe,Me,Se,ke]){function Be(Je){const bt=(Je+xe/30)%12,kt=Me*Math.min(Se,1-Se);return Se-kt*Math.max(-1,Math.min(bt-3,9-bt,1))}return xe=er(xe),Me/=100,Se/=100,[Be(0),Be(8),Be(4),ke]}(ve)}}}(s);return f?new Zn(...f,!1):void 0}get rgb(){const{r:s,g:f,b:m,a:_}=this,S=_||1/0;return this.overwriteGetter("rgb",[s/S,f/S,m/S,_])}get hcl(){return this.overwriteGetter("hcl",function(s){const[f,m,_,S]=On(s),C=Math.sqrt(m*m+_*_);return[Math.round(1e4*C)?er(Math.atan2(_,m)*Gn):NaN,C,f,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",On(this.rgb))}overwriteGetter(s,f){return Object.defineProperty(this,s,{value:f}),f}toString(){const[s,f,m,_]=this.rgb;return`rgba(${[s,f,m].map(S=>Math.round(255*S)).join(",")},${_})`}}Zn.black=new Zn(0,0,0,1),Zn.white=new Zn(1,1,1,1),Zn.transparent=new Zn(0,0,0,0),Zn.red=new Zn(1,0,0,1);class nv{constructor(s,f,m){this.sensitivity=s?f?"variant":"case":f?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,f){return this.collator.compare(s,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Kp{constructor(s,f,m,_,S){this.text=s,this.image=f,this.scale=m,this.fontStack=_,this.textColor=S}}class uo{constructor(s){this.sections=s}static fromString(s){return new uo([new Kp(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof uo?s:uo.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class ya{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof ya)return s;if(typeof s=="number")return new ya([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const f of s)if(typeof f!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new ya(s)}}toString(){return JSON.stringify(this.values)}}const PC=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Wa{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Wa)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let f=0;f<s.length;f+=2){const m=s[f],_=s[f+1];if(typeof m!="string"||!PC.has(m)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new Wa(s)}}toString(){return JSON.stringify(this.values)}}class Zi{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Zi({name:s,available:!1}):null}}function Yp(c,s,f,m){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof f=="number"&&f>=0&&f<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,s,f,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,s,f,m]:[c,s,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Bf(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Zn||c instanceof nv||c instanceof uo||c instanceof ya||c instanceof Wa||c instanceof Zi)return!0;if(Array.isArray(c)){for(const s of c)if(!Bf(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!Bf(c[s]))return!1;return!0}return!1}function Pr(c){if(c===null)return gs;if(typeof c=="string")return ln;if(typeof c=="boolean")return en;if(typeof c=="number")return ft;if(c instanceof Zn)return Hi;if(c instanceof nv)return ys;if(c instanceof uo)return me;if(c instanceof ya)return K;if(c instanceof Wa)return ie;if(c instanceof Zi)return J;if(Array.isArray(c)){const s=c.length;let f;for(const m of c){const _=Pr(m);if(f){if(f===_)continue;f=rn;break}f=_}return Q(f||rn,s)}return Ga}function zn(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof Zn||c instanceof uo||c instanceof ya||c instanceof Wa||c instanceof Zi?c.toString():JSON.stringify(c)}class Tc{constructor(s,f){this.type=s,this.value=f}static parse(s,f){if(s.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Bf(s[1]))return f.error("invalid value");const m=s[1];let _=Pr(m);const S=f.expectedType;return _.kind!=="array"||_.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(_=S),new Tc(_,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Rr{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const Jp={string:ln,number:ft,boolean:en,object:Ga};class Ha{constructor(s,f){this.type=s,this.args=f}static parse(s,f){if(s.length<2)return f.error("Expected at least one argument.");let m,_=1;const S=s[0];if(S==="array"){let A,L;if(s.length>2){const B=s[1];if(typeof B!="string"||!(B in Jp)||B==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);A=Jp[B],_++}else A=rn;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return f.error('The length argument to "array" must be a positive integer literal',2);L=s[2],_++}m=Q(A,L)}else{if(!Jp[S])throw new Error(`Types doesn't contain name = ${S}`);m=Jp[S]}const C=[];for(;_<s.length;_++){const A=f.parse(s[_],_,rn);if(!A)return null;C.push(A)}return new Ha(m,C)}evaluate(s){for(let f=0;f<this.args.length;f++){const m=this.args[f].evaluate(s);if(!we(this.type,Pr(m)))return m;if(f===this.args.length-1)throw new Rr(`Expected value to be of type ${he(this.type)}, but found ${he(Pr(m))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const rv={"to-boolean":en,"to-color":Hi,"to-number":ft,"to-string":ln};class ju{constructor(s,f){this.type=s,this.args=f}static parse(s,f){if(s.length<2)return f.error("Expected at least one argument.");const m=s[0];if(!rv[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&s.length!==2)return f.error("Expected one argument.");const _=rv[m],S=[];for(let C=1;C<s.length;C++){const A=f.parse(s[C],C,rn);if(!A)return null;S.push(A)}return new ju(_,S)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let f,m;for(const _ of this.args){if(f=_.evaluate(s),m=null,f instanceof Zn)return f;if(typeof f=="string"){const S=s.parseColor(f);if(S)return S}else if(Array.isArray(f)&&(m=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Yp(f[0],f[1],f[2],f[3]),!m))return new Zn(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new Rr(m||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(const m of this.args){f=m.evaluate(s);const _=ya.parse(f);if(_)return _}throw new Rr(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(const m of this.args){f=m.evaluate(s);const _=Wa.parse(f);if(_)return _}throw new Rr(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(const m of this.args){if(f=m.evaluate(s),f===null)return 0;const _=Number(f);if(!isNaN(_))return _}throw new Rr(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return uo.fromString(zn(this.args[0].evaluate(s)));case"resolvedImage":return Zi.fromString(zn(this.args[0].evaluate(s)));default:return zn(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const x1=["Unknown","Point","LineString","Polygon"];class iv{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?x1[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let f=this._parseColorCache[s];return f||(f=this._parseColorCache[s]=Zn.parse(s)),f}}class Qp{constructor(s,f,m=[],_,S=new Hl,C=[]){this.registry=s,this.path=m,this.key=m.map(A=>`[${A}]`).join(""),this.scope=S,this.errors=C,this.expectedType=_,this._isConstant=f}parse(s,f,m,_,S={}){return f?this.concat(f,m,_)._parse(s,S):this._parse(s,S)}_parse(s,f){function m(_,S,C){return C==="assert"?new Ha(S,[_]):C==="coerce"?new ju(S,[_]):_}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=s[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[_];if(S){let C=S.parse(s,this);if(!C)return null;if(this.expectedType){const A=this.expectedType,L=C.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||L.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||L.kind!=="value"&&L.kind!=="string")if(A.kind!=="padding"||L.kind!=="value"&&L.kind!=="number"&&L.kind!=="array")if(A.kind!=="variableAnchorOffsetCollection"||L.kind!=="value"&&L.kind!=="array"){if(this.checkSubtype(A,L))return null}else C=m(C,A,f.typeAnnotation||"coerce");else C=m(C,A,f.typeAnnotation||"coerce");else C=m(C,A,f.typeAnnotation||"coerce");else C=m(C,A,f.typeAnnotation||"assert")}if(!(C instanceof Tc)&&C.type.kind!=="resolvedImage"&&this._isConstant(C)){const A=new iv;try{C=new Tc(C.type,C.evaluate(A))}catch(L){return this.error(L.message),null}}return C}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,f,m){const _=typeof s=="number"?this.path.concat(s):this.path,S=m?this.scope.concat(m):this.scope;return new Qp(this.registry,this._isConstant,_,f||null,S,this.errors)}error(s,...f){const m=`${this.key}${f.map(_=>`[${_}]`).join("")}`;this.errors.push(new sr(m,s))}checkSubtype(s,f){const m=we(s,f);return m&&this.error(m),m}}class em{constructor(s,f,m){this.type=ys,this.locale=m,this.caseSensitive=s,this.diacriticSensitive=f}static parse(s,f){if(s.length!==2)return f.error("Expected one argument.");const m=s[1];if(typeof m!="object"||Array.isArray(m))return f.error("Collator options argument must be an object.");const _=f.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,en);if(!_)return null;const S=f.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,en);if(!S)return null;let C=null;return m.locale&&(C=f.parse(m.locale,1,ln),!C)?null:new em(_,S,C)}evaluate(s){return new nv(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const Uu=8192;function ov(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function yd(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function b1(c,s){const f=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,_=Math.pow(2,s.z);return[Math.round(f*_*Uu),Math.round(m*_*Uu)]}function AC(c,s,f){const m=c[0]-s[0],_=c[1]-s[1],S=c[0]-f[0],C=c[1]-f[1];return m*C-S*_==0&&m*S<=0&&_*C<=0}function av(c,s){let f=!1;for(let C=0,A=s.length;C<A;C++){const L=s[C];for(let B=0,q=L.length;B<q-1;B++){if(AC(c,L[B],L[B+1]))return!1;(_=L[B])[1]>(m=c)[1]!=(S=L[B+1])[1]>m[1]&&m[0]<(S[0]-_[0])*(m[1]-_[1])/(S[1]-_[1])+_[0]&&(f=!f)}}var m,_,S;return f}function sv(c,s){for(let f=0;f<s.length;f++)if(av(c,s[f]))return!0;return!1}function w1(c,s,f,m){const _=m[0]-f[0],S=m[1]-f[1],C=(c[0]-f[0])*S-_*(c[1]-f[1]),A=(s[0]-f[0])*S-_*(s[1]-f[1]);return C>0&&A<0||C<0&&A>0}function OC(c,s,f){for(const B of f)for(let q=0;q<B.length-1;++q)if((A=[(C=B[q+1])[0]-(S=B[q])[0],C[1]-S[1]])[0]*(L=[(_=s)[0]-(m=c)[0],_[1]-m[1]])[1]-A[1]*L[0]!=0&&w1(m,_,S,C)&&w1(S,C,m,_))return!0;var m,_,S,C,A,L;return!1}function S1(c,s){for(let f=0;f<c.length;++f)if(!av(c[f],s))return!1;for(let f=0;f<c.length-1;++f)if(OC(c[f],c[f+1],s))return!1;return!0}function E1(c,s){for(let f=0;f<s.length;f++)if(S1(c,s[f]))return!0;return!1}function tm(c,s,f){const m=[];for(let _=0;_<c.length;_++){const S=[];for(let C=0;C<c[_].length;C++){const A=b1(c[_][C],f);ov(s,A),S.push(A)}m.push(S)}return m}function C1(c,s,f){const m=[];for(let _=0;_<c.length;_++){const S=tm(c[_],s,f);m.push(S)}return m}function I1(c,s,f,m){if(c[0]<f[0]||c[0]>f[2]){const _=.5*m;let S=c[0]-f[0]>_?-m:f[0]-c[0]>_?m:0;S===0&&(S=c[0]-f[2]>_?-m:f[2]-c[0]>_?m:0),c[0]+=S}ov(s,c)}function lv(c,s,f,m){const _=Math.pow(2,m.z)*Uu,S=[m.x*Uu,m.y*Uu],C=[];for(const A of c)for(const L of A){const B=[L.x+S[0],L.y+S[1]];I1(B,s,f,_),C.push(B)}return C}function uv(c,s,f,m){const _=Math.pow(2,m.z)*Uu,S=[m.x*Uu,m.y*Uu],C=[];for(const L of c){const B=[];for(const q of L){const X=[q.x+S[0],q.y+S[1]];ov(s,X),B.push(X)}C.push(B)}if(s[2]-s[0]<=_/2){(A=s)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const L of C)for(const B of L)I1(B,s,f,_)}var A;return C}class Pc{constructor(s,f){this.type=en,this.geojson=s,this.geometries=f}static parse(s,f){if(s.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Bf(s[1])){const m=s[1];if(m.type==="FeatureCollection")for(let _=0;_<m.features.length;++_){const S=m.features[_].geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new Pc(m,m.features[_].geometry)}else if(m.type==="Feature"){const _=m.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Pc(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Pc(m,m)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(f,m){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=f.canonicalID();if(m.type==="Polygon"){const A=tm(m.coordinates,S,C),L=lv(f.geometry(),_,S,C);if(!yd(_,S))return!1;for(const B of L)if(!av(B,A))return!1}if(m.type==="MultiPolygon"){const A=C1(m.coordinates,S,C),L=lv(f.geometry(),_,S,C);if(!yd(_,S))return!1;for(const B of L)if(!sv(B,A))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(f,m){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=f.canonicalID();if(m.type==="Polygon"){const A=tm(m.coordinates,S,C),L=uv(f.geometry(),_,S,C);if(!yd(_,S))return!1;for(const B of L)if(!S1(B,A))return!1}if(m.type==="MultiPolygon"){const A=C1(m.coordinates,S,C),L=uv(f.geometry(),_,S,C);if(!yd(_,S))return!1;for(const B of L)if(!E1(B,A))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class nm{constructor(s,f){this.type=f.type,this.name=s,this.boundExpression=f}static parse(s,f){if(s.length!==2||typeof s[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");const m=s[1];return f.scope.has(m)?new nm(m,f.scope.get(m)):f.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Xa{constructor(s,f,m,_){this.name=s,this.type=f,this._evaluate=m,this.args=_}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,f){const m=s[0],_=Xa.definitions[m];if(!_)return f.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(_)?_[0]:_.type,C=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,A=C.filter(([B])=>!Array.isArray(B)||B.length===s.length-1);let L=null;for(const[B,q]of A){L=new Qp(f.registry,rm,f.path,null,f.scope);const X=[];let Y=!1;for(let te=1;te<s.length;te++){const re=s[te],le=Array.isArray(B)?B[te-1]:B.type,ve=L.parse(re,1+X.length,le);if(!ve){Y=!0;break}X.push(ve)}if(!Y)if(Array.isArray(B)&&B.length!==X.length)L.error(`Expected ${B.length} arguments, but found ${X.length} instead.`);else{for(let te=0;te<X.length;te++){const re=Array.isArray(B)?B[te]:B.type,le=X[te];L.concat(te+1).checkSubtype(re,le.type)}if(L.errors.length===0)return new Xa(m,S,q,X)}}if(A.length===1)f.errors.push(...L.errors);else{const B=(A.length?A:C).map(([X])=>{return Y=X,Array.isArray(Y)?`(${Y.map(he).join(", ")})`:`(${he(Y.type)}...)`;var Y}).join(" | "),q=[];for(let X=1;X<s.length;X++){const Y=f.parse(s[X],1+q.length);if(!Y)return null;q.push(he(Y.type))}f.error(`Expected arguments of type ${B}, but found (${q.join(", ")}) instead.`)}return null}static register(s,f){Xa.definitions=f;for(const m in f)s[m]=Xa}}function rm(c){if(c instanceof nm)return rm(c.boundExpression);if(c instanceof Xa&&c.name==="error"||c instanceof em||c instanceof Pc)return!1;const s=c instanceof ju||c instanceof Ha;let f=!0;return c.eachChild(m=>{f=s?f&&rm(m):f&&m instanceof Tc}),!!f&&im(c)&&om(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function im(c){if(c instanceof Xa&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Pc)return!1;let s=!0;return c.eachChild(f=>{s&&!im(f)&&(s=!1)}),s}function vd(c){if(c instanceof Xa&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(f=>{s&&!vd(f)&&(s=!1)}),s}function om(c,s){if(c instanceof Xa&&s.indexOf(c.name)>=0)return!1;let f=!0;return c.eachChild(m=>{f&&!om(m,s)&&(f=!1)}),f}function jf(c,s){const f=c.length-1;let m,_,S=0,C=f,A=0;for(;S<=C;)if(A=Math.floor((S+C)/2),m=c[A],_=c[A+1],m<=s){if(A===f||s<_)return A;S=A+1}else{if(!(m>s))throw new Rr("Input is not a number.");C=A-1}return 0}class Vu{constructor(s,f,m){this.type=s,this.input=f,this.labels=[],this.outputs=[];for(const[_,S]of m)this.labels.push(_),this.outputs.push(S)}static parse(s,f){if(s.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return f.error("Expected an even number of arguments.");const m=f.parse(s[1],1,ft);if(!m)return null;const _=[];let S=null;f.expectedType&&f.expectedType.kind!=="value"&&(S=f.expectedType);for(let C=1;C<s.length;C+=2){const A=C===1?-1/0:s[C],L=s[C+1],B=C,q=C+1;if(typeof A!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(_.length&&_[_.length-1][0]>=A)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);const X=f.parse(L,q,S);if(!X)return null;S=S||X.type,_.push([A,X])}return new Vu(S,m,_)}evaluate(s){const f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(s);const _=this.input.evaluate(s);if(_<=f[0])return m[0].evaluate(s);const S=f.length;return _>=f[S-1]?m[S-1].evaluate(s):m[jf(f,_)].evaluate(s)}eachChild(s){s(this.input);for(const f of this.outputs)s(f)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function wn(c,s,f){return c+f*(s-c)}function am(c,s,f){return c.map((m,_)=>wn(m,s[_],f))}const va={number:wn,color:function(c,s,f,m="rgb"){switch(m){case"rgb":{const[_,S,C,A]=am(c.rgb,s.rgb,f);return new Zn(_,S,C,A,!1)}case"hcl":{const[_,S,C,A]=c.hcl,[L,B,q,X]=s.hcl;let Y,te;if(isNaN(_)||isNaN(L))isNaN(_)?isNaN(L)?Y=NaN:(Y=L,C!==1&&C!==0||(te=B)):(Y=_,q!==1&&q!==0||(te=S));else{let Me=L-_;L>_&&Me>180?Me-=360:L<_&&_-L>180&&(Me+=360),Y=_+f*Me}const[re,le,ve,xe]=function([Me,Se,ke,Be]){return Me=isNaN(Me)?0:Me*nn,lr([ke,Math.cos(Me)*Se,Math.sin(Me)*Se,Be])}([Y,te??wn(S,B,f),wn(C,q,f),wn(A,X,f)]);return new Zn(re,le,ve,xe,!1)}case"lab":{const[_,S,C,A]=lr(am(c.lab,s.lab,f));return new Zn(_,S,C,A,!1)}}},array:am,padding:function(c,s,f){return new ya(am(c.values,s.values,f))},variableAnchorOffsetCollection:function(c,s,f){const m=c.values,_=s.values;if(m.length!==_.length)throw new Rr(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${s.toString()}`);const S=[];for(let C=0;C<m.length;C+=2){if(m[C]!==_[C])throw new Rr(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${m[C]}, to[${C}]: ${_[C]}`);S.push(m[C]);const[A,L]=m[C+1],[B,q]=_[C+1];S.push([wn(A,B,f),wn(L,q,f)])}return new Wa(S)}};class _a{constructor(s,f,m,_,S){this.type=s,this.operator=f,this.interpolation=m,this.input=_,this.labels=[],this.outputs=[];for(const[C,A]of S)this.labels.push(C),this.outputs.push(A)}static interpolationFactor(s,f,m,_){let S=0;if(s.name==="exponential")S=cv(f,s.base,m,_);else if(s.name==="linear")S=cv(f,1,m,_);else if(s.name==="cubic-bezier"){const C=s.controlPoints;S=new P(C[0],C[1],C[2],C[3]).solve(cv(f,1,m,_))}return S}static parse(s,f){let[m,_,S,...C]=s;if(!Array.isArray(_)||_.length===0)return f.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const B=_[1];if(typeof B!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:B}}else{if(_[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const B=_.slice(1);if(B.length!==4||B.some(q=>typeof q!="number"||q<0||q>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:B}}}if(s.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(S=f.parse(S,2,ft),!S)return null;const A=[];let L=null;m==="interpolate-hcl"||m==="interpolate-lab"?L=Hi:f.expectedType&&f.expectedType.kind!=="value"&&(L=f.expectedType);for(let B=0;B<C.length;B+=2){const q=C[B],X=C[B+1],Y=B+3,te=B+4;if(typeof q!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(A.length&&A[A.length-1][0]>=q)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const re=f.parse(X,te,L);if(!re)return null;L=L||re.type,A.push([q,re])}return Xe(L,ft)||Xe(L,Hi)||Xe(L,K)||Xe(L,ie)||Xe(L,Q(ft))?new _a(L,m,_,S,A):f.error(`Type ${he(L)} is not interpolatable.`)}evaluate(s){const f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(s);const _=this.input.evaluate(s);if(_<=f[0])return m[0].evaluate(s);const S=f.length;if(_>=f[S-1])return m[S-1].evaluate(s);const C=jf(f,_),A=_a.interpolationFactor(this.interpolation,_,f[C],f[C+1]),L=m[C].evaluate(s),B=m[C+1].evaluate(s);switch(this.operator){case"interpolate":return va[this.type.kind](L,B,A);case"interpolate-hcl":return va.color(L,B,A,"hcl");case"interpolate-lab":return va.color(L,B,A,"lab")}}eachChild(s){s(this.input);for(const f of this.outputs)s(f)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function cv(c,s,f,m){const _=m-f,S=c-f;return _===0?0:s===1?S/_:(Math.pow(s,S)-1)/(Math.pow(s,_)-1)}class sm{constructor(s,f){this.type=s,this.args=f}static parse(s,f){if(s.length<2)return f.error("Expectected at least one argument.");let m=null;const _=f.expectedType;_&&_.kind!=="value"&&(m=_);const S=[];for(const A of s.slice(1)){const L=f.parse(A,1+S.length,m,void 0,{typeAnnotation:"omit"});if(!L)return null;m=m||L.type,S.push(L)}if(!m)throw new Error("No output type");const C=_&&S.some(A=>we(_,A.type));return new sm(C?rn:m,S)}evaluate(s){let f,m=null,_=0;for(const S of this.args)if(_++,m=S.evaluate(s),m&&m instanceof Zi&&!m.available&&(f||(f=m.name),m=null,_===this.args.length&&(m=f)),m!==null)break;return m}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class lm{constructor(s,f){this.type=f.type,this.bindings=[].concat(s),this.result=f}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const f of this.bindings)s(f[1]);s(this.result)}static parse(s,f){if(s.length<4)return f.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const m=[];for(let S=1;S<s.length-1;S+=2){const C=s[S];if(typeof C!="string")return f.error(`Expected string, but found ${typeof C} instead.`,S);if(/[^a-zA-Z0-9_]/.test(C))return f.error("Variable names must contain only alphanumeric characters or '_'.",S);const A=f.parse(s[S+1],S+1);if(!A)return null;m.push([C,A])}const _=f.parse(s[s.length-1],s.length-1,f.expectedType,m);return _?new lm(m,_):null}outputDefined(){return this.result.outputDefined()}}class fv{constructor(s,f,m){this.type=s,this.index=f,this.input=m}static parse(s,f){if(s.length!==3)return f.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=f.parse(s[1],1,ft),_=f.parse(s[2],2,Q(f.expectedType||rn));return m&&_?new fv(_.type.itemType,m,_):null}evaluate(s){const f=this.index.evaluate(s),m=this.input.evaluate(s);if(f<0)throw new Rr(`Array index out of bounds: ${f} < 0.`);if(f>=m.length)throw new Rr(`Array index out of bounds: ${f} > ${m.length-1}.`);if(f!==Math.floor(f))throw new Rr(`Array index must be an integer, but found ${f} instead.`);return m[f]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class hv{constructor(s,f){this.type=en,this.needle=s,this.haystack=f}static parse(s,f){if(s.length!==3)return f.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=f.parse(s[1],1,rn),_=f.parse(s[2],2,rn);return m&&_?pe(m.type,[en,ln,ft,gs,rn])?new hv(m,_):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${he(m.type)} instead`):null}evaluate(s){const f=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!m)return!1;if(!Ce(f,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${he(Pr(f))} instead.`);if(!Ce(m,["string","array"]))throw new Rr(`Expected second argument to be of type array or string, but found ${he(Pr(m))} instead.`);return m.indexOf(f)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class um{constructor(s,f,m){this.type=ft,this.needle=s,this.haystack=f,this.fromIndex=m}static parse(s,f){if(s.length<=2||s.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=f.parse(s[1],1,rn),_=f.parse(s[2],2,rn);if(!m||!_)return null;if(!pe(m.type,[en,ln,ft,gs,rn]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${he(m.type)} instead`);if(s.length===4){const S=f.parse(s[3],3,ft);return S?new um(m,_,S):null}return new um(m,_)}evaluate(s){const f=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!Ce(f,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${he(Pr(f))} instead.`);if(!Ce(m,["string","array"]))throw new Rr(`Expected second argument to be of type array or string, but found ${he(Pr(m))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(s);return m.indexOf(f,_)}return m.indexOf(f)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class dv{constructor(s,f,m,_,S,C){this.inputType=s,this.type=f,this.input=m,this.cases=_,this.outputs=S,this.otherwise=C}static parse(s,f){if(s.length<5)return f.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return f.error("Expected an even number of arguments.");let m,_;f.expectedType&&f.expectedType.kind!=="value"&&(_=f.expectedType);const S={},C=[];for(let B=2;B<s.length-1;B+=2){let q=s[B];const X=s[B+1];Array.isArray(q)||(q=[q]);const Y=f.concat(B);if(q.length===0)return Y.error("Expected at least one branch label.");for(const re of q){if(typeof re!="number"&&typeof re!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof re=="number"&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof re=="number"&&Math.floor(re)!==re)return Y.error("Numeric branch labels must be integer values.");if(m){if(Y.checkSubtype(m,Pr(re)))return null}else m=Pr(re);if(S[String(re)]!==void 0)return Y.error("Branch labels must be unique.");S[String(re)]=C.length}const te=f.parse(X,B,_);if(!te)return null;_=_||te.type,C.push(te)}const A=f.parse(s[1],1,rn);if(!A)return null;const L=f.parse(s[s.length-1],s.length-1,_);return L?A.type.kind!=="value"&&f.concat(1).checkSubtype(m,A.type)?null:new dv(m,_,A,S,C,L):null}evaluate(s){const f=this.input.evaluate(s);return(Pr(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class pv{constructor(s,f,m){this.type=s,this.branches=f,this.otherwise=m}static parse(s,f){if(s.length<4)return f.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return f.error("Expected an odd number of arguments.");let m;f.expectedType&&f.expectedType.kind!=="value"&&(m=f.expectedType);const _=[];for(let C=1;C<s.length-1;C+=2){const A=f.parse(s[C],C,en);if(!A)return null;const L=f.parse(s[C+1],C+1,m);if(!L)return null;_.push([A,L]),m=m||L.type}const S=f.parse(s[s.length-1],s.length-1,m);if(!S)return null;if(!m)throw new Error("Can't infer output type");return new pv(m,_,S)}evaluate(s){for(const[f,m]of this.branches)if(f.evaluate(s))return m.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[f,m]of this.branches)s(f),s(m);s(this.otherwise)}outputDefined(){return this.branches.every(([s,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class cm{constructor(s,f,m,_){this.type=s,this.input=f,this.beginIndex=m,this.endIndex=_}static parse(s,f){if(s.length<=2||s.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=f.parse(s[1],1,rn),_=f.parse(s[2],2,ft);if(!m||!_)return null;if(!pe(m.type,[Q(rn),ln,rn]))return f.error(`Expected first argument to be of type array or string, but found ${he(m.type)} instead`);if(s.length===4){const S=f.parse(s[3],3,ft);return S?new cm(m.type,m,_,S):null}return new cm(m.type,m,_)}evaluate(s){const f=this.input.evaluate(s),m=this.beginIndex.evaluate(s);if(!Ce(f,["string","array"]))throw new Rr(`Expected first argument to be of type array or string, but found ${he(Pr(f))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(s);return f.slice(m,_)}return f.slice(m)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function T1(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function P1(c,s,f,m){return m.compare(s,f)===0}function Uf(c,s,f){const m=c!=="=="&&c!=="!=";return class rG{constructor(S,C,A){this.type=en,this.lhs=S,this.rhs=C,this.collator=A,this.hasUntypedArgument=S.type.kind==="value"||C.type.kind==="value"}static parse(S,C){if(S.length!==3&&S.length!==4)return C.error("Expected two or three arguments.");const A=S[0];let L=C.parse(S[1],1,rn);if(!L)return null;if(!T1(A,L.type))return C.concat(1).error(`"${A}" comparisons are not supported for type '${he(L.type)}'.`);let B=C.parse(S[2],2,rn);if(!B)return null;if(!T1(A,B.type))return C.concat(2).error(`"${A}" comparisons are not supported for type '${he(B.type)}'.`);if(L.type.kind!==B.type.kind&&L.type.kind!=="value"&&B.type.kind!=="value")return C.error(`Cannot compare types '${he(L.type)}' and '${he(B.type)}'.`);m&&(L.type.kind==="value"&&B.type.kind!=="value"?L=new Ha(B.type,[L]):L.type.kind!=="value"&&B.type.kind==="value"&&(B=new Ha(L.type,[B])));let q=null;if(S.length===4){if(L.type.kind!=="string"&&B.type.kind!=="string"&&L.type.kind!=="value"&&B.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(q=C.parse(S[3],3,ys),!q)return null}return new rG(L,B,q)}evaluate(S){const C=this.lhs.evaluate(S),A=this.rhs.evaluate(S);if(m&&this.hasUntypedArgument){const L=Pr(C),B=Pr(A);if(L.kind!==B.kind||L.kind!=="string"&&L.kind!=="number")throw new Rr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${L.kind}, ${B.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const L=Pr(C),B=Pr(A);if(L.kind!=="string"||B.kind!=="string")return s(S,C,A)}return this.collator?f(S,C,A,this.collator.evaluate(S)):s(S,C,A)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const MC=Uf("==",function(c,s,f){return s===f},P1),$C=Uf("!=",function(c,s,f){return s!==f},function(c,s,f,m){return!P1(0,s,f,m)}),kC=Uf("<",function(c,s,f){return s<f},function(c,s,f,m){return m.compare(s,f)<0}),NC=Uf(">",function(c,s,f){return s>f},function(c,s,f,m){return m.compare(s,f)>0}),LC=Uf("<=",function(c,s,f){return s<=f},function(c,s,f,m){return m.compare(s,f)<=0}),DC=Uf(">=",function(c,s,f){return s>=f},function(c,s,f,m){return m.compare(s,f)>=0});class mv{constructor(s,f,m,_,S){this.type=ln,this.number=s,this.locale=f,this.currency=m,this.minFractionDigits=_,this.maxFractionDigits=S}static parse(s,f){if(s.length!==3)return f.error("Expected two arguments.");const m=f.parse(s[1],1,ft);if(!m)return null;const _=s[2];if(typeof _!="object"||Array.isArray(_))return f.error("NumberFormat options argument must be an object.");let S=null;if(_.locale&&(S=f.parse(_.locale,1,ln),!S))return null;let C=null;if(_.currency&&(C=f.parse(_.currency,1,ln),!C))return null;let A=null;if(_["min-fraction-digits"]&&(A=f.parse(_["min-fraction-digits"],1,ft),!A))return null;let L=null;return _["max-fraction-digits"]&&(L=f.parse(_["max-fraction-digits"],1,ft),!L)?null:new mv(m,S,C,A,L)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class fm{constructor(s){this.type=me,this.sections=s}static parse(s,f){if(s.length<2)return f.error("Expected at least one argument.");const m=s[1];if(!Array.isArray(m)&&typeof m=="object")return f.error("First argument must be an image or text section.");const _=[];let S=!1;for(let C=1;C<=s.length-1;++C){const A=s[C];if(S&&typeof A=="object"&&!Array.isArray(A)){S=!1;let L=null;if(A["font-scale"]&&(L=f.parse(A["font-scale"],1,ft),!L))return null;let B=null;if(A["text-font"]&&(B=f.parse(A["text-font"],1,Q(ln)),!B))return null;let q=null;if(A["text-color"]&&(q=f.parse(A["text-color"],1,Hi),!q))return null;const X=_[_.length-1];X.scale=L,X.font=B,X.textColor=q}else{const L=f.parse(s[C],1,rn);if(!L)return null;const B=L.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,_.push({content:L,scale:null,font:null,textColor:null})}}return new fm(_)}evaluate(s){return new uo(this.sections.map(f=>{const m=f.content.evaluate(s);return Pr(m)===J?new Kp("",m,null,null,null):new Kp(zn(m),null,f.scale?f.scale.evaluate(s):null,f.font?f.font.evaluate(s).join(","):null,f.textColor?f.textColor.evaluate(s):null)}))}eachChild(s){for(const f of this.sections)s(f.content),f.scale&&s(f.scale),f.font&&s(f.font),f.textColor&&s(f.textColor)}outputDefined(){return!1}}class gv{constructor(s){this.type=J,this.input=s}static parse(s,f){if(s.length!==2)return f.error("Expected two arguments.");const m=f.parse(s[1],1,ln);return m?new gv(m):f.error("No image name provided.")}evaluate(s){const f=this.input.evaluate(s),m=Zi.fromString(f);return m&&s.availableImages&&(m.available=s.availableImages.indexOf(f)>-1),m}eachChild(s){s(this.input)}outputDefined(){return!1}}class yv{constructor(s){this.type=ft,this.input=s}static parse(s,f){if(s.length!==2)return f.error(`Expected 1 argument, but found ${s.length-1} instead.`);const m=f.parse(s[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${he(m.type)} instead.`):new yv(m):null}evaluate(s){const f=this.input.evaluate(s);if(typeof f=="string"||Array.isArray(f))return f.length;throw new Rr(`Expected value to be of type string or array, but found ${he(Pr(f))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const Vf={"==":MC,"!=":$C,">":NC,"<":kC,">=":DC,"<=":LC,array:Ha,at:fv,boolean:Ha,case:pv,coalesce:sm,collator:em,format:fm,image:gv,in:hv,"index-of":um,interpolate:_a,"interpolate-hcl":_a,"interpolate-lab":_a,length:yv,let:lm,literal:Tc,match:dv,number:Ha,"number-format":mv,object:Ha,slice:cm,step:Vu,string:Ha,"to-boolean":ju,"to-color":ju,"to-number":ju,"to-string":ju,var:nm,within:Pc};function A1(c,[s,f,m,_]){s=s.evaluate(c),f=f.evaluate(c),m=m.evaluate(c);const S=_?_.evaluate(c):1,C=Yp(s,f,m,S);if(C)throw new Rr(C);return new Zn(s/255,f/255,m/255,S,!1)}function O1(c,s){return c in s}function vv(c,s){const f=s[c];return f===void 0?null:f}function Ac(c){return{type:c}}function M1(c){return{result:"success",value:c}}function Gu(c){return{result:"error",value:c}}function Gf(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function $1(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function _v(c){return!!c.expression&&c.expression.interpolated}function Fn(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Ar(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function RC(c){return c}function Sn(c,s){const f=s.type==="color",m=c.stops&&typeof c.stops[0][0]=="object",_=m||!(m||c.property!==void 0),S=c.type||(_v(s)?"exponential":"interval");if(f||s.type==="padding"){const q=f?Zn.parse:ya.parse;(c=Yo({},c)).stops&&(c.stops=c.stops.map(X=>[X[0],q(X[1])])),c.default=q(c.default?c.default:s.default)}if(c.colorSpace&&(C=c.colorSpace)!=="rgb"&&C!=="hcl"&&C!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var C;let A,L,B;if(S==="exponential")A=_d;else if(S==="interval")A=wr;else if(S==="categorical"){A=Or,L=Object.create(null);for(const q of c.stops)L[q[0]]=q[1];B=typeof c.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);A=k1}if(m){const q={},X=[];for(let re=0;re<c.stops.length;re++){const le=c.stops[re],ve=le[0].zoom;q[ve]===void 0&&(q[ve]={zoom:ve,type:c.type,property:c.property,default:c.default,stops:[]},X.push(ve)),q[ve].stops.push([le[0].value,le[1]])}const Y=[];for(const re of X)Y.push([q[re].zoom,Sn(q[re],s)]);const te={name:"linear"};return{kind:"composite",interpolationType:te,interpolationFactor:_a.interpolationFactor.bind(void 0,te),zoomStops:Y.map(re=>re[0]),evaluate:({zoom:re},le)=>_d({stops:Y,base:c.base},s,re).evaluate(re,le)}}if(_){const q=S==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:q,interpolationFactor:_a.interpolationFactor.bind(void 0,q),zoomStops:c.stops.map(X=>X[0]),evaluate:({zoom:X})=>A(c,s,X,L,B)}}return{kind:"source",evaluate(q,X){const Y=X&&X.properties?X.properties[c.property]:void 0;return Y===void 0?Oc(c.default,s.default):A(c,s,Y,L,B)}}}function Oc(c,s,f){return c!==void 0?c:s!==void 0?s:f!==void 0?f:void 0}function Or(c,s,f,m,_){return Oc(typeof f===_?m[f]:void 0,c.default,s.default)}function wr(c,s,f){if(Fn(f)!=="number")return Oc(c.default,s.default);const m=c.stops.length;if(m===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[m-1][0])return c.stops[m-1][1];const _=jf(c.stops.map(S=>S[0]),f);return c.stops[_][1]}function _d(c,s,f){const m=c.base!==void 0?c.base:1;if(Fn(f)!=="number")return Oc(c.default,s.default);const _=c.stops.length;if(_===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[_-1][0])return c.stops[_-1][1];const S=jf(c.stops.map(q=>q[0]),f),C=function(q,X,Y,te){const re=te-Y,le=q-Y;return re===0?0:X===1?le/re:(Math.pow(X,le)-1)/(Math.pow(X,re)-1)}(f,m,c.stops[S][0],c.stops[S+1][0]),A=c.stops[S][1],L=c.stops[S+1][1],B=va[s.type]||RC;return typeof A.evaluate=="function"?{evaluate(...q){const X=A.evaluate.apply(void 0,q),Y=L.evaluate.apply(void 0,q);if(X!==void 0&&Y!==void 0)return B(X,Y,C,c.colorSpace)}}:B(A,L,C,c.colorSpace)}function k1(c,s,f){switch(s.type){case"color":f=Zn.parse(f);break;case"formatted":f=uo.fromString(f.toString());break;case"resolvedImage":f=Zi.fromString(f.toString());break;case"padding":f=ya.parse(f);break;default:Fn(f)===s.type||s.type==="enum"&&s.values[f]||(f=void 0)}return Oc(f,c.default,s.default)}Xa.register(Vf,{error:[{kind:"error"},[ln],(c,[s])=>{throw new Rr(s.evaluate(c))}],typeof:[ln,[rn],(c,[s])=>he(Pr(s.evaluate(c)))],"to-rgba":[Q(ft,4),[Hi],(c,[s])=>{const[f,m,_,S]=s.evaluate(c).rgb;return[255*f,255*m,255*_,S]}],rgb:[Hi,[ft,ft,ft],A1],rgba:[Hi,[ft,ft,ft,ft],A1],has:{type:en,overloads:[[[ln],(c,[s])=>O1(s.evaluate(c),c.properties())],[[ln,Ga],(c,[s,f])=>O1(s.evaluate(c),f.evaluate(c))]]},get:{type:rn,overloads:[[[ln],(c,[s])=>vv(s.evaluate(c),c.properties())],[[ln,Ga],(c,[s,f])=>vv(s.evaluate(c),f.evaluate(c))]]},"feature-state":[rn,[ln],(c,[s])=>vv(s.evaluate(c),c.featureState||{})],properties:[Ga,[],c=>c.properties()],"geometry-type":[ln,[],c=>c.geometryType()],id:[rn,[],c=>c.id()],zoom:[ft,[],c=>c.globals.zoom],"heatmap-density":[ft,[],c=>c.globals.heatmapDensity||0],"line-progress":[ft,[],c=>c.globals.lineProgress||0],accumulated:[rn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[ft,Ac(ft),(c,s)=>{let f=0;for(const m of s)f+=m.evaluate(c);return f}],"*":[ft,Ac(ft),(c,s)=>{let f=1;for(const m of s)f*=m.evaluate(c);return f}],"-":{type:ft,overloads:[[[ft,ft],(c,[s,f])=>s.evaluate(c)-f.evaluate(c)],[[ft],(c,[s])=>-s.evaluate(c)]]},"/":[ft,[ft,ft],(c,[s,f])=>s.evaluate(c)/f.evaluate(c)],"%":[ft,[ft,ft],(c,[s,f])=>s.evaluate(c)%f.evaluate(c)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(c,[s,f])=>Math.pow(s.evaluate(c),f.evaluate(c))],sqrt:[ft,[ft],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[ft,[ft],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[ft,[ft],(c,[s])=>Math.log(s.evaluate(c))],log2:[ft,[ft],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[ft,[ft],(c,[s])=>Math.sin(s.evaluate(c))],cos:[ft,[ft],(c,[s])=>Math.cos(s.evaluate(c))],tan:[ft,[ft],(c,[s])=>Math.tan(s.evaluate(c))],asin:[ft,[ft],(c,[s])=>Math.asin(s.evaluate(c))],acos:[ft,[ft],(c,[s])=>Math.acos(s.evaluate(c))],atan:[ft,[ft],(c,[s])=>Math.atan(s.evaluate(c))],min:[ft,Ac(ft),(c,s)=>Math.min(...s.map(f=>f.evaluate(c)))],max:[ft,Ac(ft),(c,s)=>Math.max(...s.map(f=>f.evaluate(c)))],abs:[ft,[ft],(c,[s])=>Math.abs(s.evaluate(c))],round:[ft,[ft],(c,[s])=>{const f=s.evaluate(c);return f<0?-Math.round(-f):Math.round(f)}],floor:[ft,[ft],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[ft,[ft],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[en,[ln,rn],(c,[s,f])=>c.properties()[s.value]===f.value],"filter-id-==":[en,[rn],(c,[s])=>c.id()===s.value],"filter-type-==":[en,[ln],(c,[s])=>c.geometryType()===s.value],"filter-<":[en,[ln,rn],(c,[s,f])=>{const m=c.properties()[s.value],_=f.value;return typeof m==typeof _&&m<_}],"filter-id-<":[en,[rn],(c,[s])=>{const f=c.id(),m=s.value;return typeof f==typeof m&&f<m}],"filter->":[en,[ln,rn],(c,[s,f])=>{const m=c.properties()[s.value],_=f.value;return typeof m==typeof _&&m>_}],"filter-id->":[en,[rn],(c,[s])=>{const f=c.id(),m=s.value;return typeof f==typeof m&&f>m}],"filter-<=":[en,[ln,rn],(c,[s,f])=>{const m=c.properties()[s.value],_=f.value;return typeof m==typeof _&&m<=_}],"filter-id-<=":[en,[rn],(c,[s])=>{const f=c.id(),m=s.value;return typeof f==typeof m&&f<=m}],"filter->=":[en,[ln,rn],(c,[s,f])=>{const m=c.properties()[s.value],_=f.value;return typeof m==typeof _&&m>=_}],"filter-id->=":[en,[rn],(c,[s])=>{const f=c.id(),m=s.value;return typeof f==typeof m&&f>=m}],"filter-has":[en,[rn],(c,[s])=>s.value in c.properties()],"filter-has-id":[en,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[en,[Q(ln)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[en,[Q(rn)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[en,[ln,Q(rn)],(c,[s,f])=>f.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[en,[ln,Q(rn)],(c,[s,f])=>function(m,_,S,C){for(;S<=C;){const A=S+C>>1;if(_[A]===m)return!0;_[A]>m?C=A-1:S=A+1}return!1}(c.properties()[s.value],f.value,0,f.value.length-1)],all:{type:en,overloads:[[[en,en],(c,[s,f])=>s.evaluate(c)&&f.evaluate(c)],[Ac(en),(c,s)=>{for(const f of s)if(!f.evaluate(c))return!1;return!0}]]},any:{type:en,overloads:[[[en,en],(c,[s,f])=>s.evaluate(c)||f.evaluate(c)],[Ac(en),(c,s)=>{for(const f of s)if(f.evaluate(c))return!0;return!1}]]},"!":[en,[en],(c,[s])=>!s.evaluate(c)],"is-supported-script":[en,[ln],(c,[s])=>{const f=c.globals&&c.globals.isSupportedScript;return!f||f(s.evaluate(c))}],upcase:[ln,[ln],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[ln,[ln],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[ln,Ac(rn),(c,s)=>s.map(f=>zn(f.evaluate(c))).join("")],"resolved-locale":[ln,[ys],(c,[s])=>s.evaluate(c).resolvedLocale()]});class xv{constructor(s,f){var m;this.expression=s,this._warningHistory={},this._evaluator=new iv,this._defaultValue=f?(m=f).type==="color"&&Ar(m.default)?new Zn(0,0,0,0):m.type==="color"?Zn.parse(m.default)||null:m.type==="padding"?ya.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?Wa.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(s,f,m,_,S,C){return this._evaluator.globals=s,this._evaluator.feature=f,this._evaluator.featureState=m,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(s,f,m,_,S,C){this._evaluator.globals=s,this._evaluator.feature=f||null,this._evaluator.featureState=m||null,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Rr(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function hm(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Vf}function dm(c,s){const f=new Qp(Vf,rm,[],s?function(_){const S={color:Hi,string:ln,number:ft,enum:ln,boolean:en,formatted:me,padding:K,resolvedImage:J,variableAnchorOffsetCollection:ie};return _.type==="array"?Q(S[_.value]||rn,_.length):S[_.type]}(s):void 0),m=f.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?M1(new xv(m,s)):Gu(f.errors)}class bv{constructor(s,f){this.kind=s,this._styleExpression=f,this.isStateDependent=s!=="constant"&&!vd(f.expression)}evaluateWithoutErrorHandling(s,f,m,_,S,C){return this._styleExpression.evaluateWithoutErrorHandling(s,f,m,_,S,C)}evaluate(s,f,m,_,S,C){return this._styleExpression.evaluate(s,f,m,_,S,C)}}class pm{constructor(s,f,m,_){this.kind=s,this.zoomStops=m,this._styleExpression=f,this.isStateDependent=s!=="camera"&&!vd(f.expression),this.interpolationType=_}evaluateWithoutErrorHandling(s,f,m,_,S,C){return this._styleExpression.evaluateWithoutErrorHandling(s,f,m,_,S,C)}evaluate(s,f,m,_,S,C){return this._styleExpression.evaluate(s,f,m,_,S,C)}interpolationFactor(s,f,m){return this.interpolationType?_a.interpolationFactor(this.interpolationType,s,f,m):0}}function wv(c,s){const f=dm(c,s);if(f.result==="error")return f;const m=f.value.expression,_=im(m);if(!_&&!Gf(s))return Gu([new sr("","data expressions not supported")]);const S=om(m,["zoom"]);if(!S&&!$1(s))return Gu([new sr("","zoom expressions not supported")]);const C=bd(m);return C||S?C instanceof sr?Gu([C]):C instanceof _a&&!_v(s)?Gu([new sr("",'"interpolate" expressions cannot be used with this property')]):M1(C?new pm(_?"camera":"composite",f.value,C.labels,C instanceof _a?C.interpolation:void 0):new bv(_?"constant":"source",f.value)):Gu([new sr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class xd{constructor(s,f){this._parameters=s,this._specification=f,Yo(this,Sn(this._parameters,this._specification))}static deserialize(s){return new xd(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function bd(c){let s=null;if(c instanceof lm)s=bd(c.result);else if(c instanceof sm){for(const f of c.args)if(s=bd(f),s)break}else(c instanceof Vu||c instanceof _a)&&c.input instanceof Xa&&c.input.name==="zoom"&&(s=c);return s instanceof sr||c.eachChild(f=>{const m=bd(f);m instanceof sr?s=m:!s&&m?s=new sr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&m&&s!==m&&(s=new sr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function wd(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!wd(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const zC={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Sv(c){if(c==null)return{filter:()=>!0,needGeometry:!1};wd(c)||(c=mm(c));const s=dm(c,zC);if(s.result==="error")throw new Error(s.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,m,_)=>s.value.evaluate(f,m,{},_),needGeometry:N1(c)}}function FC(c,s){return c<s?-1:c>s?1:0}function N1(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let s=1;s<c.length;s++)if(N1(c[s]))return!0;return!1}function mm(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?Ev(c[1],c[2],"=="):s==="!="?Sd(Ev(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Ev(c[1],c[2],s):s==="any"?(f=c.slice(1),["any"].concat(f.map(mm))):s==="all"?["all"].concat(c.slice(1).map(mm)):s==="none"?["all"].concat(c.slice(1).map(mm).map(Sd)):s==="in"?L1(c[1],c.slice(2)):s==="!in"?Sd(L1(c[1],c.slice(2))):s==="has"?D1(c[1]):s==="!has"?Sd(D1(c[1])):s!=="within"||c;var f}function Ev(c,s,f){switch(c){case"$type":return[`filter-type-${f}`,s];case"$id":return[`filter-id-${f}`,s];default:return[`filter-${f}`,c,s]}}function L1(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(f=>typeof f!=typeof s[0])?["filter-in-large",c,["literal",s.sort(FC)]]:["filter-in-small",c,["literal",s]]}}function D1(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Sd(c){return["!",c]}function gm(c){const s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let _="[";for(const S of c)_+=`${gm(S)},`;return`${_}]`}const f=Object.keys(c).sort();let m="{";for(let _=0;_<f.length;_++)m+=`${JSON.stringify(f[_])}:${gm(c[f[_]])},`;return`${m}}`}function ym(c){let s="";for(const f of Dn)s+=`/${gm(c[f])}`;return s}function R1(c){const s=c.value;return s?[new ut(c.key,s,"constants have been deprecated as of v8")]:[]}function zr(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Mc(c){if(Array.isArray(c))return c.map(Mc);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const f in c)s[f]=Mc(c[f]);return s}return zr(c)}function Jo(c){const s=c.key,f=c.value,m=c.valueSpec||{},_=c.objectElementValidators||{},S=c.style,C=c.styleSpec,A=c.validateSpec;let L=[];const B=Fn(f);if(B!=="object")return[new ut(s,f,`object expected, ${B} found`)];for(const q in f){const X=q.split(".")[0],Y=m[X]||m["*"];let te;if(_[X])te=_[X];else if(m[X])te=A;else if(_["*"])te=_["*"];else{if(!m["*"]){L.push(new ut(s,f[q],`unknown property "${q}"`));continue}te=A}L=L.concat(te({key:(s&&`${s}.`)+q,value:f[q],valueSpec:Y,style:S,styleSpec:C,object:f,objectKey:q,validateSpec:A},f))}for(const q in m)_[q]||m[q].required&&m[q].default===void 0&&f[q]===void 0&&L.push(new ut(s,f,`missing required property "${q}"`));return L}function qf(c){const s=c.value,f=c.valueSpec,m=c.style,_=c.styleSpec,S=c.key,C=c.arrayElementValidator||c.validateSpec;if(Fn(s)!=="array")return[new ut(S,s,`array expected, ${Fn(s)} found`)];if(f.length&&s.length!==f.length)return[new ut(S,s,`array length ${f.length} expected, length ${s.length} found`)];if(f["min-length"]&&s.length<f["min-length"])return[new ut(S,s,`array length at least ${f["min-length"]} expected, length ${s.length} found`)];let A={type:f.value,values:f.values};_.$version<7&&(A.function=f.function),Fn(f.value)==="object"&&(A=f.value);let L=[];for(let B=0;B<s.length;B++)L=L.concat(C({array:s,arrayIndex:B,value:s[B],valueSpec:A,validateSpec:c.validateSpec,style:m,styleSpec:_,key:`${S}[${B}]`}));return L}function Ed(c){const s=c.key,f=c.value,m=c.valueSpec;let _=Fn(f);return _==="number"&&f!=f&&(_="NaN"),_!=="number"?[new ut(s,f,`number expected, ${_} found`)]:"minimum"in m&&f<m.minimum?[new ut(s,f,`${f} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&f>m.maximum?[new ut(s,f,`${f} is greater than the maximum value ${m.maximum}`)]:[]}function vm(c){const s=c.valueSpec,f=zr(c.value.type);let m,_,S,C={};const A=f!=="categorical"&&c.value.property===void 0,L=!A,B=Fn(c.value.stops)==="array"&&Fn(c.value.stops[0])==="array"&&Fn(c.value.stops[0][0])==="object",q=Jo({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(te){if(f==="identity")return[new ut(te.key,te.value,'identity function may not have a "stops" property')];let re=[];const le=te.value;return re=re.concat(qf({key:te.key,value:le,valueSpec:te.valueSpec,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,arrayElementValidator:X})),Fn(le)==="array"&&le.length===0&&re.push(new ut(te.key,le,"array must have at least one stop")),re},default:function(te){return te.validateSpec({key:te.key,value:te.value,valueSpec:s,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec})}}});return f==="identity"&&A&&q.push(new ut(c.key,c.value,'missing required property "property"')),f==="identity"||c.value.stops||q.push(new ut(c.key,c.value,'missing required property "stops"')),f==="exponential"&&c.valueSpec.expression&&!_v(c.valueSpec)&&q.push(new ut(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(L&&!Gf(c.valueSpec)?q.push(new ut(c.key,c.value,"property functions not supported")):A&&!$1(c.valueSpec)&&q.push(new ut(c.key,c.value,"zoom functions not supported"))),f!=="categorical"&&!B||c.value.property!==void 0||q.push(new ut(c.key,c.value,'"property" property is required')),q;function X(te){let re=[];const le=te.value,ve=te.key;if(Fn(le)!=="array")return[new ut(ve,le,`array expected, ${Fn(le)} found`)];if(le.length!==2)return[new ut(ve,le,`array length 2 expected, length ${le.length} found`)];if(B){if(Fn(le[0])!=="object")return[new ut(ve,le,`object expected, ${Fn(le[0])} found`)];if(le[0].zoom===void 0)return[new ut(ve,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new ut(ve,le,"object stop key must have value")];if(S&&S>zr(le[0].zoom))return[new ut(ve,le[0].zoom,"stop zoom values must appear in ascending order")];zr(le[0].zoom)!==S&&(S=zr(le[0].zoom),_=void 0,C={}),re=re.concat(Jo({key:`${ve}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,objectElementValidators:{zoom:Ed,value:Y}}))}else re=re.concat(Y({key:`${ve}[0]`,value:le[0],valueSpec:{},validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec},le));return hm(Mc(le[1]))?re.concat([new ut(`${ve}[1]`,le[1],"expressions are not allowed in function stops.")]):re.concat(te.validateSpec({key:`${ve}[1]`,value:le[1],valueSpec:s,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec}))}function Y(te,re){const le=Fn(te.value),ve=zr(te.value),xe=te.value!==null?te.value:re;if(m){if(le!==m)return[new ut(te.key,xe,`${le} stop domain type must match previous stop domain type ${m}`)]}else m=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new ut(te.key,xe,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&f!=="categorical"){let Me=`number expected, ${le} found`;return Gf(s)&&f===void 0&&(Me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ut(te.key,xe,Me)]}return f!=="categorical"||le!=="number"||isFinite(ve)&&Math.floor(ve)===ve?f!=="categorical"&&le==="number"&&_!==void 0&&ve<_?[new ut(te.key,xe,"stop domain values must appear in ascending order")]:(_=ve,f==="categorical"&&ve in C?[new ut(te.key,xe,"stop domain values must be unique")]:(C[ve]=!0,[])):[new ut(te.key,xe,`integer expected, found ${ve}`)]}}function $c(c){const s=(c.expressionContext==="property"?wv:dm)(Mc(c.value),c.valueSpec);if(s.result==="error")return s.value.map(m=>new ut(`${c.key}${m.key}`,c.value,m.message));const f=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!f.outputDefined())return[new ut(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!vd(f))return[new ut(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!vd(f))return[new ut(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!om(f,["zoom","feature-state"]))return[new ut(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!im(f))return[new ut(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cd(c){const s=c.key,f=c.value,m=c.valueSpec,_=[];return Array.isArray(m.values)?m.values.indexOf(zr(f))===-1&&_.push(new ut(s,f,`expected one of [${m.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(m.values).indexOf(zr(f))===-1&&_.push(new ut(s,f,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(f)} found`)),_}function Wf(c){return wd(Mc(c.value))?$c(Yo({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):z1(c)}function z1(c){const s=c.value,f=c.key;if(Fn(s)!=="array")return[new ut(f,s,`array expected, ${Fn(s)} found`)];const m=c.styleSpec;let _,S=[];if(s.length<1)return[new ut(f,s,"filter array must have at least 1 element")];switch(S=S.concat(Cd({key:`${f}[0]`,value:s[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),zr(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&zr(s[1])==="$type"&&S.push(new ut(f,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&S.push(new ut(f,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(_=Fn(s[1]),_!=="string"&&S.push(new ut(`${f}[1]`,s[1],`string expected, ${_} found`)));for(let C=2;C<s.length;C++)_=Fn(s[C]),zr(s[1])==="$type"?S=S.concat(Cd({key:`${f}[${C}]`,value:s[C],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&S.push(new ut(`${f}[${C}]`,s[C],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let C=1;C<s.length;C++)S=S.concat(z1({key:`${f}[${C}]`,value:s[C],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":_=Fn(s[1]),s.length!==2?S.push(new ut(f,s,`filter array for "${s[0]}" operator must have 2 elements`)):_!=="string"&&S.push(new ut(`${f}[1]`,s[1],`string expected, ${_} found`));break;case"within":_=Fn(s[1]),s.length!==2?S.push(new ut(f,s,`filter array for "${s[0]}" operator must have 2 elements`)):_!=="object"&&S.push(new ut(`${f}[1]`,s[1],`object expected, ${_} found`))}return S}function F1(c,s){const f=c.key,m=c.validateSpec,_=c.style,S=c.styleSpec,C=c.value,A=c.objectKey,L=S[`${s}_${c.layerType}`];if(!L)return[];const B=A.match(/^(.*)-transition$/);if(s==="paint"&&B&&L[B[1]]&&L[B[1]].transition)return m({key:f,value:C,valueSpec:S.transition,style:_,styleSpec:S});const q=c.valueSpec||L[A];if(!q)return[new ut(f,C,`unknown property "${A}"`)];let X;if(Fn(C)==="string"&&Gf(q)&&!q.tokens&&(X=/^{([^}]+)}$/.exec(C)))return[new ut(f,C,`"${A}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(X[1])} }\`.`)];const Y=[];return c.layerType==="symbol"&&(A==="text-field"&&_&&!_.glyphs&&Y.push(new ut(f,C,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Ar(Mc(C))&&zr(C.type)==="identity"&&Y.push(new ut(f,C,'"text-font" does not support identity functions'))),Y.concat(m({key:c.key,value:C,valueSpec:q,style:_,styleSpec:S,expressionContext:"property",propertyType:s,propertyKey:A}))}function B1(c){return F1(c,"paint")}function j1(c){return F1(c,"layout")}function U1(c){let s=[];const f=c.value,m=c.key,_=c.style,S=c.styleSpec;f.type||f.ref||s.push(new ut(m,f,'either "type" or "ref" is required'));let C=zr(f.type);const A=zr(f.ref);if(f.id){const L=zr(f.id);for(let B=0;B<c.arrayIndex;B++){const q=_.layers[B];zr(q.id)===L&&s.push(new ut(m,f.id,`duplicate layer id "${f.id}", previously used at line ${q.id.__line__}`))}}if("ref"in f){let L;["type","source","source-layer","filter","layout"].forEach(B=>{B in f&&s.push(new ut(m,f[B],`"${B}" is prohibited for ref layers`))}),_.layers.forEach(B=>{zr(B.id)===A&&(L=B)}),L?L.ref?s.push(new ut(m,f.ref,"ref cannot reference another ref layer")):C=zr(L.type):s.push(new ut(m,f.ref,`ref layer "${A}" not found`))}else if(C!=="background")if(f.source){const L=_.sources&&_.sources[f.source],B=L&&zr(L.type);L?B==="vector"&&C==="raster"?s.push(new ut(m,f.source,`layer "${f.id}" requires a raster source`)):B!=="raster-dem"&&C==="hillshade"?s.push(new ut(m,f.source,`layer "${f.id}" requires a raster-dem source`)):B==="raster"&&C!=="raster"?s.push(new ut(m,f.source,`layer "${f.id}" requires a vector source`)):B!=="vector"||f["source-layer"]?B==="raster-dem"&&C!=="hillshade"?s.push(new ut(m,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!f.paint||!f.paint["line-gradient"]||B==="geojson"&&L.lineMetrics||s.push(new ut(m,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new ut(m,f,`layer "${f.id}" must specify a "source-layer"`)):s.push(new ut(m,f.source,`source "${f.source}" not found`))}else s.push(new ut(m,f,'missing required property "source"'));return s=s.concat(Jo({key:m,value:f,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${m}.type`,value:f.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:f,objectKey:"type"}),filter:Wf,layout:L=>Jo({layer:f,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":B=>j1(Yo({layerType:C},B))}}),paint:L=>Jo({layer:f,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":B=>B1(Yo({layerType:C},B))}})}})),s}function Qs(c){const s=c.value,f=c.key,m=Fn(s);return m!=="string"?[new ut(f,s,`string expected, ${m} found`)]:[]}const Id={promoteId:function({key:c,value:s}){if(Fn(s)==="string")return Qs({key:c,value:s});{const f=[];for(const m in s)f.push(...Qs({key:`${c}.${m}`,value:s[m]}));return f}}};function xa(c){const s=c.value,f=c.key,m=c.styleSpec,_=c.style,S=c.validateSpec;if(!s.type)return[new ut(f,s,'"type" is required')];const C=zr(s.type);let A;switch(C){case"vector":case"raster":return A=Jo({key:f,value:s,valueSpec:m[`source_${C.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:Id,validateSpec:S}),A;case"raster-dem":return A=function(L){var B;const q=(B=L.sourceName)!==null&&B!==void 0?B:"",X=L.value,Y=L.styleSpec,te=Y.source_raster_dem,re=L.style;let le=[];const ve=Fn(X);if(X===void 0)return le;if(ve!=="object")return le.push(new ut("source_raster_dem",X,`object expected, ${ve} found`)),le;const xe=zr(X.encoding)==="custom",Me=["redFactor","greenFactor","blueFactor","baseShift"],Se=L.value.encoding?`"${L.value.encoding}"`:"Default";for(const ke in X)!xe&&Me.includes(ke)?le.push(new ut(ke,X[ke],`In "${q}": "${ke}" is only valid when "encoding" is set to "custom". ${Se} encoding found`)):te[ke]?le=le.concat(L.validateSpec({key:ke,value:X[ke],valueSpec:te[ke],validateSpec:L.validateSpec,style:re,styleSpec:Y})):le.push(new ut(ke,X[ke],`unknown property "${ke}"`));return le}({sourceName:f,value:s,style:c.style,styleSpec:m,validateSpec:S}),A;case"geojson":if(A=Jo({key:f,value:s,valueSpec:m.source_geojson,style:_,styleSpec:m,validateSpec:S,objectElementValidators:Id}),s.cluster)for(const L in s.clusterProperties){const[B,q]=s.clusterProperties[L],X=typeof B=="string"?[B,["accumulated"],["get",L]]:B;A.push(...$c({key:`${f}.${L}.map`,value:q,validateSpec:S,expressionContext:"cluster-map"})),A.push(...$c({key:`${f}.${L}.reduce`,value:X,validateSpec:S,expressionContext:"cluster-reduce"}))}return A;case"video":return Jo({key:f,value:s,valueSpec:m.source_video,style:_,validateSpec:S,styleSpec:m});case"image":return Jo({key:f,value:s,valueSpec:m.source_image,style:_,validateSpec:S,styleSpec:m});case"canvas":return[new ut(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Cd({key:`${f}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,validateSpec:S,styleSpec:m})}}function Td(c){const s=c.value,f=c.styleSpec,m=f.light,_=c.style;let S=[];const C=Fn(s);if(s===void 0)return S;if(C!=="object")return S=S.concat([new ut("light",s,`object expected, ${C} found`)]),S;for(const A in s){const L=A.match(/^(.*)-transition$/);S=S.concat(L&&m[L[1]]&&m[L[1]].transition?c.validateSpec({key:A,value:s[A],valueSpec:f.transition,validateSpec:c.validateSpec,style:_,styleSpec:f}):m[A]?c.validateSpec({key:A,value:s[A],valueSpec:m[A],validateSpec:c.validateSpec,style:_,styleSpec:f}):[new ut(A,s[A],`unknown property "${A}"`)])}return S}function V1(c){const s=c.value,f=c.styleSpec,m=f.terrain,_=c.style;let S=[];const C=Fn(s);if(s===void 0)return S;if(C!=="object")return S=S.concat([new ut("terrain",s,`object expected, ${C} found`)]),S;for(const A in s)S=S.concat(m[A]?c.validateSpec({key:A,value:s[A],valueSpec:m[A],validateSpec:c.validateSpec,style:_,styleSpec:f}):[new ut(A,s[A],`unknown property "${A}"`)]);return S}function G1(c){let s=[];const f=c.value,m=c.key;if(Array.isArray(f)){const _=[],S=[];for(const C in f)f[C].id&&_.includes(f[C].id)&&s.push(new ut(m,f,`all the sprites' ids must be unique, but ${f[C].id} is duplicated`)),_.push(f[C].id),f[C].url&&S.includes(f[C].url)&&s.push(new ut(m,f,`all the sprites' URLs must be unique, but ${f[C].url} is duplicated`)),S.push(f[C].url),s=s.concat(Jo({key:`${m}[${C}]`,value:f[C],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return Qs({key:m,value:f})}const q1={"*":()=>[],array:qf,boolean:function(c){const s=c.value,f=c.key,m=Fn(s);return m!=="boolean"?[new ut(f,s,`boolean expected, ${m} found`)]:[]},number:Ed,color:function(c){const s=c.key,f=c.value,m=Fn(f);return m!=="string"?[new ut(s,f,`color expected, ${m} found`)]:Zn.parse(String(f))?[]:[new ut(s,f,`color expected, "${f}" found`)]},constants:R1,enum:Cd,filter:Wf,function:vm,layer:U1,object:Jo,source:xa,light:Td,terrain:V1,string:Qs,formatted:function(c){return Qs(c).length===0?[]:$c(c)},resolvedImage:function(c){return Qs(c).length===0?[]:$c(c)},padding:function(c){const s=c.key,f=c.value;if(Fn(f)==="array"){if(f.length<1||f.length>4)return[new ut(s,f,`padding requires 1 to 4 values; ${f.length} values found`)];const m={type:"number"};let _=[];for(let S=0;S<f.length;S++)_=_.concat(c.validateSpec({key:`${s}[${S}]`,value:f[S],validateSpec:c.validateSpec,valueSpec:m}));return _}return Ed({key:s,value:f,valueSpec:{}})},variableAnchorOffsetCollection:function(c){const s=c.key,f=c.value,m=Fn(f),_=c.styleSpec;if(m!=="array"||f.length<1||f.length%2!=0)return[new ut(s,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let C=0;C<f.length;C+=2)S=S.concat(Cd({key:`${s}[${C}]`,value:f[C],valueSpec:_.layout_symbol["text-anchor"]})),S=S.concat(qf({key:`${s}[${C+1}]`,value:f[C+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:_}));return S},sprite:G1};function Xl(c){const s=c.value,f=c.valueSpec,m=c.styleSpec;return c.validateSpec=Xl,f.expression&&Ar(zr(s))?vm(c):f.expression&&hm(Mc(s))?$c(c):f.type&&q1[f.type]?q1[f.type](c):Jo(Yo({},c,{valueSpec:f.type?m[f.type]:f}))}function W1(c){const s=c.value,f=c.key,m=Qs(c);return m.length||(s.indexOf("{fontstack}")===-1&&m.push(new ut(f,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&m.push(new ut(f,s,'"glyphs" url must include a "{range}" token'))),m}function Za(c,s=Ge){let f=[];return f=f.concat(Xl({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:Xl,objectElementValidators:{glyphs:W1,"*":()=>[]}})),c.constants&&(f=f.concat(R1({key:"constants",value:c.constants,style:c,styleSpec:s,validateSpec:Xl}))),_m(f)}function Zl(c){return function(s){return c({...s,validateSpec:Xl})}}function _m(c){return[].concat(c).sort((s,f)=>s.line-f.line)}function Kl(c){return function(...s){return _m(c.apply(this,s))}}Za.source=Kl(Zl(xa)),Za.sprite=Kl(Zl(G1)),Za.glyphs=Kl(Zl(W1)),Za.light=Kl(Zl(Td)),Za.terrain=Kl(Zl(V1)),Za.layer=Kl(Zl(U1)),Za.filter=Kl(Zl(Wf)),Za.paintProperty=Kl(Zl(B1)),Za.layoutProperty=Kl(Zl(j1));const Yl=Za,BC=Yl.light,Cv=Yl.paintProperty,H1=Yl.layoutProperty;function xm(c,s){let f=!1;if(s&&s.length)for(const m of s)c.fire(new sn(new Error(m.message))),f=!0;return f}class Hf{constructor(s,f,m){const _=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const C=new Int32Array(this.arrayBuffer);s=C[0],this.d=(f=C[1])+2*(m=C[2]);for(let L=0;L<this.d*this.d;L++){const B=C[3+L],q=C[3+L+1];_.push(B===q?null:C.subarray(B,q))}const A=C[3+_.length+1];this.keys=C.subarray(C[3+_.length],A),this.bboxes=C.subarray(A),this.insert=this._insertReadonly}else{this.d=f+2*m;for(let C=0;C<this.d*this.d;C++)_.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=s,this.padding=m,this.scale=f/s,this.uid=0;const S=m/f*s;this.min=-S,this.max=s+S}insert(s,f,m,_,S){this._forEachCell(f,m,_,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,f,m,_,S,C){this.cells[S].push(C)}query(s,f,m,_,S){const C=this.min,A=this.max;if(s<=C&&f<=C&&A<=m&&A<=_&&!S)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(s,f,m,_,this._queryCell,L,{},S),L}}_queryCell(s,f,m,_,S,C,A,L){const B=this.cells[S];if(B!==null){const q=this.keys,X=this.bboxes;for(let Y=0;Y<B.length;Y++){const te=B[Y];if(A[te]===void 0){const re=4*te;(L?L(X[re+0],X[re+1],X[re+2],X[re+3]):s<=X[re+2]&&f<=X[re+3]&&m>=X[re+0]&&_>=X[re+1])?(A[te]=!0,C.push(q[te])):A[te]=!1}}}}_forEachCell(s,f,m,_,S,C,A,L){const B=this._convertToCellCoord(s),q=this._convertToCellCoord(f),X=this._convertToCellCoord(m),Y=this._convertToCellCoord(_);for(let te=B;te<=X;te++)for(let re=q;re<=Y;re++){const le=this.d*re+te;if((!L||L(this._convertFromCellCoord(te),this._convertFromCellCoord(re),this._convertFromCellCoord(te+1),this._convertFromCellCoord(re+1)))&&S.call(this,s,f,m,_,le,C,A,L))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,f=3+this.cells.length+1+1;let m=0;for(let C=0;C<this.cells.length;C++)m+=this.cells[C].length;const _=new Int32Array(f+m+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let S=f;for(let C=0;C<s.length;C++){const A=s[C];_[3+C]=S,_.set(A,S),S+=A.length}return _[3+s.length]=S,_.set(this.keys,S),S+=this.keys.length,_[3+s.length+1]=S,_.set(this.bboxes,S),S+=this.bboxes.length,_.buffer}static serialize(s,f){const m=s.toArrayBuffer();return f&&f.push(m),{buffer:m}}static deserialize(s){return new Hf(s.buffer)}}const Jl={};function Pt(c,s,f={}){if(Jl[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),Jl[c]={klass:s,omit:f.omit||[],shallow:f.shallow||[]}}Pt("Object",Object),Pt("TransferableGridIndex",Hf),Pt("Color",Zn),Pt("Error",Error),Pt("AJAXError",Vt),Pt("ResolvedImage",Zi),Pt("StylePropertyFunction",xd),Pt("StyleExpression",xv,{omit:["_evaluator"]}),Pt("ZoomDependentExpression",pm),Pt("ZoomConstantExpression",bv),Pt("CompoundExpression",Xa,{omit:["_evaluate"]});for(const c in Vf)Vf[c]._classRegistryKey||Pt(`Expression_${c}`,Vf[c]);function bm(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function qu(c,s){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(bm(c)||de(c))return s&&s.push(c),c;if(ArrayBuffer.isView(c)){const f=c;return s&&s.push(f.buffer),f}if(c instanceof ImageData)return s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const f=[];for(const m of c)f.push(qu(m,s));return f}if(typeof c=="object"){const f=c.constructor,m=f._classRegistryKey;if(!m)throw new Error("can't serialize object of unregistered class");if(!Jl[m])throw new Error(`${m} is not registered.`);const _=f.serialize?f.serialize(c,s):{};if(f.serialize){if(s&&_===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in c){if(!c.hasOwnProperty(S)||Jl[m].omit.indexOf(S)>=0)continue;const C=c[S];_[S]=Jl[m].shallow.indexOf(S)>=0?C:qu(C,s)}c instanceof Error&&(_.message=c.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(_.$name=m),_}throw new Error("can't serialize object of type "+typeof c)}function Xf(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||bm(c)||de(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(Xf);if(typeof c=="object"){const s=c.$name||"Object";if(!Jl[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:f}=Jl[s];if(!f)throw new Error(`can't deserialize unregistered class ${s}`);if(f.deserialize)return f.deserialize(c);const m=Object.create(f.prototype);for(const _ of Object.keys(c)){if(_==="$name")continue;const S=c[_];m[_]=Jl[s].shallow.indexOf(_)>=0?S:Xf(S)}return m}throw new Error("can't deserialize object of type "+typeof c)}class X1{constructor(){this.first=!0}update(s,f){const m=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=f),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=m,!0))}}const xt={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Iv(c){for(const s of c)if(Pv(s.charCodeAt(0)))return!0;return!1}function Tv(c){for(const s of c)if(!jC(s.charCodeAt(0)))return!1;return!0}function jC(c){return!(xt.Arabic(c)||xt["Arabic Supplement"](c)||xt["Arabic Extended-A"](c)||xt["Arabic Presentation Forms-A"](c)||xt["Arabic Presentation Forms-B"](c))}function Pv(c){return!(c!==746&&c!==747&&(c<4352||!(xt["Bopomofo Extended"](c)||xt.Bopomofo(c)||xt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||xt["CJK Compatibility Ideographs"](c)||xt["CJK Compatibility"](c)||xt["CJK Radicals Supplement"](c)||xt["CJK Strokes"](c)||!(!xt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||xt["CJK Unified Ideographs Extension A"](c)||xt["CJK Unified Ideographs"](c)||xt["Enclosed CJK Letters and Months"](c)||xt["Hangul Compatibility Jamo"](c)||xt["Hangul Jamo Extended-A"](c)||xt["Hangul Jamo Extended-B"](c)||xt["Hangul Jamo"](c)||xt["Hangul Syllables"](c)||xt.Hiragana(c)||xt["Ideographic Description Characters"](c)||xt.Kanbun(c)||xt["Kangxi Radicals"](c)||xt["Katakana Phonetic Extensions"](c)||xt.Katakana(c)&&c!==12540||!(!xt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!xt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||xt["Unified Canadian Aboriginal Syllabics"](c)||xt["Unified Canadian Aboriginal Syllabics Extended"](c)||xt["Vertical Forms"](c)||xt["Yijing Hexagram Symbols"](c)||xt["Yi Syllables"](c)||xt["Yi Radicals"](c))))}function Z1(c){return!(Pv(c)||function(s){return!!(xt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||xt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||xt["Letterlike Symbols"](s)||xt["Number Forms"](s)||xt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||xt["Control Pictures"](s)&&s!==9251||xt["Optical Character Recognition"](s)||xt["Enclosed Alphanumerics"](s)||xt["Geometric Shapes"](s)||xt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||xt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||xt["CJK Symbols and Punctuation"](s)||xt.Katakana(s)||xt["Private Use Area"](s)||xt["CJK Compatibility Forms"](s)||xt["Small Form Variants"](s)||xt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}function K1(c){return c>=1424&&c<=2303||xt["Arabic Presentation Forms-A"](c)||xt["Arabic Presentation Forms-B"](c)}function Y1(c,s){return!(!s&&K1(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||xt.Khmer(c))}function UC(c){for(const s of c)if(K1(s.charCodeAt(0)))return!0;return!1}const Av="deferred",Ov="loading",Mv="loaded";let $v=null,Qo="unavailable",Wu=null;const Pd=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Qo="error"),$v&&$v(c)};function kv(){Ad.fire(new yn("pluginStateChange",{pluginStatus:Qo,pluginURL:Wu}))}const Ad=new br,Nv=function(){return Qo},J1=function(){if(Qo!==Av||!Wu)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Qo=Ov,kv(),Wu&&Ot({url:Wu},c=>{c?Pd(c):(Qo=Mv,kv())})},ba={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Qo===Mv||ba.applyArabicShaping!=null,isLoading:()=>Qo===Ov,setState(c){if(!Le())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Qo=c.pluginStatus,Wu=c.pluginURL},isParsed(){if(!Le())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ba.applyArabicShaping!=null&&ba.processBidirectionalText!=null&&ba.processStyledBidirectionalText!=null},getPluginURL(){if(!Le())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Wu}};class pr{constructor(s,f){this.zoom=s,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new X1,this.transition={})}isSupportedScript(s){return function(f,m){for(const _ of f)if(!Y1(_.charCodeAt(0),m))return!1;return!0}(s,ba.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,f=s-Math.floor(s),m=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*f}}}class wm{constructor(s,f){this.property=s,this.value=f,this.expression=function(m,_){if(Ar(m))return new xd(m,_);if(hm(m)){const S=wv(m,_);if(S.result==="error")throw new Error(S.value.map(C=>`${C.key}: ${C.message}`).join(", "));return S.value}{let S=m;return _.type==="color"&&typeof m=="string"?S=Zn.parse(m):_.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(S=Wa.parse(m)):S=ya.parse(m),{kind:"constant",evaluate:()=>S}}}(f===void 0?s.specification.default:f,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,f,m){return this.property.possiblyEvaluate(this,s,f,m)}}class Lv{constructor(s){this.property=s,this.value=new wm(s,void 0)}transitioned(s,f){return new eb(this.property,this.value,f,Z({},s.transition,this.transition),s.now)}untransitioned(){return new eb(this.property,this.value,null,{},0)}}class Q1{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return fe(this._values[s].value.value)}setValue(s,f){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Lv(this._values[s].property)),this._values[s].value=new wm(this._values[s].property,f===null?void 0:fe(f))}getTransition(s){return fe(this._values[s].transition)}setTransition(s,f){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Lv(this._values[s].property)),this._values[s].transition=fe(f)||void 0}serialize(){const s={};for(const f of Object.keys(this._values)){const m=this.getValue(f);m!==void 0&&(s[f]=m);const _=this.getTransition(f);_!==void 0&&(s[`${f}-transition`]=_)}return s}transitioned(s,f){const m=new tb(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].transitioned(s,f._values[_]);return m}untransitioned(){const s=new tb(this._properties);for(const f of Object.keys(this._values))s._values[f]=this._values[f].untransitioned();return s}}class eb{constructor(s,f,m,_,S){this.property=s,this.value=f,this.begin=S+_.delay||0,this.end=this.begin+_.duration||0,s.specification.transition&&(_.delay||_.duration)&&(this.prior=m)}possiblyEvaluate(s,f,m){const _=s.now||0,S=this.value.possiblyEvaluate(s,f,m),C=this.prior;if(C){if(_>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(_<this.begin)return C.possiblyEvaluate(s,f,m);{const A=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(s,f,m),S,function(L){if(L<=0)return 0;if(L>=1)return 1;const B=L*L,q=B*L;return 4*(L<.5?q:3*(L-B)+q-.75)}(A))}}return S}}class tb{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,f,m){const _=new Sm(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(s,f,m);return _}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class VC{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return fe(this._values[s].value)}setValue(s,f){this._values[s]=new wm(this._values[s].property,f===null?void 0:fe(f))}serialize(){const s={};for(const f of Object.keys(this._values)){const m=this.getValue(f);m!==void 0&&(s[f]=m)}return s}possiblyEvaluate(s,f,m){const _=new Sm(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(s,f,m);return _}}class No{constructor(s,f,m){this.property=s,this.value=f,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,f,m,_){return this.property.evaluate(this.value,this.parameters,s,f,m,_)}}class Sm{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Rt{constructor(s){this.specification=s}possiblyEvaluate(s,f){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(f)}interpolate(s,f,m){const _=va[this.specification.type];return _?_(s,f,m):s}}class Wt{constructor(s,f){this.specification=s,this.overrides=f}possiblyEvaluate(s,f,m,_){return new No(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(f,null,{},m,_)}:s.expression,f)}interpolate(s,f,m){if(s.value.kind!=="constant"||f.value.kind!=="constant")return s;if(s.value.value===void 0||f.value.value===void 0)return new No(this,{kind:"constant",value:void 0},s.parameters);const _=va[this.specification.type];if(_){const S=_(s.value.value,f.value.value,m);return new No(this,{kind:"constant",value:S},s.parameters)}return s}evaluate(s,f,m,_,S,C){return s.kind==="constant"?s.value:s.evaluate(f,m,_,S,C)}}class Od extends Wt{possiblyEvaluate(s,f,m,_){if(s.value===void 0)return new No(this,{kind:"constant",value:void 0},f);if(s.expression.kind==="constant"){const S=s.expression.evaluate(f,null,{},m,_),C=s.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,A=this._calculate(C,C,C,f);return new No(this,{kind:"constant",value:A},f)}if(s.expression.kind==="camera"){const S=this._calculate(s.expression.evaluate({zoom:f.zoom-1}),s.expression.evaluate({zoom:f.zoom}),s.expression.evaluate({zoom:f.zoom+1}),f);return new No(this,{kind:"constant",value:S},f)}return new No(this,s.expression,f)}evaluate(s,f,m,_,S,C){if(s.kind==="source"){const A=s.evaluate(f,m,_,S,C);return this._calculate(A,A,A,f)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(f.zoom)-1},m,_),s.evaluate({zoom:Math.floor(f.zoom)},m,_),s.evaluate({zoom:Math.floor(f.zoom)+1},m,_),f):s.value}_calculate(s,f,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:s,to:f}:{from:m,to:f}}interpolate(s){return s}}class Dv{constructor(s){this.specification=s}possiblyEvaluate(s,f,m,_){if(s.value!==void 0){if(s.expression.kind==="constant"){const S=s.expression.evaluate(f,null,{},m,_);return this._calculate(S,S,S,f)}return this._calculate(s.expression.evaluate(new pr(Math.floor(f.zoom-1),f)),s.expression.evaluate(new pr(Math.floor(f.zoom),f)),s.expression.evaluate(new pr(Math.floor(f.zoom+1),f)),f)}}_calculate(s,f,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:s,to:f}:{from:m,to:f}}interpolate(s){return s}}class Rv{constructor(s){this.specification=s}possiblyEvaluate(s,f,m,_){return!!s.expression.evaluate(f,null,{},m,_)}interpolate(){return!1}}class si{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const f in s){const m=s[f];m.specification.overridable&&this.overridableProperties.push(f);const _=this.defaultPropertyValues[f]=new wm(m,void 0),S=this.defaultTransitionablePropertyValues[f]=new Lv(m);this.defaultTransitioningPropertyValues[f]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=_.possiblyEvaluate({})}}}Pt("DataDrivenProperty",Wt),Pt("DataConstantProperty",Rt),Pt("CrossFadedDataDrivenProperty",Od),Pt("CrossFadedProperty",Dv),Pt("ColorRampProperty",Rv);const zv="-transition";class Ka extends br{constructor(s,f){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),f.layout&&(this._unevaluatedLayout=new VC(f.layout)),f.paint)){this._transitionablePaint=new Q1(f.paint);for(const m in s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(const m in s.layout)this.setLayoutProperty(m,s.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Sm(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,f,m={}){f!=null&&this._validate(H1,`layers.${this.id}.layout.${s}`,s,f,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,f):this.visibility=f)}getPaintProperty(s){return s.endsWith(zv)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,f,m={}){if(f!=null&&this._validate(Cv,`layers.${this.id}.paint.${s}`,s,f,m))return!1;if(s.endsWith(zv))return this._transitionablePaint.setTransition(s.slice(0,-11),f||void 0),!1;{const _=this._transitionablePaint._values[s],S=_.property.specification["property-type"]==="cross-faded-data-driven",C=_.value.isDataDriven(),A=_.value;this._transitionablePaint.setValue(s,f),this._handleSpecialPaintPropertyUpdate(s);const L=this._transitionablePaint._values[s].value;return L.isDataDriven()||C||S||this._handleOverridablePaintPropertyUpdate(s,A,L)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,f,m){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,f){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,f)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),ye(s,(f,m)=>!(f===void 0||m==="layout"&&!Object.keys(f).length||m==="paint"&&!Object.keys(f).length))}_validate(s,f,m,_,S={}){return(!S||S.validate!==!1)&&xm(this,s.call(Yl,{key:f,layerType:this.type,objectKey:m,value:_,styleSpec:Ge,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const f=this.paint.get(s);if(f instanceof No&&Gf(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}const nb={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class kc{constructor(s,f){this._structArray=s,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Fr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,f){return s._trim(),f&&(s.isTransferred=!0,f.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const f=Object.create(this.prototype);return f.arrayBuffer=s.arrayBuffer,f.length=s.length,f.capacity=s.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Mr(c,s=1){let f=0,m=0;return{members:c.map(_=>{const S=nb[_.type].BYTES_PER_ELEMENT,C=f=Zf(f,Math.max(s,S)),A=_.components||1;return m=Math.max(m,S),f+=S*A,{name:_.name,type:_.type,components:A,offset:C}}),size:Zf(f,Math.max(m,s)),alignment:s}}function Zf(c,s){return Math.ceil(c/s)*s}class Md extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f){const m=this.length;return this.resize(m+1),this.emplace(m,s,f)}emplace(s,f,m){const _=2*s;return this.int16[_+0]=f,this.int16[_+1]=m,s}}Md.prototype.bytesPerElement=4,Pt("StructArrayLayout2i4",Md);class $d extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,f,m)}emplace(s,f,m,_){const S=3*s;return this.int16[S+0]=f,this.int16[S+1]=m,this.int16[S+2]=_,s}}$d.prototype.bytesPerElement=6,Pt("StructArrayLayout3i6",$d);class Nc extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,m,_){const S=this.length;return this.resize(S+1),this.emplace(S,s,f,m,_)}emplace(s,f,m,_,S){const C=4*s;return this.int16[C+0]=f,this.int16[C+1]=m,this.int16[C+2]=_,this.int16[C+3]=S,s}}Nc.prototype.bytesPerElement=8,Pt("StructArrayLayout4i8",Nc);class Fv extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,m,_,S,C){const A=this.length;return this.resize(A+1),this.emplace(A,s,f,m,_,S,C)}emplace(s,f,m,_,S,C,A){const L=6*s;return this.int16[L+0]=f,this.int16[L+1]=m,this.int16[L+2]=_,this.int16[L+3]=S,this.int16[L+4]=C,this.int16[L+5]=A,s}}Fv.prototype.bytesPerElement=12,Pt("StructArrayLayout2i4i12",Fv);class Bv extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,m,_,S,C){const A=this.length;return this.resize(A+1),this.emplace(A,s,f,m,_,S,C)}emplace(s,f,m,_,S,C,A){const L=4*s,B=8*s;return this.int16[L+0]=f,this.int16[L+1]=m,this.uint8[B+4]=_,this.uint8[B+5]=S,this.uint8[B+6]=C,this.uint8[B+7]=A,s}}Bv.prototype.bytesPerElement=8,Pt("StructArrayLayout2i4ub8",Bv);class Kf extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f){const m=this.length;return this.resize(m+1),this.emplace(m,s,f)}emplace(s,f,m){const _=2*s;return this.float32[_+0]=f,this.float32[_+1]=m,s}}Kf.prototype.bytesPerElement=8,Pt("StructArrayLayout2f8",Kf);class jv extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f,m,_,S,C,A,L,B,q){const X=this.length;return this.resize(X+1),this.emplace(X,s,f,m,_,S,C,A,L,B,q)}emplace(s,f,m,_,S,C,A,L,B,q,X){const Y=10*s;return this.uint16[Y+0]=f,this.uint16[Y+1]=m,this.uint16[Y+2]=_,this.uint16[Y+3]=S,this.uint16[Y+4]=C,this.uint16[Y+5]=A,this.uint16[Y+6]=L,this.uint16[Y+7]=B,this.uint16[Y+8]=q,this.uint16[Y+9]=X,s}}jv.prototype.bytesPerElement=20,Pt("StructArrayLayout10ui20",jv);class Uv extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f,m,_,S,C,A,L,B,q,X,Y){const te=this.length;return this.resize(te+1),this.emplace(te,s,f,m,_,S,C,A,L,B,q,X,Y)}emplace(s,f,m,_,S,C,A,L,B,q,X,Y,te){const re=12*s;return this.int16[re+0]=f,this.int16[re+1]=m,this.int16[re+2]=_,this.int16[re+3]=S,this.uint16[re+4]=C,this.uint16[re+5]=A,this.uint16[re+6]=L,this.uint16[re+7]=B,this.int16[re+8]=q,this.int16[re+9]=X,this.int16[re+10]=Y,this.int16[re+11]=te,s}}Uv.prototype.bytesPerElement=24,Pt("StructArrayLayout4i4ui4i24",Uv);class Bn extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,f,m)}emplace(s,f,m,_){const S=3*s;return this.float32[S+0]=f,this.float32[S+1]=m,this.float32[S+2]=_,s}}Bn.prototype.bytesPerElement=12,Pt("StructArrayLayout3f12",Bn);class w extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const f=this.length;return this.resize(f+1),this.emplace(f,s)}emplace(s,f){return this.uint32[1*s+0]=f,s}}w.prototype.bytesPerElement=4,Pt("StructArrayLayout1ul4",w);class u extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f,m,_,S,C,A,L,B){const q=this.length;return this.resize(q+1),this.emplace(q,s,f,m,_,S,C,A,L,B)}emplace(s,f,m,_,S,C,A,L,B,q){const X=10*s,Y=5*s;return this.int16[X+0]=f,this.int16[X+1]=m,this.int16[X+2]=_,this.int16[X+3]=S,this.int16[X+4]=C,this.int16[X+5]=A,this.uint32[Y+3]=L,this.uint16[X+8]=B,this.uint16[X+9]=q,s}}u.prototype.bytesPerElement=20,Pt("StructArrayLayout6i1ul2ui20",u);class p extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,m,_,S,C){const A=this.length;return this.resize(A+1),this.emplace(A,s,f,m,_,S,C)}emplace(s,f,m,_,S,C,A){const L=6*s;return this.int16[L+0]=f,this.int16[L+1]=m,this.int16[L+2]=_,this.int16[L+3]=S,this.int16[L+4]=C,this.int16[L+5]=A,s}}p.prototype.bytesPerElement=12,Pt("StructArrayLayout2i2i2i12",p);class y extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,m,_,S){const C=this.length;return this.resize(C+1),this.emplace(C,s,f,m,_,S)}emplace(s,f,m,_,S,C){const A=4*s,L=8*s;return this.float32[A+0]=f,this.float32[A+1]=m,this.float32[A+2]=_,this.int16[L+6]=S,this.int16[L+7]=C,s}}y.prototype.bytesPerElement=16,Pt("StructArrayLayout2f1f2i16",y);class x extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,m,_){const S=this.length;return this.resize(S+1),this.emplace(S,s,f,m,_)}emplace(s,f,m,_,S){const C=12*s,A=3*s;return this.uint8[C+0]=f,this.uint8[C+1]=m,this.float32[A+1]=_,this.float32[A+2]=S,s}}x.prototype.bytesPerElement=12,Pt("StructArrayLayout2ub2f12",x);class E extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,f,m)}emplace(s,f,m,_){const S=3*s;return this.uint16[S+0]=f,this.uint16[S+1]=m,this.uint16[S+2]=_,s}}E.prototype.bytesPerElement=6,Pt("StructArrayLayout3ui6",E);class M extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,m,_,S,C,A,L,B,q,X,Y,te,re,le,ve,xe){const Me=this.length;return this.resize(Me+1),this.emplace(Me,s,f,m,_,S,C,A,L,B,q,X,Y,te,re,le,ve,xe)}emplace(s,f,m,_,S,C,A,L,B,q,X,Y,te,re,le,ve,xe,Me){const Se=24*s,ke=12*s,Be=48*s;return this.int16[Se+0]=f,this.int16[Se+1]=m,this.uint16[Se+2]=_,this.uint16[Se+3]=S,this.uint32[ke+2]=C,this.uint32[ke+3]=A,this.uint32[ke+4]=L,this.uint16[Se+10]=B,this.uint16[Se+11]=q,this.uint16[Se+12]=X,this.float32[ke+7]=Y,this.float32[ke+8]=te,this.uint8[Be+36]=re,this.uint8[Be+37]=le,this.uint8[Be+38]=ve,this.uint32[ke+10]=xe,this.int16[Se+22]=Me,s}}M.prototype.bytesPerElement=48,Pt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",M);class N extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,m,_,S,C,A,L,B,q,X,Y,te,re,le,ve,xe,Me,Se,ke,Be,Je,bt,kt,_t,yt,ct,At){const pt=this.length;return this.resize(pt+1),this.emplace(pt,s,f,m,_,S,C,A,L,B,q,X,Y,te,re,le,ve,xe,Me,Se,ke,Be,Je,bt,kt,_t,yt,ct,At)}emplace(s,f,m,_,S,C,A,L,B,q,X,Y,te,re,le,ve,xe,Me,Se,ke,Be,Je,bt,kt,_t,yt,ct,At,pt){const it=32*s,Gt=16*s;return this.int16[it+0]=f,this.int16[it+1]=m,this.int16[it+2]=_,this.int16[it+3]=S,this.int16[it+4]=C,this.int16[it+5]=A,this.int16[it+6]=L,this.int16[it+7]=B,this.uint16[it+8]=q,this.uint16[it+9]=X,this.uint16[it+10]=Y,this.uint16[it+11]=te,this.uint16[it+12]=re,this.uint16[it+13]=le,this.uint16[it+14]=ve,this.uint16[it+15]=xe,this.uint16[it+16]=Me,this.uint16[it+17]=Se,this.uint16[it+18]=ke,this.uint16[it+19]=Be,this.uint16[it+20]=Je,this.uint16[it+21]=bt,this.uint16[it+22]=kt,this.uint32[Gt+12]=_t,this.float32[Gt+13]=yt,this.float32[Gt+14]=ct,this.uint16[it+30]=At,this.uint16[it+31]=pt,s}}N.prototype.bytesPerElement=64,Pt("StructArrayLayout8i15ui1ul2f2ui64",N);class z extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const f=this.length;return this.resize(f+1),this.emplace(f,s)}emplace(s,f){return this.float32[1*s+0]=f,s}}z.prototype.bytesPerElement=4,Pt("StructArrayLayout1f4",z);class V extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,f,m)}emplace(s,f,m,_){const S=3*s;return this.uint16[6*s+0]=f,this.float32[S+1]=m,this.float32[S+2]=_,s}}V.prototype.bytesPerElement=12,Pt("StructArrayLayout1ui2f12",V);class W extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,f,m)}emplace(s,f,m,_){const S=4*s;return this.uint32[2*s+0]=f,this.uint16[S+2]=m,this.uint16[S+3]=_,s}}W.prototype.bytesPerElement=8,Pt("StructArrayLayout1ul2ui8",W);class H extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f){const m=this.length;return this.resize(m+1),this.emplace(m,s,f)}emplace(s,f,m){const _=2*s;return this.uint16[_+0]=f,this.uint16[_+1]=m,s}}H.prototype.bytesPerElement=4,Pt("StructArrayLayout2ui4",H);class ee extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const f=this.length;return this.resize(f+1),this.emplace(f,s)}emplace(s,f){return this.uint16[1*s+0]=f,s}}ee.prototype.bytesPerElement=2,Pt("StructArrayLayout1ui2",ee);class ce extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,m,_){const S=this.length;return this.resize(S+1),this.emplace(S,s,f,m,_)}emplace(s,f,m,_,S){const C=4*s;return this.float32[C+0]=f,this.float32[C+1]=m,this.float32[C+2]=_,this.float32[C+3]=S,s}}ce.prototype.bytesPerElement=16,Pt("StructArrayLayout4f16",ce);class ue extends kc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}ue.prototype.size=20;class ge extends u{get(s){return new ue(this,s)}}Pt("CollisionBoxArray",ge);class se extends kc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}se.prototype.size=48;class Ie extends M{get(s){return new se(this,s)}}Pt("PlacedSymbolArray",Ie);class ze extends kc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ze.prototype.size=64;class _e extends N{get(s){return new ze(this,s)}}Pt("SymbolInstanceArray",_e);class Oe extends z{getoffsetX(s){return this.float32[1*s+0]}}Pt("GlyphOffsetArray",Oe);class Ue extends $d{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Pt("SymbolLineVertexArray",Ue);class Ve extends kc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ve.prototype.size=12;class Ke extends V{get(s){return new Ve(this,s)}}Pt("TextAnchorOffsetArray",Ke);class rt extends kc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}rt.prototype.size=8;class nt extends W{get(s){return new rt(this,s)}}Pt("FeatureIndexArray",nt);class st extends Md{}class $t extends Md{}class mn extends Md{}class gt extends Fv{}class Ht extends Bv{}class Nt extends Kf{}class Kn extends jv{}class pn extends Uv{}class un extends Bn{}class gn extends w{}class Jr extends p{}class ur extends x{}class Ki extends E{}class wi extends H{}const li=Mr([{name:"a_pos",components:2,type:"Int16"}],4),{members:wa}=li;class mr{constructor(s=[]){this.segments=s}prepareSegment(s,f,m,_){let S=this.segments[this.segments.length-1];return s>mr.MAX_VERTEX_ARRAY_LENGTH&&ae(`Max vertices per segment is ${mr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!S||S.vertexLength+s>mr.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==_)&&(S={vertexOffset:f.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},_!==void 0&&(S.sortKey=_),this.segments.push(S)),S}get(){return this.segments}destroy(){for(const s of this.segments)for(const f in s.vaos)s.vaos[f].destroy()}static simpleSegment(s,f,m,_){return new mr([{vertexOffset:s,primitiveOffset:f,vertexLength:m,primitiveLength:_,vaos:{},sortKey:0}])}}function el(c,s){return 256*(c=U(Math.floor(c),0,255))+U(Math.floor(s),0,255)}mr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pt("SegmentVector",mr);const tl=Mr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Hu={exports:{}},Lc={exports:{}};Lc.exports=function(c,s){var f,m,_,S,C,A,L,B;for(m=c.length-(f=3&c.length),_=s,C=3432918353,A=461845907,B=0;B<m;)L=255&c.charCodeAt(B)|(255&c.charCodeAt(++B))<<8|(255&c.charCodeAt(++B))<<16|(255&c.charCodeAt(++B))<<24,++B,_=27492+(65535&(S=5*(65535&(_=(_^=L=(65535&(L=(L=(65535&L)*C+(((L>>>16)*C&65535)<<16)&4294967295)<<15|L>>>17))*A+(((L>>>16)*A&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(L=0,f){case 3:L^=(255&c.charCodeAt(B+2))<<16;case 2:L^=(255&c.charCodeAt(B+1))<<8;case 1:_^=L=(65535&(L=(L=(65535&(L^=255&c.charCodeAt(B)))*C+(((L>>>16)*C&65535)<<16)&4294967295)<<15|L>>>17))*A+(((L>>>16)*A&65535)<<16)&4294967295}return _^=c.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0};var Yf=Lc.exports,co={exports:{}};co.exports=function(c,s){for(var f,m=c.length,_=s^m,S=0;m>=4;)f=1540483477*(65535&(f=255&c.charCodeAt(S)|(255&c.charCodeAt(++S))<<8|(255&c.charCodeAt(++S))<<16|(255&c.charCodeAt(++S))<<24))+((1540483477*(f>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),m-=4,++S;switch(m){case 3:_^=(255&c.charCodeAt(S+2))<<16;case 2:_^=(255&c.charCodeAt(S+1))<<8;case 1:_=1540483477*(65535&(_^=255&c.charCodeAt(S)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};var Yi=Yf,Lo=co.exports;Hu.exports=Yi,Hu.exports.murmur3=Yi,Hu.exports.murmur2=Lo;var Dc=d(Hu.exports);class Qr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,f,m,_){this.ids.push(Si(s)),this.positions.push(f,m,_)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const f=Si(s);let m=0,_=this.ids.length-1;for(;m<_;){const C=m+_>>1;this.ids[C]>=f?_=C:m=C+1}const S=[];for(;this.ids[m]===f;)S.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return S}static serialize(s,f){const m=new Float64Array(s.ids),_=new Uint32Array(s.positions);return ea(m,_,0,m.length-1),f&&f.push(m.buffer,_.buffer),{ids:m,positions:_}}static deserialize(s){const f=new Qr;return f.ids=s.ids,f.positions=s.positions,f.indexed=!0,f}}function Si(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Dc(String(c))}function ea(c,s,f,m){for(;f<m;){const _=c[f+m>>1];let S=f-1,C=m+1;for(;;){do S++;while(c[S]<_);do C--;while(c[C]>_);if(S>=C)break;ei(c,S,C),ei(s,3*S,3*C),ei(s,3*S+1,3*C+1),ei(s,3*S+2,3*C+2)}C-f<m-C?(ea(c,s,f,C),f=C+1):(ea(c,s,C+1,m),m=C)}}function ei(c,s,f){const m=c[s];c[s]=c[f],c[f]=m}Pt("FeaturePositionMap",Qr);class Rc{constructor(s,f){this.gl=s.gl,this.location=f}}class Em extends Rc{constructor(s,f){super(s,f),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class rb extends Rc{constructor(s,f){super(s,f),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class ib extends Rc{constructor(s,f){super(s,f),this.current=Zn.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const GC=new Float32Array(16);function Vv(c){return[el(255*c.r,255*c.g),el(255*c.b,255*c.a)]}class nl{constructor(s,f,m){this.value=s,this.uniformNames=f.map(_=>`u_${_}`),this.type=m}setUniform(s,f,m){s.set(m.constantOr(this.value))}getBinding(s,f,m){return this.type==="color"?new ib(s,f):new Em(s,f)}}class zc{constructor(s,f){this.uniformNames=f.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=s.tlbr}setUniform(s,f,m,_){const S=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&s.set(S)}getBinding(s,f,m){return m.substr(0,9)==="u_pattern"?new rb(s,f):new Em(s,f)}}class rl{constructor(s,f,m,_){this.expression=s,this.type=m,this.maxValue=0,this.paintVertexAttributes=f.map(S=>({name:`a_${S}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(s,f,m,_,S){const C=this.paintVertexArray.length,A=this.expression.evaluate(new pr(0),f,{},_,[],S);this.paintVertexArray.resize(s),this._setPaintValue(C,s,A)}updatePaintArray(s,f,m,_){const S=this.expression.evaluate({zoom:0},m,_);this._setPaintValue(s,f,S)}_setPaintValue(s,f,m){if(this.type==="color"){const _=Vv(m);for(let S=s;S<f;S++)this.paintVertexArray.emplace(S,_[0],_[1])}else{for(let _=s;_<f;_++)this.paintVertexArray.emplace(_,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ya{constructor(s,f,m,_,S,C){this.expression=s,this.uniformNames=f.map(A=>`u_${A}_t`),this.type=m,this.useIntegerZoom=_,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=f.map(A=>({name:`a_${A}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(s,f,m,_,S){const C=this.expression.evaluate(new pr(this.zoom),f,{},_,[],S),A=this.expression.evaluate(new pr(this.zoom+1),f,{},_,[],S),L=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(L,s,C,A)}updatePaintArray(s,f,m,_){const S=this.expression.evaluate({zoom:this.zoom},m,_),C=this.expression.evaluate({zoom:this.zoom+1},m,_);this._setPaintValue(s,f,S,C)}_setPaintValue(s,f,m,_){if(this.type==="color"){const S=Vv(m),C=Vv(_);for(let A=s;A<f;A++)this.paintVertexArray.emplace(A,S[0],S[1],C[0],C[1])}else{for(let S=s;S<f;S++)this.paintVertexArray.emplace(S,m,_);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(_))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,f){const m=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,_=U(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);s.set(_)}getBinding(s,f,m){return new Em(s,f)}}class il{constructor(s,f,m,_,S,C){this.expression=s,this.type=f,this.useIntegerZoom=m,this.zoom=_,this.layerId=C,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(s,f,m){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(_,s,f.patterns&&f.patterns[this.layerId],m)}updatePaintArray(s,f,m,_,S){this._setPaintValues(s,f,m.patterns&&m.patterns[this.layerId],S)}_setPaintValues(s,f,m,_){if(!_||!m)return;const{min:S,mid:C,max:A}=m,L=_[S],B=_[C],q=_[A];if(L&&B&&q)for(let X=s;X<f;X++)this.zoomInPaintVertexArray.emplace(X,B.tl[0],B.tl[1],B.br[0],B.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],B.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(X,B.tl[0],B.tl[1],B.br[0],B.br[1],q.tl[0],q.tl[1],q.br[0],q.br[1],B.pixelRatio,q.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,tl.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,tl.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Gv{constructor(s,f,m){this.binders={},this._buffers=[];const _=[];for(const S in s.paint._values){if(!m(S))continue;const C=s.paint.get(S);if(!(C instanceof No&&Gf(C.property.specification)))continue;const A=Uq(S,s.type),L=C.value,B=C.property.specification.type,q=C.property.useIntegerZoom,X=C.property.specification["property-type"],Y=X==="cross-faded"||X==="cross-faded-data-driven";if(L.kind==="constant")this.binders[S]=Y?new zc(L.value,A):new nl(L.value,A,B),_.push(`/u_${S}`);else if(L.kind==="source"||Y){const te=gN(S,B,"source");this.binders[S]=Y?new il(L,B,q,f,te,s.id):new rl(L,A,B,te),_.push(`/a_${S}`)}else{const te=gN(S,B,"composite");this.binders[S]=new Ya(L,A,B,q,f,te),_.push(`/z_${S}`)}}this.cacheKey=_.sort().join("")}getMaxValue(s){const f=this.binders[s];return f instanceof rl||f instanceof Ya?f.maxValue:0}populatePaintArrays(s,f,m,_,S){for(const C in this.binders){const A=this.binders[C];(A instanceof rl||A instanceof Ya||A instanceof il)&&A.populatePaintArray(s,f,m,_,S)}}setConstantPatternPositions(s,f){for(const m in this.binders){const _=this.binders[m];_ instanceof zc&&_.setConstantPatternPositions(s,f)}}updatePaintArrays(s,f,m,_,S){let C=!1;for(const A in s){const L=f.getPositions(A);for(const B of L){const q=m.feature(B.index);for(const X in this.binders){const Y=this.binders[X];if((Y instanceof rl||Y instanceof Ya||Y instanceof il)&&Y.expression.isStateDependent===!0){const te=_.paint.get(X);Y.expression=te.value,Y.updatePaintArray(B.start,B.end,q,s[A],S),C=!0}}}}return C}defines(){const s=[];for(const f in this.binders){const m=this.binders[f];(m instanceof nl||m instanceof zc)&&s.push(...m.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return s}getBinderAttributes(){const s=[];for(const f in this.binders){const m=this.binders[f];if(m instanceof rl||m instanceof Ya)for(let _=0;_<m.paintVertexAttributes.length;_++)s.push(m.paintVertexAttributes[_].name);else if(m instanceof il)for(let _=0;_<tl.members.length;_++)s.push(tl.members[_].name)}return s}getBinderUniforms(){const s=[];for(const f in this.binders){const m=this.binders[f];if(m instanceof nl||m instanceof zc||m instanceof Ya)for(const _ of m.uniformNames)s.push(_)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,f){const m=[];for(const _ in this.binders){const S=this.binders[_];if(S instanceof nl||S instanceof zc||S instanceof Ya){for(const C of S.uniformNames)if(f[C]){const A=S.getBinding(s,f[C],C);m.push({name:C,property:_,binding:A})}}}return m}setUniforms(s,f,m,_){for(const{name:S,property:C,binding:A}of f)this.binders[C].setUniform(A,_,m.get(C),S)}updatePaintBuffers(s){this._buffers=[];for(const f in this.binders){const m=this.binders[f];if(s&&m instanceof il){const _=s.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(m instanceof rl||m instanceof Ya)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(s){for(const f in this.binders){const m=this.binders[f];(m instanceof rl||m instanceof Ya||m instanceof il)&&m.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const f=this.binders[s];(f instanceof rl||f instanceof Ya||f instanceof il)&&f.destroy()}}}class Ql{constructor(s,f,m=()=>!0){this.programConfigurations={};for(const _ of s)this.programConfigurations[_.id]=new Gv(_,f,m);this.needsUpload=!1,this._featureMap=new Qr,this._bufferOffset=0}populatePaintArrays(s,f,m,_,S,C){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(s,f,_,S,C);f.id!==void 0&&this._featureMap.add(f.id,m,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,f,m,_){for(const S of m)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(s,this._featureMap,f,S,_)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const f in this.programConfigurations)this.programConfigurations[f].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function Uq(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function gN(c,s,f){const m={color:{source:Kf,composite:ce},number:{source:z,composite:Kf}},_=function(S){return{"line-pattern":{source:Kn,composite:Kn},"fill-pattern":{source:Kn,composite:Kn},"fill-extrusion-pattern":{source:Kn,composite:Kn}}[S]}(c);return _&&_[f]||m[s][f]}Pt("ConstantBinder",nl),Pt("CrossFadedConstantBinder",zc),Pt("SourceExpressionBinder",rl),Pt("CrossFadedCompositeBinder",il),Pt("CompositeExpressionBinder",Ya),Pt("ProgramConfiguration",Gv,{omit:["_buffers"]}),Pt("ProgramConfigurationSet",Ql);const _i=8192,qC=Math.pow(2,14)-1,yN=-qC-1;function kd(c){const s=_i/c.extent,f=c.loadGeometry();for(let m=0;m<f.length;m++){const _=f[m];for(let S=0;S<_.length;S++){const C=_[S],A=Math.round(C.x*s),L=Math.round(C.y*s);C.x=U(A,yN,qC),C.y=U(L,yN,qC),(A<C.x||A>C.x+1||L<C.y||L>C.y+1)&&ae("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function Nd(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?kd(c):[]}}function ob(c,s,f,m,_){c.emplaceBack(2*s+(m+1)/2,2*f+(_+1)/2)}class WC{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(f=>f.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new $t,this.indexArray=new Ki,this.segments=new mr,this.programConfigurations=new Ql(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(s,f,m){const _=this.layers[0],S=[];let C=null,A=!1;_.type==="circle"&&(C=_.layout.get("circle-sort-key"),A=!C.isConstant());for(const{feature:L,id:B,index:q,sourceLayerIndex:X}of s){const Y=this.layers[0]._featureFilter.needGeometry,te=Nd(L,Y);if(!this.layers[0]._featureFilter.filter(new pr(this.zoom),te,m))continue;const re=A?C.evaluate(te,{},m):void 0,le={id:B,properties:L.properties,type:L.type,sourceLayerIndex:X,index:q,geometry:Y?te.geometry:kd(L),patterns:{},sortKey:re};S.push(le)}A&&S.sort((L,B)=>L.sortKey-B.sortKey);for(const L of S){const{geometry:B,index:q,sourceLayerIndex:X}=L,Y=s[q].feature;this.addFeature(L,B,q,m),f.featureIndex.insert(Y,B,q,X,this.index)}}update(s,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,wa),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,f,m,_){for(const S of f)for(const C of S){const A=C.x,L=C.y;if(A<0||A>=_i||L<0||L>=_i)continue;const B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),q=B.vertexLength;ob(this.layoutVertexArray,A,L,-1,-1),ob(this.layoutVertexArray,A,L,1,-1),ob(this.layoutVertexArray,A,L,1,1),ob(this.layoutVertexArray,A,L,-1,1),this.indexArray.emplaceBack(q,q+1,q+2),this.indexArray.emplaceBack(q,q+3,q+2),B.vertexLength+=4,B.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{},_)}}function vN(c,s){for(let f=0;f<c.length;f++)if(Cm(s,c[f]))return!0;for(let f=0;f<s.length;f++)if(Cm(c,s[f]))return!0;return!!HC(c,s)}function Vq(c,s,f){return!!Cm(c,s)||!!XC(s,c,f)}function _N(c,s){if(c.length===1)return bN(s,c[0]);for(let f=0;f<s.length;f++){const m=s[f];for(let _=0;_<m.length;_++)if(Cm(c,m[_]))return!0}for(let f=0;f<c.length;f++)if(bN(s,c[f]))return!0;for(let f=0;f<s.length;f++)if(HC(c,s[f]))return!0;return!1}function Gq(c,s,f){if(c.length>1){if(HC(c,s))return!0;for(let m=0;m<s.length;m++)if(XC(s[m],c,f))return!0}for(let m=0;m<c.length;m++)if(XC(c[m],s,f))return!0;return!1}function HC(c,s){if(c.length===0||s.length===0)return!1;for(let f=0;f<c.length-1;f++){const m=c[f],_=c[f+1];for(let S=0;S<s.length-1;S++)if(qq(m,_,s[S],s[S+1]))return!0}return!1}function qq(c,s,f,m){return be(c,f,m)!==be(s,f,m)&&be(c,s,f)!==be(c,s,m)}function XC(c,s,f){const m=f*f;if(s.length===1)return c.distSqr(s[0])<m;for(let _=1;_<s.length;_++)if(xN(c,s[_-1],s[_])<m)return!0;return!1}function xN(c,s,f){const m=s.distSqr(f);if(m===0)return c.distSqr(s);const _=((c.x-s.x)*(f.x-s.x)+(c.y-s.y)*(f.y-s.y))/m;return c.distSqr(_<0?s:_>1?f:f.sub(s)._mult(_)._add(s))}function bN(c,s){let f,m,_,S=!1;for(let C=0;C<c.length;C++){f=c[C];for(let A=0,L=f.length-1;A<f.length;L=A++)m=f[A],_=f[L],m.y>s.y!=_.y>s.y&&s.x<(_.x-m.x)*(s.y-m.y)/(_.y-m.y)+m.x&&(S=!S)}return S}function Cm(c,s){let f=!1;for(let m=0,_=c.length-1;m<c.length;_=m++){const S=c[m],C=c[_];S.y>s.y!=C.y>s.y&&s.x<(C.x-S.x)*(s.y-S.y)/(C.y-S.y)+S.x&&(f=!f)}return f}function Wq(c,s,f){const m=f[0],_=f[2];if(c.x<m.x&&s.x<m.x||c.x>_.x&&s.x>_.x||c.y<m.y&&s.y<m.y||c.y>_.y&&s.y>_.y)return!1;const S=be(c,s,f[0]);return S!==be(c,s,f[1])||S!==be(c,s,f[2])||S!==be(c,s,f[3])}function qv(c,s,f){const m=s.paint.get(c).value;return m.kind==="constant"?m.value:f.programConfigurations.get(s.id).getMaxValue(c)}function ab(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function sb(c,s,f,m,_){if(!s[0]&&!s[1])return c;const S=b.convert(s)._mult(_);f==="viewport"&&S._rotate(-m);const C=[];for(let A=0;A<c.length;A++)C.push(c[A].sub(S));return C}let wN,SN;Pt("CircleBucket",WC,{omit:["layers"]});var Hq={get paint(){return SN=SN||new si({"circle-radius":new Wt(Ge.paint_circle["circle-radius"]),"circle-color":new Wt(Ge.paint_circle["circle-color"]),"circle-blur":new Wt(Ge.paint_circle["circle-blur"]),"circle-opacity":new Wt(Ge.paint_circle["circle-opacity"]),"circle-translate":new Rt(Ge.paint_circle["circle-translate"]),"circle-translate-anchor":new Rt(Ge.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Rt(Ge.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Rt(Ge.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Wt(Ge.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Wt(Ge.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Wt(Ge.paint_circle["circle-stroke-opacity"])})},get layout(){return wN=wN||new si({"circle-sort-key":new Wt(Ge.layout_circle["circle-sort-key"])})}},ta=1e-6,Im=typeof Float32Array<"u"?Float32Array:Array;function ZC(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function EN(c,s,f){var m=s[0],_=s[1],S=s[2],C=s[3],A=s[4],L=s[5],B=s[6],q=s[7],X=s[8],Y=s[9],te=s[10],re=s[11],le=s[12],ve=s[13],xe=s[14],Me=s[15],Se=f[0],ke=f[1],Be=f[2],Je=f[3];return c[0]=Se*m+ke*A+Be*X+Je*le,c[1]=Se*_+ke*L+Be*Y+Je*ve,c[2]=Se*S+ke*B+Be*te+Je*xe,c[3]=Se*C+ke*q+Be*re+Je*Me,c[4]=(Se=f[4])*m+(ke=f[5])*A+(Be=f[6])*X+(Je=f[7])*le,c[5]=Se*_+ke*L+Be*Y+Je*ve,c[6]=Se*S+ke*B+Be*te+Je*xe,c[7]=Se*C+ke*q+Be*re+Je*Me,c[8]=(Se=f[8])*m+(ke=f[9])*A+(Be=f[10])*X+(Je=f[11])*le,c[9]=Se*_+ke*L+Be*Y+Je*ve,c[10]=Se*S+ke*B+Be*te+Je*xe,c[11]=Se*C+ke*q+Be*re+Je*Me,c[12]=(Se=f[12])*m+(ke=f[13])*A+(Be=f[14])*X+(Je=f[15])*le,c[13]=Se*_+ke*L+Be*Y+Je*ve,c[14]=Se*S+ke*B+Be*te+Je*xe,c[15]=Se*C+ke*q+Be*re+Je*Me,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var Wv,Xq=EN;function lb(c,s,f){var m=s[0],_=s[1],S=s[2],C=s[3];return c[0]=f[0]*m+f[4]*_+f[8]*S+f[12]*C,c[1]=f[1]*m+f[5]*_+f[9]*S+f[13]*C,c[2]=f[2]*m+f[6]*_+f[10]*S+f[14]*C,c[3]=f[3]*m+f[7]*_+f[11]*S+f[15]*C,c}Wv=new Im(4),Im!=Float32Array&&(Wv[0]=0,Wv[1]=0,Wv[2]=0,Wv[3]=0);class Zq extends Ka{constructor(s){super(s,Hq)}createBucket(s){return new WC(s)}queryRadius(s){const f=s;return qv("circle-radius",this,f)+qv("circle-stroke-width",this,f)+ab(this.paint.get("circle-translate"))}queryIntersectsFeature(s,f,m,_,S,C,A,L){const B=sb(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,A),q=this.paint.get("circle-radius").evaluate(f,m)+this.paint.get("circle-stroke-width").evaluate(f,m),X=this.paint.get("circle-pitch-alignment")==="map",Y=X?B:function(re,le){return re.map(ve=>CN(ve,le))}(B,L),te=X?q*A:q;for(const re of _)for(const le of re){const ve=X?le:CN(le,L);let xe=te;const Me=lb([],[le.x,le.y,0,1],L);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?xe*=Me[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(xe*=C.cameraToCenterDistance/Me[3]),Vq(Y,ve,xe))return!0}return!1}}function CN(c,s){const f=lb([],[c.x,c.y,0,1],s);return new b(f[0]/f[3],f[1]/f[3])}class IN extends WC{}let TN;Pt("HeatmapBucket",IN,{omit:["layers"]});var Kq={get paint(){return TN=TN||new si({"heatmap-radius":new Wt(Ge.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Wt(Ge.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Rt(Ge.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Rv(Ge.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Rt(Ge.paint_heatmap["heatmap-opacity"])})}};function KC(c,{width:s,height:f},m,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==s*f*m)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${s*f*m}`)}else _=new Uint8Array(s*f*m);return c.width=s,c.height=f,c.data=_,c}function PN(c,{width:s,height:f},m){if(s===c.width&&f===c.height)return;const _=KC({},{width:s,height:f},m);YC(c,_,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,f)},m),c.width=s,c.height=f,c.data=_.data}function YC(c,s,f,m,_,S){if(_.width===0||_.height===0)return s;if(_.width>c.width||_.height>c.height||f.x>c.width-_.width||f.y>c.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>s.width||_.height>s.height||m.x>s.width-_.width||m.y>s.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const C=c.data,A=s.data;if(C===A)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<_.height;L++){const B=((f.y+L)*c.width+f.x)*S,q=((m.y+L)*s.width+m.x)*S;for(let X=0;X<_.width*S;X++)A[q+X]=C[B+X]}return s}class Hv{constructor(s,f){KC(this,s,1,f)}resize(s){PN(this,s,1)}clone(){return new Hv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,f,m,_,S){YC(s,f,m,_,S,1)}}class vs{constructor(s,f){KC(this,s,4,f)}resize(s){PN(this,s,4)}replace(s,f){f?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new vs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,f,m,_,S){YC(s,f,m,_,S,4)}}function AN(c){const s={},f=c.resolution||256,m=c.clips?c.clips.length:1,_=c.image||new vs({width:f,height:m});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);const S=(C,A,L)=>{s[c.evaluationKey]=L;const B=c.expression.evaluate(s);_.data[C+A+0]=Math.floor(255*B.r/B.a),_.data[C+A+1]=Math.floor(255*B.g/B.a),_.data[C+A+2]=Math.floor(255*B.b/B.a),_.data[C+A+3]=Math.floor(255*B.a)};if(c.clips)for(let C=0,A=0;C<m;++C,A+=4*f)for(let L=0,B=0;L<f;L++,B+=4){const q=L/(f-1),{start:X,end:Y}=c.clips[C];S(A,B,X*(1-q)+Y*q)}else for(let C=0,A=0;C<f;C++,A+=4)S(0,A,C/(f-1));return _}Pt("AlphaImage",Hv),Pt("RGBAImage",vs);class Yq extends Ka{createBucket(s){return new IN(s)}constructor(s){super(s,Kq),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=AN({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ON;var Jq={get paint(){return ON=ON||new si({"hillshade-illumination-direction":new Rt(Ge.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Rt(Ge.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Rt(Ge.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Rt(Ge.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Rt(Ge.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Rt(Ge.paint_hillshade["hillshade-accent-color"])})}};class Qq extends Ka{constructor(s){super(s,Jq)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const eW=Mr([{name:"a_pos",components:2,type:"Int16"}],4),{members:tW}=eW;var JC={exports:{}};function ub(c,s,f){f=f||2;var m,_,S,C,A,L,B,q=s&&s.length,X=q?s[0]*f:c.length,Y=MN(c,0,X,f,!0),te=[];if(!Y||Y.next===Y.prev)return te;if(q&&(Y=function(le,ve,xe,Me){var Se,ke,Be,Je=[];for(Se=0,ke=ve.length;Se<ke;Se++)(Be=MN(le,ve[Se]*Me,Se<ke-1?ve[Se+1]*Me:le.length,Me,!1))===Be.next&&(Be.steiner=!0),Je.push(uW(Be));for(Je.sort(aW),Se=0;Se<Je.length;Se++)xe=sW(Je[Se],xe);return xe}(c,s,Y,f)),c.length>80*f){m=S=c[0],_=C=c[1];for(var re=f;re<X;re+=f)(A=c[re])<m&&(m=A),(L=c[re+1])<_&&(_=L),A>S&&(S=A),L>C&&(C=L);B=(B=Math.max(S-m,C-_))!==0?32767/B:0}return Xv(Y,te,f,m,_,B,0),te}function MN(c,s,f,m,_){var S,C;if(_===tI(c,s,f,m)>0)for(S=s;S<f;S+=m)C=NN(S,c[S],c[S+1],C);else for(S=f-m;S>=s;S-=m)C=NN(S,c[S],c[S+1],C);return C&&cb(C,C.next)&&(Kv(C),C=C.next),C}function Ld(c,s){if(!c)return c;s||(s=c);var f,m=c;do if(f=!1,m.steiner||!cb(m,m.next)&&ui(m.prev,m,m.next)!==0)m=m.next;else{if(Kv(m),(m=s=m.prev)===m.next)break;f=!0}while(f||m!==s);return s}function Xv(c,s,f,m,_,S,C){if(c){!C&&S&&function(q,X,Y,te){var re=q;do re.z===0&&(re.z=QC(re.x,re.y,X,Y,te)),re.prevZ=re.prev,re.nextZ=re.next,re=re.next;while(re!==q);re.prevZ.nextZ=null,re.prevZ=null,function(le){var ve,xe,Me,Se,ke,Be,Je,bt,kt=1;do{for(xe=le,le=null,ke=null,Be=0;xe;){for(Be++,Me=xe,Je=0,ve=0;ve<kt&&(Je++,Me=Me.nextZ);ve++);for(bt=kt;Je>0||bt>0&&Me;)Je!==0&&(bt===0||!Me||xe.z<=Me.z)?(Se=xe,xe=xe.nextZ,Je--):(Se=Me,Me=Me.nextZ,bt--),ke?ke.nextZ=Se:le=Se,Se.prevZ=ke,ke=Se;xe=Me}ke.nextZ=null,kt*=2}while(Be>1)}(re)}(c,m,_,S);for(var A,L,B=c;c.prev!==c.next;)if(A=c.prev,L=c.next,S?rW(c,m,_,S):nW(c))s.push(A.i/f|0),s.push(c.i/f|0),s.push(L.i/f|0),Kv(c),c=L.next,B=L.next;else if((c=L)===B){C?C===1?Xv(c=iW(Ld(c),s,f),s,f,m,_,S,2):C===2&&oW(c,s,f,m,_,S):Xv(Ld(c),s,f,m,_,S,1);break}}}function nW(c){var s=c.prev,f=c,m=c.next;if(ui(s,f,m)>=0)return!1;for(var _=s.x,S=f.x,C=m.x,A=s.y,L=f.y,B=m.y,q=_<S?_<C?_:C:S<C?S:C,X=A<L?A<B?A:B:L<B?L:B,Y=_>S?_>C?_:C:S>C?S:C,te=A>L?A>B?A:B:L>B?L:B,re=m.next;re!==s;){if(re.x>=q&&re.x<=Y&&re.y>=X&&re.y<=te&&Tm(_,A,S,L,C,B,re.x,re.y)&&ui(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function rW(c,s,f,m){var _=c.prev,S=c,C=c.next;if(ui(_,S,C)>=0)return!1;for(var A=_.x,L=S.x,B=C.x,q=_.y,X=S.y,Y=C.y,te=A<L?A<B?A:B:L<B?L:B,re=q<X?q<Y?q:Y:X<Y?X:Y,le=A>L?A>B?A:B:L>B?L:B,ve=q>X?q>Y?q:Y:X>Y?X:Y,xe=QC(te,re,s,f,m),Me=QC(le,ve,s,f,m),Se=c.prevZ,ke=c.nextZ;Se&&Se.z>=xe&&ke&&ke.z<=Me;){if(Se.x>=te&&Se.x<=le&&Se.y>=re&&Se.y<=ve&&Se!==_&&Se!==C&&Tm(A,q,L,X,B,Y,Se.x,Se.y)&&ui(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,ke.x>=te&&ke.x<=le&&ke.y>=re&&ke.y<=ve&&ke!==_&&ke!==C&&Tm(A,q,L,X,B,Y,ke.x,ke.y)&&ui(ke.prev,ke,ke.next)>=0))return!1;ke=ke.nextZ}for(;Se&&Se.z>=xe;){if(Se.x>=te&&Se.x<=le&&Se.y>=re&&Se.y<=ve&&Se!==_&&Se!==C&&Tm(A,q,L,X,B,Y,Se.x,Se.y)&&ui(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;ke&&ke.z<=Me;){if(ke.x>=te&&ke.x<=le&&ke.y>=re&&ke.y<=ve&&ke!==_&&ke!==C&&Tm(A,q,L,X,B,Y,ke.x,ke.y)&&ui(ke.prev,ke,ke.next)>=0)return!1;ke=ke.nextZ}return!0}function iW(c,s,f){var m=c;do{var _=m.prev,S=m.next.next;!cb(_,S)&&$N(_,m,m.next,S)&&Zv(_,S)&&Zv(S,_)&&(s.push(_.i/f|0),s.push(m.i/f|0),s.push(S.i/f|0),Kv(m),Kv(m.next),m=c=S),m=m.next}while(m!==c);return Ld(m)}function oW(c,s,f,m,_,S){var C=c;do{for(var A=C.next.next;A!==C.prev;){if(C.i!==A.i&&cW(C,A)){var L=kN(C,A);return C=Ld(C,C.next),L=Ld(L,L.next),Xv(C,s,f,m,_,S,0),void Xv(L,s,f,m,_,S,0)}A=A.next}C=C.next}while(C!==c)}function aW(c,s){return c.x-s.x}function sW(c,s){var f=function(_,S){var C,A=S,L=_.x,B=_.y,q=-1/0;do{if(B<=A.y&&B>=A.next.y&&A.next.y!==A.y){var X=A.x+(B-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(X<=L&&X>q&&(q=X,C=A.x<A.next.x?A:A.next,X===L))return C}A=A.next}while(A!==S);if(!C)return null;var Y,te=C,re=C.x,le=C.y,ve=1/0;A=C;do L>=A.x&&A.x>=re&&L!==A.x&&Tm(B<le?L:q,B,re,le,B<le?q:L,B,A.x,A.y)&&(Y=Math.abs(B-A.y)/(L-A.x),Zv(A,_)&&(Y<ve||Y===ve&&(A.x>C.x||A.x===C.x&&lW(C,A)))&&(C=A,ve=Y)),A=A.next;while(A!==te);return C}(c,s);if(!f)return s;var m=kN(f,c);return Ld(m,m.next),Ld(f,f.next)}function lW(c,s){return ui(c.prev,c,s.prev)<0&&ui(s.next,c,c.next)<0}function QC(c,s,f,m,_){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-f)*_|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-m)*_|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function uW(c){var s=c,f=c;do(s.x<f.x||s.x===f.x&&s.y<f.y)&&(f=s),s=s.next;while(s!==c);return f}function Tm(c,s,f,m,_,S,C,A){return(_-C)*(s-A)>=(c-C)*(S-A)&&(c-C)*(m-A)>=(f-C)*(s-A)&&(f-C)*(S-A)>=(_-C)*(m-A)}function cW(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(f,m){var _=f;do{if(_.i!==f.i&&_.next.i!==f.i&&_.i!==m.i&&_.next.i!==m.i&&$N(_,_.next,f,m))return!0;_=_.next}while(_!==f);return!1}(c,s)&&(Zv(c,s)&&Zv(s,c)&&function(f,m){var _=f,S=!1,C=(f.x+m.x)/2,A=(f.y+m.y)/2;do _.y>A!=_.next.y>A&&_.next.y!==_.y&&C<(_.next.x-_.x)*(A-_.y)/(_.next.y-_.y)+_.x&&(S=!S),_=_.next;while(_!==f);return S}(c,s)&&(ui(c.prev,c,s.prev)||ui(c,s.prev,s))||cb(c,s)&&ui(c.prev,c,c.next)>0&&ui(s.prev,s,s.next)>0)}function ui(c,s,f){return(s.y-c.y)*(f.x-s.x)-(s.x-c.x)*(f.y-s.y)}function cb(c,s){return c.x===s.x&&c.y===s.y}function $N(c,s,f,m){var _=hb(ui(c,s,f)),S=hb(ui(c,s,m)),C=hb(ui(f,m,c)),A=hb(ui(f,m,s));return _!==S&&C!==A||!(_!==0||!fb(c,f,s))||!(S!==0||!fb(c,m,s))||!(C!==0||!fb(f,c,m))||!(A!==0||!fb(f,s,m))}function fb(c,s,f){return s.x<=Math.max(c.x,f.x)&&s.x>=Math.min(c.x,f.x)&&s.y<=Math.max(c.y,f.y)&&s.y>=Math.min(c.y,f.y)}function hb(c){return c>0?1:c<0?-1:0}function Zv(c,s){return ui(c.prev,c,c.next)<0?ui(c,s,c.next)>=0&&ui(c,c.prev,s)>=0:ui(c,s,c.prev)<0||ui(c,c.next,s)<0}function kN(c,s){var f=new eI(c.i,c.x,c.y),m=new eI(s.i,s.x,s.y),_=c.next,S=s.prev;return c.next=s,s.prev=c,f.next=_,_.prev=f,m.next=f,f.prev=m,S.next=m,m.prev=S,m}function NN(c,s,f,m){var _=new eI(c,s,f);return m?(_.next=m.next,_.prev=m,m.next.prev=_,m.next=_):(_.prev=_,_.next=_),_}function Kv(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function eI(c,s,f){this.i=c,this.x=s,this.y=f,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tI(c,s,f,m){for(var _=0,S=s,C=f-m;S<f;S+=m)_+=(c[C]-c[S])*(c[S+1]+c[C+1]),C=S;return _}JC.exports=ub,JC.exports.default=ub,ub.deviation=function(c,s,f,m){var _=s&&s.length,S=Math.abs(tI(c,0,_?s[0]*f:c.length,f));if(_)for(var C=0,A=s.length;C<A;C++)S-=Math.abs(tI(c,s[C]*f,C<A-1?s[C+1]*f:c.length,f));var L=0;for(C=0;C<m.length;C+=3){var B=m[C]*f,q=m[C+1]*f,X=m[C+2]*f;L+=Math.abs((c[B]-c[X])*(c[q+1]-c[B+1])-(c[B]-c[q])*(c[X+1]-c[B+1]))}return S===0&&L===0?0:Math.abs((L-S)/S)},ub.flatten=function(c){for(var s=c[0][0].length,f={vertices:[],holes:[],dimensions:s},m=0,_=0;_<c.length;_++){for(var S=0;S<c[_].length;S++)for(var C=0;C<s;C++)f.vertices.push(c[_][S][C]);_>0&&f.holes.push(m+=c[_-1].length)}return f};var LN=d(JC.exports);function fW(c,s,f,m,_){DN(c,s,f||0,m||c.length-1,_||hW)}function DN(c,s,f,m,_){for(;m>f;){if(m-f>600){var S=m-f+1,C=s-f+1,A=Math.log(S),L=.5*Math.exp(2*A/3),B=.5*Math.sqrt(A*L*(S-L)/S)*(C-S/2<0?-1:1);DN(c,s,Math.max(f,Math.floor(s-C*L/S+B)),Math.min(m,Math.floor(s+(S-C)*L/S+B)),_)}var q=c[s],X=f,Y=m;for(Yv(c,f,s),_(c[m],q)>0&&Yv(c,f,m);X<Y;){for(Yv(c,X,Y),X++,Y--;_(c[X],q)<0;)X++;for(;_(c[Y],q)>0;)Y--}_(c[f],q)===0?Yv(c,f,Y):Yv(c,++Y,m),Y<=s&&(f=Y+1),s<=Y&&(m=Y-1)}}function Yv(c,s,f){var m=c[s];c[s]=c[f],c[f]=m}function hW(c,s){return c<s?-1:c>s?1:0}function nI(c,s){const f=c.length;if(f<=1)return[c];const m=[];let _,S;for(let C=0;C<f;C++){const A=Te(c[C]);A!==0&&(c[C].area=Math.abs(A),S===void 0&&(S=A<0),S===A<0?(_&&m.push(_),_=[c[C]]):_.push(c[C]))}if(_&&m.push(_),s>1)for(let C=0;C<m.length;C++)m[C].length<=s||(fW(m[C],s,1,m[C].length-1,dW),m[C]=m[C].slice(0,s));return m}function dW(c,s){return s.area-c.area}function rI(c,s,f){const m=f.patternDependencies;let _=!1;for(const S of s){const C=S.paint.get(`${c}-pattern`);C.isConstant()||(_=!0);const A=C.constantOr(null);A&&(_=!0,m[A.to]=!0,m[A.from]=!0)}return _}function iI(c,s,f,m,_){const S=_.patternDependencies;for(const C of s){const A=C.paint.get(`${c}-pattern`).value;if(A.kind!=="constant"){let L=A.evaluate({zoom:m-1},f,{},_.availableImages),B=A.evaluate({zoom:m},f,{},_.availableImages),q=A.evaluate({zoom:m+1},f,{},_.availableImages);L=L&&L.name?L.name:L,B=B&&B.name?B.name:B,q=q&&q.name?q.name:q,S[L]=!0,S[B]=!0,S[q]=!0,f.patterns[C.id]={min:L,mid:B,max:q}}}return f}class oI{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(f=>f.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new mn,this.indexArray=new Ki,this.indexArray2=new wi,this.programConfigurations=new Ql(s.layers,s.zoom),this.segments=new mr,this.segments2=new mr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(s,f,m){this.hasPattern=rI("fill",this.layers,f);const _=this.layers[0].layout.get("fill-sort-key"),S=!_.isConstant(),C=[];for(const{feature:A,id:L,index:B,sourceLayerIndex:q}of s){const X=this.layers[0]._featureFilter.needGeometry,Y=Nd(A,X);if(!this.layers[0]._featureFilter.filter(new pr(this.zoom),Y,m))continue;const te=S?_.evaluate(Y,{},m,f.availableImages):void 0,re={id:L,properties:A.properties,type:A.type,sourceLayerIndex:q,index:B,geometry:X?Y.geometry:kd(A),patterns:{},sortKey:te};C.push(re)}S&&C.sort((A,L)=>A.sortKey-L.sortKey);for(const A of C){const{geometry:L,index:B,sourceLayerIndex:q}=A;if(this.hasPattern){const X=iI("fill",this.layers,A,this.zoom,f);this.patternFeatures.push(X)}else this.addFeature(A,L,B,m,{});f.featureIndex.insert(s[B].feature,L,B,q,this.index)}}update(s,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,f,this.stateDependentLayers,m)}addFeatures(s,f,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,tW),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,f,m,_,S){for(const C of nI(f,500)){let A=0;for(const te of C)A+=te.length;const L=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),B=L.vertexLength,q=[],X=[];for(const te of C){if(te.length===0)continue;te!==C[0]&&X.push(q.length/2);const re=this.segments2.prepareSegment(te.length,this.layoutVertexArray,this.indexArray2),le=re.vertexLength;this.layoutVertexArray.emplaceBack(te[0].x,te[0].y),this.indexArray2.emplaceBack(le+te.length-1,le),q.push(te[0].x),q.push(te[0].y);for(let ve=1;ve<te.length;ve++)this.layoutVertexArray.emplaceBack(te[ve].x,te[ve].y),this.indexArray2.emplaceBack(le+ve-1,le+ve),q.push(te[ve].x),q.push(te[ve].y);re.vertexLength+=te.length,re.primitiveLength+=te.length}const Y=LN(q,X);for(let te=0;te<Y.length;te+=3)this.indexArray.emplaceBack(B+Y[te],B+Y[te+1],B+Y[te+2]);L.vertexLength+=A,L.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,S,_)}}let RN,zN;Pt("FillBucket",oI,{omit:["layers","patternFeatures"]});var pW={get paint(){return zN=zN||new si({"fill-antialias":new Rt(Ge.paint_fill["fill-antialias"]),"fill-opacity":new Wt(Ge.paint_fill["fill-opacity"]),"fill-color":new Wt(Ge.paint_fill["fill-color"]),"fill-outline-color":new Wt(Ge.paint_fill["fill-outline-color"]),"fill-translate":new Rt(Ge.paint_fill["fill-translate"]),"fill-translate-anchor":new Rt(Ge.paint_fill["fill-translate-anchor"]),"fill-pattern":new Od(Ge.paint_fill["fill-pattern"])})},get layout(){return RN=RN||new si({"fill-sort-key":new Wt(Ge.layout_fill["fill-sort-key"])})}};class mW extends Ka{constructor(s){super(s,pW)}recalculate(s,f){super.recalculate(s,f);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new oI(s)}queryRadius(){return ab(this.paint.get("fill-translate"))}queryIntersectsFeature(s,f,m,_,S,C,A){return _N(sb(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,A),_)}isTileClipped(){return!0}}const gW=Mr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),yW=Mr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:vW}=gW;var Jf={},_W=g,FN=Pm;function Pm(c,s,f,m,_){this.properties={},this.extent=f,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=_,c.readFields(xW,this,s)}function xW(c,s,f){c==1?s.id=f.readVarint():c==2?function(m,_){for(var S=m.readVarint()+m.pos;m.pos<S;){var C=_._keys[m.readVarint()],A=_._values[m.readVarint()];_.properties[C]=A}}(f,s):c==3?s.type=f.readVarint():c==4&&(s._geometry=f.pos)}function bW(c){for(var s,f,m=0,_=0,S=c.length,C=S-1;_<S;C=_++)m+=((f=c[C]).x-(s=c[_]).x)*(s.y+f.y);return m}Pm.types=["Unknown","Point","LineString","Polygon"],Pm.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var s,f=c.readVarint()+c.pos,m=1,_=0,S=0,C=0,A=[];c.pos<f;){if(_<=0){var L=c.readVarint();m=7&L,_=L>>3}if(_--,m===1||m===2)S+=c.readSVarint(),C+=c.readSVarint(),m===1&&(s&&A.push(s),s=[]),s.push(new _W(S,C));else{if(m!==7)throw new Error("unknown command "+m);s&&s.push(s[0].clone())}}return s&&A.push(s),A},Pm.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var s=c.readVarint()+c.pos,f=1,m=0,_=0,S=0,C=1/0,A=-1/0,L=1/0,B=-1/0;c.pos<s;){if(m<=0){var q=c.readVarint();f=7&q,m=q>>3}if(m--,f===1||f===2)(_+=c.readSVarint())<C&&(C=_),_>A&&(A=_),(S+=c.readSVarint())<L&&(L=S),S>B&&(B=S);else if(f!==7)throw new Error("unknown command "+f)}return[C,L,A,B]},Pm.prototype.toGeoJSON=function(c,s,f){var m,_,S=this.extent*Math.pow(2,f),C=this.extent*c,A=this.extent*s,L=this.loadGeometry(),B=Pm.types[this.type];function q(te){for(var re=0;re<te.length;re++){var le=te[re];te[re]=[360*(le.x+C)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+A)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var X=[];for(m=0;m<L.length;m++)X[m]=L[m][0];q(L=X);break;case 2:for(m=0;m<L.length;m++)q(L[m]);break;case 3:for(L=function(te){var re=te.length;if(re<=1)return[te];for(var le,ve,xe=[],Me=0;Me<re;Me++){var Se=bW(te[Me]);Se!==0&&(ve===void 0&&(ve=Se<0),ve===Se<0?(le&&xe.push(le),le=[te[Me]]):le.push(te[Me]))}return le&&xe.push(le),xe}(L),m=0;m<L.length;m++)for(_=0;_<L[m].length;_++)q(L[m][_])}L.length===1?L=L[0]:B="Multi"+B;var Y={type:"Feature",geometry:{type:B,coordinates:L},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var wW=FN,BN=jN;function jN(c,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(SW,this,s),this.length=this._features.length}function SW(c,s,f){c===15?s.version=f.readVarint():c===1?s.name=f.readString():c===5?s.extent=f.readVarint():c===2?s._features.push(f.pos):c===3?s._keys.push(f.readString()):c===4&&s._values.push(function(m){for(var _=null,S=m.readVarint()+m.pos;m.pos<S;){var C=m.readVarint()>>3;_=C===1?m.readString():C===2?m.readFloat():C===3?m.readDouble():C===4?m.readVarint64():C===5?m.readVarint():C===6?m.readSVarint():C===7?m.readBoolean():null}return _}(f))}jN.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var s=this._pbf.readVarint()+this._pbf.pos;return new wW(this._pbf,s,this.extent,this._keys,this._values)};var EW=BN;function CW(c,s,f){if(c===3){var m=new EW(f,f.readVarint()+f.pos);m.length&&(s[m.name]=m)}}Jf.VectorTile=function(c,s){this.layers=c.readFields(CW,{},s)},Jf.VectorTileFeature=FN,Jf.VectorTileLayer=BN;const IW=Jf.VectorTileFeature.types,aI=Math.pow(2,13);function Jv(c,s,f,m,_,S,C,A){c.emplaceBack(s,f,2*Math.floor(m*aI)+C,_*aI*2,S*aI*2,Math.round(A))}class sI{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(f=>f.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new gt,this.centroidVertexArray=new st,this.indexArray=new Ki,this.programConfigurations=new Ql(s.layers,s.zoom),this.segments=new mr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(s,f,m){this.features=[],this.hasPattern=rI("fill-extrusion",this.layers,f);for(const{feature:_,id:S,index:C,sourceLayerIndex:A}of s){const L=this.layers[0]._featureFilter.needGeometry,B=Nd(_,L);if(!this.layers[0]._featureFilter.filter(new pr(this.zoom),B,m))continue;const q={id:S,sourceLayerIndex:A,index:C,geometry:L?B.geometry:kd(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(iI("fill-extrusion",this.layers,q,this.zoom,f)):this.addFeature(q,q.geometry,C,m,{}),f.featureIndex.insert(_,q.geometry,C,A,this.index,!0)}}addFeatures(s,f,m){for(const _ of this.features){const{geometry:S}=_;this.addFeature(_,S,_.index,f,m)}}update(s,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,vW),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,yW.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,f,m,_,S){const C={x:0,y:0,vertexCount:0};for(const A of nI(f,500)){let L=0;for(const re of A)L+=re.length;let B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const re of A){if(re.length===0||PW(re))continue;let le=0;for(let ve=0;ve<re.length;ve++){const xe=re[ve];if(ve>=1){const Me=re[ve-1];if(!TW(xe,Me)){B.vertexLength+4>mr.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Se=xe.sub(Me)._perp()._unit(),ke=Me.dist(xe);le+ke>32768&&(le=0),Jv(this.layoutVertexArray,xe.x,xe.y,Se.x,Se.y,0,0,le),Jv(this.layoutVertexArray,xe.x,xe.y,Se.x,Se.y,0,1,le),C.x+=2*xe.x,C.y+=2*xe.y,C.vertexCount+=2,le+=ke,Jv(this.layoutVertexArray,Me.x,Me.y,Se.x,Se.y,0,0,le),Jv(this.layoutVertexArray,Me.x,Me.y,Se.x,Se.y,0,1,le),C.x+=2*Me.x,C.y+=2*Me.y,C.vertexCount+=2;const Be=B.vertexLength;this.indexArray.emplaceBack(Be,Be+2,Be+1),this.indexArray.emplaceBack(Be+1,Be+2,Be+3),B.vertexLength+=4,B.primitiveLength+=2}}}}if(B.vertexLength+L>mr.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(L,this.layoutVertexArray,this.indexArray)),IW[s.type]!=="Polygon")continue;const q=[],X=[],Y=B.vertexLength;for(const re of A)if(re.length!==0){re!==A[0]&&X.push(q.length/2);for(let le=0;le<re.length;le++){const ve=re[le];Jv(this.layoutVertexArray,ve.x,ve.y,0,0,1,1,0),C.x+=ve.x,C.y+=ve.y,C.vertexCount+=1,q.push(ve.x),q.push(ve.y)}}const te=LN(q,X);for(let re=0;re<te.length;re+=3)this.indexArray.emplaceBack(Y+te[re],Y+te[re+2],Y+te[re+1]);B.primitiveLength+=te.length/3,B.vertexLength+=L}for(let A=0;A<C.vertexCount;A++)this.centroidVertexArray.emplaceBack(Math.floor(C.x/C.vertexCount),Math.floor(C.y/C.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,S,_)}}function TW(c,s){return c.x===s.x&&(c.x<0||c.x>_i)||c.y===s.y&&(c.y<0||c.y>_i)}function PW(c){return c.every(s=>s.x<0)||c.every(s=>s.x>_i)||c.every(s=>s.y<0)||c.every(s=>s.y>_i)}let UN;Pt("FillExtrusionBucket",sI,{omit:["layers","features"]});var AW={get paint(){return UN=UN||new si({"fill-extrusion-opacity":new Rt(Ge["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Wt(Ge["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Rt(Ge["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Rt(Ge["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Od(Ge["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Wt(Ge["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Wt(Ge["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Rt(Ge["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class OW extends Ka{constructor(s){super(s,AW)}createBucket(s){return new sI(s)}queryRadius(){return ab(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,f,m,_,S,C,A,L){const B=sb(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,A),q=this.paint.get("fill-extrusion-height").evaluate(f,m),X=this.paint.get("fill-extrusion-base").evaluate(f,m),Y=function(re,le,ve,xe){const Me=[];for(const Se of re){const ke=[Se.x,Se.y,0,1];lb(ke,ke,le),Me.push(new b(ke[0]/ke[3],ke[1]/ke[3]))}return Me}(B,L),te=function(re,le,ve,xe){const Me=[],Se=[],ke=xe[8]*le,Be=xe[9]*le,Je=xe[10]*le,bt=xe[11]*le,kt=xe[8]*ve,_t=xe[9]*ve,yt=xe[10]*ve,ct=xe[11]*ve;for(const At of re){const pt=[],it=[];for(const Gt of At){const Lt=Gt.x,fn=Gt.y,gr=xe[0]*Lt+xe[4]*fn+xe[12],Sr=xe[1]*Lt+xe[5]*fn+xe[13],Ci=xe[2]*Lt+xe[6]*fn+xe[14],Ja=xe[3]*Lt+xe[7]*fn+xe[15],na=Ci+Je,xi=Ja+bt,Ji=gr+kt,ho=Sr+_t,ra=Ci+yt,ia=Ja+ct,Ii=new b((gr+ke)/xi,(Sr+Be)/xi);Ii.z=na/xi,pt.push(Ii);const Ti=new b(Ji/ia,ho/ia);Ti.z=ra/ia,it.push(Ti)}Me.push(pt),Se.push(it)}return[Me,Se]}(_,X,q,L);return function(re,le,ve){let xe=1/0;_N(ve,le)&&(xe=VN(ve,le[0]));for(let Me=0;Me<le.length;Me++){const Se=le[Me],ke=re[Me];for(let Be=0;Be<Se.length-1;Be++){const Je=Se[Be],bt=[Je,Se[Be+1],ke[Be+1],ke[Be],Je];vN(ve,bt)&&(xe=Math.min(xe,VN(ve,bt)))}}return xe!==1/0&&xe}(te[0],te[1],Y)}}function Qv(c,s){return c.x*s.x+c.y*s.y}function VN(c,s){if(c.length===1){let f=0;const m=s[f++];let _;for(;!_||m.equals(_);)if(_=s[f++],!_)return 1/0;for(;f<s.length;f++){const S=s[f],C=c[0],A=_.sub(m),L=S.sub(m),B=C.sub(m),q=Qv(A,A),X=Qv(A,L),Y=Qv(L,L),te=Qv(B,A),re=Qv(B,L),le=q*Y-X*X,ve=(Y*te-X*re)/le,xe=(q*re-X*te)/le,Me=m.z*(1-ve-xe)+_.z*ve+S.z*xe;if(isFinite(Me))return Me}return 1/0}{let f=1/0;for(const m of s)f=Math.min(f,m.z);return f}}const MW=Mr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:$W}=MW,kW=Mr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:NW}=kW,LW=Jf.VectorTileFeature.types,DW=Math.cos(Math.PI/180*37.5),GN=Math.pow(2,14)/.5;class lI{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(f=>f.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new Ht,this.layoutVertexArray2=new Nt,this.indexArray=new Ki,this.programConfigurations=new Ql(s.layers,s.zoom),this.segments=new mr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(s,f,m){this.hasPattern=rI("line",this.layers,f);const _=this.layers[0].layout.get("line-sort-key"),S=!_.isConstant(),C=[];for(const{feature:A,id:L,index:B,sourceLayerIndex:q}of s){const X=this.layers[0]._featureFilter.needGeometry,Y=Nd(A,X);if(!this.layers[0]._featureFilter.filter(new pr(this.zoom),Y,m))continue;const te=S?_.evaluate(Y,{},m):void 0,re={id:L,properties:A.properties,type:A.type,sourceLayerIndex:q,index:B,geometry:X?Y.geometry:kd(A),patterns:{},sortKey:te};C.push(re)}S&&C.sort((A,L)=>A.sortKey-L.sortKey);for(const A of C){const{geometry:L,index:B,sourceLayerIndex:q}=A;if(this.hasPattern){const X=iI("line",this.layers,A,this.zoom,f);this.patternFeatures.push(X)}else this.addFeature(A,L,B,m,{});f.featureIndex.insert(s[B].feature,L,B,q,this.index)}}update(s,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,f,this.stateDependentLayers,m)}addFeatures(s,f,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,NW)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,$W),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,f,m,_,S){const C=this.layers[0].layout,A=C.get("line-join").evaluate(s,{}),L=C.get("line-cap"),B=C.get("line-miter-limit"),q=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const X of f)this.addLine(X,s,A,L,B,q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,S,_)}addLine(s,f,m,_,S,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<s.length-1;xe++)this.totalDistance+=s[xe].dist(s[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=LW[f.type]==="Polygon";let L=s.length;for(;L>=2&&s[L-1].equals(s[L-2]);)L--;let B=0;for(;B<L-1&&s[B].equals(s[B+1]);)B++;if(L<(A?3:2))return;m==="bevel"&&(S=1.05);const q=this.overscaling<=16?15*_i/(512*this.overscaling):0,X=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let Y,te,re,le,ve;this.e1=this.e2=-1,A&&(Y=s[L-2],ve=s[B].sub(Y)._unit()._perp());for(let xe=B;xe<L;xe++){if(re=xe===L-1?A?s[B+1]:void 0:s[xe+1],re&&s[xe].equals(re))continue;ve&&(le=ve),Y&&(te=Y),Y=s[xe],ve=re?re.sub(Y)._unit()._perp():le,le=le||ve;let Me=le.add(ve);Me.x===0&&Me.y===0||Me._unit();const Se=le.x*ve.x+le.y*ve.y,ke=Me.x*ve.x+Me.y*ve.y,Be=ke!==0?1/ke:1/0,Je=2*Math.sqrt(2-2*ke),bt=ke<DW&&te&&re,kt=le.x*ve.y-le.y*ve.x>0;if(bt&&xe>B){const ct=Y.dist(te);if(ct>2*q){const At=Y.sub(Y.sub(te)._mult(q/ct)._round());this.updateDistance(te,At),this.addCurrentVertex(At,le,0,0,X),te=At}}const _t=te&&re;let yt=_t?m:A?"butt":_;if(_t&&yt==="round"&&(Be<C?yt="miter":Be<=2&&(yt="fakeround")),yt==="miter"&&Be>S&&(yt="bevel"),yt==="bevel"&&(Be>2&&(yt="flipbevel"),Be<S&&(yt="miter")),te&&this.updateDistance(te,Y),yt==="miter")Me._mult(Be),this.addCurrentVertex(Y,Me,0,0,X);else if(yt==="flipbevel"){if(Be>100)Me=ve.mult(-1);else{const ct=Be*le.add(ve).mag()/le.sub(ve).mag();Me._perp()._mult(ct*(kt?-1:1))}this.addCurrentVertex(Y,Me,0,0,X),this.addCurrentVertex(Y,Me.mult(-1),0,0,X)}else if(yt==="bevel"||yt==="fakeround"){const ct=-Math.sqrt(Be*Be-1),At=kt?ct:0,pt=kt?0:ct;if(te&&this.addCurrentVertex(Y,le,At,pt,X),yt==="fakeround"){const it=Math.round(180*Je/Math.PI/20);for(let Gt=1;Gt<it;Gt++){let Lt=Gt/it;if(Lt!==.5){const gr=Lt-.5;Lt+=Lt*gr*(Lt-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*gr*gr+(.848013+Se*(.215638*Se-1.06021)))}const fn=ve.sub(le)._mult(Lt)._add(le)._unit()._mult(kt?-1:1);this.addHalfVertex(Y,fn.x,fn.y,!1,kt,0,X)}}re&&this.addCurrentVertex(Y,ve,-At,-pt,X)}else if(yt==="butt")this.addCurrentVertex(Y,Me,0,0,X);else if(yt==="square"){const ct=te?1:-1;this.addCurrentVertex(Y,Me,ct,ct,X)}else yt==="round"&&(te&&(this.addCurrentVertex(Y,le,0,0,X),this.addCurrentVertex(Y,le,1,1,X,!0)),re&&(this.addCurrentVertex(Y,ve,-1,-1,X,!0),this.addCurrentVertex(Y,ve,0,0,X)));if(bt&&xe<L-1){const ct=Y.dist(re);if(ct>2*q){const At=Y.add(re.sub(Y)._mult(q/ct)._round());this.updateDistance(Y,At),this.addCurrentVertex(At,ve,0,0,X),Y=At}}}}addCurrentVertex(s,f,m,_,S,C=!1){const A=f.y*_-f.x,L=-f.y-f.x*_;this.addHalfVertex(s,f.x+f.y*m,f.y-f.x*m,C,!1,m,S),this.addHalfVertex(s,A,L,C,!0,-_,S),this.distance>GN/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,f,m,_,S,C))}addHalfVertex({x:s,y:f},m,_,S,C,A,L){const B=.5*(this.lineClips?this.scaledDistance*(GN-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(S?1:0),(f<<1)+(C?1:0),Math.round(63*m)+128,Math.round(63*_)+128,1+(A===0?0:A<0?-1:1)|(63&B)<<2,B>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const q=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,q),L.primitiveLength++),C?this.e2=q:this.e1=q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,f){this.distance+=s.dist(f),this.updateScaledDistance()}}let qN,WN;Pt("LineBucket",lI,{omit:["layers","patternFeatures"]});var HN={get paint(){return WN=WN||new si({"line-opacity":new Wt(Ge.paint_line["line-opacity"]),"line-color":new Wt(Ge.paint_line["line-color"]),"line-translate":new Rt(Ge.paint_line["line-translate"]),"line-translate-anchor":new Rt(Ge.paint_line["line-translate-anchor"]),"line-width":new Wt(Ge.paint_line["line-width"]),"line-gap-width":new Wt(Ge.paint_line["line-gap-width"]),"line-offset":new Wt(Ge.paint_line["line-offset"]),"line-blur":new Wt(Ge.paint_line["line-blur"]),"line-dasharray":new Dv(Ge.paint_line["line-dasharray"]),"line-pattern":new Od(Ge.paint_line["line-pattern"]),"line-gradient":new Rv(Ge.paint_line["line-gradient"])})},get layout(){return qN=qN||new si({"line-cap":new Rt(Ge.layout_line["line-cap"]),"line-join":new Wt(Ge.layout_line["line-join"]),"line-miter-limit":new Rt(Ge.layout_line["line-miter-limit"]),"line-round-limit":new Rt(Ge.layout_line["line-round-limit"]),"line-sort-key":new Wt(Ge.layout_line["line-sort-key"])})}};class RW extends Wt{possiblyEvaluate(s,f){return f=new pr(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(s,f)}evaluate(s,f,m,_){return f=Z({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(s,f,m,_)}}let db;class zW extends Ka{constructor(s){super(s,HN),this.gradientVersion=0,db||(db=new RW(HN.paint.properties["line-width"].specification),db.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const f=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(f)&&f._styleExpression.expression instanceof Vu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,f){super.recalculate(s,f),this.paint._values["line-floorwidth"]=db.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new lI(s)}queryRadius(s){const f=s,m=XN(qv("line-width",this,f),qv("line-gap-width",this,f)),_=qv("line-offset",this,f);return m/2+Math.abs(_)+ab(this.paint.get("line-translate"))}queryIntersectsFeature(s,f,m,_,S,C,A){const L=sb(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,A),B=A/2*XN(this.paint.get("line-width").evaluate(f,m),this.paint.get("line-gap-width").evaluate(f,m)),q=this.paint.get("line-offset").evaluate(f,m);return q&&(_=function(X,Y){const te=[];for(let re=0;re<X.length;re++){const le=X[re],ve=[];for(let xe=0;xe<le.length;xe++){const Me=le[xe-1],Se=le[xe],ke=le[xe+1],Be=xe===0?new b(0,0):Se.sub(Me)._unit()._perp(),Je=xe===le.length-1?new b(0,0):ke.sub(Se)._unit()._perp(),bt=Be._add(Je)._unit(),kt=bt.x*Je.x+bt.y*Je.y;kt!==0&&bt._mult(1/kt),ve.push(bt._mult(Y)._add(Se))}te.push(ve)}return te}(_,q*A)),function(X,Y,te){for(let re=0;re<Y.length;re++){const le=Y[re];if(X.length>=3){for(let ve=0;ve<le.length;ve++)if(Cm(X,le[ve]))return!0}if(Gq(X,le,te))return!0}return!1}(L,_,B)}isTileClipped(){return!0}}function XN(c,s){return s>0?s+2*c:c}const FW=Mr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),BW=Mr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Mr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jW=Mr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Mr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ZN=Mr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),UW=Mr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function VW(c,s,f){return c.sections.forEach(m=>{m.text=function(_,S,C){const A=S.layout.get("text-transform").evaluate(C,{});return A==="uppercase"?_=_.toLocaleUpperCase():A==="lowercase"&&(_=_.toLocaleLowerCase()),ba.applyArabicShaping&&(_=ba.applyArabicShaping(_)),_}(m.text,s,f)}),c}Mr([{name:"triangle",components:3,type:"Uint16"}]),Mr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Mr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Mr([{type:"Float32",name:"offsetX"}]),Mr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Mr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const e_={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Ei=24,KN=tr,YN=function(c,s,f,m,_){var S,C,A=8*_-m-1,L=(1<<A)-1,B=L>>1,q=-7,X=f?_-1:0,Y=f?-1:1,te=c[s+X];for(X+=Y,S=te&(1<<-q)-1,te>>=-q,q+=A;q>0;S=256*S+c[s+X],X+=Y,q-=8);for(C=S&(1<<-q)-1,S>>=-q,q+=m;q>0;C=256*C+c[s+X],X+=Y,q-=8);if(S===0)S=1-B;else{if(S===L)return C?NaN:1/0*(te?-1:1);C+=Math.pow(2,m),S-=B}return(te?-1:1)*C*Math.pow(2,S-m)},JN=function(c,s,f,m,_,S){var C,A,L,B=8*S-_-1,q=(1<<B)-1,X=q>>1,Y=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=m?0:S-1,re=m?1:-1,le=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(A=isNaN(s)?1:0,C=q):(C=Math.floor(Math.log(s)/Math.LN2),s*(L=Math.pow(2,-C))<1&&(C--,L*=2),(s+=C+X>=1?Y/L:Y*Math.pow(2,1-X))*L>=2&&(C++,L/=2),C+X>=q?(A=0,C=q):C+X>=1?(A=(s*L-1)*Math.pow(2,_),C+=X):(A=s*Math.pow(2,X-1)*Math.pow(2,_),C=0));_>=8;c[f+te]=255&A,te+=re,A/=256,_-=8);for(C=C<<_|A,B+=_;B>0;c[f+te]=255&C,te+=re,C/=256,B-=8);c[f+te-re]|=128*le};function tr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}tr.Varint=0,tr.Fixed64=1,tr.Bytes=2,tr.Fixed32=5;var uI=4294967296,QN=1/uI,eL=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Fc(c){return c.type===tr.Bytes?c.readVarint()+c.pos:c.pos+1}function Am(c,s,f){return f?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function tL(c,s,f){var m=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));f.realloc(m);for(var _=f.pos-1;_>=c;_--)f.buf[_+m]=f.buf[_]}function GW(c,s){for(var f=0;f<c.length;f++)s.writeVarint(c[f])}function qW(c,s){for(var f=0;f<c.length;f++)s.writeSVarint(c[f])}function WW(c,s){for(var f=0;f<c.length;f++)s.writeFloat(c[f])}function HW(c,s){for(var f=0;f<c.length;f++)s.writeDouble(c[f])}function XW(c,s){for(var f=0;f<c.length;f++)s.writeBoolean(c[f])}function ZW(c,s){for(var f=0;f<c.length;f++)s.writeFixed32(c[f])}function KW(c,s){for(var f=0;f<c.length;f++)s.writeSFixed32(c[f])}function YW(c,s){for(var f=0;f<c.length;f++)s.writeFixed64(c[f])}function JW(c,s){for(var f=0;f<c.length;f++)s.writeSFixed64(c[f])}function pb(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+16777216*c[s+3]}function Om(c,s,f){c[f]=s,c[f+1]=s>>>8,c[f+2]=s>>>16,c[f+3]=s>>>24}function nL(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+(c[s+3]<<24)}tr.prototype={destroy:function(){this.buf=null},readFields:function(c,s,f){for(f=f||this.length;this.pos<f;){var m=this.readVarint(),_=m>>3,S=this.pos;this.type=7&m,c(_,s,this),this.pos===S&&this.skip(m)}return s},readMessage:function(c,s){return this.readFields(c,s,this.readVarint()+this.pos)},readFixed32:function(){var c=pb(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=nL(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=pb(this.buf,this.pos)+pb(this.buf,this.pos+4)*uI;return this.pos+=8,c},readSFixed64:function(){var c=pb(this.buf,this.pos)+nL(this.buf,this.pos+4)*uI;return this.pos+=8,c},readFloat:function(){var c=YN(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=YN(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var s,f,m=this.buf;return s=127&(f=m[this.pos++]),f<128?s:(s|=(127&(f=m[this.pos++]))<<7,f<128?s:(s|=(127&(f=m[this.pos++]))<<14,f<128?s:(s|=(127&(f=m[this.pos++]))<<21,f<128?s:function(_,S,C){var A,L,B=C.buf;if(A=(112&(L=B[C.pos++]))>>4,L<128||(A|=(127&(L=B[C.pos++]))<<3,L<128)||(A|=(127&(L=B[C.pos++]))<<10,L<128)||(A|=(127&(L=B[C.pos++]))<<17,L<128)||(A|=(127&(L=B[C.pos++]))<<24,L<128)||(A|=(1&(L=B[C.pos++]))<<31,L<128))return Am(_,A,S);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(f=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,s=this.pos;return this.pos=c,c-s>=12&&eL?function(f,m,_){return eL.decode(f.subarray(m,_))}(this.buf,s,c):function(f,m,_){for(var S="",C=m;C<_;){var A,L,B,q=f[C],X=null,Y=q>239?4:q>223?3:q>191?2:1;if(C+Y>_)break;Y===1?q<128&&(X=q):Y===2?(192&(A=f[C+1]))==128&&(X=(31&q)<<6|63&A)<=127&&(X=null):Y===3?(L=f[C+2],(192&(A=f[C+1]))==128&&(192&L)==128&&((X=(15&q)<<12|(63&A)<<6|63&L)<=2047||X>=55296&&X<=57343)&&(X=null)):Y===4&&(L=f[C+2],B=f[C+3],(192&(A=f[C+1]))==128&&(192&L)==128&&(192&B)==128&&((X=(15&q)<<18|(63&A)<<12|(63&L)<<6|63&B)<=65535||X>=1114112)&&(X=null)),X===null?(X=65533,Y=1):X>65535&&(X-=65536,S+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),S+=String.fromCharCode(X),C+=Y}return S}(this.buf,s,c)},readBytes:function(){var c=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,c);return this.pos=c,s},readPackedVarint:function(c,s){if(this.type!==tr.Bytes)return c.push(this.readVarint(s));var f=Fc(this);for(c=c||[];this.pos<f;)c.push(this.readVarint(s));return c},readPackedSVarint:function(c){if(this.type!==tr.Bytes)return c.push(this.readSVarint());var s=Fc(this);for(c=c||[];this.pos<s;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==tr.Bytes)return c.push(this.readBoolean());var s=Fc(this);for(c=c||[];this.pos<s;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==tr.Bytes)return c.push(this.readFloat());var s=Fc(this);for(c=c||[];this.pos<s;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==tr.Bytes)return c.push(this.readDouble());var s=Fc(this);for(c=c||[];this.pos<s;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==tr.Bytes)return c.push(this.readFixed32());var s=Fc(this);for(c=c||[];this.pos<s;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==tr.Bytes)return c.push(this.readSFixed32());var s=Fc(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==tr.Bytes)return c.push(this.readFixed64());var s=Fc(this);for(c=c||[];this.pos<s;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==tr.Bytes)return c.push(this.readSFixed64());var s=Fc(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed64());return c},skip:function(c){var s=7&c;if(s===tr.Varint)for(;this.buf[this.pos++]>127;);else if(s===tr.Bytes)this.pos=this.readVarint()+this.pos;else if(s===tr.Fixed32)this.pos+=4;else{if(s!==tr.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(c,s){this.writeVarint(c<<3|s)},realloc:function(c){for(var s=this.length||16;s<this.pos+c;)s*=2;if(s!==this.length){var f=new Uint8Array(s);f.set(this.buf),this.buf=f,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Om(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Om(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Om(this.buf,-1&c,this.pos),Om(this.buf,Math.floor(c*QN),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Om(this.buf,-1&c,this.pos),Om(this.buf,Math.floor(c*QN),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(s,f){var m,_;if(s>=0?(m=s%4294967296|0,_=s/4294967296|0):(_=~(-s/4294967296),4294967295^(m=~(-s%4294967296))?m=m+1|0:(m=0,_=_+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(S,C,A){A.buf[A.pos++]=127&S|128,S>>>=7,A.buf[A.pos++]=127&S|128,S>>>=7,A.buf[A.pos++]=127&S|128,S>>>=7,A.buf[A.pos++]=127&S|128,A.buf[A.pos]=127&(S>>>=7)}(m,0,f),function(S,C){var A=(7&S)<<4;C.buf[C.pos++]|=A|((S>>>=3)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S)))))}(_,f)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var s=this.pos;this.pos=function(m,_,S){for(var C,A,L=0;L<_.length;L++){if((C=_.charCodeAt(L))>55295&&C<57344){if(!A){C>56319||L+1===_.length?(m[S++]=239,m[S++]=191,m[S++]=189):A=C;continue}if(C<56320){m[S++]=239,m[S++]=191,m[S++]=189,A=C;continue}C=A-55296<<10|C-56320|65536,A=null}else A&&(m[S++]=239,m[S++]=191,m[S++]=189,A=null);C<128?m[S++]=C:(C<2048?m[S++]=C>>6|192:(C<65536?m[S++]=C>>12|224:(m[S++]=C>>18|240,m[S++]=C>>12&63|128),m[S++]=C>>6&63|128),m[S++]=63&C|128)}return S}(this.buf,c,this.pos);var f=this.pos-s;f>=128&&tL(s,f,this),this.pos=s-1,this.writeVarint(f),this.pos+=f},writeFloat:function(c){this.realloc(4),JN(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),JN(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var s=c.length;this.writeVarint(s),this.realloc(s);for(var f=0;f<s;f++)this.buf[this.pos++]=c[f]},writeRawMessage:function(c,s){this.pos++;var f=this.pos;c(s,this);var m=this.pos-f;m>=128&&tL(f,m,this),this.pos=f-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,s,f){this.writeTag(c,tr.Bytes),this.writeRawMessage(s,f)},writePackedVarint:function(c,s){s.length&&this.writeMessage(c,GW,s)},writePackedSVarint:function(c,s){s.length&&this.writeMessage(c,qW,s)},writePackedBoolean:function(c,s){s.length&&this.writeMessage(c,XW,s)},writePackedFloat:function(c,s){s.length&&this.writeMessage(c,WW,s)},writePackedDouble:function(c,s){s.length&&this.writeMessage(c,HW,s)},writePackedFixed32:function(c,s){s.length&&this.writeMessage(c,ZW,s)},writePackedSFixed32:function(c,s){s.length&&this.writeMessage(c,KW,s)},writePackedFixed64:function(c,s){s.length&&this.writeMessage(c,YW,s)},writePackedSFixed64:function(c,s){s.length&&this.writeMessage(c,JW,s)},writeBytesField:function(c,s){this.writeTag(c,tr.Bytes),this.writeBytes(s)},writeFixed32Field:function(c,s){this.writeTag(c,tr.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(c,s){this.writeTag(c,tr.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(c,s){this.writeTag(c,tr.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(c,s){this.writeTag(c,tr.Fixed64),this.writeSFixed64(s)},writeVarintField:function(c,s){this.writeTag(c,tr.Varint),this.writeVarint(s)},writeSVarintField:function(c,s){this.writeTag(c,tr.Varint),this.writeSVarint(s)},writeStringField:function(c,s){this.writeTag(c,tr.Bytes),this.writeString(s)},writeFloatField:function(c,s){this.writeTag(c,tr.Fixed32),this.writeFloat(s)},writeDoubleField:function(c,s){this.writeTag(c,tr.Fixed64),this.writeDouble(s)},writeBooleanField:function(c,s){this.writeVarintField(c,!!s)}};var cI=d(KN);const fI=3;function QW(c,s,f){c===1&&f.readMessage(eH,s)}function eH(c,s,f){if(c===3){const{id:m,bitmap:_,width:S,height:C,left:A,top:L,advance:B}=f.readMessage(tH,{});s.push({id:m,bitmap:new Hv({width:S+2*fI,height:C+2*fI},_),metrics:{width:S,height:C,left:A,top:L,advance:B}})}}function tH(c,s,f){c===1?s.id=f.readVarint():c===2?s.bitmap=f.readBytes():c===3?s.width=f.readVarint():c===4?s.height=f.readVarint():c===5?s.left=f.readSVarint():c===6?s.top=f.readSVarint():c===7&&(s.advance=f.readVarint())}const rL=fI;function iL(c){let s=0,f=0;for(const C of c)s+=C.w*C.h,f=Math.max(f,C.w);c.sort((C,A)=>A.h-C.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),f),h:1/0}];let _=0,S=0;for(const C of c)for(let A=m.length-1;A>=0;A--){const L=m[A];if(!(C.w>L.w||C.h>L.h)){if(C.x=L.x,C.y=L.y,S=Math.max(S,C.y+C.h),_=Math.max(_,C.x+C.w),C.w===L.w&&C.h===L.h){const B=m.pop();A<m.length&&(m[A]=B)}else C.h===L.h?(L.x+=C.w,L.w-=C.w):C.w===L.w?(L.y+=C.h,L.h-=C.h):(m.push({x:L.x+C.w,y:L.y,w:L.w-C.w,h:C.h}),L.y+=C.h,L.h-=C.h);break}}return{w:_,h:S,fill:s/(_*S)||0}}const Sa=1;class hI{constructor(s,{pixelRatio:f,version:m,stretchX:_,stretchY:S,content:C}){this.paddedRect=s,this.pixelRatio=f,this.stretchX=_,this.stretchY=S,this.content=C,this.version=m}get tl(){return[this.paddedRect.x+Sa,this.paddedRect.y+Sa]}get br(){return[this.paddedRect.x+this.paddedRect.w-Sa,this.paddedRect.y+this.paddedRect.h-Sa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Sa)/this.pixelRatio,(this.paddedRect.h-2*Sa)/this.pixelRatio]}}class oL{constructor(s,f){const m={},_={};this.haveRenderCallbacks=[];const S=[];this.addImages(s,m,S),this.addImages(f,_,S);const{w:C,h:A}=iL(S),L=new vs({width:C||1,height:A||1});for(const B in s){const q=s[B],X=m[B].paddedRect;vs.copy(q.data,L,{x:0,y:0},{x:X.x+Sa,y:X.y+Sa},q.data)}for(const B in f){const q=f[B],X=_[B].paddedRect,Y=X.x+Sa,te=X.y+Sa,re=q.data.width,le=q.data.height;vs.copy(q.data,L,{x:0,y:0},{x:Y,y:te},q.data),vs.copy(q.data,L,{x:0,y:le-1},{x:Y,y:te-1},{width:re,height:1}),vs.copy(q.data,L,{x:0,y:0},{x:Y,y:te+le},{width:re,height:1}),vs.copy(q.data,L,{x:re-1,y:0},{x:Y-1,y:te},{width:1,height:le}),vs.copy(q.data,L,{x:0,y:0},{x:Y+re,y:te},{width:1,height:le})}this.image=L,this.iconPositions=m,this.patternPositions=_}addImages(s,f,m){for(const _ in s){const S=s[_],C={x:0,y:0,w:S.data.width+2*Sa,h:S.data.height+2*Sa};m.push(C),f[_]=new hI(C,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(s,f){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in s.updatedImages)this.patchUpdatedImage(this.iconPositions[m],s.getImage(m),f),this.patchUpdatedImage(this.patternPositions[m],s.getImage(m),f)}patchUpdatedImage(s,f,m){if(!s||!f||s.version===f.version)return;s.version=f.version;const[_,S]=s.tl;m.update(f.data,void 0,{x:_,y:S})}}var Qf;Pt("ImagePosition",hI),Pt("ImageAtlas",oL),a.ai=void 0,(Qf=a.ai||(a.ai={}))[Qf.none=0]="none",Qf[Qf.horizontal=1]="horizontal",Qf[Qf.vertical=2]="vertical",Qf[Qf.horizontalOnly=3]="horizontalOnly";const t_=-17;class n_{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,f){const m=new n_;return m.scale=s||1,m.fontStack=f,m}static forImage(s){const f=new n_;return f.imageName=s,f}}class Mm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,f){const m=new Mm;for(let _=0;_<s.sections.length;_++){const S=s.sections[_];S.image?m.addImageSection(S):m.addTextSection(S,f)}return m}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let f="";for(let m=0;m<s.length;m++){const _=s.charCodeAt(m+1)||null,S=s.charCodeAt(m-1)||null;f+=_&&Z1(_)&&!e_[s[m+1]]||S&&Z1(S)&&!e_[s[m-1]]||!e_[s[m]]?s[m]:e_[s[m]]}return f}(this.text)}trim(){let s=0;for(let m=0;m<this.text.length&&gb[this.text.charCodeAt(m)];m++)s++;let f=this.text.length;for(let m=this.text.length-1;m>=0&&m>=s&&gb[this.text.charCodeAt(m)];m--)f--;this.text=this.text.substring(s,f),this.sectionIndex=this.sectionIndex.slice(s,f)}substring(s,f){const m=new Mm;return m.text=this.text.substring(s,f),m.sectionIndex=this.sectionIndex.slice(s,f),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,f)=>Math.max(s,this.sections[f].scale),0)}addTextSection(s,f){this.text+=s.text,this.sections.push(n_.forText(s.scale,s.fontStack||f));const m=this.sections.length-1;for(let _=0;_<s.text.length;++_)this.sectionIndex.push(m)}addImageSection(s){const f=s.image?s.image.name:"";if(f.length===0)return void ae("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(n_.forImage(f)),this.sectionIndex.push(this.sections.length-1)):ae("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function mb(c,s,f,m,_,S,C,A,L,B,q,X,Y,te,re,le){const ve=Mm.fromFeature(c,_);let xe;X===a.ai.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:Me,processStyledBidirectionalText:Se}=ba;if(Me&&ve.sections.length===1){xe=[];const Je=Me(ve.toString(),dI(ve,B,S,s,m,te,re));for(const bt of Je){const kt=new Mm;kt.text=bt,kt.sections=ve.sections;for(let _t=0;_t<bt.length;_t++)kt.sectionIndex.push(0);xe.push(kt)}}else if(Se){xe=[];const Je=Se(ve.text,ve.sectionIndex,dI(ve,B,S,s,m,te,re));for(const bt of Je){const kt=new Mm;kt.text=bt[0],kt.sectionIndex=bt[1],kt.sections=ve.sections,xe.push(kt)}}else xe=function(Je,bt){const kt=[],_t=Je.text;let yt=0;for(const ct of bt)kt.push(Je.substring(yt,ct)),yt=ct;return yt<_t.length&&kt.push(Je.substring(yt,_t.length)),kt}(ve,dI(ve,B,S,s,m,te,re));const ke=[],Be={positionedLines:ke,text:ve.toString(),top:q[1],bottom:q[1],left:q[0],right:q[0],writingMode:X,iconsInText:!1,verticalizable:!1};return function(Je,bt,kt,_t,yt,ct,At,pt,it,Gt,Lt,fn){let gr=0,Sr=t_,Ci=0,Ja=0;const na=pt==="right"?1:pt==="left"?0:.5;let xi=0;for(const Ii of yt){Ii.trim();const Ti=Ii.getMaxScale(),Do=(Ti-1)*Ei,oa={positionedGlyphs:[],lineOffset:0};Je.positionedLines[xi]=oa;const Ro=oa.positionedGlyphs;let Ea=0;if(!Ii.length()){Sr+=ct,++xi;continue}for(let Pi=0;Pi<Ii.length();Pi++){const vn=Ii.getSection(Pi),zo=Ii.getSectionIndex(Pi),po=Ii.getCharCode(Pi);let Ai=0,ol=null,eu=null,tu=null,Bc=Ei;const al=!(it===a.ai.horizontal||!Lt&&!Pv(po)||Lt&&(gb[po]||(Ji=po,xt.Arabic(Ji)||xt["Arabic Supplement"](Ji)||xt["Arabic Extended-A"](Ji)||xt["Arabic Presentation Forms-A"](Ji)||xt["Arabic Presentation Forms-B"](Ji))));if(vn.imageName){const xs=_t[vn.imageName];if(!xs)continue;tu=vn.imageName,Je.iconsInText=Je.iconsInText||!0,eu=xs.paddedRect;const Ia=xs.displaySize;vn.scale=vn.scale*Ei/fn,ol={width:Ia[0],height:Ia[1],left:Sa,top:-rL,advance:al?Ia[1]:Ia[0]},Ai=Do+(Ei-Ia[1]*vn.scale),Bc=ol.advance;const jc=al?Ia[0]*vn.scale-Ei*Ti:Ia[1]*vn.scale-Ei*Ti;jc>0&&jc>Ea&&(Ea=jc)}else{const xs=kt[vn.fontStack],Ia=xs&&xs[po];if(Ia&&Ia.rect)eu=Ia.rect,ol=Ia.metrics;else{const jc=bt[vn.fontStack],s_=jc&&jc[po];if(!s_)continue;ol=s_.metrics}Ai=(Ti-vn.scale)*Ei}al?(Je.verticalizable=!0,Ro.push({glyph:po,imageName:tu,x:gr,y:Sr+Ai,vertical:al,scale:vn.scale,fontStack:vn.fontStack,sectionIndex:zo,metrics:ol,rect:eu}),gr+=Bc*vn.scale+Gt):(Ro.push({glyph:po,imageName:tu,x:gr,y:Sr+Ai,vertical:al,scale:vn.scale,fontStack:vn.fontStack,sectionIndex:zo,metrics:ol,rect:eu}),gr+=ol.advance*vn.scale+Gt)}Ro.length!==0&&(Ci=Math.max(gr-Gt,Ci),iH(Ro,0,Ro.length-1,na,Ea)),gr=0;const Ca=ct*Ti+Ea;oa.lineOffset=Math.max(Ea,Do),Sr+=Ca,Ja=Math.max(Ca,Ja),++xi}var Ji;const ho=Sr-t_,{horizontalAlign:ra,verticalAlign:ia}=pI(At);(function(Ii,Ti,Do,oa,Ro,Ea,Ca,Pi,vn){const zo=(Ti-Do)*Ro;let po=0;po=Ea!==Ca?-Pi*oa-t_:(-oa*vn+.5)*Ca;for(const Ai of Ii)for(const ol of Ai.positionedGlyphs)ol.x+=zo,ol.y+=po})(Je.positionedLines,na,ra,ia,Ci,Ja,ct,ho,yt.length),Je.top+=-ia*ho,Je.bottom=Je.top+ho,Je.left+=-ra*Ci,Je.right=Je.left+Ci}(Be,s,f,m,xe,C,A,L,X,B,Y,le),!function(Je){for(const bt of Je)if(bt.positionedGlyphs.length!==0)return!1;return!0}(ke)&&Be}const gb={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},nH={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function aL(c,s,f,m,_,S){if(s.imageName){const C=m[s.imageName];return C?C.displaySize[0]*s.scale*Ei/S+_:0}{const C=f[s.fontStack],A=C&&C[c];return A?A.metrics.advance*s.scale+_:0}}function sL(c,s,f,m){const _=Math.pow(c-s,2);return m?c<s?_/2:2*_:_+Math.abs(f)*f}function rH(c,s,f){let m=0;return c===10&&(m-=1e4),f&&(m+=150),c!==40&&c!==65288||(m+=50),s!==41&&s!==65289||(m+=50),m}function lL(c,s,f,m,_,S){let C=null,A=sL(s,f,_,S);for(const L of m){const B=sL(s-L.x,f,_,S)+L.badness;B<=A&&(C=L,A=B)}return{index:c,x:s,priorBreak:C,badness:A}}function uL(c){return c?uL(c.priorBreak).concat(c.index):[]}function dI(c,s,f,m,_,S,C){if(S!=="point")return[];if(!c)return[];const A=[],L=function(Y,te,re,le,ve,xe){let Me=0;for(let Se=0;Se<Y.length();Se++){const ke=Y.getSection(Se);Me+=aL(Y.getCharCode(Se),ke,le,ve,te,xe)}return Me/Math.max(1,Math.ceil(Me/re))}(c,s,f,m,_,C),B=c.text.indexOf("")>=0;let q=0;for(let Y=0;Y<c.length();Y++){const te=c.getSection(Y),re=c.getCharCode(Y);if(gb[re]||(q+=aL(re,te,m,_,s,C)),Y<c.length()-1){const le=!((X=re)<11904||!(xt["Bopomofo Extended"](X)||xt.Bopomofo(X)||xt["CJK Compatibility Forms"](X)||xt["CJK Compatibility Ideographs"](X)||xt["CJK Compatibility"](X)||xt["CJK Radicals Supplement"](X)||xt["CJK Strokes"](X)||xt["CJK Symbols and Punctuation"](X)||xt["CJK Unified Ideographs Extension A"](X)||xt["CJK Unified Ideographs"](X)||xt["Enclosed CJK Letters and Months"](X)||xt["Halfwidth and Fullwidth Forms"](X)||xt.Hiragana(X)||xt["Ideographic Description Characters"](X)||xt["Kangxi Radicals"](X)||xt["Katakana Phonetic Extensions"](X)||xt.Katakana(X)||xt["Vertical Forms"](X)||xt["Yi Radicals"](X)||xt["Yi Syllables"](X)));(nH[re]||le||te.imageName)&&A.push(lL(Y+1,q,L,A,rH(re,c.getCharCode(Y+1),le&&B),!1))}}var X;return uL(lL(c.length(),q,L,A,0,!0))}function pI(c){let s=.5,f=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:s,verticalAlign:f}}function iH(c,s,f,m,_){if(!m&&!_)return;const S=c[f],C=(c[f].x+S.metrics.advance*S.scale)*m;for(let A=s;A<=f;A++)c[A].x-=C,c[A].y+=_}function oH(c,s,f){const{horizontalAlign:m,verticalAlign:_}=pI(f),S=s[0]-c.displaySize[0]*m,C=s[1]-c.displaySize[1]*_;return{image:c,top:C,bottom:C+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function cL(c,s,f,m,_,S){const C=c.image;let A;if(C.content){const ve=C.content,xe=C.pixelRatio||1;A=[ve[0]/xe,ve[1]/xe,C.displaySize[0]-ve[2]/xe,C.displaySize[1]-ve[3]/xe]}const L=s.left*S,B=s.right*S;let q,X,Y,te;f==="width"||f==="both"?(te=_[0]+L-m[3],X=_[0]+B+m[1]):(te=_[0]+(L+B-C.displaySize[0])/2,X=te+C.displaySize[0]);const re=s.top*S,le=s.bottom*S;return f==="height"||f==="both"?(q=_[1]+re-m[0],Y=_[1]+le+m[2]):(q=_[1]+(re+le-C.displaySize[1])/2,Y=q+C.displaySize[1]),{image:C,top:q,right:X,bottom:Y,left:te,collisionPadding:A}}const r_=255,Xu=128,eh=r_*Xu;function fL(c,s){const{expression:f}=s;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new pr(c+1))};if(f.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:_}=f;let S=0;for(;S<m.length&&m[S]<=c;)S++;S=Math.max(0,S-1);let C=S;for(;C<m.length&&m[C]<c+1;)C++;C=Math.min(m.length-1,C);const A=m[S],L=m[C];return f.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:L,interpolationType:_}:{kind:"camera",minZoom:A,maxZoom:L,minSize:f.evaluate(new pr(A)),maxSize:f.evaluate(new pr(L)),interpolationType:_}}}function mI(c,s,f){let m="never";const _=c.get(s);return _?m=_:c.get(f)&&(m="always"),m}const aH=Jf.VectorTileFeature.types,sH=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function yb(c,s,f,m,_,S,C,A,L,B,q,X,Y){const te=A?Math.min(eh,Math.round(A[0])):0,re=A?Math.min(eh,Math.round(A[1])):0;c.emplaceBack(s,f,Math.round(32*m),Math.round(32*_),S,C,(te<<1)+(L?1:0),re,16*B,16*q,256*X,256*Y)}function gI(c,s,f){c.emplaceBack(s.x,s.y,f),c.emplaceBack(s.x,s.y,f),c.emplaceBack(s.x,s.y,f),c.emplaceBack(s.x,s.y,f)}function lH(c){for(const s of c.sections)if(UC(s.text))return!0;return!1}class yI{constructor(s){this.layoutVertexArray=new pn,this.indexArray=new Ki,this.programConfigurations=s,this.segments=new mr,this.dynamicLayoutVertexArray=new un,this.opacityVertexArray=new gn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ie}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,f,m,_){this.isEmpty()||(m&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,FW.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,BW.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,sH,!0),this.opacityVertexBuffer.itemSize=1),(m||_)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pt("SymbolBuffers",yI);class vI{constructor(s,f,m){this.layoutVertexArray=new s,this.layoutAttributes=f,this.indexArray=new m,this.segments=new mr,this.collisionVertexArray=new ur}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,jW.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pt("CollisionBuffers",vI);class $m{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(C=>C.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ZC([]),this.placementViewportMatrix=ZC([]);const f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=fL(this.zoom,f["text-size"]),this.iconSizeData=fL(this.zoom,f["icon-size"]);const m=this.layers[0].layout,_=m.get("symbol-sort-key"),S=m.get("symbol-z-order");this.canOverlap=mI(m,"text-overlap","text-allow-overlap")!=="never"||mI(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(C=>a.ai[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=s.sourceID}createArrays(){this.text=new yI(new Ql(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new yI(new Ql(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new Oe,this.lineVertexArray=new Ue,this.symbolInstances=new _e,this.textAnchorOffsets=new Ke}calculateGlyphDependencies(s,f,m,_,S){for(let C=0;C<s.length;C++)if(f[s.charCodeAt(C)]=!0,(m||_)&&S){const A=e_[s.charAt(C)];A&&(f[A.charCodeAt(0)]=!0)}}populate(s,f,m){const _=this.layers[0],S=_.layout,C=S.get("text-font"),A=S.get("text-field"),L=S.get("icon-image"),B=(A.value.kind!=="constant"||A.value.value instanceof uo&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),q=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,X=S.get("symbol-sort-key");if(this.features=[],!B&&!q)return;const Y=f.iconDependencies,te=f.glyphDependencies,re=f.availableImages,le=new pr(this.zoom);for(const{feature:ve,id:xe,index:Me,sourceLayerIndex:Se}of s){const ke=_._featureFilter.needGeometry,Be=Nd(ve,ke);if(!_._featureFilter.filter(le,Be,m))continue;let Je,bt;if(ke||(Be.geometry=kd(ve)),B){const _t=_.getValueAndResolveTokens("text-field",Be,m,re),yt=uo.factory(_t);lH(yt)&&(this.hasRTLText=!0),(!this.hasRTLText||Nv()==="unavailable"||this.hasRTLText&&ba.isParsed())&&(Je=VW(yt,_,Be))}if(q){const _t=_.getValueAndResolveTokens("icon-image",Be,m,re);bt=_t instanceof Zi?_t:Zi.fromString(_t)}if(!Je&&!bt)continue;const kt=this.sortFeaturesByKey?X.evaluate(Be,{},m):void 0;if(this.features.push({id:xe,text:Je,icon:bt,index:Me,sourceLayerIndex:Se,geometry:Be.geometry,properties:ve.properties,type:aH[ve.type],sortKey:kt}),bt&&(Y[bt.name]=!0),Je){const _t=C.evaluate(Be,{},m).join(","),yt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const ct of Je.sections)if(ct.image)Y[ct.image.name]=!0;else{const At=Iv(Je.toString()),pt=ct.fontStack||_t,it=te[pt]=te[pt]||{};this.calculateGlyphDependencies(ct.text,it,yt,this.allowVerticalPlacement,At)}}}S.get("symbol-placement")==="line"&&(this.features=function(ve){const xe={},Me={},Se=[];let ke=0;function Be(_t){Se.push(ve[_t]),ke++}function Je(_t,yt,ct){const At=Me[_t];return delete Me[_t],Me[yt]=At,Se[At].geometry[0].pop(),Se[At].geometry[0]=Se[At].geometry[0].concat(ct[0]),At}function bt(_t,yt,ct){const At=xe[yt];return delete xe[yt],xe[_t]=At,Se[At].geometry[0].shift(),Se[At].geometry[0]=ct[0].concat(Se[At].geometry[0]),At}function kt(_t,yt,ct){const At=ct?yt[0][yt[0].length-1]:yt[0][0];return`${_t}:${At.x}:${At.y}`}for(let _t=0;_t<ve.length;_t++){const yt=ve[_t],ct=yt.geometry,At=yt.text?yt.text.toString():null;if(!At){Be(_t);continue}const pt=kt(At,ct),it=kt(At,ct,!0);if(pt in Me&&it in xe&&Me[pt]!==xe[it]){const Gt=bt(pt,it,ct),Lt=Je(pt,it,Se[Gt].geometry);delete xe[pt],delete Me[it],Me[kt(At,Se[Lt].geometry,!0)]=Lt,Se[Gt].geometry=null}else pt in Me?Je(pt,it,ct):it in xe?bt(pt,it,ct):(Be(_t),xe[pt]=ke-1,Me[it]=ke-1)}return Se.filter(_t=>_t.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,xe)=>ve.sortKey-xe.sortKey)}update(s,f,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,f,this.layers,m),this.icon.programConfigurations.updatePaintArrays(s,f,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,f){const m=this.lineVertexArray.length;if(s.segment!==void 0){let _=s.dist(f[s.segment+1]),S=s.dist(f[s.segment]);const C={};for(let A=s.segment+1;A<f.length;A++)C[A]={x:f[A].x,y:f[A].y,tileUnitDistanceFromAnchor:_},A<f.length-1&&(_+=f[A+1].dist(f[A]));for(let A=s.segment||0;A>=0;A--)C[A]={x:f[A].x,y:f[A].y,tileUnitDistanceFromAnchor:S},A>0&&(S+=f[A-1].dist(f[A]));for(let A=0;A<f.length;A++){const L=C[A];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(s,f,m,_,S,C,A,L,B,q,X,Y){const te=s.indexArray,re=s.layoutVertexArray,le=s.segments.prepareSegment(4*f.length,re,te,this.canOverlap?C.sortKey:void 0),ve=this.glyphOffsetArray.length,xe=le.vertexLength,Me=this.allowVerticalPlacement&&A===a.ai.vertical?Math.PI/2:0,Se=C.text&&C.text.sections;for(let ke=0;ke<f.length;ke++){const{tl:Be,tr:Je,bl:bt,br:kt,tex:_t,pixelOffsetTL:yt,pixelOffsetBR:ct,minFontScaleX:At,minFontScaleY:pt,glyphOffset:it,isSDF:Gt,sectionIndex:Lt}=f[ke],fn=le.vertexLength,gr=it[1];yb(re,L.x,L.y,Be.x,gr+Be.y,_t.x,_t.y,m,Gt,yt.x,yt.y,At,pt),yb(re,L.x,L.y,Je.x,gr+Je.y,_t.x+_t.w,_t.y,m,Gt,ct.x,yt.y,At,pt),yb(re,L.x,L.y,bt.x,gr+bt.y,_t.x,_t.y+_t.h,m,Gt,yt.x,ct.y,At,pt),yb(re,L.x,L.y,kt.x,gr+kt.y,_t.x+_t.w,_t.y+_t.h,m,Gt,ct.x,ct.y,At,pt),gI(s.dynamicLayoutVertexArray,L,Me),te.emplaceBack(fn,fn+1,fn+2),te.emplaceBack(fn+1,fn+2,fn+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(it[0]),ke!==f.length-1&&Lt===f[ke+1].sectionIndex||s.programConfigurations.populatePaintArrays(re.length,C,C.index,{},Y,Se&&Se[Lt])}s.placedSymbolArray.emplaceBack(L.x,L.y,ve,this.glyphOffsetArray.length-ve,xe,B,q,L.segment,m?m[0]:0,m?m[1]:0,_[0],_[1],A,0,!1,0,X)}_addCollisionDebugVertex(s,f,m,_,S,C){return f.emplaceBack(0,0),s.emplaceBack(m.x,m.y,_,S,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(s,f,m,_,S,C,A){const L=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),B=L.vertexLength,q=S.layoutVertexArray,X=S.collisionVertexArray,Y=A.anchorX,te=A.anchorY;this._addCollisionDebugVertex(q,X,C,Y,te,new b(s,f)),this._addCollisionDebugVertex(q,X,C,Y,te,new b(m,f)),this._addCollisionDebugVertex(q,X,C,Y,te,new b(m,_)),this._addCollisionDebugVertex(q,X,C,Y,te,new b(s,_)),L.vertexLength+=4;const re=S.indexArray;re.emplaceBack(B,B+1),re.emplaceBack(B+1,B+2),re.emplaceBack(B+2,B+3),re.emplaceBack(B+3,B),L.primitiveLength+=4}addDebugCollisionBoxes(s,f,m,_){for(let S=s;S<f;S++){const C=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,_?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vI(Jr,ZN.members,wi),this.iconCollisionBox=new vI(Jr,ZN.members,wi);for(let s=0;s<this.symbolInstances.length;s++){const f=this.symbolInstances.get(s);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(s,f,m,_,S,C,A,L,B){const q={};for(let X=f;X<m;X++){const Y=s.get(X);q.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},q.textFeatureIndex=Y.featureIndex;break}for(let X=_;X<S;X++){const Y=s.get(X);q.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},q.verticalTextFeatureIndex=Y.featureIndex;break}for(let X=C;X<A;X++){const Y=s.get(X);q.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},q.iconFeatureIndex=Y.featureIndex;break}for(let X=L;X<B;X++){const Y=s.get(X);q.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},q.verticalIconFeatureIndex=Y.featureIndex;break}return q}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){const m=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,f){const m=s.placedSymbolArray.get(f),_=m.vertexStartIndex+4*m.numGlyphs;for(let S=m.vertexStartIndex;S<_;S+=4)s.indexArray.emplaceBack(S,S+1,S+2),s.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const f=Math.sin(s),m=Math.cos(s),_=[],S=[],C=[];for(let A=0;A<this.symbolInstances.length;++A){C.push(A);const L=this.symbolInstances.get(A);_.push(0|Math.round(f*L.anchorX+m*L.anchorY)),S.push(L.featureIndex)}return C.sort((A,L)=>_[A]-_[L]||S[L]-S[A]),C}addToSortKeyRanges(s,f){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===f?m.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const f of this.symbolInstanceIndexes){const m=this.symbolInstances.get(f);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((_,S,C)=>{_>=0&&C.indexOf(_)===S&&this.addIndicesForPlacedSymbol(this.text,_)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let hL,dL;Pt("SymbolBucket",$m,{omit:["layers","collisionBoxArray","features","compareText"]}),$m.MAX_GLYPHS=65535,$m.addDynamicAttributes=gI;var _I={get paint(){return dL=dL||new si({"icon-opacity":new Wt(Ge.paint_symbol["icon-opacity"]),"icon-color":new Wt(Ge.paint_symbol["icon-color"]),"icon-halo-color":new Wt(Ge.paint_symbol["icon-halo-color"]),"icon-halo-width":new Wt(Ge.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Wt(Ge.paint_symbol["icon-halo-blur"]),"icon-translate":new Rt(Ge.paint_symbol["icon-translate"]),"icon-translate-anchor":new Rt(Ge.paint_symbol["icon-translate-anchor"]),"text-opacity":new Wt(Ge.paint_symbol["text-opacity"]),"text-color":new Wt(Ge.paint_symbol["text-color"],{runtimeType:Hi,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Wt(Ge.paint_symbol["text-halo-color"]),"text-halo-width":new Wt(Ge.paint_symbol["text-halo-width"]),"text-halo-blur":new Wt(Ge.paint_symbol["text-halo-blur"]),"text-translate":new Rt(Ge.paint_symbol["text-translate"]),"text-translate-anchor":new Rt(Ge.paint_symbol["text-translate-anchor"])})},get layout(){return hL=hL||new si({"symbol-placement":new Rt(Ge.layout_symbol["symbol-placement"]),"symbol-spacing":new Rt(Ge.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Rt(Ge.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Wt(Ge.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Rt(Ge.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Rt(Ge.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Rt(Ge.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Rt(Ge.layout_symbol["icon-ignore-placement"]),"icon-optional":new Rt(Ge.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Rt(Ge.layout_symbol["icon-rotation-alignment"]),"icon-size":new Wt(Ge.layout_symbol["icon-size"]),"icon-text-fit":new Rt(Ge.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Rt(Ge.layout_symbol["icon-text-fit-padding"]),"icon-image":new Wt(Ge.layout_symbol["icon-image"]),"icon-rotate":new Wt(Ge.layout_symbol["icon-rotate"]),"icon-padding":new Wt(Ge.layout_symbol["icon-padding"]),"icon-keep-upright":new Rt(Ge.layout_symbol["icon-keep-upright"]),"icon-offset":new Wt(Ge.layout_symbol["icon-offset"]),"icon-anchor":new Wt(Ge.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Rt(Ge.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Rt(Ge.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Rt(Ge.layout_symbol["text-rotation-alignment"]),"text-field":new Wt(Ge.layout_symbol["text-field"]),"text-font":new Wt(Ge.layout_symbol["text-font"]),"text-size":new Wt(Ge.layout_symbol["text-size"]),"text-max-width":new Wt(Ge.layout_symbol["text-max-width"]),"text-line-height":new Rt(Ge.layout_symbol["text-line-height"]),"text-letter-spacing":new Wt(Ge.layout_symbol["text-letter-spacing"]),"text-justify":new Wt(Ge.layout_symbol["text-justify"]),"text-radial-offset":new Wt(Ge.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Rt(Ge.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Wt(Ge.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Wt(Ge.layout_symbol["text-anchor"]),"text-max-angle":new Rt(Ge.layout_symbol["text-max-angle"]),"text-writing-mode":new Rt(Ge.layout_symbol["text-writing-mode"]),"text-rotate":new Wt(Ge.layout_symbol["text-rotate"]),"text-padding":new Rt(Ge.layout_symbol["text-padding"]),"text-keep-upright":new Rt(Ge.layout_symbol["text-keep-upright"]),"text-transform":new Wt(Ge.layout_symbol["text-transform"]),"text-offset":new Wt(Ge.layout_symbol["text-offset"]),"text-allow-overlap":new Rt(Ge.layout_symbol["text-allow-overlap"]),"text-overlap":new Rt(Ge.layout_symbol["text-overlap"]),"text-ignore-placement":new Rt(Ge.layout_symbol["text-ignore-placement"]),"text-optional":new Rt(Ge.layout_symbol["text-optional"])})}};class pL{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:gs,this.defaultValue=s}evaluate(s){if(s.formattedSection){const f=this.defaultValue.property.overrides;if(f&&f.hasOverride(s.formattedSection))return f.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pt("FormatSectionOverride",pL,{omit:["defaultValue"]});class vb extends Ka{constructor(s){super(s,_I)}recalculate(s,f){if(super.recalculate(s,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const _=[];for(const S of m)_.indexOf(S)<0&&_.push(S);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,f,m,_){const S=this.layout.get(s).evaluate(f,{},m,_),C=this._unevaluatedLayout._values[s];return C.isDataDriven()||hm(C.value)||!S?S:function(A,L){return L.replace(/{([^{}]+)}/g,(B,q)=>A&&q in A?String(A[q]):"")}(f.properties,S)}createBucket(s){return new $m(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of _I.paint.overridableProperties){if(!vb.hasPaintOverride(this.layout,s))continue;const f=this.paint.get(s),m=new pL(f),_=new xv(m,f.property.specification);let S=null;S=f.value.kind==="constant"||f.value.kind==="source"?new bv("source",_):new pm("composite",_,f.value.zoomStops),this.paint._values[s]=new No(f.property,S,f.parameters)}}_handleOverridablePaintPropertyUpdate(s,f,m){return!(!this.layout||f.isDataDriven()||m.isDataDriven())&&vb.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,f){const m=s.get("text-field"),_=_I.paint.properties[f];let S=!1;const C=A=>{for(const L of A)if(_.overrides&&_.overrides.hasOverride(L))return void(S=!0)};if(m.value.kind==="constant"&&m.value.value instanceof uo)C(m.value.value.sections);else if(m.value.kind==="source"){const A=B=>{S||(B instanceof Tc&&Pr(B.value)===me?C(B.value.sections):B instanceof fm?C(B.sections):B.eachChild(A))},L=m.value;L._styleExpression&&A(L._styleExpression.expression)}return S}}let mL;var uH={get paint(){return mL=mL||new si({"background-color":new Rt(Ge.paint_background["background-color"]),"background-pattern":new Dv(Ge.paint_background["background-pattern"]),"background-opacity":new Rt(Ge.paint_background["background-opacity"])})}};class cH extends Ka{constructor(s){super(s,uH)}}let gL;var fH={get paint(){return gL=gL||new si({"raster-opacity":new Rt(Ge.paint_raster["raster-opacity"]),"raster-hue-rotate":new Rt(Ge.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Rt(Ge.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Rt(Ge.paint_raster["raster-brightness-max"]),"raster-saturation":new Rt(Ge.paint_raster["raster-saturation"]),"raster-contrast":new Rt(Ge.paint_raster["raster-contrast"]),"raster-resampling":new Rt(Ge.paint_raster["raster-resampling"]),"raster-fade-duration":new Rt(Ge.paint_raster["raster-fade-duration"])})}};class hH extends Ka{constructor(s){super(s,fH)}}class dH extends Ka{constructor(s){super(s,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class pH{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const xI=63710088e-1;class th{constructor(s,f){if(isNaN(s)||isNaN(f))throw new Error(`Invalid LngLat object: (${s}, ${f})`);if(this.lng=+s,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new th(G(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const f=Math.PI/180,m=this.lat*f,_=s.lat*f,S=Math.sin(m)*Math.sin(_)+Math.cos(m)*Math.cos(_)*Math.cos((s.lng-this.lng)*f);return xI*Math.acos(Math.min(S,1))}static convert(s){if(s instanceof th)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new th(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new th(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const yL=2*Math.PI*xI;function vL(c){return yL*Math.cos(c*Math.PI/180)}function _L(c){return(180+c)/360}function xL(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function bL(c,s){return c/vL(s)}function wL(c){return 360*c-180}function bI(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class _b{constructor(s,f,m=0){this.x=+s,this.y=+f,this.z=+m}static fromLngLat(s,f=0){const m=th.convert(s);return new _b(_L(m.lng),xL(m.lat),bL(f,m.lat))}toLngLat(){return new th(wL(this.x),bI(this.y))}toAltitude(){return this.z*vL(bI(this.y))}meterInMercatorCoordinateUnits(){return 1/yL*(s=bI(this.y),1/Math.cos(s*Math.PI/180));var s}}function SL(c,s,f){var m=2*Math.PI*6378137/256/Math.pow(2,f);return[c*m-2*Math.PI*6378137/2,s*m-2*Math.PI*6378137/2]}class wI{constructor(s,f,m){if(s<0||s>25||m<0||m>=Math.pow(2,s)||f<0||f>=Math.pow(2,s))throw new Error(`x=${f}, y=${m}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=f,this.y=m,this.key=i_(0,s,s,f,m)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,f,m){const _=(C=this.y,A=this.z,L=SL(256*(S=this.x),256*(C=Math.pow(2,A)-C-1),A),B=SL(256*(S+1),256*(C+1),A),L[0]+","+L[1]+","+B[0]+","+B[1]);var S,C,A,L,B;const q=function(X,Y,te){let re,le="";for(let ve=X;ve>0;ve--)re=1<<ve-1,le+=(Y&re?1:0)+(te&re?2:0);return le}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,q).replace(/{bbox-epsg-3857}/g,_)}isChildOf(s){const f=this.z-s.z;return f>0&&s.x===this.x>>f&&s.y===this.y>>f}getTilePoint(s){const f=Math.pow(2,this.z);return new b((s.x*f-this.x)*_i,(s.y*f-this.y)*_i)}toString(){return`${this.z}/${this.x}/${this.y}`}}class EL{constructor(s,f){this.wrap=s,this.canonical=f,this.key=i_(s,f.z,f.z,f.x,f.y)}}class _s{constructor(s,f,m,_,S){if(s<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${m}`);this.overscaledZ=s,this.wrap=f,this.canonical=new wI(m,+_,+S),this.key=i_(f,s,m,_,S)}clone(){return new _s(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-s;return s>this.canonical.z?new _s(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _s(s,this.wrap,s,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(s,f){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-s;return s>this.canonical.z?i_(this.wrap*+f,s,this.canonical.z,this.canonical.x,this.canonical.y):i_(this.wrap*+f,s,s,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const f=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>f&&s.canonical.y===this.canonical.y>>f}children(s){if(this.overscaledZ>=s)return[new _s(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const f=this.canonical.z+1,m=2*this.canonical.x,_=2*this.canonical.y;return[new _s(f,this.wrap,f,m,_),new _s(f,this.wrap,f,m+1,_),new _s(f,this.wrap,f,m,_+1),new _s(f,this.wrap,f,m+1,_+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new _s(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new _s(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new EL(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new _b(s.x-this.wrap,s.y))}}function i_(c,s,f,m,_){(c*=2)<0&&(c=-1*c-1);const S=1<<f;return(S*S*c+S*_+m).toString(36)+f.toString(36)+s.toString(36)}Pt("CanonicalTileID",wI),Pt("OverscaledTileID",_s,{omit:["posMatrix"]});class CL{constructor(s,f,m,_=1,S=1,C=1,A=0){if(this.uid=s,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void ae(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;const L=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=S,this.blueFactor=C,this.baseShift=A;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let B=0;B<L;B++)this.data[this._idx(-1,B)]=this.data[this._idx(0,B)],this.data[this._idx(L,B)]=this.data[this._idx(L-1,B)],this.data[this._idx(B,-1)]=this.data[this._idx(B,0)],this.data[this._idx(B,L)]=this.data[this._idx(B,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let B=0;B<L;B++)for(let q=0;q<L;q++){const X=this.get(B,q);X>this.max&&(this.max=X),X<this.min&&(this.min=X)}}get(s,f){const m=new Uint8Array(this.data.buffer),_=4*this._idx(s,f);return this.unpack(m[_],m[_+1],m[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,f){if(s<-1||s>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(s+1)}unpack(s,f,m){return s*this.redFactor+f*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new vs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,f,m){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let _=f*this.dim,S=f*this.dim+this.dim,C=m*this.dim,A=m*this.dim+this.dim;switch(f){case-1:_=S-1;break;case 1:S=_+1}switch(m){case-1:C=A-1;break;case 1:A=C+1}const L=-f*this.dim,B=-m*this.dim;for(let q=C;q<A;q++)for(let X=_;X<S;X++)this.data[this._idx(X,q)]=s.data[this._idx(X+L,q+B)]}}Pt("DEMData",CL);class IL{constructor(s){this._stringToNumber={},this._numberToString=[];for(let f=0;f<s.length;f++){const m=s[f];this._stringToNumber[m]=f,this._numberToString[f]=m}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class TL{constructor(s,f,m,_,S){this.type="Feature",this._vectorTileFeature=s,s._z=f,s._x=m,s._y=_,this.properties=s.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(s[f]=this[f]);return s}}class PL{constructor(s,f){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Hf(_i,16,0),this.grid3D=new Hf(_i,16,0),this.featureIndexArray=new nt,this.promoteId=f}insert(s,f,m,_,S,C){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,_,S);const L=C?this.grid3D:this.grid;for(let B=0;B<f.length;B++){const q=f[B],X=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<q.length;Y++){const te=q[Y];X[0]=Math.min(X[0],te.x),X[1]=Math.min(X[1],te.y),X[2]=Math.max(X[2],te.x),X[3]=Math.max(X[3],te.y)}X[0]<_i&&X[1]<_i&&X[2]>=0&&X[3]>=0&&L.insert(A,X[0],X[1],X[2],X[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Jf.VectorTile(new cI(this.rawTileData)).layers,this.sourceLayerCoder=new IL(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,f,m,_){this.loadVTLayers();const S=s.params||{},C=_i/s.tileSize/s.scale,A=Sv(S.filter),L=s.queryGeometry,B=s.queryPadding*C,q=OL(L),X=this.grid.query(q.minX-B,q.minY-B,q.maxX+B,q.maxY+B),Y=OL(s.cameraQueryGeometry),te=this.grid3D.query(Y.minX-B,Y.minY-B,Y.maxX+B,Y.maxY+B,(ve,xe,Me,Se)=>function(ke,Be,Je,bt,kt){for(const yt of ke)if(Be<=yt.x&&Je<=yt.y&&bt>=yt.x&&kt>=yt.y)return!0;const _t=[new b(Be,Je),new b(Be,kt),new b(bt,kt),new b(bt,Je)];if(ke.length>2){for(const yt of _t)if(Cm(ke,yt))return!0}for(let yt=0;yt<ke.length-1;yt++)if(Wq(ke[yt],ke[yt+1],_t))return!0;return!1}(s.cameraQueryGeometry,ve-B,xe-B,Me+B,Se+B));for(const ve of te)X.push(ve);X.sort(mH);const re={};let le;for(let ve=0;ve<X.length;ve++){const xe=X[ve];if(xe===le)continue;le=xe;const Me=this.featureIndexArray.get(xe);let Se=null;this.loadMatchingFeature(re,Me.bucketIndex,Me.sourceLayerIndex,Me.featureIndex,A,S.layers,S.availableImages,f,m,_,(ke,Be,Je)=>(Se||(Se=kd(ke)),Be.queryIntersectsFeature(L,ke,Je,Se,this.z,s.transform,C,s.pixelPosMatrix)))}return re}loadMatchingFeature(s,f,m,_,S,C,A,L,B,q,X){const Y=this.bucketLayerIDs[f];if(C&&!function(ve,xe){for(let Me=0;Me<ve.length;Me++)if(xe.indexOf(ve[Me])>=0)return!0;return!1}(C,Y))return;const te=this.sourceLayerCoder.decode(m),re=this.vtLayers[te].feature(_);if(S.needGeometry){const ve=Nd(re,!0);if(!S.filter(new pr(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!S.filter(new pr(this.tileID.overscaledZ),re))return;const le=this.getId(re,te);for(let ve=0;ve<Y.length;ve++){const xe=Y[ve];if(C&&C.indexOf(xe)<0)continue;const Me=L[xe];if(!Me)continue;let Se={};le&&q&&(Se=q.getState(Me.sourceLayer||"_geojsonTileLayer",le));const ke=Z({},B[xe]);ke.paint=AL(ke.paint,Me.paint,re,Se,A),ke.layout=AL(ke.layout,Me.layout,re,Se,A);const Be=!X||X(re,Me,Se);if(!Be)continue;const Je=new TL(re,this.z,this.x,this.y,le);Je.layer=ke;let bt=s[xe];bt===void 0&&(bt=s[xe]=[]),bt.push({featureIndex:_,feature:Je,intersectionZ:Be})}}lookupSymbolFeatures(s,f,m,_,S,C,A,L){const B={};this.loadVTLayers();const q=Sv(S);for(const X of s)this.loadMatchingFeature(B,m,_,X,q,C,A,L,f);return B}hasLayer(s){for(const f of this.bucketLayerIDs)for(const m of f)if(s===m)return!0;return!1}getId(s,f){let m=s.id;return this.promoteId&&(m=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof m=="boolean"&&(m=Number(m))),m}}function AL(c,s,f,m,_){return oe(c,(S,C)=>{const A=s instanceof Sm?s.get(C):null;return A&&A.evaluate?A.evaluate(f,m,_):A})}function OL(c){let s=1/0,f=1/0,m=-1/0,_=-1/0;for(const S of c)s=Math.min(s,S.x),f=Math.min(f,S.y),m=Math.max(m,S.x),_=Math.max(_,S.y);return{minX:s,minY:f,maxX:m,maxY:_}}function mH(c,s){return s-c}function ML(c,s,f,m,_){const S=[];for(let C=0;C<c.length;C++){const A=c[C];let L;for(let B=0;B<A.length-1;B++){let q=A[B],X=A[B+1];q.x<s&&X.x<s||(q.x<s?q=new b(s,q.y+(s-q.x)/(X.x-q.x)*(X.y-q.y))._round():X.x<s&&(X=new b(s,q.y+(s-q.x)/(X.x-q.x)*(X.y-q.y))._round()),q.y<f&&X.y<f||(q.y<f?q=new b(q.x+(f-q.y)/(X.y-q.y)*(X.x-q.x),f)._round():X.y<f&&(X=new b(q.x+(f-q.y)/(X.y-q.y)*(X.x-q.x),f)._round()),q.x>=m&&X.x>=m||(q.x>=m?q=new b(m,q.y+(m-q.x)/(X.x-q.x)*(X.y-q.y))._round():X.x>=m&&(X=new b(m,q.y+(m-q.x)/(X.x-q.x)*(X.y-q.y))._round()),q.y>=_&&X.y>=_||(q.y>=_?q=new b(q.x+(_-q.y)/(X.y-q.y)*(X.x-q.x),_)._round():X.y>=_&&(X=new b(q.x+(_-q.y)/(X.y-q.y)*(X.x-q.x),_)._round()),L&&q.equals(L[L.length-1])||(L=[q],S.push(L)),L.push(X)))))}}return S}Pt("FeatureIndex",PL,{omit:["rawTileData","sourceLayerCoder"]});class nh extends b{constructor(s,f,m,_){super(s,f),this.angle=m,_!==void 0&&(this.segment=_)}clone(){return new nh(this.x,this.y,this.angle,this.segment)}}function $L(c,s,f,m,_){if(s.segment===void 0||f===0)return!0;let S=s,C=s.segment+1,A=0;for(;A>-f/2;){if(C--,C<0)return!1;A-=c[C].dist(S),S=c[C]}A+=c[C].dist(c[C+1]),C++;const L=[];let B=0;for(;A<f/2;){const q=c[C],X=c[C+1];if(!X)return!1;let Y=c[C-1].angleTo(q)-q.angleTo(X);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:A,angleDelta:Y}),B+=Y;A-L[0].distance>m;)B-=L.shift().angleDelta;if(B>_)return!1;C++,A+=q.dist(X)}return!0}function kL(c){let s=0;for(let f=0;f<c.length-1;f++)s+=c[f].dist(c[f+1]);return s}function NL(c,s,f){return c?.6*s*f:0}function LL(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function gH(c,s,f,m,_,S){const C=NL(f,_,S),A=LL(f,m)*S;let L=0;const B=kL(c)/2;for(let q=0;q<c.length-1;q++){const X=c[q],Y=c[q+1],te=X.dist(Y);if(L+te>B){const re=(B-L)/te,le=va.number(X.x,Y.x,re),ve=va.number(X.y,Y.y,re),xe=new nh(le,ve,Y.angleTo(X),q);return xe._round(),!C||$L(c,xe,A,C,s)?xe:void 0}L+=te}}function yH(c,s,f,m,_,S,C,A,L){const B=NL(m,S,C),q=LL(m,_),X=q*C,Y=c[0].x===0||c[0].x===L||c[0].y===0||c[0].y===L;return s-X<s/4&&(s=X+s/4),DL(c,Y?s/2*A%s:(q/2+2*S)*C*A%s,s,B,f,X,Y,!1,L)}function DL(c,s,f,m,_,S,C,A,L){const B=S/2,q=kL(c);let X=0,Y=s-f,te=[];for(let re=0;re<c.length-1;re++){const le=c[re],ve=c[re+1],xe=le.dist(ve),Me=ve.angleTo(le);for(;Y+f<X+xe;){Y+=f;const Se=(Y-X)/xe,ke=va.number(le.x,ve.x,Se),Be=va.number(le.y,ve.y,Se);if(ke>=0&&ke<L&&Be>=0&&Be<L&&Y-B>=0&&Y+B<=q){const Je=new nh(ke,Be,Me,re);Je._round(),m&&!$L(c,Je,S,m,_)||te.push(Je)}}X+=xe}return A||te.length||C||(te=DL(c,X/2,f,m,_,S,C,!0,L)),te}Pt("Anchor",nh);const km=Sa;function RL(c,s,f,m){const _=[],S=c.image,C=S.pixelRatio,A=S.paddedRect.w-2*km,L=S.paddedRect.h-2*km,B=c.right-c.left,q=c.bottom-c.top,X=S.stretchX||[[0,A]],Y=S.stretchY||[[0,L]],te=(ct,At)=>ct+At[1]-At[0],re=X.reduce(te,0),le=Y.reduce(te,0),ve=A-re,xe=L-le;let Me=0,Se=re,ke=0,Be=le,Je=0,bt=ve,kt=0,_t=xe;if(S.content&&m){const ct=S.content;Me=xb(X,0,ct[0]),ke=xb(Y,0,ct[1]),Se=xb(X,ct[0],ct[2]),Be=xb(Y,ct[1],ct[3]),Je=ct[0]-Me,kt=ct[1]-ke,bt=ct[2]-ct[0]-Se,_t=ct[3]-ct[1]-Be}const yt=(ct,At,pt,it)=>{const Gt=bb(ct.stretch-Me,Se,B,c.left),Lt=wb(ct.fixed-Je,bt,ct.stretch,re),fn=bb(At.stretch-ke,Be,q,c.top),gr=wb(At.fixed-kt,_t,At.stretch,le),Sr=bb(pt.stretch-Me,Se,B,c.left),Ci=wb(pt.fixed-Je,bt,pt.stretch,re),Ja=bb(it.stretch-ke,Be,q,c.top),na=wb(it.fixed-kt,_t,it.stretch,le),xi=new b(Gt,fn),Ji=new b(Sr,fn),ho=new b(Sr,Ja),ra=new b(Gt,Ja),ia=new b(Lt/C,gr/C),Ii=new b(Ci/C,na/C),Ti=s*Math.PI/180;if(Ti){const Ro=Math.sin(Ti),Ea=Math.cos(Ti),Ca=[Ea,-Ro,Ro,Ea];xi._matMult(Ca),Ji._matMult(Ca),ra._matMult(Ca),ho._matMult(Ca)}const Do=ct.stretch+ct.fixed,oa=At.stretch+At.fixed;return{tl:xi,tr:Ji,bl:ra,br:ho,tex:{x:S.paddedRect.x+km+Do,y:S.paddedRect.y+km+oa,w:pt.stretch+pt.fixed-Do,h:it.stretch+it.fixed-oa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ia,pixelOffsetBR:Ii,minFontScaleX:bt/C/B,minFontScaleY:_t/C/q,isSDF:f}};if(m&&(S.stretchX||S.stretchY)){const ct=zL(X,ve,re),At=zL(Y,xe,le);for(let pt=0;pt<ct.length-1;pt++){const it=ct[pt],Gt=ct[pt+1];for(let Lt=0;Lt<At.length-1;Lt++)_.push(yt(it,At[Lt],Gt,At[Lt+1]))}}else _.push(yt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:L+1}));return _}function xb(c,s,f){let m=0;for(const _ of c)m+=Math.max(s,Math.min(f,_[1]))-Math.max(s,Math.min(f,_[0]));return m}function zL(c,s,f){const m=[{fixed:-km,stretch:0}];for(const[_,S]of c){const C=m[m.length-1];m.push({fixed:_-C.stretch,stretch:C.stretch}),m.push({fixed:_-C.stretch,stretch:C.stretch+(S-_)})}return m.push({fixed:s+km,stretch:f}),m}function bb(c,s,f,m){return c/s*f+m}function wb(c,s,f,m){return c-s*f/m}class Sb{constructor(s,f,m,_,S,C,A,L,B,q){if(this.boxStartIndex=s.length,B){let X=C.top,Y=C.bottom;const te=C.collisionPadding;te&&(X-=te[1],Y+=te[3]);let re=Y-X;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{let X=C.top*A-L[0],Y=C.bottom*A+L[2],te=C.left*A-L[3],re=C.right*A+L[1];const le=C.collisionPadding;if(le&&(te-=le[0]*A,X-=le[1]*A,re+=le[2]*A,Y+=le[3]*A),q){const ve=new b(te,X),xe=new b(re,X),Me=new b(te,Y),Se=new b(re,Y),ke=q*Math.PI/180;ve._rotate(ke),xe._rotate(ke),Me._rotate(ke),Se._rotate(ke),te=Math.min(ve.x,xe.x,Me.x,Se.x),re=Math.max(ve.x,xe.x,Me.x,Se.x),X=Math.min(ve.y,xe.y,Me.y,Se.y),Y=Math.max(ve.y,xe.y,Me.y,Se.y)}s.emplaceBack(f.x,f.y,te,X,re,Y,m,_,S)}this.boxEndIndex=s.length}}class vH{constructor(s=[],f=_H){if(this.data=s,this.length=this.data.length,this.compare=f,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],f=this.data.pop();return this.length--,this.length>0&&(this.data[0]=f,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:f,compare:m}=this,_=f[s];for(;s>0;){const S=s-1>>1,C=f[S];if(m(_,C)>=0)break;f[s]=C,s=S}f[s]=_}_down(s){const{data:f,compare:m}=this,_=this.length>>1,S=f[s];for(;s<_;){let C=1+(s<<1),A=f[C];const L=C+1;if(L<this.length&&m(f[L],A)<0&&(C=L,A=f[L]),m(A,S)>=0)break;f[s]=A,s=C}f[s]=S}}function _H(c,s){return c<s?-1:c>s?1:0}function xH(c,s=1,f=!1){let m=1/0,_=1/0,S=-1/0,C=-1/0;const A=c[0];for(let te=0;te<A.length;te++){const re=A[te];(!te||re.x<m)&&(m=re.x),(!te||re.y<_)&&(_=re.y),(!te||re.x>S)&&(S=re.x),(!te||re.y>C)&&(C=re.y)}const L=Math.min(S-m,C-_);let B=L/2;const q=new vH([],bH);if(L===0)return new b(m,_);for(let te=m;te<S;te+=L)for(let re=_;re<C;re+=L)q.push(new Nm(te+B,re+B,B,c));let X=function(te){let re=0,le=0,ve=0;const xe=te[0];for(let Me=0,Se=xe.length,ke=Se-1;Me<Se;ke=Me++){const Be=xe[Me],Je=xe[ke],bt=Be.x*Je.y-Je.x*Be.y;le+=(Be.x+Je.x)*bt,ve+=(Be.y+Je.y)*bt,re+=3*bt}return new Nm(le/re,ve/re,0,te)}(c),Y=q.length;for(;q.length;){const te=q.pop();(te.d>X.d||!X.d)&&(X=te,f&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,Y)),te.max-X.d<=s||(B=te.h/2,q.push(new Nm(te.p.x-B,te.p.y-B,B,c)),q.push(new Nm(te.p.x+B,te.p.y-B,B,c)),q.push(new Nm(te.p.x-B,te.p.y+B,B,c)),q.push(new Nm(te.p.x+B,te.p.y+B,B,c)),Y+=4)}return f&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${X.d}`)),X.p}function bH(c,s){return s.max-c.max}function Nm(c,s,f,m){this.p=new b(c,s),this.h=f,this.d=function(_,S){let C=!1,A=1/0;for(let L=0;L<S.length;L++){const B=S[L];for(let q=0,X=B.length,Y=X-1;q<X;Y=q++){const te=B[q],re=B[Y];te.y>_.y!=re.y>_.y&&_.x<(re.x-te.x)*(_.y-te.y)/(re.y-te.y)+te.x&&(C=!C),A=Math.min(A,xN(_,te,re))}}return(C?1:-1)*Math.sqrt(A)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var fo;a.aq=void 0,(fo=a.aq||(a.aq={}))[fo.center=1]="center",fo[fo.left=2]="left",fo[fo.right=3]="right",fo[fo.top=4]="top",fo[fo.bottom=5]="bottom",fo[fo["top-left"]=6]="top-left",fo[fo["top-right"]=7]="top-right",fo[fo["bottom-left"]=8]="bottom-left",fo[fo["bottom-right"]=9]="bottom-right";const rh=7,SI=Number.POSITIVE_INFINITY;function FL(c,s){return s[1]!==SI?function(f,m,_){let S=0,C=0;switch(m=Math.abs(m),_=Math.abs(_),f){case"top-right":case"top-left":case"top":C=_-rh;break;case"bottom-right":case"bottom-left":case"bottom":C=-_+rh}switch(f){case"top-right":case"bottom-right":case"right":S=-m;break;case"top-left":case"bottom-left":case"left":S=m}return[S,C]}(c,s[0],s[1]):function(f,m){let _=0,S=0;m<0&&(m=0);const C=m/Math.SQRT2;switch(f){case"top-right":case"top-left":S=C-rh;break;case"bottom-right":case"bottom-left":S=-C+rh;break;case"bottom":S=-m+rh;break;case"top":S=m-rh}switch(f){case"top-right":case"bottom-right":_=-C;break;case"top-left":case"bottom-left":_=C;break;case"left":_=m;break;case"right":_=-m}return[_,S]}(c,s[0])}function BL(c,s,f){var m;const _=c.layout,S=(m=_.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(s,{},f);if(S){const A=S.values,L=[];for(let B=0;B<A.length;B+=2){const q=L[B]=A[B],X=A[B+1].map(Y=>Y*Ei);q.startsWith("top")?X[1]-=rh:q.startsWith("bottom")&&(X[1]+=rh),L[B+1]=X}return new Wa(L)}const C=_.get("text-variable-anchor");if(C){let A;A=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(s,{},f)*Ei,SI]:_.get("text-offset").evaluate(s,{},f).map(B=>B*Ei);const L=[];for(const B of C)L.push(B,FL(B,A));return new Wa(L)}return null}function EI(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wH(c,s,f,m,_,S,C,A,L,B,q){let X=S.textMaxSize.evaluate(s,{});X===void 0&&(X=C);const Y=c.layers[0].layout,te=Y.get("icon-offset").evaluate(s,{},q),re=UL(f.horizontal),le=C/24,ve=c.tilePixelRatio*le,xe=c.tilePixelRatio*X/24,Me=c.tilePixelRatio*A,Se=c.tilePixelRatio*Y.get("symbol-spacing"),ke=Y.get("text-padding")*c.tilePixelRatio,Be=function(it,Gt,Lt,fn=1){const gr=it.get("icon-padding").evaluate(Gt,{},Lt),Sr=gr&&gr.values;return[Sr[0]*fn,Sr[1]*fn,Sr[2]*fn,Sr[3]*fn]}(Y,s,q,c.tilePixelRatio),Je=Y.get("text-max-angle")/180*Math.PI,bt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",kt=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",_t=Y.get("symbol-placement"),yt=Se/2,ct=Y.get("icon-text-fit");let At;m&&ct!=="none"&&(c.allowVerticalPlacement&&f.vertical&&(At=cL(m,f.vertical,ct,Y.get("icon-text-fit-padding"),te,le)),re&&(m=cL(m,re,ct,Y.get("icon-text-fit-padding"),te,le)));const pt=(it,Gt)=>{Gt.x<0||Gt.x>=_i||Gt.y<0||Gt.y>=_i||function(Lt,fn,gr,Sr,Ci,Ja,na,xi,Ji,ho,ra,ia,Ii,Ti,Do,oa,Ro,Ea,Ca,Pi,vn,zo,po,Ai,ol){const eu=Lt.addToLineVertexArray(fn,gr);let tu,Bc,al,xs,Ia=0,jc=0,s_=0,WL=0,$I=-1,kI=-1;const Uc={};let HL=Dc("");if(Lt.allowVerticalPlacement&&Sr.vertical){const Fo=xi.layout.get("text-rotate").evaluate(vn,{},Ai)+90;al=new Sb(Ji,fn,ho,ra,ia,Sr.vertical,Ii,Ti,Do,Fo),na&&(xs=new Sb(Ji,fn,ho,ra,ia,na,Ro,Ea,Do,Fo))}if(Ci){const Fo=xi.layout.get("icon-rotate").evaluate(vn,{}),bs=xi.layout.get("icon-text-fit")!=="none",Dd=RL(Ci,Fo,po,bs),ru=na?RL(na,Fo,po,bs):void 0;Bc=new Sb(Ji,fn,ho,ra,ia,Ci,Ro,Ea,!1,Fo),Ia=4*Dd.length;const Rd=Lt.iconSizeData;let Zu=null;Rd.kind==="source"?(Zu=[Xu*xi.layout.get("icon-size").evaluate(vn,{})],Zu[0]>eh&&ae(`${Lt.layerIds[0]}: Value for "icon-size" is >= ${r_}. Reduce your "icon-size".`)):Rd.kind==="composite"&&(Zu=[Xu*zo.compositeIconSizes[0].evaluate(vn,{},Ai),Xu*zo.compositeIconSizes[1].evaluate(vn,{},Ai)],(Zu[0]>eh||Zu[1]>eh)&&ae(`${Lt.layerIds[0]}: Value for "icon-size" is >= ${r_}. Reduce your "icon-size".`)),Lt.addSymbols(Lt.icon,Dd,Zu,Pi,Ca,vn,a.ai.none,fn,eu.lineStartIndex,eu.lineLength,-1,Ai),$I=Lt.icon.placedSymbolArray.length-1,ru&&(jc=4*ru.length,Lt.addSymbols(Lt.icon,ru,Zu,Pi,Ca,vn,a.ai.vertical,fn,eu.lineStartIndex,eu.lineLength,-1,Ai),kI=Lt.icon.placedSymbolArray.length-1)}const XL=Object.keys(Sr.horizontal);for(const Fo of XL){const bs=Sr.horizontal[Fo];if(!tu){HL=Dc(bs.text);const ru=xi.layout.get("text-rotate").evaluate(vn,{},Ai);tu=new Sb(Ji,fn,ho,ra,ia,bs,Ii,Ti,Do,ru)}const Dd=bs.positionedLines.length===1;if(s_+=jL(Lt,fn,bs,Ja,xi,Do,vn,oa,eu,Sr.vertical?a.ai.horizontal:a.ai.horizontalOnly,Dd?XL:[Fo],Uc,$I,zo,Ai),Dd)break}Sr.vertical&&(WL+=jL(Lt,fn,Sr.vertical,Ja,xi,Do,vn,oa,eu,a.ai.vertical,["vertical"],Uc,kI,zo,Ai));const CH=tu?tu.boxStartIndex:Lt.collisionBoxArray.length,IH=tu?tu.boxEndIndex:Lt.collisionBoxArray.length,TH=al?al.boxStartIndex:Lt.collisionBoxArray.length,PH=al?al.boxEndIndex:Lt.collisionBoxArray.length,AH=Bc?Bc.boxStartIndex:Lt.collisionBoxArray.length,OH=Bc?Bc.boxEndIndex:Lt.collisionBoxArray.length,MH=xs?xs.boxStartIndex:Lt.collisionBoxArray.length,$H=xs?xs.boxEndIndex:Lt.collisionBoxArray.length;let nu=-1;const Cb=(Fo,bs)=>Fo&&Fo.circleDiameter?Math.max(Fo.circleDiameter,bs):bs;nu=Cb(tu,nu),nu=Cb(al,nu),nu=Cb(Bc,nu),nu=Cb(xs,nu);const ZL=nu>-1?1:0;ZL&&(nu*=ol/Ei),Lt.glyphOffsetArray.length>=$m.MAX_GLYPHS&&ae("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),vn.sortKey!==void 0&&Lt.addToSortKeyRanges(Lt.symbolInstances.length,vn.sortKey);const kH=BL(xi,vn,Ai),[NH,LH]=function(Fo,bs){const Dd=Fo.length,ru=bs==null?void 0:bs.values;if((ru==null?void 0:ru.length)>0)for(let Rd=0;Rd<ru.length;Rd+=2){const Zu=ru[Rd+1];Fo.emplaceBack(a.aq[ru[Rd]],Zu[0],Zu[1])}return[Dd,Fo.length]}(Lt.textAnchorOffsets,kH);Lt.symbolInstances.emplaceBack(fn.x,fn.y,Uc.right>=0?Uc.right:-1,Uc.center>=0?Uc.center:-1,Uc.left>=0?Uc.left:-1,Uc.vertical||-1,$I,kI,HL,CH,IH,TH,PH,AH,OH,MH,$H,ho,s_,WL,Ia,jc,ZL,0,Ii,nu,NH,LH)}(c,Gt,it,f,m,_,At,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,ve,[ke,ke,ke,ke],bt,L,Me,Be,kt,te,s,S,B,q,C)};if(_t==="line")for(const it of ML(s.geometry,0,0,_i,_i)){const Gt=yH(it,Se,Je,f.vertical||re,m,24,xe,c.overscaling,_i);for(const Lt of Gt)re&&SH(c,re.text,yt,Lt)||pt(it,Lt)}else if(_t==="line-center"){for(const it of s.geometry)if(it.length>1){const Gt=gH(it,Je,f.vertical||re,m,24,xe);Gt&&pt(it,Gt)}}else if(s.type==="Polygon")for(const it of nI(s.geometry,0)){const Gt=xH(it,16);pt(it[0],new nh(Gt.x,Gt.y,0))}else if(s.type==="LineString")for(const it of s.geometry)pt(it,new nh(it[0].x,it[0].y,0));else if(s.type==="Point")for(const it of s.geometry)for(const Gt of it)pt([Gt],new nh(Gt.x,Gt.y,0))}function jL(c,s,f,m,_,S,C,A,L,B,q,X,Y,te,re){const le=function(Me,Se,ke,Be,Je,bt,kt,_t){const yt=Be.layout.get("text-rotate").evaluate(bt,{})*Math.PI/180,ct=[];for(const At of Se.positionedLines)for(const pt of At.positionedGlyphs){if(!pt.rect)continue;const it=pt.rect||{};let Gt=rL+1,Lt=!0,fn=1,gr=0;const Sr=(Je||_t)&&pt.vertical,Ci=pt.metrics.advance*pt.scale/2;if(_t&&Se.verticalizable&&(gr=At.lineOffset/2-(pt.imageName?-(Ei-pt.metrics.width*pt.scale)/2:(pt.scale-1)*Ei)),pt.imageName){const Pi=kt[pt.imageName];Lt=Pi.sdf,fn=Pi.pixelRatio,Gt=Sa/fn}const Ja=Je?[pt.x+Ci,pt.y]:[0,0];let na=Je?[0,0]:[pt.x+Ci+ke[0],pt.y+ke[1]-gr],xi=[0,0];Sr&&(xi=na,na=[0,0]);const Ji=pt.metrics.isDoubleResolution?2:1,ho=(pt.metrics.left-Gt)*pt.scale-Ci+na[0],ra=(-pt.metrics.top-Gt)*pt.scale+na[1],ia=ho+it.w/Ji*pt.scale/fn,Ii=ra+it.h/Ji*pt.scale/fn,Ti=new b(ho,ra),Do=new b(ia,ra),oa=new b(ho,Ii),Ro=new b(ia,Ii);if(Sr){const Pi=new b(-Ci,Ci-t_),vn=-Math.PI/2,zo=Ei/2-Ci,po=new b(5-t_-zo,-(pt.imageName?zo:0)),Ai=new b(...xi);Ti._rotateAround(vn,Pi)._add(po)._add(Ai),Do._rotateAround(vn,Pi)._add(po)._add(Ai),oa._rotateAround(vn,Pi)._add(po)._add(Ai),Ro._rotateAround(vn,Pi)._add(po)._add(Ai)}if(yt){const Pi=Math.sin(yt),vn=Math.cos(yt),zo=[vn,-Pi,Pi,vn];Ti._matMult(zo),Do._matMult(zo),oa._matMult(zo),Ro._matMult(zo)}const Ea=new b(0,0),Ca=new b(0,0);ct.push({tl:Ti,tr:Do,bl:oa,br:Ro,tex:it,writingMode:Se.writingMode,glyphOffset:Ja,sectionIndex:pt.sectionIndex,isSDF:Lt,pixelOffsetTL:Ea,pixelOffsetBR:Ca,minFontScaleX:0,minFontScaleY:0})}return ct}(0,f,A,_,S,C,m,c.allowVerticalPlacement),ve=c.textSizeData;let xe=null;ve.kind==="source"?(xe=[Xu*_.layout.get("text-size").evaluate(C,{})],xe[0]>eh&&ae(`${c.layerIds[0]}: Value for "text-size" is >= ${r_}. Reduce your "text-size".`)):ve.kind==="composite"&&(xe=[Xu*te.compositeTextSizes[0].evaluate(C,{},re),Xu*te.compositeTextSizes[1].evaluate(C,{},re)],(xe[0]>eh||xe[1]>eh)&&ae(`${c.layerIds[0]}: Value for "text-size" is >= ${r_}. Reduce your "text-size".`)),c.addSymbols(c.text,le,xe,A,S,C,B,s,L.lineStartIndex,L.lineLength,Y,re);for(const Me of q)X[Me]=c.text.placedSymbolArray.length-1;return 4*le.length}function UL(c){for(const s in c)return c[s];return null}function SH(c,s,f,m){const _=c.compareText;if(s in _){const S=_[s];for(let C=S.length-1;C>=0;C--)if(m.dist(S[C])<f)return!0}else _[s]=[];return _[s].push(m),!1}const VL=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class CI{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[f,m]=new Uint8Array(s,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=m>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const S=VL[15&m];if(!S)throw new Error("Unrecognized array type.");const[C]=new Uint16Array(s,2,1),[A]=new Uint32Array(s,4,1);return new CI(A,C,S,s)}constructor(s,f=64,m=Float64Array,_){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=m,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const S=VL.indexOf(this.ArrayType),C=2*s*this.ArrayType.BYTES_PER_ELEMENT,A=s*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-A%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${m}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+A+L,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+C+A+L),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+A+L,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=s)}add(s,f){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=s,this.coords[this._pos++]=f,m}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return II(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,f,m,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:C,nodeSize:A}=this,L=[0,S.length-1,0],B=[];for(;L.length;){const q=L.pop()||0,X=L.pop()||0,Y=L.pop()||0;if(X-Y<=A){for(let ve=Y;ve<=X;ve++){const xe=C[2*ve],Me=C[2*ve+1];xe>=s&&xe<=m&&Me>=f&&Me<=_&&B.push(S[ve])}continue}const te=Y+X>>1,re=C[2*te],le=C[2*te+1];re>=s&&re<=m&&le>=f&&le<=_&&B.push(S[te]),(q===0?s<=re:f<=le)&&(L.push(Y),L.push(te-1),L.push(1-q)),(q===0?m>=re:_>=le)&&(L.push(te+1),L.push(X),L.push(1-q))}return B}within(s,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:S,nodeSize:C}=this,A=[0,_.length-1,0],L=[],B=m*m;for(;A.length;){const q=A.pop()||0,X=A.pop()||0,Y=A.pop()||0;if(X-Y<=C){for(let ve=Y;ve<=X;ve++)qL(S[2*ve],S[2*ve+1],s,f)<=B&&L.push(_[ve]);continue}const te=Y+X>>1,re=S[2*te],le=S[2*te+1];qL(re,le,s,f)<=B&&L.push(_[te]),(q===0?s-m<=re:f-m<=le)&&(A.push(Y),A.push(te-1),A.push(1-q)),(q===0?s+m>=re:f+m>=le)&&(A.push(te+1),A.push(X),A.push(1-q))}return L}}function II(c,s,f,m,_,S){if(_-m<=f)return;const C=m+_>>1;GL(c,s,C,m,_,S),II(c,s,f,m,C-1,1-S),II(c,s,f,C+1,_,1-S)}function GL(c,s,f,m,_,S){for(;_>m;){if(_-m>600){const B=_-m+1,q=f-m+1,X=Math.log(B),Y=.5*Math.exp(2*X/3),te=.5*Math.sqrt(X*Y*(B-Y)/B)*(q-B/2<0?-1:1);GL(c,s,f,Math.max(m,Math.floor(f-q*Y/B+te)),Math.min(_,Math.floor(f+(B-q)*Y/B+te)),S)}const C=s[2*f+S];let A=m,L=_;for(o_(c,s,m,f),s[2*_+S]>C&&o_(c,s,m,_);A<L;){for(o_(c,s,A,L),A++,L--;s[2*A+S]<C;)A++;for(;s[2*L+S]>C;)L--}s[2*m+S]===C?o_(c,s,m,L):(L++,o_(c,s,L,_)),L<=f&&(m=L+1),f<=L&&(_=L-1)}}function o_(c,s,f,m){TI(c,f,m),TI(s,2*f,2*m),TI(s,2*f+1,2*m+1)}function TI(c,s,f){const m=c[s];c[s]=c[f],c[f]=m}function qL(c,s,f,m){const _=c-f,S=s-m;return _*_+S*S}var PI;a.bh=void 0,(PI=a.bh||(a.bh={})).create="create",PI.load="load",PI.fullLoad="fullLoad";let Eb=null,a_=[];const AI=1e3/60,OI="loadTime",MI="fullLoadTime",EH={mark(c){performance.mark(c)},frame(c){const s=c;Eb!=null&&a_.push(s-Eb),Eb=s},clearMetrics(){Eb=null,a_=[],performance.clearMeasures(OI),performance.clearMeasures(MI);for(const c in a.bh)performance.clearMarks(a.bh[c])},getPerformanceMetrics(){performance.measure(OI,a.bh.create,a.bh.load),performance.measure(MI,a.bh.create,a.bh.fullLoad);const c=performance.getEntriesByName(OI)[0].duration,s=performance.getEntriesByName(MI)[0].duration,f=a_.length,m=1/(a_.reduce((S,C)=>S+C,0)/f/1e3),_=a_.filter(S=>S>AI).reduce((S,C)=>S+(C-AI)/AI,0);return{loadTime:c,fullLoadTime:s,fps:m,percentDroppedFrames:_/(f+_)*100,totalFrames:f}}};a.$=function(c,s,f){var m,_,S,C,A,L,B,q,X,Y,te,re,le=f[0],ve=f[1],xe=f[2];return s===c?(c[12]=s[0]*le+s[4]*ve+s[8]*xe+s[12],c[13]=s[1]*le+s[5]*ve+s[9]*xe+s[13],c[14]=s[2]*le+s[6]*ve+s[10]*xe+s[14],c[15]=s[3]*le+s[7]*ve+s[11]*xe+s[15]):(_=s[1],S=s[2],C=s[3],A=s[4],L=s[5],B=s[6],q=s[7],X=s[8],Y=s[9],te=s[10],re=s[11],c[0]=m=s[0],c[1]=_,c[2]=S,c[3]=C,c[4]=A,c[5]=L,c[6]=B,c[7]=q,c[8]=X,c[9]=Y,c[10]=te,c[11]=re,c[12]=m*le+A*ve+X*xe+s[12],c[13]=_*le+L*ve+Y*xe+s[13],c[14]=S*le+B*ve+te*xe+s[14],c[15]=C*le+q*ve+re*xe+s[15]),c},a.A=Im,a.B=va,a.C=class{constructor(c,s,f){this.receive=m=>{const _=m.data,S=_.id;if(S&&(!_.targetMapId||this.mapId===_.targetMapId))if(_.type==="<cancel>"){delete this.tasks[S];const C=this.cancelCallbacks[S];delete this.cancelCallbacks[S],C&&C()}else Le()||_.mustQueue?(this.tasks[S]=_,this.taskQueue.push(S),this.invoker.trigger()):this.processTask(S,_)},this.process=()=>{if(!this.taskQueue.length)return;const m=this.taskQueue.shift(),_=this.tasks[m];delete this.tasks[m],this.taskQueue.length&&this.invoker.trigger(),_&&this.processTask(m,_)},this.target=c,this.parent=s,this.mapId=f,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new pH(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Le()?c:window}send(c,s,f,m,_=!1){const S=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(this.callbacks[S]=f);const C=[],A={id:S,type:c,hasCallback:!!f,targetMapId:m,mustQueue:_,sourceMapId:this.mapId,data:qu(s,C)};return this.target.postMessage(A,{transfer:C}),{cancel:()=>{f&&delete this.callbacks[S],this.target.postMessage({id:S,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}processTask(c,s){if(s.type==="<response>"){const f=this.callbacks[c];delete this.callbacks[c],f&&(s.error?f(Xf(s.error)):f(null,Xf(s.data)))}else{let f=!1;const m=[],_=s.hasCallback?(A,L)=>{f=!0,delete this.cancelCallbacks[c];const B={id:c,type:"<response>",sourceMapId:this.mapId,error:A?qu(A):null,data:qu(L,m)};this.target.postMessage(B,{transfer:m})}:A=>{f=!0};let S=null;const C=Xf(s.data);if(this.parent[s.type])S=this.parent[s.type](s.sourceMapId,C,_);else if("getWorkerSource"in this.parent){const A=s.type.split(".");S=this.parent.getWorkerSource(s.sourceMapId,A[0],C.source)[A[1]](C,_)}else _(new Error(`Could not find function ${s.type}`));!f&&S&&S.cancel&&(this.cancelCallbacks[c]=S.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.D=Rt,a.E=br,a.F=function(c,s){const f={};for(let m=0;m<s.length;m++){const _=s[m];_ in c&&(f[_]=c[_])}return f},a.G=_L,a.H=xL,a.I=hI,a.J=k,a.K=R,a.L=th,a.M=He,a.N=_i,a.O=_s,a.P=b,a.Q=Mr,a.R=vs,a.S=mr,a.T=Q1,a.U=_b,a.V=class extends Nc{},a.W=wI,a.X=function(c,s){const f=window.document.createElement("video");f.muted=!0,f.onloadstart=function(){s(null,f)};for(let m=0;m<c.length;m++){const _=window.document.createElement("source");Ct(c[m])||(f.crossOrigin="Anonymous"),_.src=c[m],f.appendChild(_)}return{cancel:()=>{}}},a.Y=ut,a.Z=function(){var c=new Im(16);return Im!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},a._=h,a.a=de,a.a$=class extends ee{},a.a0=function(c,s,f){var m=f[0],_=f[1],S=f[2];return c[0]=s[0]*m,c[1]=s[1]*m,c[2]=s[2]*m,c[3]=s[3]*m,c[4]=s[4]*_,c[5]=s[5]*_,c[6]=s[6]*_,c[7]=s[7]*_,c[8]=s[8]*S,c[9]=s[9]*S,c[10]=s[10]*S,c[11]=s[11]*S,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},a.a1=EN,a.a2=function(){return ne++},a.a3=ge,a.a4=$m,a.a5=function(){ba.isLoading()||ba.isLoaded()||Nv()!=="deferred"||J1()},a.a6=Sv,a.a7=Nd,a.a8=pr,a.a9=TL,a.aA=Pd,a.aB=function(c){c=c.slice();const s=Object.create(null);for(let f=0;f<c.length;f++)s[c[f].id]=c[f];for(let f=0;f<c.length;f++)"ref"in c[f]&&(c[f]=ar(c[f],s[c[f].ref]));return c},a.aC=function(c){if(c.type==="custom")return new dH(c);switch(c.type){case"background":return new cH(c);case"circle":return new Zq(c);case"fill":return new mW(c);case"fill-extrusion":return new OW(c);case"heatmap":return new Yq(c);case"hillshade":return new Qq(c);case"line":return new zW(c);case"raster":return new hH(c);case"symbol":return new vb(c)}},a.aD=fe,a.aE=function(c,s){if(!c)return[{command:cn.setStyle,args:[s]}];let f=[];try{if(!bn(c.version,s.version))return[{command:cn.setStyle,args:[s]}];bn(c.center,s.center)||f.push({command:cn.setCenter,args:[s.center]}),bn(c.zoom,s.zoom)||f.push({command:cn.setZoom,args:[s.zoom]}),bn(c.bearing,s.bearing)||f.push({command:cn.setBearing,args:[s.bearing]}),bn(c.pitch,s.pitch)||f.push({command:cn.setPitch,args:[s.pitch]}),bn(c.sprite,s.sprite)||f.push({command:cn.setSprite,args:[s.sprite]}),bn(c.glyphs,s.glyphs)||f.push({command:cn.setGlyphs,args:[s.glyphs]}),bn(c.transition,s.transition)||f.push({command:cn.setTransition,args:[s.transition]}),bn(c.light,s.light)||f.push({command:cn.setLight,args:[s.light]});const m={},_=[];(function(C,A,L,B){let q;for(q in A=A||{},C=C||{})Object.prototype.hasOwnProperty.call(C,q)&&(Object.prototype.hasOwnProperty.call(A,q)||Di(q,L,B));for(q in A)Object.prototype.hasOwnProperty.call(A,q)&&(Object.prototype.hasOwnProperty.call(C,q)?bn(C[q],A[q])||(C[q].type==="geojson"&&A[q].type==="geojson"&&Bu(C,A,q)?L.push({command:cn.setGeoJSONSourceData,args:[q,A[q].data]}):Va(q,A,L,B)):ko(q,A,L))})(c.sources,s.sources,_,m);const S=[];c.layers&&c.layers.forEach(C=>{m[C.source]?f.push({command:cn.removeLayer,args:[C.id]}):S.push(C)}),f=f.concat(_),function(C,A,L){A=A||[];const B=(C=C||[]).map(Js),q=A.map(Js),X=C.reduce(Wl,{}),Y=A.reduce(Wl,{}),te=B.slice(),re=Object.create(null);let le,ve,xe,Me,Se,ke,Be;for(le=0,ve=0;le<B.length;le++)xe=B[le],Object.prototype.hasOwnProperty.call(Y,xe)?ve++:(L.push({command:cn.removeLayer,args:[xe]}),te.splice(te.indexOf(xe,ve),1));for(le=0,ve=0;le<q.length;le++)xe=q[q.length-1-le],te[te.length-1-le]!==xe&&(Object.prototype.hasOwnProperty.call(X,xe)?(L.push({command:cn.removeLayer,args:[xe]}),te.splice(te.lastIndexOf(xe,te.length-ve),1)):ve++,ke=te[te.length-le],L.push({command:cn.addLayer,args:[Y[xe],ke]}),te.splice(te.length-le,0,xe),re[xe]=!0);for(le=0;le<q.length;le++)if(xe=q[le],Me=X[xe],Se=Y[xe],!re[xe]&&!bn(Me,Se))if(bn(Me.source,Se.source)&&bn(Me["source-layer"],Se["source-layer"])&&bn(Me.type,Se.type)){for(Be in Ys(Me.layout,Se.layout,L,xe,null,cn.setLayoutProperty),Ys(Me.paint,Se.paint,L,xe,null,cn.setPaintProperty),bn(Me.filter,Se.filter)||L.push({command:cn.setFilter,args:[xe,Se.filter]}),bn(Me.minzoom,Se.minzoom)&&bn(Me.maxzoom,Se.maxzoom)||L.push({command:cn.setLayerZoomRange,args:[xe,Se.minzoom,Se.maxzoom]}),Me)Object.prototype.hasOwnProperty.call(Me,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?Ys(Me[Be],Se[Be],L,xe,Be.slice(6),cn.setPaintProperty):bn(Me[Be],Se[Be])||L.push({command:cn.setLayerProperty,args:[xe,Be,Se[Be]]}));for(Be in Se)Object.prototype.hasOwnProperty.call(Se,Be)&&!Object.prototype.hasOwnProperty.call(Me,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?Ys(Me[Be],Se[Be],L,xe,Be.slice(6),cn.setPaintProperty):bn(Me[Be],Se[Be])||L.push({command:cn.setLayerProperty,args:[xe,Be,Se[Be]]}))}else L.push({command:cn.removeLayer,args:[xe]}),ke=te[te.lastIndexOf(xe)+1],L.push({command:cn.addLayer,args:[Se,ke]})}(S,s.layers,f)}catch(m){console.warn("Unable to compute style diff:",m),f=[{command:cn.setStyle,args:[s]}]}return f},a.aF=function(c){const s=[],f=c.id;return f===void 0&&s.push({message:`layers.${f}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${f}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),s},a.aG=function c(s,f){if(Array.isArray(s)){if(!Array.isArray(f)||s.length!==f.length)return!1;for(let m=0;m<s.length;m++)if(!c(s[m],f[m]))return!1;return!0}if(typeof s=="object"&&s!==null&&f!==null){if(typeof f!="object"||Object.keys(s).length!==Object.keys(f).length)return!1;for(const m in s)if(!c(s[m],f[m]))return!1;return!0}return s===f},a.aH=oe,a.aI=ye,a.aJ=Ad,a.aK=function(c){return c({pluginStatus:Qo,pluginURL:Wu}),Ad.on("pluginStateChange",c),c},a.aL=class extends Rc{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},a.aM=Em,a.aN=class extends Rc{constructor(c,s){super(c,s),this.current=GC}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},a.aO=rb,a.aP=class extends Rc{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},a.aQ=class extends Rc{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},a.aR=ib,a.aS=function(c,s,f,m,_,S,C){var A=1/(s-f),L=1/(m-_),B=1/(S-C);return c[0]=-2*A,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*L,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*B,c[11]=0,c[12]=(s+f)*A,c[13]=(_+m)*L,c[14]=(C+S)*B,c[15]=1,c},a.aT=Zn,a.aU=Xq,a.aV=class extends y{},a.aW=UW,a.aX=class extends E{},a.aY=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},a.aZ=AN,a.a_=st,a.aa=function(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,m,_,S)=>{const C=_||S;return s[m]=!C||C.toLowerCase(),""}),s["max-age"]){const f=parseInt(s["max-age"],10);isNaN(f)?delete s["max-age"]:s["max-age"]=f}return s},a.ab=function(c,s){const f=[];for(const m in c)m in s||f.push(m);return f},a.ac=function(c){if(Ee==null){const s=c.navigator?c.navigator.userAgent:null;Ee=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Ee},a.ad=U,a.ae=function(c,s,f){var m=Math.sin(f),_=Math.cos(f),S=s[0],C=s[1],A=s[2],L=s[3],B=s[4],q=s[5],X=s[6],Y=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=S*_+B*m,c[1]=C*_+q*m,c[2]=A*_+X*m,c[3]=L*_+Y*m,c[4]=B*_-S*m,c[5]=q*_-C*m,c[6]=X*_-A*m,c[7]=Y*_-L*m,c},a.af=function(c){var s=new Im(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},a.ag=lb,a.ah=function(c,s){let f=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:_,minZoom:S,maxZoom:C}=c,A=_?U(_a.interpolationFactor(_,s,S,C),0,1):0;c.kind==="camera"?m=va.number(c.minSize,c.maxSize,A):f=A}return{uSizeT:f,uSize:m}},a.aj=function(c,{uSize:s,uSizeT:f},{lowerSize:m,upperSize:_}){return c.kind==="source"?m/Xu:c.kind==="composite"?va.number(m/Xu,_/Xu,f):s},a.ak=gI,a.al=function(c,s,f,m){const _=s.y-c.y,S=s.x-c.x,C=m.y-f.y,A=m.x-f.x,L=C*S-A*_;if(L===0)return null;const B=(A*(c.y-f.y)-C*(c.x-f.x))/L;return new b(c.x+B*S,c.y+B*_)},a.am=ML,a.an=vN,a.ao=ZC,a.ap=Ei,a.ar=mI,a.as=function(c,s){var f=s[0],m=s[1],_=s[2],S=s[3],C=s[4],A=s[5],L=s[6],B=s[7],q=s[8],X=s[9],Y=s[10],te=s[11],re=s[12],le=s[13],ve=s[14],xe=s[15],Me=f*A-m*C,Se=f*L-_*C,ke=f*B-S*C,Be=m*L-_*A,Je=m*B-S*A,bt=_*B-S*L,kt=q*le-X*re,_t=q*ve-Y*re,yt=q*xe-te*re,ct=X*ve-Y*le,At=X*xe-te*le,pt=Y*xe-te*ve,it=Me*pt-Se*At+ke*ct+Be*yt-Je*_t+bt*kt;return it?(c[0]=(A*pt-L*At+B*ct)*(it=1/it),c[1]=(_*At-m*pt-S*ct)*it,c[2]=(le*bt-ve*Je+xe*Be)*it,c[3]=(Y*Je-X*bt-te*Be)*it,c[4]=(L*yt-C*pt-B*_t)*it,c[5]=(f*pt-_*yt+S*_t)*it,c[6]=(ve*ke-re*bt-xe*Se)*it,c[7]=(q*bt-Y*ke+te*Se)*it,c[8]=(C*At-A*yt+B*kt)*it,c[9]=(m*yt-f*At-S*kt)*it,c[10]=(re*Je-le*ke+xe*Me)*it,c[11]=(X*ke-q*Je-te*Me)*it,c[12]=(A*_t-C*ct-L*kt)*it,c[13]=(f*ct-m*_t+_*kt)*it,c[14]=(le*Se-re*Be-ve*Me)*it,c[15]=(q*Be-X*Se+Y*Me)*it,c):null},a.at=EI,a.au=pI,a.av=CI,a.aw=function(){const c={},s=Ge.$version;for(const f in Ge.$root){const m=Ge.$root[f];if(m.required){let _=null;_=f==="version"?s:m.type==="array"?[]:{},_!=null&&(c[f]=_)}}return c},a.ax=cn,a.ay=X1,a.az=Qe,a.b=function(c,s){const f=new Blob([new Uint8Array(c)],{type:"image/png"});createImageBitmap(f).then(m=>{s(null,m)}).catch(m=>{s(new Error(`Could not load image because of ${m.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},a.b0=Ki,a.b1=function(c,s){var f=c[0],m=c[1],_=c[2],S=c[3],C=c[4],A=c[5],L=c[6],B=c[7],q=c[8],X=c[9],Y=c[10],te=c[11],re=c[12],le=c[13],ve=c[14],xe=c[15],Me=s[0],Se=s[1],ke=s[2],Be=s[3],Je=s[4],bt=s[5],kt=s[6],_t=s[7],yt=s[8],ct=s[9],At=s[10],pt=s[11],it=s[12],Gt=s[13],Lt=s[14],fn=s[15];return Math.abs(f-Me)<=ta*Math.max(1,Math.abs(f),Math.abs(Me))&&Math.abs(m-Se)<=ta*Math.max(1,Math.abs(m),Math.abs(Se))&&Math.abs(_-ke)<=ta*Math.max(1,Math.abs(_),Math.abs(ke))&&Math.abs(S-Be)<=ta*Math.max(1,Math.abs(S),Math.abs(Be))&&Math.abs(C-Je)<=ta*Math.max(1,Math.abs(C),Math.abs(Je))&&Math.abs(A-bt)<=ta*Math.max(1,Math.abs(A),Math.abs(bt))&&Math.abs(L-kt)<=ta*Math.max(1,Math.abs(L),Math.abs(kt))&&Math.abs(B-_t)<=ta*Math.max(1,Math.abs(B),Math.abs(_t))&&Math.abs(q-yt)<=ta*Math.max(1,Math.abs(q),Math.abs(yt))&&Math.abs(X-ct)<=ta*Math.max(1,Math.abs(X),Math.abs(ct))&&Math.abs(Y-At)<=ta*Math.max(1,Math.abs(Y),Math.abs(At))&&Math.abs(te-pt)<=ta*Math.max(1,Math.abs(te),Math.abs(pt))&&Math.abs(re-it)<=ta*Math.max(1,Math.abs(re),Math.abs(it))&&Math.abs(le-Gt)<=ta*Math.max(1,Math.abs(le),Math.abs(Gt))&&Math.abs(ve-Lt)<=ta*Math.max(1,Math.abs(ve),Math.abs(Lt))&&Math.abs(xe-fn)<=ta*Math.max(1,Math.abs(xe),Math.abs(fn))},a.b2=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},a.b3=function(c,s,f){return c[0]=s[0]*f[0],c[1]=s[1]*f[1],c[2]=s[2]*f[2],c[3]=s[3]*f[3],c},a.b4=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]*s[3]},a.b5=G,a.b6=EL,a.b7=bL,a.b8=function(c,s,f,m,_){var S,C=1/Math.tan(s/2);return c[0]=C/f,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=C,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,_!=null&&_!==1/0?(c[10]=(_+m)*(S=1/(m-_)),c[14]=2*_*m*S):(c[10]=-1,c[14]=-2*m),c},a.b9=function(c,s,f){var m=Math.sin(f),_=Math.cos(f),S=s[4],C=s[5],A=s[6],L=s[7],B=s[8],q=s[9],X=s[10],Y=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=S*_+B*m,c[5]=C*_+q*m,c[6]=A*_+X*m,c[7]=L*_+Y*m,c[8]=B*_-S*m,c[9]=q*_-C*m,c[10]=X*_-A*m,c[11]=Y*_-L*m,c},a.bA=g,a.bB=KN,a.bC=dm,a.bD=ba,a.ba=j,a.bb=F,a.bc=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},a.bd=class extends $d{},a.be=xI,a.bf=wL,a.bg=EH,a.bi=Vt,a.bj=function(c,s,f=!1){if(Qo===Av||Qo===Ov||Qo===Mv)throw new Error("setRTLTextPlugin cannot be called multiple times.");Wu=Yt.resolveURL(c),Qo=Av,$v=s,kv(),f||J1()},a.bk=Nv,a.bl=function(c,s){const f={};for(let _=0;_<c.length;_++){const S=s&&s[c[_].id]||ym(c[_]);s&&(s[c[_].id]=S);let C=f[S];C||(C=f[S]=[]),C.push(c[_])}const m=[];for(const _ in f)m.push(f[_]);return m},a.bm=Pt,a.bn=IL,a.bo=PL,a.bp=oL,a.bq=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=_i/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0],f=s.layout,m=s._unevaluatedLayout._values,_={layoutIconSize:m["icon-size"].possiblyEvaluate(new pr(c.bucket.zoom+1),c.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new pr(c.bucket.zoom+1),c.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new pr(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:B,maxZoom:q}=c.bucket.textSizeData;_.compositeTextSizes=[m["text-size"].possiblyEvaluate(new pr(B),c.canonical),m["text-size"].possiblyEvaluate(new pr(q),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:B,maxZoom:q}=c.bucket.iconSizeData;_.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new pr(B),c.canonical),m["icon-size"].possiblyEvaluate(new pr(q),c.canonical)]}const S=f.get("text-line-height")*Ei,C=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",A=f.get("text-keep-upright"),L=f.get("text-size");for(const B of c.bucket.features){const q=f.get("text-font").evaluate(B,{},c.canonical).join(","),X=L.evaluate(B,{},c.canonical),Y=_.layoutTextSize.evaluate(B,{},c.canonical),te=_.layoutIconSize.evaluate(B,{},c.canonical),re={horizontal:{},vertical:void 0},le=B.text;let ve,xe=[0,0];if(le){const ke=le.toString(),Be=f.get("text-letter-spacing").evaluate(B,{},c.canonical)*Ei,Je=Tv(ke)?Be:0,bt=f.get("text-anchor").evaluate(B,{},c.canonical),kt=BL(s,B,c.canonical);if(!kt){const pt=f.get("text-radial-offset").evaluate(B,{},c.canonical);xe=pt?FL(bt,[pt*Ei,SI]):f.get("text-offset").evaluate(B,{},c.canonical).map(it=>it*Ei)}let _t=C?"center":f.get("text-justify").evaluate(B,{},c.canonical);const yt=f.get("symbol-placement"),ct=yt==="point"?f.get("text-max-width").evaluate(B,{},c.canonical)*Ei:0,At=()=>{c.bucket.allowVerticalPlacement&&Iv(ke)&&(re.vertical=mb(le,c.glyphMap,c.glyphPositions,c.imagePositions,q,ct,S,bt,"left",Je,xe,a.ai.vertical,!0,yt,Y,X))};if(!C&&kt){const pt=new Set;if(_t==="auto")for(let Gt=0;Gt<kt.values.length;Gt+=2)pt.add(EI(kt.values[Gt]));else pt.add(_t);let it=!1;for(const Gt of pt)if(!re.horizontal[Gt])if(it)re.horizontal[Gt]=re.horizontal[0];else{const Lt=mb(le,c.glyphMap,c.glyphPositions,c.imagePositions,q,ct,S,"center",Gt,Je,xe,a.ai.horizontal,!1,yt,Y,X);Lt&&(re.horizontal[Gt]=Lt,it=Lt.positionedLines.length===1)}At()}else{_t==="auto"&&(_t=EI(bt));const pt=mb(le,c.glyphMap,c.glyphPositions,c.imagePositions,q,ct,S,bt,_t,Je,xe,a.ai.horizontal,!1,yt,Y,X);pt&&(re.horizontal[_t]=pt),At(),Iv(ke)&&C&&A&&(re.vertical=mb(le,c.glyphMap,c.glyphPositions,c.imagePositions,q,ct,S,bt,_t,Je,xe,a.ai.vertical,!1,yt,Y,X))}}let Me=!1;if(B.icon&&B.icon.name){const ke=c.imageMap[B.icon.name];ke&&(ve=oH(c.imagePositions[B.icon.name],f.get("icon-offset").evaluate(B,{},c.canonical),f.get("icon-anchor").evaluate(B,{},c.canonical)),Me=!!ke.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Me:c.bucket.sdfIcons!==Me&&ae("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ke.pixelRatio!==c.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Se=UL(re.horizontal)||re.vertical;c.bucket.iconsInText=!!Se&&Se.iconsInText,(Se||ve)&&wH(c.bucket,B,re,ve,c.imageMap,_,Y,te,xe,Me,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},a.br=lI,a.bs=oI,a.bt=sI,a.bu=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},a.bv=cI,a.bw=Jf,a.bx=function(c,s,f,m,_){return h(this,void 0,void 0,function*(){if(R())try{return yield He(c,s,f,m,_)}catch{}return function(S,C,A,L,B){const q=S.width,X=S.height;je&&et||(je=new OffscreenCanvas(q,X),et=je.getContext("2d",{willReadFrequently:!0})),je.width=q,je.height=X,et.drawImage(S,0,0,q,X);const Y=et.getImageData(C,A,L,B);return et.clearRect(0,0,q,X),Y.data}(c,s,f,m,_)})},a.by=CL,a.bz=d,a.c=St,a.d=function(c,s){const f=new Image;f.onload=()=>{s(null,f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=De})},f.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(c)],{type:"image/png"});f.src=c.byteLength?URL.createObjectURL(m):De},a.e=Z,a.f=function(c,s){return We(Z(c,{type:"json"}),s)},a.g=dt,a.h=Yt,a.i=Le,a.j=sn,a.k=yn,a.l=Ot,a.m=We,a.n=function(c){return new cI(c).readFields(QW,[])},a.o=function(c,s,f){if(!c.length)return f(null,[]);let m=c.length;const _=new Array(c.length);let S=null;c.forEach((C,A)=>{s(C,(L,B)=>{L&&(S=L),_[A]=B,--m==0&&f(S,_)})})},a.p=iL,a.q=Hv,a.r=si,a.s=Ct,a.t=BC,a.u=xt,a.v=Ge,a.w=ae,a.x=xm,a.y=Yl,a.z=function([c,s,f]){return s+=90,s*=Math.PI/180,f*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(f),y:c*Math.sin(s)*Math.sin(f),z:c*Math.cos(f)}}}),o(["./shared"],function(a){class h{constructor(K){this.keyCache={},K&&this.replace(K)}replace(K){this._layerConfigs={},this._layers={},this.update(K,[])}update(K,J){for(const Q of K){this._layerConfigs[Q.id]=Q;const he=this._layers[Q.id]=a.aC(Q);he._featureFilter=a.a6(he.filter),this.keyCache[Q.id]&&delete this.keyCache[Q.id]}for(const Q of J)delete this.keyCache[Q],delete this._layerConfigs[Q],delete this._layers[Q];this.familiesBySource={};const ie=a.bl(Object.values(this._layerConfigs),this.keyCache);for(const Q of ie){const he=Q.map(Ze=>this._layers[Ze.id]),Ae=he[0];if(Ae.visibility==="none")continue;const we=Ae.source||"";let pe=this.familiesBySource[we];pe||(pe=this.familiesBySource[we]={});const Ce=Ae.sourceLayer||"_geojsonTileLayer";let Xe=pe[Ce];Xe||(Xe=pe[Ce]=[]),Xe.push(he)}}}class d{constructor(K){const J={},ie=[];for(const we in K){const pe=K[we],Ce=J[we]={};for(const Xe in pe){const Ze=pe[+Xe];if(!Ze||Ze.bitmap.width===0||Ze.bitmap.height===0)continue;const Ye={x:0,y:0,w:Ze.bitmap.width+2,h:Ze.bitmap.height+2};ie.push(Ye),Ce[Xe]={rect:Ye,metrics:Ze.metrics}}}const{w:Q,h:he}=a.p(ie),Ae=new a.q({width:Q||1,height:he||1});for(const we in K){const pe=K[we];for(const Ce in pe){const Xe=pe[+Ce];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const Ze=J[we][Ce].rect;a.q.copy(Xe.bitmap,Ae,{x:0,y:0},{x:Ze.x+1,y:Ze.y+1},Xe.bitmap)}}this.image=Ae,this.positions=J}}a.bm("GlyphAtlas",d);class g{constructor(K){this.tileID=new a.O(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(K,J,ie,Q,he){this.status="parsing",this.data=K,this.collisionBoxArray=new a.a3;const Ae=new a.bn(Object.keys(K.layers).sort()),we=new a.bo(this.tileID,this.promoteId);we.bucketLayerIDs=[];const pe={},Ce={featureIndex:we,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ie},Xe=J.familiesBySource[this.source];for(const On in Xe){const Pn=K.layers[On];if(!Pn)continue;Pn.version===1&&a.w(`Vector tile source "${this.source}" layer "${On}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const lo=Ae.encode(On),lr=[];for(let vi=0;vi<Pn.length;vi++){const Xi=Pn.feature(vi),qa=we.getId(Xi,On);lr.push({feature:Xi,id:qa,index:vi,sourceLayerIndex:lo})}for(const vi of Xe[On]){const Xi=vi[0];Xi.source!==this.source&&a.w(`layer.source = ${Xi.source} does not equal this.source = ${this.source}`),Xi.minzoom&&this.zoom<Math.floor(Xi.minzoom)||Xi.maxzoom&&this.zoom>=Xi.maxzoom||Xi.visibility!=="none"&&(v(vi,this.zoom,ie),(pe[Xi.id]=Xi.createBucket({index:we.bucketLayerIDs.length,layers:vi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:lo,sourceID:this.source})).populate(lr,Ce,this.tileID.canonical),we.bucketLayerIDs.push(vi.map(qa=>qa.id)))}}let Ze,Ye,Dt,Jt;const Mt=a.aH(Ce.glyphDependencies,On=>Object.keys(On).map(Number));this.inFlightDependencies.forEach(On=>On==null?void 0:On.cancel()),this.inFlightDependencies=[];const qt=++this.dependencySentinel;Object.keys(Mt).length?this.inFlightDependencies.push(Q.send("getGlyphs",{uid:this.uid,stacks:Mt,source:this.source,tileID:this.tileID,type:"glyphs"},(On,Pn)=>{qt===this.dependencySentinel&&(Ze||(Ze=On,Ye=Pn,er.call(this)))})):Ye={};const nn=Object.keys(Ce.iconDependencies);nn.length?this.inFlightDependencies.push(Q.send("getImages",{icons:nn,source:this.source,tileID:this.tileID,type:"icons"},(On,Pn)=>{qt===this.dependencySentinel&&(Ze||(Ze=On,Dt=Pn,er.call(this)))})):Dt={};const Gn=Object.keys(Ce.patternDependencies);function er(){if(Ze)return he(Ze);if(Ye&&Dt&&Jt){const On=new d(Ye),Pn=new a.bp(Dt,Jt);for(const lo in pe){const lr=pe[lo];lr instanceof a.a4?(v(lr.layers,this.zoom,ie),a.bq({bucket:lr,glyphMap:Ye,glyphPositions:On.positions,imageMap:Dt,imagePositions:Pn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):lr.hasPattern&&(lr instanceof a.br||lr instanceof a.bs||lr instanceof a.bt)&&(v(lr.layers,this.zoom,ie),lr.addFeatures(Ce,this.tileID.canonical,Pn.patternPositions))}this.status="done",he(null,{buckets:Object.values(pe).filter(lo=>!lo.isEmpty()),featureIndex:we,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:On.image,imageAtlas:Pn,glyphMap:this.returnDependencies?Ye:null,iconMap:this.returnDependencies?Dt:null,glyphPositions:this.returnDependencies?On.positions:null})}}Gn.length?this.inFlightDependencies.push(Q.send("getImages",{icons:Gn,source:this.source,tileID:this.tileID,type:"patterns"},(On,Pn)=>{qt===this.dependencySentinel&&(Ze||(Ze=On,Jt=Pn,er.call(this)))})):Jt={},er.call(this)}}function v(me,K,J){const ie=new a.a8(K);for(const Q of me)Q.recalculate(ie,J)}function b(me,K){const J=a.l(me.request,(ie,Q,he,Ae)=>{if(ie)K(ie);else if(Q)try{const we=new a.bw.VectorTile(new a.bv(Q));K(null,{vectorTile:we,rawData:Q,cacheControl:he,expires:Ae})}catch(we){const pe=new Uint8Array(Q);let Ce=`Unable to parse the tile at ${me.request.url}, `;Ce+=pe[0]===31&&pe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${we.messge}`,K(new Error(Ce))}});return()=>{J.cancel(),K()}}class I{constructor(K,J,ie,Q){this.actor=K,this.layerIndex=J,this.availableImages=ie,this.loadVectorData=Q||b,this.fetching={},this.loading={},this.loaded={}}loadTile(K,J){const ie=K.uid;this.loading||(this.loading={});const Q=!!(K&&K.request&&K.request.collectResourceTiming)&&new a.bu(K.request),he=this.loading[ie]=new g(K);he.abort=this.loadVectorData(K,(Ae,we)=>{if(delete this.loading[ie],Ae||!we)return he.status="done",this.loaded[ie]=he,J(Ae);const pe=we.rawData,Ce={};we.expires&&(Ce.expires=we.expires),we.cacheControl&&(Ce.cacheControl=we.cacheControl);const Xe={};if(Q){const Ze=Q.finish();Ze&&(Xe.resourceTiming=JSON.parse(JSON.stringify(Ze)))}he.vectorTile=we.vectorTile,he.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ze,Ye)=>{if(delete this.fetching[ie],Ze||!Ye)return J(Ze);J(null,a.e({rawTileData:pe.slice(0)},Ye,Ce,Xe))}),this.loaded=this.loaded||{},this.loaded[ie]=he,this.fetching[ie]={rawTileData:pe,cacheControl:Ce,resourceTiming:Xe}})}reloadTile(K,J){const ie=this.loaded,Q=K.uid;if(ie&&ie[Q]){const he=ie[Q];he.showCollisionBoxes=K.showCollisionBoxes,he.status==="parsing"?he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ae,we)=>{if(Ae||!we)return J(Ae,we);let pe;if(this.fetching[Q]){const{rawTileData:Ce,cacheControl:Xe,resourceTiming:Ze}=this.fetching[Q];delete this.fetching[Q],pe=a.e({rawTileData:Ce.slice(0)},we,Xe,Ze)}else pe=we;J(null,pe)}):he.status==="done"&&(he.vectorTile?he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,J):J())}}abortTile(K,J){const ie=this.loading,Q=K.uid;ie&&ie[Q]&&ie[Q].abort&&(ie[Q].abort(),delete ie[Q]),J()}removeTile(K,J){const ie=this.loaded,Q=K.uid;ie&&ie[Q]&&delete ie[Q],J()}}class T{constructor(){this.loaded={}}loadTile(K,J){return a._(this,void 0,void 0,function*(){const{uid:ie,encoding:Q,rawImageData:he,redFactor:Ae,greenFactor:we,blueFactor:pe,baseShift:Ce}=K,Xe=he.width+2,Ze=he.height+2,Ye=a.a(he)?new a.R({width:Xe,height:Ze},yield a.bx(he,-1,-1,Xe,Ze)):he,Dt=new a.by(ie,Ye,Q,Ae,we,pe,Ce);this.loaded=this.loaded||{},this.loaded[ie]=Dt,J(null,Dt)})}removeTile(K){const J=this.loaded,ie=K.uid;J&&J[ie]&&delete J[ie]}}function P(me,K){if(me.length!==0){$(me[0],K);for(var J=1;J<me.length;J++)$(me[J],!K)}}function $(me,K){for(var J=0,ie=0,Q=0,he=me.length,Ae=he-1;Q<he;Ae=Q++){var we=(me[Q][0]-me[Ae][0])*(me[Ae][1]+me[Q][1]),pe=J+we;ie+=Math.abs(J)>=Math.abs(we)?J-pe+we:we-pe+J,J=pe}J+ie>=0!=!!K&&me.reverse()}var O=a.bz(function me(K,J){var ie,Q=K&&K.type;if(Q==="FeatureCollection")for(ie=0;ie<K.features.length;ie++)me(K.features[ie],J);else if(Q==="GeometryCollection")for(ie=0;ie<K.geometries.length;ie++)me(K.geometries[ie],J);else if(Q==="Feature")me(K.geometry,J);else if(Q==="Polygon")P(K.coordinates,J);else if(Q==="MultiPolygon")for(ie=0;ie<K.coordinates.length;ie++)P(K.coordinates[ie],J);return K});const k=a.bw.VectorTileFeature.prototype.toGeoJSON;var R={exports:{}},j=a.bA,F=a.bw.VectorTileFeature,U=G;function G(me,K){this.options=K||{},this.features=me,this.length=me.length}function Z(me,K){this.id=typeof me.id=="number"?me.id:void 0,this.type=me.type,this.rawGeometry=me.type===1?[me.geometry]:me.geometry,this.properties=me.tags,this.extent=K||4096}G.prototype.feature=function(me){return new Z(this.features[me],this.options.extent)},Z.prototype.loadGeometry=function(){var me=this.rawGeometry;this.geometry=[];for(var K=0;K<me.length;K++){for(var J=me[K],ie=[],Q=0;Q<J.length;Q++)ie.push(new j(J[Q][0],J[Q][1]));this.geometry.push(ie)}return this.geometry},Z.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var me=this.geometry,K=1/0,J=-1/0,ie=1/0,Q=-1/0,he=0;he<me.length;he++)for(var Ae=me[he],we=0;we<Ae.length;we++){var pe=Ae[we];K=Math.min(K,pe.x),J=Math.max(J,pe.x),ie=Math.min(ie,pe.y),Q=Math.max(Q,pe.y)}return[K,ie,J,Q]},Z.prototype.toGeoJSON=F.prototype.toGeoJSON;var ne=a.bB,oe=U;function ye(me){var K=new ne;return function(J,ie){for(var Q in J.layers)ie.writeMessage(3,fe,J.layers[Q])}(me,K),K.finish()}function fe(me,K){var J;K.writeVarintField(15,me.version||1),K.writeStringField(1,me.name||""),K.writeVarintField(5,me.extent||4096);var ie={keys:[],values:[],keycache:{},valuecache:{}};for(J=0;J<me.length;J++)ie.feature=me.feature(J),K.writeMessage(2,$e,ie);var Q=ie.keys;for(J=0;J<Q.length;J++)K.writeStringField(3,Q[J]);var he=ie.values;for(J=0;J<he.length;J++)K.writeMessage(4,Ee,he[J])}function $e(me,K){var J=me.feature;J.id!==void 0&&K.writeVarintField(1,J.id),K.writeMessage(2,ae,me),K.writeVarintField(3,J.type),K.writeMessage(4,Le,J)}function ae(me,K){var J=me.feature,ie=me.keys,Q=me.values,he=me.keycache,Ae=me.valuecache;for(var we in J.properties){var pe=J.properties[we],Ce=he[we];if(pe!==null){Ce===void 0&&(ie.push(we),he[we]=Ce=ie.length-1),K.writeVarint(Ce);var Xe=typeof pe;Xe!=="string"&&Xe!=="boolean"&&Xe!=="number"&&(pe=JSON.stringify(pe));var Ze=Xe+":"+pe,Ye=Ae[Ze];Ye===void 0&&(Q.push(pe),Ae[Ze]=Ye=Q.length-1),K.writeVarint(Ye)}}}function be(me,K){return(K<<3)+(7&me)}function Te(me){return me<<1^me>>31}function Le(me,K){for(var J=me.loadGeometry(),ie=me.type,Q=0,he=0,Ae=J.length,we=0;we<Ae;we++){var pe=J[we],Ce=1;ie===1&&(Ce=pe.length),K.writeVarint(be(1,Ce));for(var Xe=ie===3?pe.length-1:pe.length,Ze=0;Ze<Xe;Ze++){Ze===1&&ie!==1&&K.writeVarint(be(2,Xe-1));var Ye=pe[Ze].x-Q,Dt=pe[Ze].y-he;K.writeVarint(Te(Ye)),K.writeVarint(Te(Dt)),Q+=Ye,he+=Dt}ie===3&&K.writeVarint(be(7,1))}}function Ee(me,K){var J=typeof me;J==="string"?K.writeStringField(1,me):J==="boolean"?K.writeBooleanField(7,me):J==="number"&&(me%1!=0?K.writeDoubleField(3,me):me<0?K.writeSVarintField(6,me):K.writeVarintField(5,me))}R.exports=ye,R.exports.fromVectorTileJs=ye,R.exports.fromGeojsonVt=function(me,K){K=K||{};var J={};for(var ie in me)J[ie]=new oe(me[ie].features,K),J[ie].name=ie,J[ie].version=K.version,J[ie].extent=K.extent;return ye({layers:J})},R.exports.GeoJSONWrapper=oe;var de=a.bz(R.exports);const De={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:me=>me},He=Math.fround||(je=new Float32Array(1),me=>(je[0]=+me,je[0]));var je;const et=3,Et=5,zt=6;class Yt{constructor(K){this.options=Object.assign(Object.create(De),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){const{log:J,minZoom:ie,maxZoom:Q}=this.options;J&&console.time("total time");const he=`prepare ${K.length} points`;J&&console.time(he),this.points=K;const Ae=[];for(let pe=0;pe<K.length;pe++){const Ce=K[pe];if(!Ce.geometry)continue;const[Xe,Ze]=Ce.geometry.coordinates,Ye=He(Qe(Xe)),Dt=He(dt(Ze));Ae.push(Ye,Dt,1/0,pe,-1,1),this.options.reduce&&Ae.push(0)}let we=this.trees[Q+1]=this._createTree(Ae);J&&console.timeEnd(he);for(let pe=Q;pe>=ie;pe--){const Ce=+Date.now();we=this.trees[pe]=this._createTree(this._cluster(we,pe)),J&&console.log("z%d: %d clusters in %dms",pe,we.numItems,+Date.now()-Ce)}return J&&console.timeEnd("total time"),this}getClusters(K,J){let ie=((K[0]+180)%360+360)%360-180;const Q=Math.max(-90,Math.min(90,K[1]));let he=K[2]===180?180:((K[2]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)ie=-180,he=180;else if(ie>he){const Ze=this.getClusters([ie,Q,180,Ae],J),Ye=this.getClusters([-180,Q,he,Ae],J);return Ze.concat(Ye)}const we=this.trees[this._limitZoom(J)],pe=we.range(Qe(ie),dt(Ae),Qe(he),dt(Q)),Ce=we.data,Xe=[];for(const Ze of pe){const Ye=this.stride*Ze;Xe.push(Ce[Ye+Et]>1?St(Ce,Ye,this.clusterProps):this.points[Ce[Ye+et]])}return Xe}getChildren(K){const J=this._getOriginId(K),ie=this._getOriginZoom(K),Q="No cluster with the specified id.",he=this.trees[ie];if(!he)throw new Error(Q);const Ae=he.data;if(J*this.stride>=Ae.length)throw new Error(Q);const we=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),pe=he.within(Ae[J*this.stride],Ae[J*this.stride+1],we),Ce=[];for(const Xe of pe){const Ze=Xe*this.stride;Ae[Ze+4]===K&&Ce.push(Ae[Ze+Et]>1?St(Ae,Ze,this.clusterProps):this.points[Ae[Ze+et]])}if(Ce.length===0)throw new Error(Q);return Ce}getLeaves(K,J,ie){const Q=[];return this._appendLeaves(Q,K,J=J||10,ie=ie||0,0),Q}getTile(K,J,ie){const Q=this.trees[this._limitZoom(K)],he=Math.pow(2,K),{extent:Ae,radius:we}=this.options,pe=we/Ae,Ce=(ie-pe)/he,Xe=(ie+1+pe)/he,Ze={features:[]};return this._addTileFeatures(Q.range((J-pe)/he,Ce,(J+1+pe)/he,Xe),Q.data,J,ie,he,Ze),J===0&&this._addTileFeatures(Q.range(1-pe/he,Ce,1,Xe),Q.data,he,ie,he,Ze),J===he-1&&this._addTileFeatures(Q.range(0,Ce,pe/he,Xe),Q.data,-1,ie,he,Ze),Ze.features.length?Ze:null}getClusterExpansionZoom(K){let J=this._getOriginZoom(K)-1;for(;J<=this.options.maxZoom;){const ie=this.getChildren(K);if(J++,ie.length!==1)break;K=ie[0].properties.cluster_id}return J}_appendLeaves(K,J,ie,Q,he){const Ae=this.getChildren(J);for(const we of Ae){const pe=we.properties;if(pe&&pe.cluster?he+pe.point_count<=Q?he+=pe.point_count:he=this._appendLeaves(K,pe.cluster_id,ie,Q,he):he<Q?he++:K.push(we),K.length===ie)break}return he}_createTree(K){const J=new a.av(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ie=0;ie<K.length;ie+=this.stride)J.add(K[ie],K[ie+1]);return J.finish(),J.data=K,J}_addTileFeatures(K,J,ie,Q,he,Ae){for(const we of K){const pe=we*this.stride,Ce=J[pe+Et]>1;let Xe,Ze,Ye;if(Ce)Xe=Vt(J,pe,this.clusterProps),Ze=J[pe],Ye=J[pe+1];else{const Mt=this.points[J[pe+et]];Xe=Mt.properties;const[qt,nn]=Mt.geometry.coordinates;Ze=Qe(qt),Ye=dt(nn)}const Dt={type:1,geometry:[[Math.round(this.options.extent*(Ze*he-ie)),Math.round(this.options.extent*(Ye*he-Q))]],tags:Xe};let Jt;Jt=Ce||this.options.generateId?J[pe+et]:this.points[J[pe+et]].id,Jt!==void 0&&(Dt.id=Jt),Ae.features.push(Dt)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,J){const{radius:ie,extent:Q,reduce:he,minPoints:Ae}=this.options,we=ie/(Q*Math.pow(2,J)),pe=K.data,Ce=[],Xe=this.stride;for(let Ze=0;Ze<pe.length;Ze+=Xe){if(pe[Ze+2]<=J)continue;pe[Ze+2]=J;const Ye=pe[Ze],Dt=pe[Ze+1],Jt=K.within(pe[Ze],pe[Ze+1],we),Mt=pe[Ze+Et];let qt=Mt;for(const nn of Jt){const Gn=nn*Xe;pe[Gn+2]>J&&(qt+=pe[Gn+Et])}if(qt>Mt&&qt>=Ae){let nn,Gn=Ye*Mt,er=Dt*Mt,On=-1;const Pn=((Ze/Xe|0)<<5)+(J+1)+this.points.length;for(const lo of Jt){const lr=lo*Xe;if(pe[lr+2]<=J)continue;pe[lr+2]=J;const vi=pe[lr+Et];Gn+=pe[lr]*vi,er+=pe[lr+1]*vi,pe[lr+4]=Pn,he&&(nn||(nn=this._map(pe,Ze,!0),On=this.clusterProps.length,this.clusterProps.push(nn)),he(nn,this._map(pe,lr)))}pe[Ze+4]=Pn,Ce.push(Gn/qt,er/qt,1/0,Pn,-1,qt),he&&Ce.push(On)}else{for(let nn=0;nn<Xe;nn++)Ce.push(pe[Ze+nn]);if(qt>1)for(const nn of Jt){const Gn=nn*Xe;if(!(pe[Gn+2]<=J)){pe[Gn+2]=J;for(let er=0;er<Xe;er++)Ce.push(pe[Gn+er])}}}}return Ce}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,J,ie){if(K[J+Et]>1){const Ae=this.clusterProps[K[J+zt]];return ie?Object.assign({},Ae):Ae}const Q=this.points[K[J+et]].properties,he=this.options.map(Q);return ie&&he===Q?Object.assign({},he):he}}function St(me,K,J){return{type:"Feature",id:me[K+et],properties:Vt(me,K,J),geometry:{type:"Point",coordinates:[(ie=me[K],360*(ie-.5)),vt(me[K+1])]}};var ie}function Vt(me,K,J){const ie=me[K+Et],Q=ie>=1e4?`${Math.round(ie/1e3)}k`:ie>=1e3?Math.round(ie/100)/10+"k":ie,he=me[K+zt],Ae=he===-1?{}:Object.assign({},J[he]);return Object.assign(Ae,{cluster:!0,cluster_id:me[K+et],point_count:ie,point_count_abbreviated:Q})}function Qe(me){return me/360+.5}function dt(me){const K=Math.sin(me*Math.PI/180),J=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return J<0?0:J>1?1:J}function vt(me){const K=(180-360*me)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function We(me,K,J,ie){for(var Q,he=ie,Ae=J-K>>1,we=J-K,pe=me[K],Ce=me[K+1],Xe=me[J],Ze=me[J+1],Ye=K+3;Ye<J;Ye+=3){var Dt=Ot(me[Ye],me[Ye+1],pe,Ce,Xe,Ze);if(Dt>he)Q=Ye,he=Dt;else if(Dt===he){var Jt=Math.abs(Ye-Ae);Jt<we&&(Q=Ye,we=Jt)}}he>ie&&(Q-K>3&&We(me,K,Q,ie),me[Q+2]=he,J-Q>3&&We(me,Q,J,ie))}function Ot(me,K,J,ie,Q,he){var Ae=Q-J,we=he-ie;if(Ae!==0||we!==0){var pe=((me-J)*Ae+(K-ie)*we)/(Ae*Ae+we*we);pe>1?(J=Q,ie=he):pe>0&&(J+=Ae*pe,ie+=we*pe)}return(Ae=me-J)*Ae+(we=K-ie)*we}function Ct(me,K,J,ie){var Q={id:me===void 0?null:me,type:K,geometry:J,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(he){var Ae=he.geometry,we=he.type;if(we==="Point"||we==="MultiPoint"||we==="LineString")Tt(he,Ae);else if(we==="Polygon"||we==="MultiLineString")for(var pe=0;pe<Ae.length;pe++)Tt(he,Ae[pe]);else if(we==="MultiPolygon")for(pe=0;pe<Ae.length;pe++)for(var Ce=0;Ce<Ae[pe].length;Ce++)Tt(he,Ae[pe][Ce])}(Q),Q}function Tt(me,K){for(var J=0;J<K.length;J+=3)me.minX=Math.min(me.minX,K[J]),me.minY=Math.min(me.minY,K[J+1]),me.maxX=Math.max(me.maxX,K[J]),me.maxY=Math.max(me.maxY,K[J+1])}function Tn(me,K,J,ie){if(K.geometry){var Q=K.geometry.coordinates,he=K.geometry.type,Ae=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2),we=[],pe=K.id;if(J.promoteId?pe=K.properties[J.promoteId]:J.generateId&&(pe=ie||0),he==="Point")yn(Q,we);else if(he==="MultiPoint")for(var Ce=0;Ce<Q.length;Ce++)yn(Q[Ce],we);else if(he==="LineString")sn(Q,we,Ae,!1);else if(he==="MultiLineString"){if(J.lineMetrics){for(Ce=0;Ce<Q.length;Ce++)sn(Q[Ce],we=[],Ae,!1),me.push(Ct(pe,"LineString",we,K.properties));return}br(Q,we,Ae,!1)}else if(he==="Polygon")br(Q,we,Ae,!0);else{if(he!=="MultiPolygon"){if(he==="GeometryCollection"){for(Ce=0;Ce<K.geometry.geometries.length;Ce++)Tn(me,{id:pe,geometry:K.geometry.geometries[Ce],properties:K.properties},J,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ce=0;Ce<Q.length;Ce++){var Xe=[];br(Q[Ce],Xe,Ae,!0),we.push(Xe)}}me.push(Ct(pe,he,we,K.properties))}}function yn(me,K){K.push(Ge(me[0])),K.push(Dn(me[1])),K.push(0)}function sn(me,K,J,ie){for(var Q,he,Ae=0,we=0;we<me.length;we++){var pe=Ge(me[we][0]),Ce=Dn(me[we][1]);K.push(pe),K.push(Ce),K.push(0),we>0&&(Ae+=ie?(Q*Ce-pe*he)/2:Math.sqrt(Math.pow(pe-Q,2)+Math.pow(Ce-he,2))),Q=pe,he=Ce}var Xe=K.length-3;K[2]=1,We(K,0,Xe,J),K[Xe+2]=1,K.size=Math.abs(Ae),K.start=0,K.end=K.size}function br(me,K,J,ie){for(var Q=0;Q<me.length;Q++){var he=[];sn(me[Q],he,J,ie),K.push(he)}}function Ge(me){return me/360+.5}function Dn(me){var K=Math.sin(me*Math.PI/180),J=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return J<0?0:J>1?1:J}function ar(me,K,J,ie,Q,he,Ae,we){if(ie/=K,he>=(J/=K)&&Ae<ie)return me;if(Ae<J||he>=ie)return null;for(var pe=[],Ce=0;Ce<me.length;Ce++){var Xe=me[Ce],Ze=Xe.geometry,Ye=Xe.type,Dt=Q===0?Xe.minX:Xe.minY,Jt=Q===0?Xe.maxX:Xe.maxY;if(Dt>=J&&Jt<ie)pe.push(Xe);else if(!(Jt<J||Dt>=ie)){var Mt=[];if(Ye==="Point"||Ye==="MultiPoint")bn(Ze,Mt,J,ie,Q);else if(Ye==="LineString")cn(Ze,Mt,J,ie,Q,!1,we.lineMetrics);else if(Ye==="MultiLineString")Di(Ze,Mt,J,ie,Q,!1);else if(Ye==="Polygon")Di(Ze,Mt,J,ie,Q,!0);else if(Ye==="MultiPolygon")for(var qt=0;qt<Ze.length;qt++){var nn=[];Di(Ze[qt],nn,J,ie,Q,!0),nn.length&&Mt.push(nn)}if(Mt.length){if(we.lineMetrics&&Ye==="LineString"){for(qt=0;qt<Mt.length;qt++)pe.push(Ct(Xe.id,Ye,Mt[qt],Xe.tags));continue}Ye!=="LineString"&&Ye!=="MultiLineString"||(Mt.length===1?(Ye="LineString",Mt=Mt[0]):Ye="MultiLineString"),Ye!=="Point"&&Ye!=="MultiPoint"||(Ye=Mt.length===3?"Point":"MultiPoint"),pe.push(Ct(Xe.id,Ye,Mt,Xe.tags))}}}return pe.length?pe:null}function bn(me,K,J,ie,Q){for(var he=0;he<me.length;he+=3){var Ae=me[he+Q];Ae>=J&&Ae<=ie&&(K.push(me[he]),K.push(me[he+1]),K.push(me[he+2]))}}function cn(me,K,J,ie,Q,he,Ae){for(var we,pe,Ce=ko(me),Xe=Q===0?Bu:Ys,Ze=me.start,Ye=0;Ye<me.length-3;Ye+=3){var Dt=me[Ye],Jt=me[Ye+1],Mt=me[Ye+2],qt=me[Ye+3],nn=me[Ye+4],Gn=Q===0?Dt:Jt,er=Q===0?qt:nn,On=!1;Ae&&(we=Math.sqrt(Math.pow(Dt-qt,2)+Math.pow(Jt-nn,2))),Gn<J?er>J&&(pe=Xe(Ce,Dt,Jt,qt,nn,J),Ae&&(Ce.start=Ze+we*pe)):Gn>ie?er<ie&&(pe=Xe(Ce,Dt,Jt,qt,nn,ie),Ae&&(Ce.start=Ze+we*pe)):Va(Ce,Dt,Jt,Mt),er<J&&Gn>=J&&(pe=Xe(Ce,Dt,Jt,qt,nn,J),On=!0),er>ie&&Gn<=ie&&(pe=Xe(Ce,Dt,Jt,qt,nn,ie),On=!0),!he&&On&&(Ae&&(Ce.end=Ze+we*pe),K.push(Ce),Ce=ko(me)),Ae&&(Ze+=we)}var Pn=me.length-3;Dt=me[Pn],Jt=me[Pn+1],Mt=me[Pn+2],(Gn=Q===0?Dt:Jt)>=J&&Gn<=ie&&Va(Ce,Dt,Jt,Mt),Pn=Ce.length-3,he&&Pn>=3&&(Ce[Pn]!==Ce[0]||Ce[Pn+1]!==Ce[1])&&Va(Ce,Ce[0],Ce[1],Ce[2]),Ce.length&&K.push(Ce)}function ko(me){var K=[];return K.size=me.size,K.start=me.start,K.end=me.end,K}function Di(me,K,J,ie,Q,he){for(var Ae=0;Ae<me.length;Ae++)cn(me[Ae],K,J,ie,Q,he,!1)}function Va(me,K,J,ie){me.push(K),me.push(J),me.push(ie)}function Bu(me,K,J,ie,Q,he){var Ae=(he-K)/(ie-K);return me.push(he),me.push(J+(Q-J)*Ae),me.push(1),Ae}function Ys(me,K,J,ie,Q,he){var Ae=(he-J)/(Q-J);return me.push(K+(ie-K)*Ae),me.push(he),me.push(1),Ae}function Js(me,K){for(var J=[],ie=0;ie<me.length;ie++){var Q,he=me[ie],Ae=he.type;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")Q=Wl(he.geometry,K);else if(Ae==="MultiLineString"||Ae==="Polygon"){Q=[];for(var we=0;we<he.geometry.length;we++)Q.push(Wl(he.geometry[we],K))}else if(Ae==="MultiPolygon")for(Q=[],we=0;we<he.geometry.length;we++){for(var pe=[],Ce=0;Ce<he.geometry[we].length;Ce++)pe.push(Wl(he.geometry[we][Ce],K));Q.push(pe)}J.push(Ct(he.id,Ae,Q,he.tags))}return J}function Wl(me,K){var J=[];J.size=me.size,me.start!==void 0&&(J.start=me.start,J.end=me.end);for(var ie=0;ie<me.length;ie+=3)J.push(me[ie]+K,me[ie+1],me[ie+2]);return J}function ut(me,K){if(me.transformed)return me;var J,ie,Q,he=1<<me.z,Ae=me.x,we=me.y;for(J=0;J<me.features.length;J++){var pe=me.features[J],Ce=pe.geometry,Xe=pe.type;if(pe.geometry=[],Xe===1)for(ie=0;ie<Ce.length;ie+=2)pe.geometry.push(Yo(Ce[ie],Ce[ie+1],K,he,Ae,we));else for(ie=0;ie<Ce.length;ie++){var Ze=[];for(Q=0;Q<Ce[ie].length;Q+=2)Ze.push(Yo(Ce[ie][Q],Ce[ie][Q+1],K,he,Ae,we));pe.geometry.push(Ze)}}return me.transformed=!0,me}function Yo(me,K,J,ie,Q,he){return[Math.round(J*(me*ie-Q)),Math.round(J*(K*ie-he))]}function sr(me,K,J,ie,Q){for(var he=K===Q.maxZoom?0:Q.tolerance/((1<<K)*Q.extent),Ae={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:J,y:ie,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},we=0;we<me.length;we++){Ae.numFeatures++,Hl(Ae,me[we],he,Q);var pe=me[we].minX,Ce=me[we].minY,Xe=me[we].maxX,Ze=me[we].maxY;pe<Ae.minX&&(Ae.minX=pe),Ce<Ae.minY&&(Ae.minY=Ce),Xe>Ae.maxX&&(Ae.maxX=Xe),Ze>Ae.maxY&&(Ae.maxY=Ze)}return Ae}function Hl(me,K,J,ie){var Q=K.geometry,he=K.type,Ae=[];if(he==="Point"||he==="MultiPoint")for(var we=0;we<Q.length;we+=3)Ae.push(Q[we]),Ae.push(Q[we+1]),me.numPoints++,me.numSimplified++;else if(he==="LineString")gs(Ae,Q,me,J,!1,!1);else if(he==="MultiLineString"||he==="Polygon")for(we=0;we<Q.length;we++)gs(Ae,Q[we],me,J,he==="Polygon",we===0);else if(he==="MultiPolygon")for(var pe=0;pe<Q.length;pe++){var Ce=Q[pe];for(we=0;we<Ce.length;we++)gs(Ae,Ce[we],me,J,!0,we===0)}if(Ae.length){var Xe=K.tags||null;if(he==="LineString"&&ie.lineMetrics){for(var Ze in Xe={},K.tags)Xe[Ze]=K.tags[Ze];Xe.mapbox_clip_start=Q.start/Q.size,Xe.mapbox_clip_end=Q.end/Q.size}var Ye={geometry:Ae,type:he==="Polygon"||he==="MultiPolygon"?3:he==="LineString"||he==="MultiLineString"?2:1,tags:Xe};K.id!==null&&(Ye.id=K.id),me.features.push(Ye)}}function gs(me,K,J,ie,Q,he){var Ae=ie*ie;if(ie>0&&K.size<(Q?Ae:ie))J.numPoints+=K.length/3;else{for(var we=[],pe=0;pe<K.length;pe+=3)(ie===0||K[pe+2]>Ae)&&(J.numSimplified++,we.push(K[pe]),we.push(K[pe+1])),J.numPoints++;Q&&function(Ce,Xe){for(var Ze=0,Ye=0,Dt=Ce.length,Jt=Dt-2;Ye<Dt;Jt=Ye,Ye+=2)Ze+=(Ce[Ye]-Ce[Jt])*(Ce[Ye+1]+Ce[Jt+1]);if(Ze>0===Xe)for(Ye=0,Dt=Ce.length;Ye<Dt/2;Ye+=2){var Mt=Ce[Ye],qt=Ce[Ye+1];Ce[Ye]=Ce[Dt-2-Ye],Ce[Ye+1]=Ce[Dt-1-Ye],Ce[Dt-2-Ye]=Mt,Ce[Dt-1-Ye]=qt}}(we,he),me.push(we)}}function ft(me,K){var J=(K=this.options=function(Q,he){for(var Ae in he)Q[Ae]=he[Ae];return Q}(Object.create(this.options),K)).debug;if(J&&console.time("preprocess data"),K.maxZoom<0||K.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(K.promoteId&&K.generateId)throw new Error("promoteId and generateId cannot be used together.");var ie=function(Q,he){var Ae=[];if(Q.type==="FeatureCollection")for(var we=0;we<Q.features.length;we++)Tn(Ae,Q.features[we],he,we);else Tn(Ae,Q.type==="Feature"?Q:{geometry:Q},he);return Ae}(me,K);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",K.indexMaxZoom,K.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ie=function(Q,he){var Ae=he.buffer/he.extent,we=Q,pe=ar(Q,1,-1-Ae,Ae,0,-1,2,he),Ce=ar(Q,1,1-Ae,2+Ae,0,-1,2,he);return(pe||Ce)&&(we=ar(Q,1,-Ae,1+Ae,0,-1,2,he)||[],pe&&(we=Js(pe,1).concat(we)),Ce&&(we=we.concat(Js(Ce,-1)))),we}(ie,K),ie.length&&this.splitTile(ie,0,0,0),J&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ln(me,K,J){return 32*((1<<me)*J+K)+me}function en(me,K){return K?me.properties[K]:me.id}function Hi(me,K){if(me==null)return!0;if(me.type==="Feature")return en(me,K)!=null;if(me.type==="FeatureCollection"){const J=new Set;for(const ie of me.features){const Q=en(ie,K);if(Q==null||J.has(Q))return!1;J.add(Q)}return!0}return!1}function Ga(me,K){const J=new Map;if(me!=null)if(me.type==="Feature")J.set(en(me,K),me);else for(const ie of me.features)J.set(en(ie,K),ie);return J}ft.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ft.prototype.splitTile=function(me,K,J,ie,Q,he,Ae){for(var we=[me,K,J,ie],pe=this.options,Ce=pe.debug;we.length;){ie=we.pop(),J=we.pop(),K=we.pop(),me=we.pop();var Xe=1<<K,Ze=ln(K,J,ie),Ye=this.tiles[Ze];if(!Ye&&(Ce>1&&console.time("creation"),Ye=this.tiles[Ze]=sr(me,K,J,ie,pe),this.tileCoords.push({z:K,x:J,y:ie}),Ce)){Ce>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",K,J,ie,Ye.numFeatures,Ye.numPoints,Ye.numSimplified),console.timeEnd("creation"));var Dt="z"+K;this.stats[Dt]=(this.stats[Dt]||0)+1,this.total++}if(Ye.source=me,Q){if(K===pe.maxZoom||K===Q)continue;var Jt=1<<Q-K;if(J!==Math.floor(he/Jt)||ie!==Math.floor(Ae/Jt))continue}else if(K===pe.indexMaxZoom||Ye.numPoints<=pe.indexMaxPoints)continue;if(Ye.source=null,me.length!==0){Ce>1&&console.time("clipping");var Mt,qt,nn,Gn,er,On,Pn=.5*pe.buffer/pe.extent,lo=.5-Pn,lr=.5+Pn,vi=1+Pn;Mt=qt=nn=Gn=null,er=ar(me,Xe,J-Pn,J+lr,0,Ye.minX,Ye.maxX,pe),On=ar(me,Xe,J+lo,J+vi,0,Ye.minX,Ye.maxX,pe),me=null,er&&(Mt=ar(er,Xe,ie-Pn,ie+lr,1,Ye.minY,Ye.maxY,pe),qt=ar(er,Xe,ie+lo,ie+vi,1,Ye.minY,Ye.maxY,pe),er=null),On&&(nn=ar(On,Xe,ie-Pn,ie+lr,1,Ye.minY,Ye.maxY,pe),Gn=ar(On,Xe,ie+lo,ie+vi,1,Ye.minY,Ye.maxY,pe),On=null),Ce>1&&console.timeEnd("clipping"),we.push(Mt||[],K+1,2*J,2*ie),we.push(qt||[],K+1,2*J,2*ie+1),we.push(nn||[],K+1,2*J+1,2*ie),we.push(Gn||[],K+1,2*J+1,2*ie+1)}}},ft.prototype.getTile=function(me,K,J){var ie=this.options,Q=ie.extent,he=ie.debug;if(me<0||me>24)return null;var Ae=1<<me,we=ln(me,K=(K%Ae+Ae)%Ae,J);if(this.tiles[we])return ut(this.tiles[we],Q);he>1&&console.log("drilling down to z%d-%d-%d",me,K,J);for(var pe,Ce=me,Xe=K,Ze=J;!pe&&Ce>0;)Ce--,Xe=Math.floor(Xe/2),Ze=Math.floor(Ze/2),pe=this.tiles[ln(Ce,Xe,Ze)];return pe&&pe.source?(he>1&&console.log("found parent tile z%d-%d-%d",Ce,Xe,Ze),he>1&&console.time("drilling down"),this.splitTile(pe.source,Ce,Xe,Ze,me,K,J),he>1&&console.timeEnd("drilling down"),this.tiles[we]?ut(this.tiles[we],Q):null):null};class rn extends I{constructor(K,J,ie,Q){super(K,J,ie),this._dataUpdateable=new Map,this.loadGeoJSON=(he,Ae)=>{const{promoteId:we}=he;if(he.request)return a.f(he.request,(pe,Ce,Xe,Ze)=>{this._dataUpdateable=Hi(Ce,we)?Ga(Ce,we):void 0,Ae(pe,Ce,Xe,Ze)});if(typeof he.data=="string")try{const pe=JSON.parse(he.data);this._dataUpdateable=Hi(pe,we)?Ga(pe,we):void 0,Ae(null,pe)}catch{Ae(new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`))}else he.dataDiff?this._dataUpdateable?(function(pe,Ce,Xe){var Ze,Ye,Dt,Jt;if(Ce.removeAll&&pe.clear(),Ce.remove)for(const Mt of Ce.remove)pe.delete(Mt);if(Ce.add)for(const Mt of Ce.add){const qt=en(Mt,Xe);qt!=null&&pe.set(qt,Mt)}if(Ce.update)for(const Mt of Ce.update){let qt=pe.get(Mt.id);if(qt==null)continue;const nn=!Mt.removeAllProperties&&(((Ze=Mt.removeProperties)===null||Ze===void 0?void 0:Ze.length)>0||((Ye=Mt.addOrUpdateProperties)===null||Ye===void 0?void 0:Ye.length)>0);if((Mt.newGeometry||Mt.removeAllProperties||nn)&&(qt=Object.assign({},qt),pe.set(Mt.id,qt),nn&&(qt.properties=Object.assign({},qt.properties))),Mt.newGeometry&&(qt.geometry=Mt.newGeometry),Mt.removeAllProperties)qt.properties={};else if(((Dt=Mt.removeProperties)===null||Dt===void 0?void 0:Dt.length)>0)for(const Gn of Mt.removeProperties)Object.prototype.hasOwnProperty.call(qt.properties,Gn)&&delete qt.properties[Gn];if(((Jt=Mt.addOrUpdateProperties)===null||Jt===void 0?void 0:Jt.length)>0)for(const{key:Gn,value:er}of Mt.addOrUpdateProperties)qt.properties[Gn]=er}}(this._dataUpdateable,he.dataDiff,we),Ae(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ae(new Error(`Cannot update existing geojson data in ${he.source}`)):Ae(new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Q&&(this.loadGeoJSON=Q)}loadGeoJSONTile(K,J){const ie=K.tileID.canonical;if(!this._geoJSONIndex)return J(null,null);const Q=this._geoJSONIndex.getTile(ie.z,ie.x,ie.y);if(!Q)return J(null,null);const he=new class{constructor(we){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.N,this.length=we.length,this._features=we}feature(we){return new class{constructor(pe){this._feature=pe,this.extent=a.N,this.type=pe.type,this.properties=pe.tags,"id"in pe&&!isNaN(pe.id)&&(this.id=parseInt(pe.id,10))}loadGeometry(){if(this._feature.type===1){const pe=[];for(const Ce of this._feature.geometry)pe.push([new a.P(Ce[0],Ce[1])]);return pe}{const pe=[];for(const Ce of this._feature.geometry){const Xe=[];for(const Ze of Ce)Xe.push(new a.P(Ze[0],Ze[1]));pe.push(Xe)}return pe}}toGeoJSON(pe,Ce,Xe){return k.call(this,pe,Ce,Xe)}}(this._features[we])}}(Q.features);let Ae=de(he);Ae.byteOffset===0&&Ae.byteLength===Ae.buffer.byteLength||(Ae=new Uint8Array(Ae)),J(null,{vectorTile:he,rawData:Ae.buffer})}loadData(K,J){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Q=!!(K&&K.request&&K.request.collectResourceTiming)&&new a.bu(K.request);this._pendingCallback=J,this._pendingRequest=this.loadGeoJSON(K,(he,Ae)=>{if(delete this._pendingCallback,delete this._pendingRequest,he||!Ae)return J(he);if(typeof Ae!="object")return J(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`));{O(Ae,!0);try{if(K.filter){const pe=a.bC(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pe.result==="error")throw new Error(pe.value.map(Xe=>`${Xe.key}: ${Xe.message}`).join(", "));Ae={type:"FeatureCollection",features:Ae.features.filter(Xe=>pe.value.evaluate({zoom:0},Xe))}}this._geoJSONIndex=K.cluster?new Yt(function({superclusterOptions:pe,clusterProperties:Ce}){if(!Ce||!pe)return pe;const Xe={},Ze={},Ye={accumulated:null,zoom:0},Dt={properties:null},Jt=Object.keys(Ce);for(const Mt of Jt){const[qt,nn]=Ce[Mt],Gn=a.bC(nn),er=a.bC(typeof qt=="string"?[qt,["accumulated"],["get",Mt]]:qt);Xe[Mt]=Gn.value,Ze[Mt]=er.value}return pe.map=Mt=>{Dt.properties=Mt;const qt={};for(const nn of Jt)qt[nn]=Xe[nn].evaluate(Ye,Dt);return qt},pe.reduce=(Mt,qt)=>{Dt.properties=qt;for(const nn of Jt)Ye.accumulated=Mt[nn],Mt[nn]=Ze[nn].evaluate(Ye,Dt)},pe}(K)).load(Ae.features):function(pe,Ce){return new ft(pe,Ce)}(Ae,K.geojsonVtOptions)}catch(pe){return J(pe)}this.loaded={};const we={};if(Q){const pe=Q.finish();pe&&(we.resourceTiming={},we.resourceTiming[K.source]=JSON.parse(JSON.stringify(pe)))}J(null,we)}})}reloadTile(K,J){const ie=this.loaded;return ie&&ie[K.uid]?super.reloadTile(K,J):this.loadTile(K,J)}removeSource(K,J){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),J()}getClusterExpansionZoom(K,J){try{J(null,this._geoJSONIndex.getClusterExpansionZoom(K.clusterId))}catch(ie){J(ie)}}getClusterChildren(K,J){try{J(null,this._geoJSONIndex.getChildren(K.clusterId))}catch(ie){J(ie)}}getClusterLeaves(K,J){try{J(null,this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset))}catch(ie){J(ie)}}}class ys{constructor(K){this.self=K,this.actor=new a.C(K,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:I,geojson:rn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(J,ie)=>{if(this.workerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.workerSourceTypes[J]=ie},this.self.registerRTLTextPlugin=J=>{if(a.bD.isParsed())throw new Error("RTL text plugin already registered.");a.bD.applyArabicShaping=J.applyArabicShaping,a.bD.processBidirectionalText=J.processBidirectionalText,a.bD.processStyledBidirectionalText=J.processStyledBidirectionalText}}setReferrer(K,J){this.referrer=J}setImages(K,J,ie){this.availableImages[K]=J;for(const Q in this.workerSources[K]){const he=this.workerSources[K][Q];for(const Ae in he)he[Ae].availableImages=J}ie()}setLayers(K,J,ie){this.getLayerIndex(K).replace(J),ie()}updateLayers(K,J,ie){this.getLayerIndex(K).update(J.layers,J.removedIds),ie()}loadTile(K,J,ie){this.getWorkerSource(K,J.type,J.source).loadTile(J,ie)}loadDEMTile(K,J,ie){this.getDEMWorkerSource(K,J.source).loadTile(J,ie)}reloadTile(K,J,ie){this.getWorkerSource(K,J.type,J.source).reloadTile(J,ie)}abortTile(K,J,ie){this.getWorkerSource(K,J.type,J.source).abortTile(J,ie)}removeTile(K,J,ie){this.getWorkerSource(K,J.type,J.source).removeTile(J,ie)}removeDEMTile(K,J){this.getDEMWorkerSource(K,J.source).removeTile(J)}removeSource(K,J,ie){if(!this.workerSources[K]||!this.workerSources[K][J.type]||!this.workerSources[K][J.type][J.source])return;const Q=this.workerSources[K][J.type][J.source];delete this.workerSources[K][J.type][J.source],Q.removeSource!==void 0?Q.removeSource(J,ie):ie()}loadWorkerSource(K,J,ie){try{this.self.importScripts(J.url),ie()}catch(Q){ie(Q.toString())}}syncRTLPluginState(K,J,ie){try{a.bD.setState(J);const Q=a.bD.getPluginURL();if(a.bD.isLoaded()&&!a.bD.isParsed()&&Q!=null){this.self.importScripts(Q);const he=a.bD.isParsed();ie(he?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Q}`),he)}}catch(Q){ie(Q.toString())}}getAvailableImages(K){let J=this.availableImages[K];return J||(J=[]),J}getLayerIndex(K){let J=this.layerIndexes[K];return J||(J=this.layerIndexes[K]=new h),J}getWorkerSource(K,J,ie){return this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][J]||(this.workerSources[K][J]={}),this.workerSources[K][J][ie]||(this.workerSources[K][J][ie]=new this.workerSourceTypes[J]({send:(Q,he,Ae)=>{this.actor.send(Q,he,Ae,K)}},this.getLayerIndex(K),this.getAvailableImages(K))),this.workerSources[K][J][ie]}getDEMWorkerSource(K,J){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][J]||(this.demWorkerSources[K][J]=new T),this.demWorkerSources[K][J]}}return a.i()&&(self.worker=new ys(self)),ys}),o(["./shared"],function(a){var h="3.6.2";class d{static testProp(u){if(!d.docStyle)return u[0];for(let p=0;p<u.length;p++)if(u[p]in d.docStyle)return u[p];return u[0]}static create(u,p,y){const x=window.document.createElement(u);return p!==void 0&&(x.className=p),y&&y.appendChild(x),x}static createNS(u,p){return window.document.createElementNS(u,p)}static disableDrag(){d.docStyle&&d.selectProp&&(d.userSelect=d.docStyle[d.selectProp],d.docStyle[d.selectProp]="none")}static enableDrag(){d.docStyle&&d.selectProp&&(d.docStyle[d.selectProp]=d.userSelect)}static setTransform(u,p){u.style[d.transformProp]=p}static addEventListener(u,p,y,x={}){u.addEventListener(p,y,"passive"in x?x:x.capture)}static removeEventListener(u,p,y,x={}){u.removeEventListener(p,y,"passive"in x?x:x.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",d.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",d.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",d.suppressClickInternal,!0)},0)}static mousePos(u,p){const y=u.getBoundingClientRect();return new a.P(p.clientX-y.left-u.clientLeft,p.clientY-y.top-u.clientTop)}static touchPos(u,p){const y=u.getBoundingClientRect(),x=[];for(let E=0;E<p.length;E++)x.push(new a.P(p[E].clientX-y.left-u.clientLeft,p[E].clientY-y.top-u.clientTop));return x}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}d.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,d.selectProp=d.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),d.transformProp=d.testProp(["transform","WebkitTransform"]);const g={supported:!1,testSupport:function(w){!I&&b&&(T?P(w):v=w)}};let v,b,I=!1,T=!1;function P(w){const u=w.createTexture();w.bindTexture(w.TEXTURE_2D,u);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,b),w.isContextLost())return;g.supported=!0}catch{}w.deleteTexture(u),I=!0}var $,O;typeof document<"u"&&(b=document.createElement("img"),b.onload=function(){v&&P(v),v=null,T=!0},b.onerror=function(){I=!0,v=null},b.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let u,p,y,x;w.resetRequestQueue=()=>{u=[],p=0,y=0,x={}},w.addThrottleControl=V=>{const W=y++;return x[W]=V,W},w.removeThrottleControl=V=>{delete x[V],N()},w.getImage=(V,W,H=!0)=>{g.supported&&(V.headers||(V.headers={}),V.headers.accept="image/webp,*/*");const ee={requestParameters:V,supportImageRefresh:H,callback:W,cancelled:!1,completed:!1,cancel:()=>{ee.completed||ee.cancelled||(ee.cancelled=!0,ee.innerRequest&&(ee.innerRequest.cancel(),p--),N())}};return u.push(ee),N(),ee};const E=V=>{const{requestParameters:W,supportImageRefresh:H,callback:ee}=V;return a.e(W,{type:"image"}),(H!==!1||a.i()||a.g(W.url)||W.headers&&!Object.keys(W.headers).reduce((ce,ue)=>ce&&ue==="accept",!0)?a.m:z)(W,(ce,ue,ge,se)=>{M(V,ee,ce,ue,ge,se)})},M=(V,W,H,ee,ce,ue)=>{H?W(H):ee instanceof HTMLImageElement||a.a(ee)?W(null,ee):ee&&((ge,se)=>{typeof createImageBitmap=="function"?a.b(ge,se):a.d(ge,se)})(ee,(ge,se)=>{ge!=null?W(ge):se!=null&&W(null,se,{cacheControl:ce,expires:ue})}),V.cancelled||(V.completed=!0,p--,N())},N=()=>{const V=(()=>{const W=Object.keys(x);let H=!1;if(W.length>0){for(const ee of W)if(H=x[ee](),H)break}return H})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let W=p;W<V&&u.length>0;W++){const H=u.shift();if(H.cancelled){W--;continue}const ee=E(H);p++,H.innerRequest=ee}},z=(V,W)=>{const H=new Image,ee=V.url;let ce=!1;const ue=V.credentials;return ue&&ue==="include"?H.crossOrigin="use-credentials":(ue&&ue==="same-origin"||!a.s(ee))&&(H.crossOrigin="anonymous"),H.fetchPriority="high",H.onload=()=>{W(null,H),H.onerror=H.onload=null},H.onerror=()=>{ce||W(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),H.onerror=H.onload=null},H.src=ee,{cancel:()=>{ce=!0,H.src=""}}}}($||($={})),$.resetRequestQueue(),function(w){w.Glyphs="Glyphs",w.Image="Image",w.Source="Source",w.SpriteImage="SpriteImage",w.SpriteJSON="SpriteJSON",w.Style="Style",w.Tile="Tile",w.Unknown="Unknown"}(O||(O={}));class k{constructor(u){this._transformRequestFn=u}transformRequest(u,p){return this._transformRequestFn&&this._transformRequestFn(u,p)||{url:u}}normalizeSpriteURL(u,p,y){const x=function(E){const M=E.match(R);if(!M)throw new Error(`Unable to parse URL "${E}"`);return{protocol:M[1],authority:M[2],path:M[3]||"/",params:M[4]?M[4].split("&"):[]}}(u);return x.path+=`${p}${y}`,function(E){const M=E.params.length?`?${E.params.join("&")}`:"";return`${E.protocol}://${E.authority}${E.path}${M}`}(x)}setTransformRequest(u){this._transformRequestFn=u}}const R=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function j(w){var u=new a.A(3);return u[0]=w[0],u[1]=w[1],u[2]=w[2],u}var F,U=function(w,u,p){return w[0]=u[0]-p[0],w[1]=u[1]-p[1],w[2]=u[2]-p[2],w};F=new a.A(3),a.A!=Float32Array&&(F[0]=0,F[1]=0,F[2]=0);var G=function(w){var u=w[0],p=w[1];return u*u+p*p};function Z(w){const u=[];if(typeof w=="string")u.push({id:"default",url:w});else if(w&&w.length>0){const p=[];for(const{id:y,url:x}of w){const E=`${y}${x}`;p.indexOf(E)===-1&&(p.push(E),u.push({id:y,url:x}))}}return u}function ne(w,u,p,y,x){if(y)return void w(y);if(x!==Object.values(u).length||x!==Object.values(p).length)return;const E={};for(const M in u){E[M]={};const N=a.h.getImageCanvasContext(p[M]),z=u[M];for(const V in z){const{width:W,height:H,x:ee,y:ce,sdf:ue,pixelRatio:ge,stretchX:se,stretchY:Ie,content:ze}=z[V];E[M][V]={data:null,pixelRatio:ge,sdf:ue,stretchX:se,stretchY:Ie,content:ze,spriteData:{width:W,height:H,x:ee,y:ce,context:N}}}}w(null,E)}(function(){var w=new a.A(2);a.A!=Float32Array&&(w[0]=0,w[1]=0)})();class oe{constructor(u,p,y,x){this.context=u,this.format=y,this.texture=u.gl.createTexture(),this.update(p,x)}update(u,p,y){const{width:x,height:E}=u,M=!(this.size&&this.size[0]===x&&this.size[1]===E||y),{context:N}=this,{gl:z}=N;if(this.useMipmap=!!(p&&p.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),N.pixelStoreUnpackFlipY.set(!1),N.pixelStoreUnpack.set(1),N.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!p||p.premultiply!==!1)),M)this.size=[x,E],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.a(u)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,u):z.texImage2D(z.TEXTURE_2D,0,this.format,x,E,0,this.format,z.UNSIGNED_BYTE,u.data);else{const{x:V,y:W}=y||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.a(u)?z.texSubImage2D(z.TEXTURE_2D,0,V,W,z.RGBA,z.UNSIGNED_BYTE,u):z.texSubImage2D(z.TEXTURE_2D,0,V,W,x,E,z.RGBA,z.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(u,p,y){const{context:x}=this,{gl:E}=x;E.bindTexture(E.TEXTURE_2D,this.texture),y!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(y=E.LINEAR),u!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,u),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,y||u),this.filter=u),p!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,p),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function ye(w){const{userImage:u}=w;return!!(u&&u.render&&u.render())&&(w.data.replace(new Uint8Array(u.data.buffer)),!0)}class fe extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:p,callback:y}of this.requestors)this._notify(p,y);this.requestors=[]}}getImage(u){const p=this.images[u];if(p&&!p.data&&p.spriteData){const y=p.spriteData;p.data=new a.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),p.spriteData=null}return p}addImage(u,p){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,p)&&(this.images[u]=p)}_validate(u,p){let y=!0;const x=p.data||p.spriteData;return this._validateStretch(p.stretchX,x&&x.width)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchX" value`))),y=!1),this._validateStretch(p.stretchY,x&&x.height)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchY" value`))),y=!1),this._validateContent(p.content,p)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "content" value`))),y=!1),y}_validateStretch(u,p){if(!u)return!0;let y=0;for(const x of u){if(x[0]<y||x[1]<x[0]||p<x[1])return!1;y=x[1]}return!0}_validateContent(u,p){if(!u)return!0;if(u.length!==4)return!1;const y=p.spriteData,x=y&&y.width||p.data.width,E=y&&y.height||p.data.height;return!(u[0]<0||x<u[0]||u[1]<0||E<u[1]||u[2]<0||x<u[2]||u[3]<0||E<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,p,y=!0){const x=this.getImage(u);if(y&&(x.data.width!==p.data.width||x.data.height!==p.data.height))throw new Error(`size mismatch between old image (${x.data.width}x${x.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=x.version+1,this.images[u]=p,this.updatedImages[u]=!0}removeImage(u){const p=this.images[u];delete this.images[u],delete this.patterns[u],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,p){let y=!0;if(!this.isLoaded())for(const x of u)this.images[x]||(y=!1);this.isLoaded()||y?this._notify(u,p):this.requestors.push({ids:u,callback:p})}_notify(u,p){const y={};for(const x of u){let E=this.getImage(x);E||(this.fire(new a.k("styleimagemissing",{id:x})),E=this.getImage(x)),E?y[x]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:a.w(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}p(null,y)}getPixelSize(){const{width:u,height:p}=this.atlasImage;return{width:u,height:p}}getPattern(u){const p=this.patterns[u],y=this.getImage(u);if(!y)return null;if(p&&p.position.version===y.version)return p.position;if(p)p.position.version=y.version;else{const x={w:y.data.width+2,h:y.data.height+2,x:0,y:0},E=new a.I(x,y);this.patterns[u]={bin:x,position:E}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const p=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new oe(u,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const E in this.patterns)u.push(this.patterns[E].bin);const{w:p,h:y}=a.p(u),x=this.atlasImage;x.resize({width:p||1,height:y||1});for(const E in this.patterns){const{bin:M}=this.patterns[E],N=M.x+1,z=M.y+1,V=this.getImage(E).data,W=V.width,H=V.height;a.R.copy(V,x,{x:0,y:0},{x:N,y:z},{width:W,height:H}),a.R.copy(V,x,{x:0,y:H-1},{x:N,y:z-1},{width:W,height:1}),a.R.copy(V,x,{x:0,y:0},{x:N,y:z+H},{width:W,height:1}),a.R.copy(V,x,{x:W-1,y:0},{x:N-1,y:z},{width:1,height:H}),a.R.copy(V,x,{x:0,y:0},{x:N+W,y:z},{width:1,height:H})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const p of u){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const y=this.getImage(p);y||a.w(`Image with ID: "${p}" was not found`),ye(y)&&this.updateImage(p,y)}}}const $e=1e20;function ae(w,u,p,y,x,E,M,N,z){for(let V=u;V<u+y;V++)be(w,p*E+V,E,x,M,N,z);for(let V=p;V<p+x;V++)be(w,V*E+u,1,y,M,N,z)}function be(w,u,p,y,x,E,M){E[0]=0,M[0]=-$e,M[1]=$e,x[0]=w[u];for(let N=1,z=0,V=0;N<y;N++){x[N]=w[u+N*p];const W=N*N;do{const H=E[z];V=(x[N]-x[H]+W-H*H)/(N-H)/2}while(V<=M[z]&&--z>-1);z++,E[z]=N,M[z]=V,M[z+1]=$e}for(let N=0,z=0;N<y;N++){for(;M[z+1]<N;)z++;const V=E[z],W=N-V;w[u+N*p]=x[V]+W*W}}class Te{constructor(u,p){this.requestManager=u,this.localIdeographFontFamily=p,this.entries={}}setURL(u){this.url=u}getGlyphs(u,p){const y=[];for(const x in u)for(const E of u[x])y.push({stack:x,id:E});a.o(y,({stack:x,id:E},M)=>{let N=this.entries[x];N||(N=this.entries[x]={glyphs:{},requests:{},ranges:{}});let z=N.glyphs[E];if(z!==void 0)return void M(null,{stack:x,id:E,glyph:z});if(z=this._tinySDF(N,x,E),z)return N.glyphs[E]=z,void M(null,{stack:x,id:E,glyph:z});const V=Math.floor(E/256);if(256*V>65535)return void M(new Error("glyphs > 65535 not supported"));if(N.ranges[V])return void M(null,{stack:x,id:E,glyph:z});if(!this.url)return void M(new Error("glyphsUrl is not set"));let W=N.requests[V];W||(W=N.requests[V]=[],Te.loadGlyphRange(x,V,this.url,this.requestManager,(H,ee)=>{if(ee){for(const ce in ee)this._doesCharSupportLocalGlyph(+ce)||(N.glyphs[+ce]=ee[+ce]);N.ranges[V]=!0}for(const ce of W)ce(H,ee);delete N.requests[V]})),W.push((H,ee)=>{H?M(H):ee&&M(null,{stack:x,id:E,glyph:ee[E]||null})})},(x,E)=>{if(x)p(x);else if(E){const M={};for(const{stack:N,id:z,glyph:V}of E)(M[N]||(M[N]={}))[z]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics};p(null,M)}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(a.u["CJK Unified Ideographs"](u)||a.u["Hangul Syllables"](u)||a.u.Hiragana(u)||a.u.Katakana(u))}_tinySDF(u,p,y){const x=this.localIdeographFontFamily;if(!x||!this._doesCharSupportLocalGlyph(y))return;let E=u.tinySDF;if(!E){let N="400";/bold/i.test(p)?N="900":/medium/i.test(p)?N="500":/light/i.test(p)&&(N="200"),E=u.tinySDF=new Te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:x,fontWeight:N})}const M=E.draw(String.fromCharCode(y));return{id:y,bitmap:new a.q({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}}Te.loadGlyphRange=function(w,u,p,y,x){const E=256*u,M=E+255,N=y.transformRequest(p.replace("{fontstack}",w).replace("{range}",`${E}-${M}`),O.Glyphs);a.l(N,(z,V)=>{if(z)x(z);else if(V){const W={};for(const H of a.n(V))W[H.id]=H;x(null,W)}})},Te.TinySDF=class{constructor({fontSize:w=24,buffer:u=3,radius:p=8,cutoff:y=.25,fontFamily:x="sans-serif",fontWeight:E="normal",fontStyle:M="normal"}={}){this.buffer=u,this.cutoff=y,this.radius=p;const N=this.size=w+4*u,z=this._createCanvas(N),V=this.ctx=z.getContext("2d",{willReadFrequently:!0});V.font=`${M} ${E} ${w}px ${x}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(w){const u=document.createElement("canvas");return u.width=u.height=w,u}draw(w){const{width:u,actualBoundingBoxAscent:p,actualBoundingBoxDescent:y,actualBoundingBoxLeft:x,actualBoundingBoxRight:E}=this.ctx.measureText(w),M=Math.ceil(p),N=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-x))),z=Math.min(this.size-this.buffer,M+Math.ceil(y)),V=N+2*this.buffer,W=z+2*this.buffer,H=Math.max(V*W,0),ee=new Uint8ClampedArray(H),ce={data:ee,width:V,height:W,glyphWidth:N,glyphHeight:z,glyphTop:M,glyphLeft:0,glyphAdvance:u};if(N===0||z===0)return ce;const{ctx:ue,buffer:ge,gridInner:se,gridOuter:Ie}=this;ue.clearRect(ge,ge,N,z),ue.fillText(w,ge,ge+M);const ze=ue.getImageData(ge,ge,N,z);Ie.fill($e,0,H),se.fill(0,0,H);for(let _e=0;_e<z;_e++)for(let Oe=0;Oe<N;Oe++){const Ue=ze.data[4*(_e*N+Oe)+3]/255;if(Ue===0)continue;const Ve=(_e+ge)*V+Oe+ge;if(Ue===1)Ie[Ve]=0,se[Ve]=$e;else{const Ke=.5-Ue;Ie[Ve]=Ke>0?Ke*Ke:0,se[Ve]=Ke<0?Ke*Ke:0}}ae(Ie,0,0,V,W,V,this.f,this.v,this.z),ae(se,ge,ge,N,z,V,this.f,this.v,this.z);for(let _e=0;_e<H;_e++){const Oe=Math.sqrt(Ie[_e])-Math.sqrt(se[_e]);ee[_e]=Math.round(255-255*(Oe/this.radius+this.cutoff))}return ce}};class Le{constructor(){this.specification=a.v.light.position}possiblyEvaluate(u,p){return a.z(u.expression.evaluate(p))}interpolate(u,p,y){return{x:a.B.number(u.x,p.x,y),y:a.B.number(u.y,p.y,y),z:a.B.number(u.z,p.z,y)}}}let Ee;class de extends a.E{constructor(u){super(),Ee=Ee||new a.r({anchor:new a.D(a.v.light.anchor),position:new Le,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Ee),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,p={}){if(!this._validate(a.t,u,p))for(const y in u){const x=u[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),x):this._transitionable.setValue(y,x)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,y){return(!y||y.validate!==!1)&&a.x(this,u.call(a.y,a.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}}class De{constructor(u,p){this.width=u,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,p){const y=u.join(",")+String(p);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(u,p)),this.dashEntry[y]}getDashRanges(u,p,y){const x=[];let E=u.length%2==1?-u[u.length-1]*y:0,M=u[0]*y,N=!0;x.push({left:E,right:M,isDash:N,zeroLength:u[0]===0});let z=u[0];for(let V=1;V<u.length;V++){N=!N;const W=u[V];E=z*y,z+=W,M=z*y,x.push({left:E,right:M,isDash:N,zeroLength:W===0})}return x}addRoundDash(u,p,y){const x=p/2;for(let E=-y;E<=y;E++){const M=this.width*(this.nextRow+y+E);let N=0,z=u[N];for(let V=0;V<this.width;V++){V/z.right>1&&(z=u[++N]);const W=Math.abs(V-z.left),H=Math.abs(V-z.right),ee=Math.min(W,H);let ce;const ue=E/y*(x+1);if(z.isDash){const ge=x-Math.abs(ue);ce=Math.sqrt(ee*ee+ge*ge)}else ce=x-Math.sqrt(ee*ee+ue*ue);this.data[M+V]=Math.max(0,Math.min(255,ce+128))}}}addRegularDash(u){for(let N=u.length-1;N>=0;--N){const z=u[N],V=u[N+1];z.zeroLength?u.splice(N,1):V&&V.isDash===z.isDash&&(V.left=z.left,u.splice(N,1))}const p=u[0],y=u[u.length-1];p.isDash===y.isDash&&(p.left=y.left-this.width,y.right=p.right+this.width);const x=this.width*this.nextRow;let E=0,M=u[E];for(let N=0;N<this.width;N++){N/M.right>1&&(M=u[++E]);const z=Math.abs(N-M.left),V=Math.abs(N-M.right),W=Math.min(z,V);this.data[x+N]=Math.max(0,Math.min(255,(M.isDash?W:-W)+128))}}addDash(u,p){const y=p?7:0,x=2*y+1;if(this.nextRow+x>this.height)return a.w("LineAtlas out of space"),null;let E=0;for(let N=0;N<u.length;N++)E+=u[N];if(E!==0){const N=this.width/E,z=this.getDashRanges(u,this.width,N);p?this.addRoundDash(z,N,y):this.addRegularDash(z)}const M={y:(this.nextRow+y+.5)/this.height,height:2*y/this.height,width:E};return this.nextRow+=x,this.dirty=!0,M}bind(u){const p=u.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}class He{constructor(u,p,y){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=y;const x=this.workerPool.acquire(y);for(let E=0;E<x.length;E++){const M=new a.C(x[E],p,y);M.name=`Worker ${E}`,this.actors.push(M)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,p,y){a.o(this.actors,(x,E)=>{x.send(u,p,E)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],u&&this.workerPool.release(this.id)}}function je(w,u,p){const y=function(x,E){if(x)return p(x);if(E){const M=a.F(a.e(E,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(M.vectorLayers=E.vector_layers,M.vectorLayerIds=M.vectorLayers.map(N=>N.id)),p(null,M)}};return w.url?a.f(u.transformRequest(w.url,O.Source),y):a.h.frame(()=>y(null,w))}class et{constructor(u,p){u&&(p?this.setSouthWest(u).setNorthEast(p):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof a.L?new a.L(u.lng,u.lat):a.L.convert(u),this}setSouthWest(u){return this._sw=u instanceof a.L?new a.L(u.lng,u.lat):a.L.convert(u),this}extend(u){const p=this._sw,y=this._ne;let x,E;if(u instanceof a.L)x=u,E=u;else{if(!(u instanceof et))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(et.convert(u)):this.extend(a.L.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(a.L.convert(u)):this;if(x=u._sw,E=u._ne,!x||!E)return this}return p||y?(p.lng=Math.min(x.lng,p.lng),p.lat=Math.min(x.lat,p.lat),y.lng=Math.max(E.lng,y.lng),y.lat=Math.max(E.lat,y.lat)):(this._sw=new a.L(x.lng,x.lat),this._ne=new a.L(E.lng,E.lat)),this}getCenter(){return new a.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.L(this.getWest(),this.getNorth())}getSouthEast(){return new a.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:p,lat:y}=a.L.convert(u);let x=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&x}static convert(u){return u instanceof et?u:u&&new et(u)}static fromLngLat(u,p=0){const y=360*p/40075017,x=y/Math.cos(Math.PI/180*u.lat);return new et(new a.L(u.lng-x,u.lat-y),new a.L(u.lng+x,u.lat+y))}}class Et{constructor(u,p,y){this.bounds=et.convert(this.validateBounds(u)),this.minzoom=p||0,this.maxzoom=y||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const p=Math.pow(2,u.z),y=Math.floor(a.G(this.bounds.getWest())*p),x=Math.floor(a.H(this.bounds.getNorth())*p),E=Math.ceil(a.G(this.bounds.getEast())*p),M=Math.ceil(a.H(this.bounds.getSouth())*p);return u.x>=y&&u.x<E&&u.y>=x&&u.y<M}}class zt extends a.E{constructor(u,p,y,x){if(super(),this.load=()=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=je(this._options,this.map._requestManager,(E,M)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),E?this.fire(new a.j(E)):M&&(a.e(this,M),M.bounds&&(this.tileBounds=new Et(M.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>a.e({},this._options),this.id=u,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.F(p,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x)}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(u,p){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x={request:this.map._requestManager.transformRequest(y,O.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(M,N){return delete u.request,u.aborted?p(null):M&&M.status!==404?p(M):(N&&N.resourceTiming&&(u.resourceTiming=N.resourceTiming),this.map._refreshExpiredTiles&&N&&u.setExpiryData(N),u.loadVectorData(N,this.map.painter),p(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}x.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=p:u.request=u.actor.send("reloadTile",x,E.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",x,E.bind(this)))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Yt extends a.E{constructor(u,p,y,x){super(),this.id=u,this.dispatcher=y,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.F(p,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=je(this._options,this.map._requestManager,(u,p)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new a.j(u)):p&&(a.e(this,p),p.bounds&&(this.tileBounds=new Et(p.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}serialize(){return a.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,p){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.request=$.getImage(this.map._requestManager.transformRequest(y,O.Tile),(x,E,M)=>{if(delete u.request,u.aborted)u.state="unloaded",p(null);else if(x)u.state="errored",p(x);else if(E){this.map._refreshExpiredTiles&&M&&u.setExpiryData(M);const N=this.map.painter.context,z=N.gl;u.texture=this.map.painter.getTileTexture(E.width),u.texture?u.texture.update(E,{useMipmap:!0}):(u.texture=new oe(N,E,z.RGBA,{useMipmap:!0}),u.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),N.extTextureFilterAnisotropic&&z.texParameterf(z.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax)),u.state="loaded",p(null)}},this.map._refreshExpiredTiles)}abortTile(u,p){u.request&&(u.request.cancel(),delete u.request),p()}unloadTile(u,p){u.texture&&this.map.painter.saveTileTexture(u.texture),p()}hasTransition(){return!1}}class St extends Yt{constructor(u,p,y,x){super(u,p,y,x),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(u,p){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x=this.map._requestManager.transformRequest(y,O.Tile);function E(M,N){M&&(u.state="errored",p(M)),N&&(u.dem=N,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded",p(null))}u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.request=$.getImage(x,(M,N,z)=>a._(this,void 0,void 0,function*(){if(delete u.request,u.aborted)u.state="unloaded",p(null);else if(M)u.state="errored",p(M);else if(N){this.map._refreshExpiredTiles&&u.setExpiryData(z);const V=a.a(N)&&a.J()?N:yield function(H){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.K()){const ee=H.width+2,ce=H.height+2;try{return new a.R({width:ee,height:ce},yield a.M(H,-1,-1,ee,ce))}catch{}}return a.h.getImageData(H,1)})}(N),W={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:V,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",W,E))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(u){const p=u.canonical,y=Math.pow(2,p.z),x=(p.x-1+y)%y,E=p.x===0?u.wrap-1:u.wrap,M=(p.x+1+y)%y,N=p.x+1===y?u.wrap+1:u.wrap,z={};return z[new a.O(u.overscaledZ,E,p.z,x,p.y).key]={backfilled:!1},z[new a.O(u.overscaledZ,N,p.z,M,p.y).key]={backfilled:!1},p.y>0&&(z[new a.O(u.overscaledZ,E,p.z,x,p.y-1).key]={backfilled:!1},z[new a.O(u.overscaledZ,u.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},z[new a.O(u.overscaledZ,N,p.z,M,p.y-1).key]={backfilled:!1}),p.y+1<y&&(z[new a.O(u.overscaledZ,E,p.z,x,p.y+1).key]={backfilled:!1},z[new a.O(u.overscaledZ,u.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},z[new a.O(u.overscaledZ,N,p.z,M,p.y+1).key]={backfilled:!1}),z}unloadTile(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})}}class Vt extends a.E{constructor(u,p,y,x){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>a.e({},this._options,{type:this.type,data:this._data}),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=y.getActor(),this.setEventedParent(x),this._data=p.data,this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;const E=a.N/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*E,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*E,extent:a.N,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.N,radius:(p.clusterRadius||50)*E,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=u.clusterRadius),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(u,p){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},p),this}getClusterChildren(u,p){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},p),this}getClusterLeaves(u,p,y,x){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:p,offset:y},x),this}_updateWorkerData(u){const p=a.e({},this.workerOptions);u?p.dataDiff=u:typeof this._data=="string"?(p.request=this.map._requestManager.transformRequest(a.h.resolveURL(this._data),O.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,p,(y,x)=>{if(this._pendingLoads--,this._removed||x&&x.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let E=null;if(x&&x.resourceTiming&&x.resourceTiming[this.id]&&(E=x.resourceTiming[this.id].slice(0)),y)return void this.fire(new a.j(y));const M={dataType:"source"};this._collectResourceTiming&&E&&E.length>0&&a.e(M,{resourceTiming:E}),this.fire(new a.k("data",Object.assign(Object.assign({},M),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},M),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(u,p){const y=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const x={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.request=this.actor.send(y,x,(E,M)=>(delete u.request,u.unloadVectorData(),u.aborted?p(null):E?p(E):(u.loadVectorData(M,this.map.painter,y==="reloadTile"),p(null))))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Qe=a.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class dt extends a.E{constructor(u,p,y,x){super(),this.load=(E,M)=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=$.getImage(this.map._requestManager.transformRequest(this.url,O.Image),(N,z)=>{this._request=null,this._loaded=!0,N?this.fire(new a.j(N)):z&&(this.image=z,E&&(this.coordinates=E),M&&M(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const E=this.map.painter.context,M=E.gl;this.boundsBuffer||(this.boundsBuffer=E.createVertexBuffer(this._boundsArray,Qe.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new oe(E,this.image,M.RGBA),this.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE));let N=!1;for(const z in this.tiles){const V=this.tiles[z];V.state!=="loaded"&&(V.state="loaded",V.texture=this.texture,N=!0)}N&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=u,this.dispatcher=y,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=p}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=u.url,this.load(u.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(u){this.coordinates=u;const p=u.map(a.U.fromLngLat);this.tileID=function(x){let E=1/0,M=1/0,N=-1/0,z=-1/0;for(const ee of x)E=Math.min(E,ee.x),M=Math.min(M,ee.y),N=Math.max(N,ee.x),z=Math.max(z,ee.y);const V=Math.max(N-E,z-M),W=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),H=Math.pow(2,W);return new a.W(W,Math.floor((E+N)/2*H),Math.floor((M+z)/2*H))}(p),this.minzoom=this.maxzoom=this.tileID.z;const y=p.map(x=>this.tileID.getTilePoint(x)._round());return this._boundsArray=new a.V,this._boundsArray.emplaceBack(y[0].x,y[0].y,0,0),this._boundsArray.emplaceBack(y[1].x,y[1].y,a.N,0),this._boundsArray.emplaceBack(y[3].x,y[3].y,0,a.N),this._boundsArray.emplaceBack(y[2].x,y[2].y,a.N,a.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(u,p){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},p(null)):(u.state="errored",p(null))}hasTransition(){return!1}}class vt extends dt{constructor(u,p,y,x){super(u,p,y,x),this.load=()=>{this._loaded=!1;const E=this.options;this.urls=[];for(const M of E.urls)this.urls.push(this.map._requestManager.transformRequest(M,O.Source).url);a.X(this.urls,(M,N)=>{this._loaded=!0,M?this.fire(new a.j(M)):N&&(this.video=N,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const E=this.map.painter.context,M=E.gl;this.boundsBuffer||(this.boundsBuffer=E.createVertexBuffer(this._boundsArray,Qe.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE),M.texSubImage2D(M.TEXTURE_2D,0,0,0,M.RGBA,M.UNSIGNED_BYTE,this.video)):(this.texture=new oe(E,this.video,M.RGBA),this.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE));let N=!1;for(const z in this.tiles){const V=this.tiles[z];V.state!=="loaded"&&(V.state="loaded",V.texture=this.texture,N=!0)}N&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=p}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const p=this.video.seekable;u<p.start(0)||u>p.end(0)?this.fire(new a.j(new a.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class We extends dt{constructor(u,p,y,x){super(u,p,y,x),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let E=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,E=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,E=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const M=this.map.painter.context,N=M.gl;this.boundsBuffer||(this.boundsBuffer=M.createVertexBuffer(this._boundsArray,Qe.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?(E||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new oe(M,this.canvas,N.RGBA,{premultiply:!0});let z=!1;for(const V in this.tiles){const W=this.tiles[V];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture,z=!0)}z&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(M=>typeof M!="number"))||this.fire(new a.j(new a.Y(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.Y(`sources.${u}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.j(new a.Y(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.Y(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.Y(`sources.${u}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const Ot={},Ct=w=>{switch(w){case"geojson":return Vt;case"image":return dt;case"raster":return Yt;case"raster-dem":return St;case"vector":return zt;case"video":return vt;case"canvas":return We}return Ot[w]};function Tt(w,u){const p=a.Z();return a.$(p,p,[1,1,0]),a.a0(p,p,[.5*w.width,.5*w.height,1]),a.a1(p,p,w.calculatePosMatrix(u.toUnwrapped()))}function Tn(w,u,p,y,x,E){const M=function(H,ee,ce){if(H)for(const ue of H){const ge=ee[ue];if(ge&&ge.source===ce&&ge.type==="fill-extrusion")return!0}else for(const ue in ee){const ge=ee[ue];if(ge.source===ce&&ge.type==="fill-extrusion")return!0}return!1}(x&&x.layers,u,w.id),N=E.maxPitchScaleFactor(),z=w.tilesIn(y,N,M);z.sort(yn);const V=[];for(const H of z)V.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(u,p,w._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,x,E,N,Tt(w.transform,H.tileID))});const W=function(H){const ee={},ce={};for(const ue of H){const ge=ue.queryResults,se=ue.wrappedTileID,Ie=ce[se]=ce[se]||{};for(const ze in ge){const _e=ge[ze],Oe=Ie[ze]=Ie[ze]||{},Ue=ee[ze]=ee[ze]||[];for(const Ve of _e)Oe[Ve.featureIndex]||(Oe[Ve.featureIndex]=!0,Ue.push(Ve))}}return ee}(V);for(const H in W)W[H].forEach(ee=>{const ce=ee.feature,ue=w.getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=ue});return W}function yn(w,u){const p=w.tileID,y=u.tileID;return p.overscaledZ-y.overscaledZ||p.canonical.y-y.canonical.y||p.wrap-y.wrap||p.canonical.x-y.canonical.x}class sn{constructor(u,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=a.a2(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const p=u+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,p,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(x,E){const M={};if(!E)return M;for(const N of x){const z=N.layerIds.map(V=>E.getLayer(V)).filter(Boolean);if(z.length!==0){N.layers=z,N.stateDependentLayerIds&&(N.stateDependentLayers=N.stateDependentLayerIds.map(V=>z.filter(W=>W.id===V)[0]));for(const V of z)M[V.id]=N}}return M}(u.buckets,p.style),this.hasSymbolBuckets=!1;for(const x in this.buckets){const E=this.buckets[x];if(E instanceof a.a4){if(this.hasSymbolBuckets=!0,!y)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const x in this.buckets){const E=this.buckets[x];if(E instanceof a.a4&&E.hasRTLText){this.hasRTLText=!0,a.a5();break}}this.queryPadding=0;for(const x in this.buckets){const E=this.buckets[x];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(x).queryRadius(E))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new a.a3}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const y in this.buckets){const x=this.buckets[y];x.uploadPending()&&x.upload(u)}const p=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new oe(u,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new oe(u,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,p,y,x,E,M,N,z,V,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:x,cameraQueryGeometry:E,scale:M,tileSize:this.tileSize,pixelPosMatrix:W,transform:z,params:N,queryPadding:this.queryPadding*V},u,p,y):{}}querySourceFeatures(u,p){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const x=y.loadVTLayers(),E=p&&p.sourceLayer?p.sourceLayer:"",M=x._geojsonTileLayer||x[E];if(!M)return;const N=a.a6(p&&p.filter),{z,x:V,y:W}=this.tileID.canonical,H={z,x:V,y:W};for(let ee=0;ee<M.length;ee++){const ce=M.feature(ee);if(N.needGeometry){const se=a.a7(ce,!0);if(!N.filter(new a.a8(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!N.filter(new a.a8(this.tileID.overscaledZ),ce))continue;const ue=y.getId(ce,E),ge=new a.a9(ce,z,V,W,ue);ge.tile=H,u.push(ge)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const p=this.expirationTime;if(u.cacheControl){const y=a.aa(u.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const y=Date.now();let x=!1;if(this.expirationTime>y)x=!1;else if(p)if(this.expirationTime<p)x=!0;else{const E=this.expirationTime-p;E?this.expirationTime=y+Math.max(E,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const x in this.buckets){if(!p.style.hasLayer(x))continue;const E=this.buckets[x],M=E.layers[0].sourceLayer||"_geojsonTileLayer",N=y[M],z=u[M];if(!N||!z||Object.keys(z).length===0)continue;E.update(z,N,this.imageAtlas&&this.imageAtlas.patternPositions||{});const V=p&&p.style&&p.style.getLayer(x);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=a.h.now()+u}setDependencies(u,p){const y={};for(const x of p)y[x]=!0;this.dependencies[u]=y}hasDependency(u,p){for(const y of u){const x=this.dependencies[y];if(x){for(const E of p)if(x[E])return!0}}return!1}}class br{constructor(u,p){this.max=u,this.onRemove=p,this.reset()}reset(){for(const u in this.data)for(const p of this.data[u])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(u,p,y){const x=u.wrapped().key;this.data[x]===void 0&&(this.data[x]=[]);const E={value:p,timeout:void 0};if(y!==void 0&&(E.timeout=setTimeout(()=>{this.remove(u,E)},y)),this.data[x].push(E),this.order.push(x),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const p=this.data[u].shift();return p.timeout&&clearTimeout(p.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),p.value}getByKey(u){const p=this.data[u];return p?p[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,p){if(!this.has(u))return this;const y=u.wrapped().key,x=p===void 0?0:this.data[y].indexOf(p),E=this.data[y][x];return this.data[y].splice(x,1),E.timeout&&clearTimeout(E.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(E.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(u){const p=[];for(const y in this.data)for(const x of this.data[y])u(x.value)||p.push(x);for(const y of p)this.remove(y.value.tileID,y)}}class Ge{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,p,y){const x=String(p);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][x]=this.stateChanges[u][x]||{},a.e(this.stateChanges[u][x],y),this.deletedStates[u]===null){this.deletedStates[u]={};for(const E in this.state[u])E!==x&&(this.deletedStates[u][E]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][x]===null){this.deletedStates[u][x]={};for(const E in this.state[u][x])y[E]||(this.deletedStates[u][x][E]=null)}else for(const E in y)this.deletedStates[u]&&this.deletedStates[u][x]&&this.deletedStates[u][x][E]===null&&delete this.deletedStates[u][x][E]}removeFeatureState(u,p,y){if(this.deletedStates[u]===null)return;const x=String(p);if(this.deletedStates[u]=this.deletedStates[u]||{},y&&p!==void 0)this.deletedStates[u][x]!==null&&(this.deletedStates[u][x]=this.deletedStates[u][x]||{},this.deletedStates[u][x][y]=null);else if(p!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][x])for(y in this.deletedStates[u][x]={},this.stateChanges[u][x])this.deletedStates[u][x][y]=null;else this.deletedStates[u][x]=null;else this.deletedStates[u]=null}getState(u,p){const y=String(p),x=a.e({},(this.state[u]||{})[y],(this.stateChanges[u]||{})[y]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const E=this.deletedStates[u][p];if(E===null)return{};for(const M in E)delete x[M]}return x}initializeTileState(u,p){u.setFeatureState(this.state,p)}coalesceChanges(u,p){const y={};for(const x in this.stateChanges){this.state[x]=this.state[x]||{};const E={};for(const M in this.stateChanges[x])this.state[x][M]||(this.state[x][M]={}),a.e(this.state[x][M],this.stateChanges[x][M]),E[M]=this.state[x][M];y[x]=E}for(const x in this.deletedStates){this.state[x]=this.state[x]||{};const E={};if(this.deletedStates[x]===null)for(const M in this.state[x])E[M]={},this.state[x][M]={};else for(const M in this.deletedStates[x]){if(this.deletedStates[x][M]===null)this.state[x][M]={};else for(const N of Object.keys(this.deletedStates[x][M]))delete this.state[x][M][N];E[M]=this.state[x][M]}y[x]=y[x]||{},a.e(y[x],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const x in u)u[x].setFeatureState(y,p)}}class Dn extends a.E{constructor(u,p,y){super(),this.id=u,this.dispatcher=y,this.on("data",x=>{x.dataType==="source"&&x.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((x,E,M,N)=>{const z=new(Ct(E.type))(x,E,M,N);if(z.id!==x)throw new Error(`Expected Source id to be ${x} instead of ${z.id}`);return z})(u,p,y,this),this._tiles={},this._cache=new br(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ge,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const p=this._tiles[u];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,p){return this._source.loadTile(u,p)}_unloadTile(u){if(this._source.unloadTile)return this._source.unloadTile(u,()=>{})}_abortTile(u){this._source.abortTile&&this._source.abortTile(u,()=>{}),this._source.fire(new a.k("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const y=this._tiles[p];y.upload(u),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(ar).map(u=>u.key)}getRenderableIds(u){const p=[];for(const y in this._tiles)this._isIdRenderable(y,u)&&p.push(this._tiles[y]);return u?p.sort((y,x)=>{const E=y.tileID,M=x.tileID,N=new a.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),z=new a.P(M.canonical.x,M.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-M.overscaledZ||z.y-N.y||z.x-N.x}).map(y=>y.tileID.key):p.map(y=>y.tileID).sort(ar).map(y=>y.key)}hasRenderableParent(u){const p=this.findLoadedParent(u,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(u,p){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(p||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,p){const y=this._tiles[u];y&&(y.state!=="loading"&&(y.state=p),this._loadTile(y,this._tileLoaded.bind(this,y,u,p)))}_tileLoaded(u,p,y,x){if(x)return u.state="errored",void(x.status!==404?this._source.fire(new a.j(x,{tile:u})):this.update(this.transform,this.terrain));u.timeAdded=a.h.now(),y==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(p,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const p=this.getRenderableIds();for(let x=0;x<p.length;x++){const E=p[x];if(u.neighboringTiles&&u.neighboringTiles[E]){const M=this.getTileByID(E);y(u,M),y(M,u)}}function y(x,E){x.needsHillshadePrepare=!0,x.needsTerrainPrepare=!0;let M=E.tileID.canonical.x-x.tileID.canonical.x;const N=E.tileID.canonical.y-x.tileID.canonical.y,z=Math.pow(2,x.tileID.canonical.z),V=E.tileID.key;M===0&&N===0||Math.abs(N)>1||(Math.abs(M)>1&&(Math.abs(M+z)===1?M+=z:Math.abs(M-z)===1&&(M-=z)),E.dem&&x.dem&&(x.dem.backfillBorder(E.dem,M,N),x.neighboringTiles&&x.neighboringTiles[V]&&(x.neighboringTiles[V].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,p,y,x){for(const E in this._tiles){let M=this._tiles[E];if(x[E]||!M.hasData()||M.tileID.overscaledZ<=p||M.tileID.overscaledZ>y)continue;let N=M.tileID;for(;M&&M.tileID.overscaledZ>p+1;){const V=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[V.key],M&&M.hasData()&&(N=V)}let z=N;for(;z.overscaledZ>p;)if(z=z.scaledTo(z.overscaledZ-1),u[z.key]){x[N.key]=N;break}}}findLoadedParent(u,p){if(u.key in this._loadedParentTiles){const y=this._loadedParentTiles[u.key];return y&&y.tileID.overscaledZ>=p?y:null}for(let y=u.overscaledZ-1;y>=p;y--){const x=u.scaledTo(y),E=this._getLoadedTile(x);if(E)return E}}_getLoadedTile(u){const p=this._tiles[u.key];return p&&p.hasData()?p:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const p=Math.ceil(u.width/this._source.tileSize)+1,y=Math.ceil(u.height/this._source.tileSize)+1,x=Math.floor(p*y*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(E)}handleWrapJump(u){const p=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,p){const y={};for(const x in this._tiles){const E=this._tiles[x];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+p),y[E.tileID.key]=E}this._tiles=y;for(const x in this._timers)clearTimeout(this._timers[x]),delete this._timers[x];for(const x in this._tiles)this._setTileReloadTimer(x,this._tiles[x])}}update(u,p){if(this.transform=u,this.terrain=p,!this._sourceLoaded||this._paused)return;let y;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(W=>new a.O(W.canonical.z,W.wrap,W.canonical.z,W.canonical.x,W.canonical.y)):(y=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(y=y.filter(W=>this._source.hasTile(W)))):y=[];const x=u.coveringZoomLevel(this._source),E=Math.max(x-Dn.maxOverzooming,this._source.minzoom),M=Math.max(x+Dn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const W={};for(const H of y)if(H.canonical.z>this._source.minzoom){const ee=H.scaledTo(H.canonical.z-1);W[ee.key]=ee;const ce=H.scaledTo(Math.max(this._source.minzoom,Math.min(H.canonical.z,5)));W[ce.key]=ce}y=y.concat(Object.values(W))}const N=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,N&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const z=this._updateRetainedTiles(y,x);if(bn(this._source.type)){const W={},H={},ee=Object.keys(z),ce=a.h.now();for(const ue of ee){const ge=z[ue],se=this._tiles[ue];if(!se||se.fadeEndTime!==0&&se.fadeEndTime<=ce)continue;const Ie=this.findLoadedParent(ge,E);Ie&&(this._addTile(Ie.tileID),W[Ie.tileID.key]=Ie.tileID),H[ue]=ge}this._retainLoadedChildren(H,x,M,z);for(const ue in W)z[ue]||(this._coveredTiles[ue]=!0,z[ue]=W[ue]);if(p){const ue={},ge={};for(const se of y)this._tiles[se.key].hasData()?ue[se.key]=se:ge[se.key]=se;for(const se in ge){const Ie=ge[se].children(this._source.maxzoom);this._tiles[Ie[0].key]&&this._tiles[Ie[1].key]&&this._tiles[Ie[2].key]&&this._tiles[Ie[3].key]&&(ue[Ie[0].key]=z[Ie[0].key]=Ie[0],ue[Ie[1].key]=z[Ie[1].key]=Ie[1],ue[Ie[2].key]=z[Ie[2].key]=Ie[2],ue[Ie[3].key]=z[Ie[3].key]=Ie[3],delete ge[se])}for(const se in ge){const Ie=this.findLoadedParent(ge[se],this._source.minzoom);if(Ie){ue[Ie.tileID.key]=z[Ie.tileID.key]=Ie.tileID;for(const ze in ue)ue[ze].isChildOf(Ie.tileID)&&delete ue[ze]}}for(const se in this._tiles)ue[se]||(this._coveredTiles[se]=!0)}}for(const W in z)this._tiles[W].clearFadeHold();const V=a.ab(this._tiles,z);for(const W of V){const H=this._tiles[W];H.hasSymbolBuckets&&!H.holdingForFade()?H.setHoldDuration(this.map._fadeDuration):H.hasSymbolBuckets&&!H.symbolFadeFinished()||this._removeTile(W)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,p){const y={},x={},E=Math.max(p-Dn.maxOverzooming,this._source.minzoom),M=Math.max(p+Dn.maxUnderzooming,this._source.minzoom),N={};for(const z of u){const V=this._addTile(z);y[z.key]=z,V.hasData()||p<this._source.maxzoom&&(N[z.key]=z)}this._retainLoadedChildren(N,p,M,y);for(const z of u){let V=this._tiles[z.key];if(V.hasData())continue;if(p+1>this._source.maxzoom){const H=z.children(this._source.maxzoom)[0],ee=this.getTile(H);if(ee&&ee.hasData()){y[H.key]=H;continue}}else{const H=z.children(this._source.maxzoom);if(y[H[0].key]&&y[H[1].key]&&y[H[2].key]&&y[H[3].key])continue}let W=V.wasRequested();for(let H=z.overscaledZ-1;H>=E;--H){const ee=z.scaledTo(H);if(x[ee.key])break;if(x[ee.key]=!0,V=this.getTile(ee),!V&&W&&(V=this._addTile(ee)),V){const ce=V.hasData();if((W||ce)&&(y[ee.key]=ee),W=V.wasRequested(),ce)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const p=[];let y,x=this._tiles[u].tileID;for(;x.overscaledZ>0;){if(x.key in this._loadedParentTiles){y=this._loadedParentTiles[x.key];break}p.push(x.key);const E=x.scaledTo(x.overscaledZ-1);if(y=this._getLoadedTile(E),y)break;x=E}for(const E of p)this._loadedParentTiles[E]=y}}_addTile(u){let p=this._tiles[u.key];if(p)return p;p=this._cache.getAndRemove(u),p&&(this._setTileReloadTimer(u.key,p),p.tileID=u,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,p)));const y=p;return p||(p=new sn(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(p,this._tileLoaded.bind(this,p,u.key,p.state))),p.uses++,this._tiles[u.key]=p,y||this._source.fire(new a.k("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(u,p){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const y=p.getExpiryTimeout();y&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},y))}_removeTile(u){const p=this._tiles[u];p&&(p.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,p,y){const x=[],E=this.transform;if(!E)return x;const M=y?E.getCameraQueryGeometry(u):u,N=u.map(ue=>E.pointCoordinate(ue,this.terrain)),z=M.map(ue=>E.pointCoordinate(ue,this.terrain)),V=this.getIds();let W=1/0,H=1/0,ee=-1/0,ce=-1/0;for(const ue of z)W=Math.min(W,ue.x),H=Math.min(H,ue.y),ee=Math.max(ee,ue.x),ce=Math.max(ce,ue.y);for(let ue=0;ue<V.length;ue++){const ge=this._tiles[V[ue]];if(ge.holdingForFade())continue;const se=ge.tileID,Ie=Math.pow(2,E.zoom-ge.tileID.overscaledZ),ze=p*ge.queryPadding*a.N/ge.tileSize/Ie,_e=[se.getTilePoint(new a.U(W,H)),se.getTilePoint(new a.U(ee,ce))];if(_e[0].x-ze<a.N&&_e[0].y-ze<a.N&&_e[1].x+ze>=0&&_e[1].y+ze>=0){const Oe=N.map(Ve=>se.getTilePoint(Ve)),Ue=z.map(Ve=>se.getTilePoint(Ve));x.push({tile:ge,tileID:se,queryGeometry:Oe,cameraQueryGeometry:Ue,scale:Ie})}}return x}getVisibleCoordinates(u){const p=this.getRenderableIds(u).map(y=>this._tiles[y].tileID);for(const y of p)y.posMatrix=this.transform.calculatePosMatrix(y.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(bn(this._source.type)){const u=a.h.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=u)return!0}return!1}setFeatureState(u,p,y){this._state.updateState(u=u||"_geojsonTileLayer",p,y)}removeFeatureState(u,p,y){this._state.removeFeatureState(u=u||"_geojsonTileLayer",p,y)}getFeatureState(u,p){return this._state.getState(u=u||"_geojsonTileLayer",p)}setDependencies(u,p,y){const x=this._tiles[u];x&&x.setDependencies(p,y)}reloadTilesForDependencies(u,p){for(const y in this._tiles)this._tiles[y].hasDependency(u,p)&&this._reloadTile(y,"reloading");this._cache.filter(y=>!y.hasDependency(u,p))}}function ar(w,u){const p=Math.abs(2*w.wrap)-+(w.wrap<0),y=Math.abs(2*u.wrap)-+(u.wrap<0);return w.overscaledZ-u.overscaledZ||y-p||u.canonical.y-w.canonical.y||u.canonical.x-w.canonical.x}function bn(w){return w==="raster"||w==="image"||w==="video"}Dn.maxOverzooming=10,Dn.maxUnderzooming=3;const cn="mapboxgl_preloaded_worker_pool";class ko{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<ko.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[cn]}numActive(){return Object.keys(this.active).length}}const Di=Math.floor(a.h.hardwareConcurrency/2);let Va;function Bu(){return Va||(Va=new ko),Va}ko.workerCount=a.ac(globalThis)?Math.max(Math.min(Di,3),1):1;class Ys{constructor(u,p){this.reset(u,p)}reset(u,p){this.points=u||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=a.ad(u,0,1);let p=1,y=this._distances[p];const x=u*this.paddedLength+this.padding;for(;y<x&&p<this._distances.length;)y=this._distances[++p];const E=p-1,M=this._distances[E],N=y-M,z=N>0?(x-M)/N:0;return this.points[E].mult(1-z).add(this.points[p].mult(z))}}function Js(w,u){let p=!0;return w==="always"||w!=="never"&&u!=="never"||(p=!1),p}class Wl{constructor(u,p,y){const x=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(u/y),this.yCellCount=Math.ceil(p/y);for(let M=0;M<this.xCellCount*this.yCellCount;M++)x.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=p,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,p,y,x,E){this._forEachCell(p,y,x,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(x),this.bboxes.push(E)}insertCircle(u,p,y,x){this._forEachCell(p-x,y-x,p+x,y+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(p),this.circles.push(y),this.circles.push(x)}_insertBoxCell(u,p,y,x,E,M){this.boxCells[E].push(M)}_insertCircleCell(u,p,y,x,E,M){this.circleCells[E].push(M)}_query(u,p,y,x,E,M,N){if(y<0||u>this.width||x<0||p>this.height)return[];const z=[];if(u<=0&&p<=0&&this.width<=y&&this.height<=x){if(E)return[{key:null,x1:u,y1:p,x2:y,y2:x}];for(let V=0;V<this.boxKeys.length;V++)z.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){const W=this.circles[3*V],H=this.circles[3*V+1],ee=this.circles[3*V+2];z.push({key:this.circleKeys[V],x1:W-ee,y1:H-ee,x2:W+ee,y2:H+ee})}}else this._forEachCell(u,p,y,x,this._queryCell,z,{hitTest:E,overlapMode:M,seenUids:{box:{},circle:{}}},N);return z}query(u,p,y,x){return this._query(u,p,y,x,!1,null)}hitTest(u,p,y,x,E,M){return this._query(u,p,y,x,!0,E,M).length>0}hitTestCircle(u,p,y,x,E){const M=u-y,N=u+y,z=p-y,V=p+y;if(N<0||M>this.width||V<0||z>this.height)return!1;const W=[];return this._forEachCell(M,z,N,V,this._queryCellCircle,W,{hitTest:!0,overlapMode:x,circle:{x:u,y:p,radius:y},seenUids:{box:{},circle:{}}},E),W.length>0}_queryCell(u,p,y,x,E,M,N,z){const{seenUids:V,hitTest:W,overlapMode:H}=N,ee=this.boxCells[E];if(ee!==null){const ue=this.bboxes;for(const ge of ee)if(!V.box[ge]){V.box[ge]=!0;const se=4*ge,Ie=this.boxKeys[ge];if(u<=ue[se+2]&&p<=ue[se+3]&&y>=ue[se+0]&&x>=ue[se+1]&&(!z||z(Ie))&&(!W||!Js(H,Ie.overlapMode))&&(M.push({key:Ie,x1:ue[se],y1:ue[se+1],x2:ue[se+2],y2:ue[se+3]}),W))return!0}}const ce=this.circleCells[E];if(ce!==null){const ue=this.circles;for(const ge of ce)if(!V.circle[ge]){V.circle[ge]=!0;const se=3*ge,Ie=this.circleKeys[ge];if(this._circleAndRectCollide(ue[se],ue[se+1],ue[se+2],u,p,y,x)&&(!z||z(Ie))&&(!W||!Js(H,Ie.overlapMode))){const ze=ue[se],_e=ue[se+1],Oe=ue[se+2];if(M.push({key:Ie,x1:ze-Oe,y1:_e-Oe,x2:ze+Oe,y2:_e+Oe}),W)return!0}}}return!1}_queryCellCircle(u,p,y,x,E,M,N,z){const{circle:V,seenUids:W,overlapMode:H}=N,ee=this.boxCells[E];if(ee!==null){const ue=this.bboxes;for(const ge of ee)if(!W.box[ge]){W.box[ge]=!0;const se=4*ge,Ie=this.boxKeys[ge];if(this._circleAndRectCollide(V.x,V.y,V.radius,ue[se+0],ue[se+1],ue[se+2],ue[se+3])&&(!z||z(Ie))&&!Js(H,Ie.overlapMode))return M.push(!0),!0}}const ce=this.circleCells[E];if(ce!==null){const ue=this.circles;for(const ge of ce)if(!W.circle[ge]){W.circle[ge]=!0;const se=3*ge,Ie=this.circleKeys[ge];if(this._circlesCollide(ue[se],ue[se+1],ue[se+2],V.x,V.y,V.radius)&&(!z||z(Ie))&&!Js(H,Ie.overlapMode))return M.push(!0),!0}}}_forEachCell(u,p,y,x,E,M,N,z){const V=this._convertToXCellCoord(u),W=this._convertToYCellCoord(p),H=this._convertToXCellCoord(y),ee=this._convertToYCellCoord(x);for(let ce=V;ce<=H;ce++)for(let ue=W;ue<=ee;ue++)if(E.call(this,u,p,y,x,this.xCellCount*ue+ce,M,N,z))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,p,y,x,E,M){const N=x-u,z=E-p,V=y+M;return V*V>N*N+z*z}_circleAndRectCollide(u,p,y,x,E,M,N){const z=(M-x)/2,V=Math.abs(u-(x+z));if(V>z+y)return!1;const W=(N-E)/2,H=Math.abs(p-(E+W));if(H>W+y)return!1;if(V<=z||H<=W)return!0;const ee=V-z,ce=H-W;return ee*ee+ce*ce<=y*y}}function ut(w,u,p,y,x){const E=a.Z();return u?(a.a0(E,E,[1/x,1/x,1]),p||a.ae(E,E,y.angle)):a.a1(E,y.labelPlaneMatrix,w),E}function Yo(w,u,p,y,x){if(u){const E=a.af(w);return a.a0(E,E,[x,x,1]),p||a.ae(E,E,-y.angle),E}return y.glCoordMatrix}function sr(w,u,p){let y;p?(y=[w.x,w.y,p(w.x,w.y),1],a.ag(y,y,u)):(y=[w.x,w.y,0,1],Q(y,y,u));const x=y[3];return{point:new a.P(y[0]/x,y[1]/x),signedDistanceFromCamera:x}}function Hl(w,u){return .5+w/u*.5}function gs(w,u){const p=w[0]/w[3],y=w[1]/w[3];return p>=-u[0]&&p<=u[0]&&y>=-u[1]&&y<=u[1]}function ft(w,u,p,y,x,E,M,N,z,V){const W=y?w.textSizeData:w.iconSizeData,H=a.ah(W,p.transform.zoom),ee=[256/p.width*2+1,256/p.height*2+1],ce=y?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ce.clear();const ue=w.lineVertexArray,ge=y?w.text.placedSymbolArray:w.icon.placedSymbolArray,se=p.transform.width/p.transform.height;let Ie=!1;for(let ze=0;ze<ge.length;ze++){const _e=ge.get(ze);if(_e.hidden||_e.writingMode===a.ai.vertical&&!Ie){ie(_e.numGlyphs,ce);continue}let Oe;if(Ie=!1,V?(Oe=[_e.anchorX,_e.anchorY,V(_e.anchorX,_e.anchorY),1],a.ag(Oe,Oe,u)):(Oe=[_e.anchorX,_e.anchorY,0,1],Q(Oe,Oe,u)),!gs(Oe,ee)){ie(_e.numGlyphs,ce);continue}const Ue=Hl(p.transform.cameraToCenterDistance,Oe[3]),Ve=a.aj(W,H,_e),Ke=M?Ve/Ue:Ve*Ue,rt=new a.P(_e.anchorX,_e.anchorY),nt=sr(rt,x,V).point,st={projections:{},offsets:{}},$t=Hi(_e,Ke,!1,N,u,x,E,w.glyphOffsetArray,ue,ce,nt,rt,st,se,z,V);Ie=$t.useVertical,($t.notEnoughRoom||Ie||$t.needsFlipping&&Hi(_e,Ke,!0,N,u,x,E,w.glyphOffsetArray,ue,ce,nt,rt,st,se,z,V).notEnoughRoom)&&ie(_e.numGlyphs,ce)}y?w.text.dynamicLayoutVertexBuffer.updateData(ce):w.icon.dynamicLayoutVertexBuffer.updateData(ce)}function ln(w,u,p,y,x,E,M,N,z,V,W,H,ee){const ce=N.glyphStartIndex+N.numGlyphs,ue=N.lineStartIndex,ge=N.lineStartIndex+N.lineLength,se=u.getoffsetX(N.glyphStartIndex),Ie=u.getoffsetX(ce-1),ze=K(w*se,p,y,x,E,M,N.segment,ue,ge,z,V,W,H,ee);if(!ze)return null;const _e=K(w*Ie,p,y,x,E,M,N.segment,ue,ge,z,V,W,H,ee);return _e?{first:ze,last:_e}:null}function en(w,u,p,y){return w===a.ai.horizontal&&Math.abs(p.y-u.y)>Math.abs(p.x-u.x)*y?{useVertical:!0}:(w===a.ai.vertical?u.y<p.y:u.x>p.x)?{needsFlipping:!0}:null}function Hi(w,u,p,y,x,E,M,N,z,V,W,H,ee,ce,ue,ge){const se=u/24,Ie=w.lineOffsetX*se,ze=w.lineOffsetY*se;let _e;if(w.numGlyphs>1){const Oe=w.glyphStartIndex+w.numGlyphs,Ue=w.lineStartIndex,Ve=w.lineStartIndex+w.lineLength,Ke=ln(se,N,Ie,ze,p,W,H,w,z,E,ee,ue,ge);if(!Ke)return{notEnoughRoom:!0};const rt=sr(Ke.first.point,M,ge).point,nt=sr(Ke.last.point,M,ge).point;if(y&&!p){const st=en(w.writingMode,rt,nt,ce);if(st)return st}_e=[Ke.first];for(let st=w.glyphStartIndex+1;st<Oe-1;st++)_e.push(K(se*N.getoffsetX(st),Ie,ze,p,W,H,w.segment,Ue,Ve,z,E,ee,ue,ge));_e.push(Ke.last)}else{if(y&&!p){const Ue=sr(H,x,ge).point,Ve=w.lineStartIndex+w.segment+1,Ke=new a.P(z.getx(Ve),z.gety(Ve)),rt=sr(Ke,x,ge),nt=rt.signedDistanceFromCamera>0?rt.point:Ga(H,Ke,Ue,1,x,ge),st=en(w.writingMode,Ue,nt,ce);if(st)return st}const Oe=K(se*N.getoffsetX(w.glyphStartIndex),Ie,ze,p,W,H,w.segment,w.lineStartIndex,w.lineStartIndex+w.lineLength,z,E,ee,ue,ge);if(!Oe)return{notEnoughRoom:!0};_e=[Oe]}for(const Oe of _e)a.ak(V,Oe.point,Oe.angle);return{}}function Ga(w,u,p,y,x,E){const M=sr(w.add(w.sub(u)._unit()),x,E).point,N=p.sub(M);return p.add(N._mult(y/N.mag()))}function rn(w,u){const{projectionCache:p,lineVertexArray:y,labelPlaneMatrix:x,tileAnchorPoint:E,distanceFromAnchor:M,getElevation:N,previousVertex:z,direction:V,absOffsetX:W}=u;if(p.projections[w])return p.projections[w];const H=new a.P(y.getx(w),y.gety(w)),ee=sr(H,x,N);if(ee.signedDistanceFromCamera>0)return p.projections[w]=ee.point,ee.point;const ce=w-V;return Ga(M===0?E:new a.P(y.getx(ce),y.gety(ce)),H,z,W-M+1,x,N)}function ys(w,u,p){return w._unit()._perp()._mult(u*p)}function me(w,u,p,y,x,E,M,N){const{projectionCache:z,direction:V}=N;if(z.offsets[w])return z.offsets[w];const W=p.add(u);if(w+V<y||w+V>=x)return z.offsets[w]=W,W;const H=rn(w+V,N),ee=ys(H.sub(p),M,V),ce=p.add(ee),ue=H.add(ee);return z.offsets[w]=a.al(E,W,ce,ue)||W,z.offsets[w]}function K(w,u,p,y,x,E,M,N,z,V,W,H,ee,ce){const ue=y?w-u:w+u;let ge=ue>0?1:-1,se=0;y&&(ge*=-1,se=Math.PI),ge<0&&(se+=Math.PI);let Ie,ze,_e=ge>0?N+M:N+M+1,Oe=x,Ue=x,Ve=0,Ke=0;const rt=Math.abs(ue),nt=[];let st;for(;Ve+Ke<=rt;){if(_e+=ge,_e<N||_e>=z)return null;Ve+=Ke,Ue=Oe,ze=Ie;const gt={projectionCache:H,lineVertexArray:V,labelPlaneMatrix:W,tileAnchorPoint:E,distanceFromAnchor:Ve,getElevation:ce,previousVertex:Ue,direction:ge,absOffsetX:rt};if(Oe=rn(_e,gt),p===0)nt.push(Ue),st=Oe.sub(Ue);else{let Ht;const Nt=Oe.sub(Ue);Ht=Nt.mag()===0?ys(rn(_e+ge,gt).sub(Oe),p,ge):ys(Nt,p,ge),ze||(ze=Ue.add(Ht)),Ie=me(_e,Ht,Oe,N,z,ze,p,gt),nt.push(ze),st=Ie.sub(ze)}Ke=st.mag()}const $t=st._mult((rt-Ve)/Ke)._add(ze||Ue),mn=se+Math.atan2(Oe.y-Ue.y,Oe.x-Ue.x);return nt.push($t),{point:$t,angle:ee?mn:0,path:nt}}const J=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ie(w,u){for(let p=0;p<w;p++){const y=u.length;u.resize(y+4),u.float32.set(J,3*y)}}function Q(w,u,p){const y=u[0],x=u[1];return w[0]=p[0]*y+p[4]*x+p[12],w[1]=p[1]*y+p[5]*x+p[13],w[3]=p[3]*y+p[7]*x+p[15],w}const he=100;class Ae{constructor(u,p=new Wl(u.width+200,u.height+200,25),y=new Wl(u.width+200,u.height+200,25)){this.transform=u,this.grid=p,this.ignoredGrid=y,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+he,this.screenBottomBoundary=u.height+he,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,p,y,x,E,M){const N=this.projectAndGetPerspectiveRatio(x,u.anchorPointX,u.anchorPointY,M),z=y*N.perspectiveRatio,V=u.x1*z+N.point.x,W=u.y1*z+N.point.y,H=u.x2*z+N.point.x,ee=u.y2*z+N.point.y;return!this.isInsideGrid(V,W,H,ee)||p!=="always"&&this.grid.hitTest(V,W,H,ee,p,E)||N.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[V,W,H,ee],offscreen:this.isOffscreen(V,W,H,ee)}}placeCollisionCircles(u,p,y,x,E,M,N,z,V,W,H,ee,ce,ue){const ge=[],se=new a.P(p.anchorX,p.anchorY),Ie=sr(se,M,ue),ze=Hl(this.transform.cameraToCenterDistance,Ie.signedDistanceFromCamera),_e=(W?E/ze:E*ze)/a.ap,Oe=sr(se,N,ue).point,Ue=ln(_e,x,p.lineOffsetX*_e,p.lineOffsetY*_e,!1,Oe,se,p,y,N,{projections:{},offsets:{}},!1,ue);let Ve=!1,Ke=!1,rt=!0;if(Ue){const nt=.5*ee*ze+ce,st=new a.P(-100,-100),$t=new a.P(this.screenRightBoundary,this.screenBottomBoundary),mn=new Ys,gt=Ue.first,Ht=Ue.last;let Nt=[];for(let un=gt.path.length-1;un>=1;un--)Nt.push(gt.path[un]);for(let un=1;un<Ht.path.length;un++)Nt.push(Ht.path[un]);const Kn=2.5*nt;if(z){const un=Nt.map(gn=>sr(gn,z,ue));Nt=un.some(gn=>gn.signedDistanceFromCamera<=0)?[]:un.map(gn=>gn.point)}let pn=[];if(Nt.length>0){const un=Nt[0].clone(),gn=Nt[0].clone();for(let Jr=1;Jr<Nt.length;Jr++)un.x=Math.min(un.x,Nt[Jr].x),un.y=Math.min(un.y,Nt[Jr].y),gn.x=Math.max(gn.x,Nt[Jr].x),gn.y=Math.max(gn.y,Nt[Jr].y);pn=un.x>=st.x&&gn.x<=$t.x&&un.y>=st.y&&gn.y<=$t.y?[Nt]:gn.x<st.x||un.x>$t.x||gn.y<st.y||un.y>$t.y?[]:a.am([Nt],st.x,st.y,$t.x,$t.y)}for(const un of pn){mn.reset(un,.25*nt);let gn=0;gn=mn.length<=.5*nt?1:Math.ceil(mn.paddedLength/Kn)+1;for(let Jr=0;Jr<gn;Jr++){const ur=Jr/Math.max(gn-1,1),Ki=mn.lerp(ur),wi=Ki.x+he,li=Ki.y+he;ge.push(wi,li,nt,0);const wa=wi-nt,mr=li-nt,el=wi+nt,tl=li+nt;if(rt=rt&&this.isOffscreen(wa,mr,el,tl),Ke=Ke||this.isInsideGrid(wa,mr,el,tl),u!=="always"&&this.grid.hitTestCircle(wi,li,nt,u,H)&&(Ve=!0,!V))return{circles:[],offscreen:!1,collisionDetected:Ve}}}}return{circles:!V&&Ve||!Ke||ze<this.perspectiveRatioCutoff?[]:ge,offscreen:rt,collisionDetected:Ve}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let y=1/0,x=1/0,E=-1/0,M=-1/0;for(const W of u){const H=new a.P(W.x+he,W.y+he);y=Math.min(y,H.x),x=Math.min(x,H.y),E=Math.max(E,H.x),M=Math.max(M,H.y),p.push(H)}const N=this.grid.query(y,x,E,M).concat(this.ignoredGrid.query(y,x,E,M)),z={},V={};for(const W of N){const H=W.key;if(z[H.bucketInstanceId]===void 0&&(z[H.bucketInstanceId]={}),z[H.bucketInstanceId][H.featureIndex])continue;const ee=[new a.P(W.x1,W.y1),new a.P(W.x2,W.y1),new a.P(W.x2,W.y2),new a.P(W.x1,W.y2)];a.an(p,ee)&&(z[H.bucketInstanceId][H.featureIndex]=!0,V[H.bucketInstanceId]===void 0&&(V[H.bucketInstanceId]=[]),V[H.bucketInstanceId].push(H.featureIndex))}return V}insertCollisionBox(u,p,y,x,E,M){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:E,collisionGroupID:M,overlapMode:p},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,p,y,x,E,M){const N=y?this.ignoredGrid:this.grid,z={bucketInstanceId:x,featureIndex:E,collisionGroupID:M,overlapMode:p};for(let V=0;V<u.length;V+=4)N.insertCircle(z,u[V],u[V+1],u[V+2])}projectAndGetPerspectiveRatio(u,p,y,x){let E;return x?(E=[p,y,x(p,y),1],a.ag(E,E,u)):(E=[p,y,0,1],Q(E,E,u)),{point:new a.P((E[0]/E[3]+1)/2*this.transform.width+he,(-E[1]/E[3]+1)/2*this.transform.height+he),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E[3]*.5}}isOffscreen(u,p,y,x){return y<he||u>=this.screenRightBoundary||x<he||p>this.screenBottomBoundary}isInsideGrid(u,p,y,x){return y>=0&&u<this.gridRightBoundary&&x>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const u=a.ao([]);return a.$(u,u,[-100,-100,0]),u}}function we(w,u,p){return u*(a.N/(w.tileSize*Math.pow(2,p-w.tileID.overscaledZ)))}class pe{constructor(u,p,y,x){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?p:-p))):x&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Ce{constructor(u,p,y,x,E){this.text=new pe(u?u.text:null,p,y,E),this.icon=new pe(u?u.icon:null,p,x,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xe{constructor(u,p,y){this.text=u,this.icon=p,this.skipFade=y}}class Ze{constructor(){this.invProjMatrix=a.Z(),this.viewportMatrix=a.Z(),this.circles=[]}}class Ye{constructor(u,p,y,x,E){this.bucketInstanceId=u,this.featureIndex=p,this.sourceLayerIndex=y,this.bucketIndex=x,this.tileID=E}}class Dt{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const p=++this.maxGroupID;this.collisionGroups[u]={ID:p,predicate:y=>y.collisionGroupID===p}}return this.collisionGroups[u]}}function Jt(w,u,p,y,x){const{horizontalAlign:E,verticalAlign:M}=a.au(w);return new a.P(-(E-.5)*u+y[0]*x,-(M-.5)*p+y[1]*x)}function Mt(w,u,p,y,x,E){const{x1:M,x2:N,y1:z,y2:V,anchorPointX:W,anchorPointY:H}=w,ee=new a.P(u,p);return y&&ee._rotate(x?E:-E),{x1:M+ee.x,y1:z+ee.y,x2:N+ee.x,y2:V+ee.y,anchorPointX:W,anchorPointY:H}}class qt{constructor(u,p,y,x,E){this.transform=u.clone(),this.terrain=p,this.collisionIndex=new Ae(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Dt(x),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,p,y,x){const E=y.getBucket(p),M=y.latestFeatureIndex;if(!E||!M||p.id!==E.layerIds[0])return;const N=y.collisionBoxArray,z=E.layers[0].layout,V=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),W=y.tileSize/a.N,H=this.transform.calculatePosMatrix(y.tileID.toUnwrapped()),ee=z.get("text-pitch-alignment")==="map",ce=z.get("text-rotation-alignment")==="map",ue=we(y,1,this.transform.zoom),ge=ut(H,ee,ce,this.transform,ue);let se=null;if(ee){const ze=Yo(H,ee,ce,this.transform,ue);se=a.a1([],this.transform.labelPlaneMatrix,ze)}this.retainedQueryData[E.bucketInstanceId]=new Ye(E.bucketInstanceId,M,E.sourceLayerIndex,E.index,y.tileID);const Ie={bucket:E,layout:z,posMatrix:H,textLabelPlaneMatrix:ge,labelToScreenMatrix:se,scale:V,textPixelRatio:W,holdingForFade:y.holdingForFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:a.ah(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(x)for(const ze of E.sortKeyRanges){const{sortKey:_e,symbolInstanceStart:Oe,symbolInstanceEnd:Ue}=ze;u.push({sortKey:_e,symbolInstanceStart:Oe,symbolInstanceEnd:Ue,parameters:Ie})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Ie})}attemptAnchorPlacement(u,p,y,x,E,M,N,z,V,W,H,ee,ce,ue,ge,se){const Ie=a.aq[u.textAnchor],ze=[u.textOffset0,u.textOffset1],_e=Jt(Ie,y,x,ze,E),Oe=this.collisionIndex.placeCollisionBox(Mt(p,_e.x,_e.y,M,N,this.transform.angle),H,z,V,W.predicate,se);if((!ge||this.collisionIndex.placeCollisionBox(Mt(ge,_e.x,_e.y,M,N,this.transform.angle),H,z,V,W.predicate,se).box.length!==0)&&Oe.box.length>0){let Ue;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Ue=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:ze,width:y,height:x,anchor:Ie,textBoxScale:E,prevAnchor:Ue},this.markUsedJustification(ce,Ie,ee,ue),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,ue,ee),this.placedOrientations[ee.crossTileID]=ue),{shift:_e,placedGlyphBoxes:Oe}}}placeLayerBucketPart(u,p,y){const{bucket:x,layout:E,posMatrix:M,textLabelPlaneMatrix:N,labelToScreenMatrix:z,textPixelRatio:V,holdingForFade:W,collisionBoxArray:H,partiallyEvaluatedTextSize:ee,collisionGroup:ce}=u.parameters,ue=E.get("text-optional"),ge=E.get("icon-optional"),se=a.ar(E,"text-overlap","text-allow-overlap"),Ie=se==="always",ze=a.ar(E,"icon-overlap","icon-allow-overlap"),_e=ze==="always",Oe=E.get("text-rotation-alignment")==="map",Ue=E.get("text-pitch-alignment")==="map",Ve=E.get("icon-text-fit")!=="none",Ke=E.get("symbol-z-order")==="viewport-y",rt=Ie&&(_e||!x.hasIconData()||ge),nt=_e&&(Ie||!x.hasTextData()||ue);!x.collisionArrays&&H&&x.deserializeCollisionBoxes(H);const st=this.retainedQueryData[x.bucketInstanceId].tileID,$t=this.terrain?(gt,Ht)=>this.terrain.getElevation(st,gt,Ht):null,mn=(gt,Ht)=>{var Nt,Kn;if(p[gt.crossTileID])return;if(W)return void(this.placements[gt.crossTileID]=new Xe(!1,!1,!1));let pn=!1,un=!1,gn=!0,Jr=null,ur={box:null,offscreen:null},Ki={box:null,offscreen:null},wi=null,li=null,wa=null,mr=0,el=0,tl=0;Ht.textFeatureIndex?mr=Ht.textFeatureIndex:gt.useRuntimeCollisionCircles&&(mr=gt.featureIndex),Ht.verticalTextFeatureIndex&&(el=Ht.verticalTextFeatureIndex);const Hu=Ht.textBox;if(Hu){const co=Qr=>{let Si=a.ai.horizontal;if(x.allowVerticalPlacement&&!Qr&&this.prevPlacement){const ea=this.prevPlacement.placedOrientations[gt.crossTileID];ea&&(this.placedOrientations[gt.crossTileID]=ea,Si=ea,this.markUsedOrientation(x,Si,gt))}return Si},Yi=(Qr,Si)=>{if(x.allowVerticalPlacement&&gt.numVerticalGlyphVertices>0&&Ht.verticalTextBox){for(const ea of x.writingModes)if(ea===a.ai.vertical?(ur=Si(),Ki=ur):ur=Qr(),ur&&ur.box&&ur.box.length)break}else ur=Qr()},Lo=gt.textAnchorOffsetStartIndex,Dc=gt.textAnchorOffsetEndIndex;if(Dc===Lo){const Qr=(Si,ea)=>{const ei=this.collisionIndex.placeCollisionBox(Si,se,V,M,ce.predicate,$t);return ei&&ei.box&&ei.box.length&&(this.markUsedOrientation(x,ea,gt),this.placedOrientations[gt.crossTileID]=ea),ei};Yi(()=>Qr(Hu,a.ai.horizontal),()=>{const Si=Ht.verticalTextBox;return x.allowVerticalPlacement&&gt.numVerticalGlyphVertices>0&&Si?Qr(Si,a.ai.vertical):{box:null,offscreen:null}}),co(ur&&ur.box&&ur.box.length)}else{let Qr=a.aq[(Kn=(Nt=this.prevPlacement)===null||Nt===void 0?void 0:Nt.variableOffsets[gt.crossTileID])===null||Kn===void 0?void 0:Kn.anchor];const Si=(ei,Rc,Em)=>{const rb=ei.x2-ei.x1,ib=ei.y2-ei.y1,GC=gt.textBoxScale,Vv=Ve&&ze==="never"?Rc:null;let nl={box:[],offscreen:!1},zc=se==="never"?1:2,rl="never";Qr&&zc++;for(let Ya=0;Ya<zc;Ya++){for(let il=Lo;il<Dc;il++){const Gv=x.textAnchorOffsets.get(il);if(Qr&&Gv.textAnchor!==Qr)continue;const Ql=this.attemptAnchorPlacement(Gv,ei,rb,ib,GC,Oe,Ue,V,M,ce,rl,gt,x,Em,Vv,$t);if(Ql&&(nl=Ql.placedGlyphBoxes,nl&&nl.box&&nl.box.length))return pn=!0,Jr=Ql.shift,nl}Qr?Qr=null:rl=se}return nl};Yi(()=>Si(Hu,Ht.iconBox,a.ai.horizontal),()=>{const ei=Ht.verticalTextBox;return x.allowVerticalPlacement&&!(ur&&ur.box&&ur.box.length)&&gt.numVerticalGlyphVertices>0&&ei?Si(ei,Ht.verticalIconBox,a.ai.vertical):{box:null,offscreen:null}}),ur&&(pn=ur.box,gn=ur.offscreen);const ea=co(ur&&ur.box);if(!pn&&this.prevPlacement){const ei=this.prevPlacement.variableOffsets[gt.crossTileID];ei&&(this.variableOffsets[gt.crossTileID]=ei,this.markUsedJustification(x,ei.anchor,gt,ea))}}}if(wi=ur,pn=wi&&wi.box&&wi.box.length>0,gn=wi&&wi.offscreen,gt.useRuntimeCollisionCircles){const co=x.text.placedSymbolArray.get(gt.centerJustifiedTextSymbolIndex),Yi=a.aj(x.textSizeData,ee,co),Lo=E.get("text-padding");li=this.collisionIndex.placeCollisionCircles(se,co,x.lineVertexArray,x.glyphOffsetArray,Yi,M,N,z,y,Ue,ce.predicate,gt.collisionCircleDiameter,Lo,$t),li.circles.length&&li.collisionDetected&&!y&&a.w("Collisions detected, but collision boxes are not shown"),pn=Ie||li.circles.length>0&&!li.collisionDetected,gn=gn&&li.offscreen}if(Ht.iconFeatureIndex&&(tl=Ht.iconFeatureIndex),Ht.iconBox){const co=Yi=>{const Lo=Ve&&Jr?Mt(Yi,Jr.x,Jr.y,Oe,Ue,this.transform.angle):Yi;return this.collisionIndex.placeCollisionBox(Lo,ze,V,M,ce.predicate,$t)};Ki&&Ki.box&&Ki.box.length&&Ht.verticalIconBox?(wa=co(Ht.verticalIconBox),un=wa.box.length>0):(wa=co(Ht.iconBox),un=wa.box.length>0),gn=gn&&wa.offscreen}const Lc=ue||gt.numHorizontalGlyphVertices===0&&gt.numVerticalGlyphVertices===0,Yf=ge||gt.numIconVertices===0;if(Lc||Yf?Yf?Lc||(un=un&&pn):pn=un&&pn:un=pn=un&&pn,pn&&wi&&wi.box&&this.collisionIndex.insertCollisionBox(wi.box,se,E.get("text-ignore-placement"),x.bucketInstanceId,Ki&&Ki.box&&el?el:mr,ce.ID),un&&wa&&this.collisionIndex.insertCollisionBox(wa.box,ze,E.get("icon-ignore-placement"),x.bucketInstanceId,tl,ce.ID),li&&(pn&&this.collisionIndex.insertCollisionCircles(li.circles,se,E.get("text-ignore-placement"),x.bucketInstanceId,mr,ce.ID),y)){const co=x.bucketInstanceId;let Yi=this.collisionCircleArrays[co];Yi===void 0&&(Yi=this.collisionCircleArrays[co]=new Ze);for(let Lo=0;Lo<li.circles.length;Lo+=4)Yi.circles.push(li.circles[Lo+0]),Yi.circles.push(li.circles[Lo+1]),Yi.circles.push(li.circles[Lo+2]),Yi.circles.push(li.collisionDetected?1:0)}if(gt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(x.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[gt.crossTileID]=new Xe(pn||rt,un||nt,gn||x.justReloaded),p[gt.crossTileID]=!0};if(Ke){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const gt=x.getSortedSymbolIndexes(this.transform.angle);for(let Ht=gt.length-1;Ht>=0;--Ht){const Nt=gt[Ht];mn(x.symbolInstances.get(Nt),x.collisionArrays[Nt])}}else for(let gt=u.symbolInstanceStart;gt<u.symbolInstanceEnd;gt++)mn(x.symbolInstances.get(gt),x.collisionArrays[gt]);if(y&&x.bucketInstanceId in this.collisionCircleArrays){const gt=this.collisionCircleArrays[x.bucketInstanceId];a.as(gt.invProjMatrix,M),gt.viewportMatrix=this.collisionIndex.getViewportMatrix()}x.justReloaded=!1}markUsedJustification(u,p,y,x){let E;E=x===a.ai.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[a.at(p)];const M=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const N of M)N>=0&&(u.text.placedSymbolArray.get(N).crossTileID=E>=0&&N!==E?0:y.crossTileID)}markUsedOrientation(u,p,y){const x=p===a.ai.horizontal||p===a.ai.horizontalOnly?p:0,E=p===a.ai.vertical?p:0,M=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const N of M)u.text.placedSymbolArray.get(N).placedOrientation=x;y.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let y=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const x=p?p.symbolFadeChange(u):1,E=p?p.opacities:{},M=p?p.variableOffsets:{},N=p?p.placedOrientations:{};for(const z in this.placements){const V=this.placements[z],W=E[z];W?(this.opacities[z]=new Ce(W,x,V.text,V.icon),y=y||V.text!==W.text.placed||V.icon!==W.icon.placed):(this.opacities[z]=new Ce(null,x,V.text,V.icon,V.skipFade),y=y||V.text||V.icon)}for(const z in E){const V=E[z];if(!this.opacities[z]){const W=new Ce(V,x,!1,!1);W.isHidden()||(this.opacities[z]=W,y=y||V.text.placed||V.icon.placed)}}for(const z in M)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=M[z]);for(const z in N)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=N[z]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:u)}updateLayerOpacities(u,p){const y={};for(const x of p){const E=x.getBucket(u);E&&x.latestFeatureIndex&&u.id===E.layerIds[0]&&this.updateBucketOpacities(E,y,x.collisionBoxArray)}}updateBucketOpacities(u,p,y){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const x=u.layers[0],E=x.layout,M=new Ce(null,0,!1,!1,!0),N=E.get("text-allow-overlap"),z=E.get("icon-allow-overlap"),V=x._unevaluatedLayout.hasValue("text-variable-anchor")||x._unevaluatedLayout.hasValue("text-variable-anchor-offset"),W=E.get("text-rotation-alignment")==="map",H=E.get("text-pitch-alignment")==="map",ee=E.get("icon-text-fit")!=="none",ce=new Ce(null,0,N&&(z||!u.hasIconData()||E.get("icon-optional")),z&&(N||!u.hasTextData()||E.get("text-optional")),!0);!u.collisionArrays&&y&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(y);const ue=(ge,se,Ie)=>{for(let ze=0;ze<se/4;ze++)ge.opacityVertexArray.emplaceBack(Ie);ge.hasVisibleVertices=ge.hasVisibleVertices||Ie!==qa};for(let ge=0;ge<u.symbolInstances.length;ge++){const se=u.symbolInstances.get(ge),{numHorizontalGlyphVertices:Ie,numVerticalGlyphVertices:ze,crossTileID:_e}=se;let Oe=this.opacities[_e];p[_e]?Oe=M:Oe||(Oe=ce,this.opacities[_e]=Oe),p[_e]=!0;const Ue=se.numIconVertices>0,Ve=this.placedOrientations[se.crossTileID],Ke=Ve===a.ai.vertical,rt=Ve===a.ai.horizontal||Ve===a.ai.horizontalOnly;if(Ie>0||ze>0){const nt=Xi(Oe.text);ue(u.text,Ie,Ke?qa:nt),ue(u.text,ze,rt?qa:nt);const st=Oe.text.isHidden();[se.rightJustifiedTextSymbolIndex,se.centerJustifiedTextSymbolIndex,se.leftJustifiedTextSymbolIndex].forEach(gt=>{gt>=0&&(u.text.placedSymbolArray.get(gt).hidden=st||Ke?1:0)}),se.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(se.verticalPlacedTextSymbolIndex).hidden=st||rt?1:0);const $t=this.variableOffsets[se.crossTileID];$t&&this.markUsedJustification(u,$t.anchor,se,Ve);const mn=this.placedOrientations[se.crossTileID];mn&&(this.markUsedJustification(u,"left",se,mn),this.markUsedOrientation(u,mn,se))}if(Ue){const nt=Xi(Oe.icon),st=!(ee&&se.verticalPlacedIconSymbolIndex&&Ke);se.placedIconSymbolIndex>=0&&(ue(u.icon,se.numIconVertices,st?nt:qa),u.icon.placedSymbolArray.get(se.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),se.verticalPlacedIconSymbolIndex>=0&&(ue(u.icon,se.numVerticalIconVertices,st?qa:nt),u.icon.placedSymbolArray.get(se.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const nt=u.collisionArrays[ge];if(nt){let st=new a.P(0,0);if(nt.textBox||nt.verticalTextBox){let mn=!0;if(V){const gt=this.variableOffsets[_e];gt?(st=Jt(gt.anchor,gt.width,gt.height,gt.textOffset,gt.textBoxScale),W&&st._rotate(H?this.transform.angle:-this.transform.angle)):mn=!1}nt.textBox&&nn(u.textCollisionBox.collisionVertexArray,Oe.text.placed,!mn||Ke,st.x,st.y),nt.verticalTextBox&&nn(u.textCollisionBox.collisionVertexArray,Oe.text.placed,!mn||rt,st.x,st.y)}const $t=!!(!rt&&nt.verticalIconBox);nt.iconBox&&nn(u.iconCollisionBox.collisionVertexArray,Oe.icon.placed,$t,ee?st.x:0,ee?st.y:0),nt.verticalIconBox&&nn(u.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!$t,ee?st.x:0,ee?st.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const ge=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=ge.invProjMatrix,u.placementViewportMatrix=ge.viewportMatrix,u.collisionCircleArray=ge.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,p){const y=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*y>u}setStale(){this.stale=!0}}function nn(w,u,p,y,x){w.emplaceBack(u?1:0,p?1:0,y||0,x||0),w.emplaceBack(u?1:0,p?1:0,y||0,x||0),w.emplaceBack(u?1:0,p?1:0,y||0,x||0),w.emplaceBack(u?1:0,p?1:0,y||0,x||0)}const Gn=Math.pow(2,25),er=Math.pow(2,24),On=Math.pow(2,17),Pn=Math.pow(2,16),lo=Math.pow(2,9),lr=Math.pow(2,8),vi=Math.pow(2,1);function Xi(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const u=w.placed?1:0,p=Math.floor(127*w.opacity);return p*Gn+u*er+p*On+u*Pn+p*lo+u*lr+p*vi+u}const qa=0;class _1{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,p,y,x,E){const M=this._bucketParts;for(;this._currentTileIndex<u.length;)if(p.getBucketParts(M,x,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((N,z)=>N.sortKey-z.sortKey));this._currentPartIndex<M.length;)if(p.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,E())return!0;return!1}}class zf{constructor(u,p,y,x,E,M,N,z){this.placement=new qt(u,p,M,N,z),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(u,p,y){const x=a.h.now(),E=()=>!this._forceFullPlacement&&a.h.now()-x>2;for(;this._currentPlacementIndex>=0;){const M=p[u[this._currentPlacementIndex]],N=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=N)&&(!M.maxzoom||M.maxzoom>N)){if(this._inProgressLayer||(this._inProgressLayer=new _1(M)),this._inProgressLayer.continuePlacement(y[M.source],this.placement,this._showCollisionBoxes,M,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const Ff=512/a.N/2;class TC{constructor(u,p,y){this.tileID=u,this.bucketInstanceId=y,this._symbolsByKey={};const x=new Map;for(let E=0;E<p.length;E++){const M=p.get(E),N=M.key,z=x.get(N);z?z.push(M):x.set(N,[M])}for(const[E,M]of x){const N={positions:M.map(z=>({x:Math.floor(z.anchorX*Ff),y:Math.floor(z.anchorY*Ff)})),crossTileIDs:M.map(z=>z.crossTileID)};if(N.positions.length>128){const z=new a.av(N.positions.length,16,Uint16Array);for(const{x:V,y:W}of N.positions)z.add(V,W);z.finish(),delete N.positions,N.index=z}this._symbolsByKey[E]=N}}getScaledCoordinates(u,p){const{x:y,y:x,z:E}=this.tileID.canonical,{x:M,y:N,z}=p.canonical,V=Ff/Math.pow(2,z-E),W=(N*a.N+u.anchorY)*V,H=x*a.N*Ff;return{x:Math.floor((M*a.N+u.anchorX)*V-y*a.N*Ff),y:Math.floor(W-H)}}findMatches(u,p,y){const x=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let E=0;E<u.length;E++){const M=u.get(E);if(M.crossTileID)continue;const N=this._symbolsByKey[M.key];if(!N)continue;const z=this.getScaledCoordinates(M,p);if(N.index){const V=N.index.range(z.x-x,z.y-x,z.x+x,z.y+x).sort();for(const W of V){const H=N.crossTileIDs[W];if(!y[H]){y[H]=!0,M.crossTileID=H;break}}}else if(N.positions)for(let V=0;V<N.positions.length;V++){const W=N.positions[V],H=N.crossTileIDs[V];if(Math.abs(W.x-z.x)<=x&&Math.abs(W.y-z.y)<=x&&!y[H]){y[H]=!0,M.crossTileID=H;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:u})=>u)}}class Zn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class nv{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const p=Math.round((u-this.lng)/360);if(p!==0)for(const y in this.indexes){const x=this.indexes[y],E={};for(const M in x){const N=x[M];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+p),E[N.tileID.key]=N}this.indexes[y]=E}this.lng=u}addBucket(u,p,y){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let E=0;E<p.symbolInstances.length;E++)p.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const x=this.usedCrossTileIDs[u.overscaledZ];for(const E in this.indexes){const M=this.indexes[E];if(Number(E)>u.overscaledZ)for(const N in M){const z=M[N];z.tileID.isChildOf(u)&&z.findMatches(p.symbolInstances,u,x)}else{const N=M[u.scaledTo(Number(E)).key];N&&N.findMatches(p.symbolInstances,u,x)}}for(let E=0;E<p.symbolInstances.length;E++){const M=p.symbolInstances.get(E);M.crossTileID||(M.crossTileID=y.generate(),x[M.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new TC(u,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(u,p){for(const y of p.getCrossTileIDsLists())for(const x of y)delete this.usedCrossTileIDs[u][x]}removeStaleBuckets(u){let p=!1;for(const y in this.indexes){const x=this.indexes[y];for(const E in x)u[x[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,x[E]),delete x[E],p=!0)}return p}}class Kp{constructor(){this.layerIndexes={},this.crossTileIDs=new Zn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,p,y){let x=this.layerIndexes[u.id];x===void 0&&(x=this.layerIndexes[u.id]=new nv);let E=!1;const M={};x.handleWrapJump(y);for(const N of p){const z=N.getBucket(u);z&&u.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(N.tileID,z,this.crossTileIDs)&&(E=!0),M[z.bucketInstanceId]=!0)}return x.removeStaleBuckets(M)&&(E=!0),E}pruneUnusedLayers(u){const p={};u.forEach(y=>{p[y]=!0});for(const y in this.layerIndexes)p[y]||delete this.layerIndexes[y]}}const uo=(w,u)=>a.x(w,u&&u.filter(p=>p.identifier!=="source.canvas")),ya=a.F(a.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),PC=a.F(a.ax,["setCenter","setZoom","setBearing","setPitch"]),Wa=a.aw();class Zi extends a.E{constructor(u,p={}){super(),this.map=u,this.dispatcher=new He(Bu(),this,u._getMapId()),this.imageManager=new fe,this.imageManager.setEventedParent(this),this.glyphManager=new Te(u._requestManager,p.localIdeographFontFamily),this.lineAtlas=new De(256,512),this.crossTileSymbolIndex=new Kp,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.az());const y=this;this._rtlTextPluginCallback=Zi.registerForPluginStateChange(x=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(E,M)=>{if(a.aA(E),M&&M.every(N=>N))for(const N in y.sourceCaches){const z=y.sourceCaches[N].getSource().type;z!=="vector"&&z!=="geojson"||y.sourceCaches[N].reload()}})}),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const E=this.sourceCaches[x.sourceId];if(!E)return;const M=E.getSource();if(M&&M.vectorLayerIds)for(const N in this._layers){const z=this._layers[N];z.source===M.id&&this._validateLayer(z)}})}loadURL(u,p={},y){this.fire(new a.k("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const x=this.map._requestManager.transformRequest(u,O.Style);this._request=a.f(x,(E,M)=>{this._request=null,E?this.fire(new a.j(E)):M&&this._load(M,p,y)})}loadJSON(u,p={},y){this.fire(new a.k("dataloading",{dataType:"style"})),this._request=a.h.frame(()=>{this._request=null,p.validate=p.validate!==!1,this._load(u,p,y)})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(Wa,{validate:!1})}_load(u,p,y){var x;const E=p.transformStyle?p.transformStyle(y,u):u;if(!p.validate||!uo(this,a.y(E))){this._loaded=!0,this.stylesheet=E;for(const M in E.sources)this.addSource(M,E.sources[M],{validate:!1});E.sprite?this._loadSprite(E.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(E.glyphs),this._createLayers(),this.light=new de(this.stylesheet.light),this.map.setTerrain((x=this.stylesheet.terrain)!==null&&x!==void 0?x:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const u=a.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",u),this._order=u.map(p=>p.id),this._layers={},this._serializedLayers=null;for(const p of u){const y=a.aC(p);y.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=y}}_loadSprite(u,p=!1,y=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(x,E,M,N){const z=Z(x),V=z.length,W=M>1?"@2x":"",H={},ee={},ce={};for(const{id:ue,url:ge}of z){const se=E.transformRequest(E.normalizeSpriteURL(ge,W,".json"),O.SpriteJSON),Ie=`${ue}_${se.url}`;H[Ie]=a.f(se,(Oe,Ue)=>{delete H[Ie],ee[ue]=Ue,ne(N,ee,ce,Oe,V)});const ze=E.transformRequest(E.normalizeSpriteURL(ge,W,".png"),O.SpriteImage),_e=`${ue}_${ze.url}`;H[_e]=$.getImage(ze,(Oe,Ue)=>{delete H[_e],ce[ue]=Ue,ne(N,ee,ce,Oe,V)})}return{cancel(){for(const ue of Object.values(H))ue.cancel()}}}(u,this.map._requestManager,this.map.getPixelRatio(),(x,E)=>{if(this._spriteRequest=null,x)this.fire(new a.j(x));else if(E)for(const M in E){this._spritesImagesIds[M]=[];const N=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter(z=>!(z in E)):[];for(const z of N)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in E[M]){const V=M==="default"?z:`${M}:${z}`;this._spritesImagesIds[M].push(V),V in this.imageManager.images?this.imageManager.updateImage(V,E[M][z],!1):this.imageManager.addImage(V,E[M][z]),p&&(this._changedImages[V]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),y&&y(x)})}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(u){const p=this.sourceCaches[u.source];if(!p)return;const y=u.sourceLayer;if(!y)return;const x=p.getSource();(x.type==="geojson"||x.vectorLayerIds&&x.vectorLayerIds.indexOf(y)===-1)&&this.fire(new a.j(new Error(`Source layer "${y}" does not exist on source "${x.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u){const p=this._serializedAllLayers();if(!u||u.length===0)return Object.values(p);const y=[];for(const x of u)p[x]&&y.push(p[x]);return y}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const p=Object.keys(this._layers);for(const y of p){const x=this._layers[y];x.type!=="custom"&&(u[y]=x.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const p=this._changed;if(this._changed){const x=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(x.length||E.length)&&this._updateWorkerLayers(x,E);for(const M in this._updatedSources){const N=this._updatedSources[M];if(N==="reload")this._reloadSource(M);else{if(N!=="clear")throw new Error(`Invalid action ${N}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const y={};for(const x in this.sourceCaches){const E=this.sourceCaches[x];y[x]=E.used,E.used=!1}for(const x of this._order){const E=this._layers[x];E.recalculate(u,this._availableImages),!E.isHidden(u.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const x in y){const E=this.sourceCaches[x];y[x]!==E.used&&E.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:x}))}this.light.recalculate(u),this.z=u.zoom,p&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(u),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,p={}){this._checkLoaded();const y=this.serialize();if(u=p.transformStyle?p.transformStyle(y,u):u,uo(this,a.y(u)))return!1;(u=a.aD(u)).layers=a.aB(u.layers);const x=a.aE(y,u).filter(M=>!(M.command in PC));if(x.length===0)return!1;const E=x.filter(M=>!(M.command in ya));if(E.length>0)throw new Error(`Unimplemented: ${E.map(M=>M.command).join(", ")}.`);for(const M of x)M.command!=="setTransition"&&this[M.command].apply(this,M.args);return this.stylesheet=u,this._serializedLayers=null,!0}addImage(u,p){if(this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,p),this._afterImageUpdated(u)}updateImage(u,p){this.imageManager.updateImage(u,p)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,p,y={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.y.source,`sources.${u}`,p,null,y))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const x=this.sourceCaches[u]=new Dn(u,p,this.dispatcher);x.style=this,x.setEventedParent(this,()=>({isSourceLoaded:x.loaded(),source:x.serialize(),sourceId:u})),x.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===u)return this.fire(new a.j(new Error(`Source "${u}" cannot be removed while layer "${y}" is using it.`)));const p=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],p.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,p){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const y=this.sourceCaches[u].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(p),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,p,y={}){this._checkLoaded();const x=u.id;if(this.getLayer(x))return void this.fire(new a.j(new Error(`Layer "${x}" already exists on this map.`)));let E;if(u.type==="custom"){if(uo(this,a.aF(u)))return;E=a.aC(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(x,u.source),u=a.aD(u),u=a.e(u,{source:x})),this._validate(a.y.layer,`layers.${x}`,u,{arrayIndex:-1},y))return;E=a.aC(u),this._validateLayer(E),E.setEventedParent(this,{layer:{id:x}})}const M=p?this._order.indexOf(p):this._order.length;if(p&&M===-1)this.fire(new a.j(new Error(`Cannot add layer "${x}" before non-existing layer "${p}".`)));else{if(this._order.splice(M,0,x),this._layerOrderChanged=!0,this._layers[x]=E,this._removedLayers[x]&&E.source&&E.type!=="custom"){const N=this._removedLayers[x];delete this._removedLayers[x],N.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(u,p){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new a.j(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===p)return;const y=this._order.indexOf(u);this._order.splice(y,1);const x=p?this._order.indexOf(p):this._order.length;p&&x===-1?this.fire(new a.j(new Error(`Cannot move layer "${u}" before non-existing layer "${p}".`))):(this._order.splice(x,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const p=this._layers[u];if(!p)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${u}".`)));p.setEventedParent(null);const y=this._order.indexOf(u);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=p,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],p.onRemove&&p.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,p,y){this._checkLoaded();const x=this.getLayer(u);x?x.minzoom===p&&x.maxzoom===y||(p!=null&&(x.minzoom=p),y!=null&&(x.maxzoom=y),this._updateLayer(x)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,p,y={}){this._checkLoaded();const x=this.getLayer(u);if(x){if(!a.aG(x.filter,p))return p==null?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(a.y.filter,`layers.${x.id}.filter`,p,null,y)||(x.filter=a.aD(p),this._updateLayer(x)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return a.aD(this.getLayer(u).filter)}setLayoutProperty(u,p,y,x={}){this._checkLoaded();const E=this.getLayer(u);E?a.aG(E.getLayoutProperty(p),y)||(E.setLayoutProperty(p,y,x),this._updateLayer(E)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,p){const y=this.getLayer(u);if(y)return y.getLayoutProperty(p);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,p,y,x={}){this._checkLoaded();const E=this.getLayer(u);E?a.aG(E.getPaintProperty(p),y)||(E.setPaintProperty(p,y,x)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,p){return this.getLayer(u).getPaintProperty(p)}setFeatureState(u,p){this._checkLoaded();const y=u.source,x=u.sourceLayer,E=this.sourceCaches[y];if(E===void 0)return void this.fire(new a.j(new Error(`The source '${y}' does not exist in the map's style.`)));const M=E.getSource().type;M==="geojson"&&x?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||x?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),E.setFeatureState(x,u.id,p)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,p){this._checkLoaded();const y=u.source,x=this.sourceCaches[y];if(x===void 0)return void this.fire(new a.j(new Error(`The source '${y}' does not exist in the map's style.`)));const E=x.getSource().type,M=E==="vector"?u.sourceLayer:void 0;E!=="vector"||M?p&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):x.removeFeatureState(M,u.id,p):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const p=u.source,y=u.sourceLayer,x=this.sourceCaches[p];if(x!==void 0)return x.getSource().type!=="vector"||y?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),x.getFeatureState(y,u.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=a.aH(this.sourceCaches,E=>E.serialize()),p=this._serializeByIds(this._order),y=this.map.getTerrain()||void 0,x=this.stylesheet;return a.aI({version:x.version,name:x.name,metadata:x.metadata,light:x.light,center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch,sprite:x.sprite,glyphs:x.glyphs,transition:x.transition,sources:u,layers:p,terrain:y},E=>E!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const p=M=>this._layers[M].type==="fill-extrusion",y={},x=[];for(let M=this._order.length-1;M>=0;M--){const N=this._order[M];if(p(N)){y[N]=M;for(const z of u){const V=z[N];if(V)for(const W of V)x.push(W)}}}x.sort((M,N)=>N.intersectionZ-M.intersectionZ);const E=[];for(let M=this._order.length-1;M>=0;M--){const N=this._order[M];if(p(N))for(let z=x.length-1;z>=0;z--){const V=x[z].feature;if(y[V.layer.id]<M)break;E.push(V),x.pop()}else for(const z of u){const V=z[N];if(V)for(const W of V)E.push(W.feature)}}return E}queryRenderedFeatures(u,p,y){p&&p.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",p.filter,null,p);const x={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const N of p.layers){const z=this._layers[N];if(!z)return this.fire(new a.j(new Error(`The layer '${N}' does not exist in the map's style and cannot be queried for features.`))),[];x[z.source]=!0}}const E=[];p.availableImages=this._availableImages;const M=this._serializedAllLayers();for(const N in this.sourceCaches)p.layers&&!x[N]||E.push(Tn(this.sourceCaches[N],this._layers,M,u,p,y));return this.placement&&E.push(function(N,z,V,W,H,ee,ce){const ue={},ge=ee.queryRenderedSymbols(W),se=[];for(const Ie of Object.keys(ge).map(Number))se.push(ce[Ie]);se.sort(yn);for(const Ie of se){const ze=Ie.featureIndex.lookupSymbolFeatures(ge[Ie.bucketInstanceId],z,Ie.bucketIndex,Ie.sourceLayerIndex,H.filter,H.layers,H.availableImages,N);for(const _e in ze){const Oe=ue[_e]=ue[_e]||[],Ue=ze[_e];Ue.sort((Ve,Ke)=>{const rt=Ie.featureSortOrder;if(rt){const nt=rt.indexOf(Ve.featureIndex);return rt.indexOf(Ke.featureIndex)-nt}return Ke.featureIndex-Ve.featureIndex});for(const Ve of Ue)Oe.push(Ve)}}for(const Ie in ue)ue[Ie].forEach(ze=>{const _e=ze.feature,Oe=V[N[Ie].source].getFeatureState(_e.layer["source-layer"],_e.id);_e.source=_e.layer.source,_e.layer["source-layer"]&&(_e.sourceLayer=_e.layer["source-layer"]),_e.state=Oe});return ue}(this._layers,M,this.sourceCaches,u,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(u,p){p&&p.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",p.filter,null,p);const y=this.sourceCaches[u];return y?function(x,E){const M=x.getRenderableIds().map(V=>x.getTileByID(V)),N=[],z={};for(let V=0;V<M.length;V++){const W=M[V],H=W.tileID.canonical.key;z[H]||(z[H]=!0,W.querySourceFeatures(N,E))}return N}(y,p):[]}addSourceType(u,p,y){return Ct(u)?y(new Error(`A source type called "${u}" already exists.`)):(((x,E)=>{Ot[x]=E})(u,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:p.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(u,p={}){this._checkLoaded();const y=this.light.getLight();let x=!1;for(const M in u)if(!a.aG(u[M],y[M])){x=!0;break}if(!x)return;const E={now:a.h.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,p),this.light.updateTransitions(E)}_validate(u,p,y,x,E={}){return(!E||E.validate!==!1)&&uo(this,u.call(a.y,a.e({key:p,style:this.serialize(),value:y,styleSpec:a.v},x)))}_remove(u=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const y=this.sourceCaches[p];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const p in this.sourceCaches)this.sourceCaches[p].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,p,y,x,E=!1){let M=!1,N=!1;const z={};for(const V of this._order){const W=this._layers[V];if(W.type!=="symbol")continue;if(!z[W.source]){const ee=this.sourceCaches[W.source];z[W.source]=ee.getRenderableIds(!0).map(ce=>ee.getTileByID(ce)).sort((ce,ue)=>ue.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(ue.tileID)?-1:1))}const H=this.crossTileSymbolIndex.addLayer(W,z[W.source],u.center.lng);M=M||H}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.h.now(),u.zoom))&&(this.pauseablePlacement=new zf(u,this.map.terrain,this._order,E,p,y,x,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.h.now()),N=!0),M&&this.pauseablePlacement.placement.setStale()),N||M)for(const V of this._order){const W=this._layers[V];W.type==="symbol"&&this.placement.updateLayerOpacities(W,z[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.h.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,p,y){this.imageManager.getImages(p.icons,y),this._updateTilesForChangedImages();const x=this.sourceCaches[p.source];x&&x.setDependencies(p.tileID.key,p.type,p.icons)}getGlyphs(u,p,y){this.glyphManager.getGlyphs(p.stacks,y);const x=this.sourceCaches[p.source];x&&x.setDependencies(p.tileID.key,p.type,[""])}getResource(u,p,y){return a.m(p,y)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,p={}){this._checkLoaded(),u&&this._validate(a.y.glyphs,"glyphs",u,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,p,y={},x){this._checkLoaded();const E=[{id:u,url:p}],M=[...Z(this.stylesheet.sprite),...E];this._validate(a.y.sprite,"sprite",M,null,y)||(this.stylesheet.sprite=M,this._loadSprite(E,!0,x))}removeSprite(u){this._checkLoaded();const p=Z(this.stylesheet.sprite);if(p.find(y=>y.id===u)){if(this._spritesImagesIds[u])for(const y of this._spritesImagesIds[u])this.imageManager.removeImage(y),this._changedImages[y]=!0;p.splice(p.findIndex(y=>y.id===u),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return Z(this.stylesheet.sprite)}setSprite(u,p={},y){this._checkLoaded(),u&&this._validate(a.y.sprite,"sprite",u,null,p)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,y):(this._unloadSprite(),y&&y(null)))}}Zi.registerForPluginStateChange=a.aK;var Yp=a.Q([{name:"a_pos",type:"Int16",components:2}]),Bf="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Pr={prelude:zn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:zn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:zn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:zn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:zn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:zn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:zn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:zn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:zn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:zn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:zn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:zn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:zn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:zn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:zn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:zn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:zn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:zn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:zn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:zn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:zn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:zn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:zn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:zn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:zn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:zn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:zn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Bf),terrainDepth:zn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Bf),terrainCoords:zn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Bf)};function zn(w,u){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=u.match(/attribute ([\w]+) ([\w]+)/g),x=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=E?E.concat(x):x,N={};return{fragmentSource:w=w.replace(p,(z,V,W,H,ee)=>(N[ee]=!0,V==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
varying ${W} ${H} ${ee};
#else
uniform ${W} ${H} u_${ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ee}
    ${W} ${H} ${ee} = u_${ee};
#endif
`)),vertexSource:u=u.replace(p,(z,V,W,H,ee)=>{const ce=H==="float"?"vec2":"vec4",ue=ee.match(/color/)?"color":ce;return N[ee]?V==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
attribute ${W} ${ce} a_${ee};
varying ${W} ${H} ${ee};
#else
uniform ${W} ${H} u_${ee};
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = a_${ee};
#else
    ${W} ${H} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = unpack_mix_${ue}(a_${ee}, u_${ee}_t);
#else
    ${W} ${H} ${ee} = u_${ee};
#endif
`:V==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
attribute ${W} ${ce} a_${ee};
#else
uniform ${W} ${H} u_${ee};
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${W} ${H} ${ee} = a_${ee};
#else
    ${W} ${H} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${W} ${H} ${ee} = unpack_mix_${ue}(a_${ee}, u_${ee}_t);
#else
    ${W} ${H} ${ee} = u_${ee};
#endif
`}),staticAttributes:y,staticUniforms:M}}class Tc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,p,y,x,E,M,N,z,V){this.context=u;let W=this.boundPaintVertexBuffers.length!==x.length;for(let H=0;!W&&H<x.length;H++)this.boundPaintVertexBuffers[H]!==x[H]&&(W=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==y||W||this.boundIndexBuffer!==E||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==N||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==V?this.freshBind(p,y,x,E,M,N,z,V):(u.bindVertexArray.set(this.vao),N&&N.bind(),E&&E.dynamicDraw&&E.bind(),z&&z.bind(),V&&V.bind())}freshBind(u,p,y,x,E,M,N,z){const V=u.numAttributes,W=this.context,H=W.gl;this.vao&&this.destroy(),this.vao=W.createVertexArray(),W.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=x,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=N,this.boundDynamicVertexBuffer3=z,p.enableAttributes(H,u);for(const ee of y)ee.enableAttributes(H,u);M&&M.enableAttributes(H,u),N&&N.enableAttributes(H,u),z&&z.enableAttributes(H,u),p.bind(),p.setVertexAttribPointers(H,u,E);for(const ee of y)ee.bind(),ee.setVertexAttribPointers(H,u,E);M&&(M.bind(),M.setVertexAttribPointers(H,u,E)),x&&x.bind(),N&&(N.bind(),N.setVertexAttribPointers(H,u,E)),z&&(z.bind(),z.setVertexAttribPointers(H,u,E)),W.currentNumAttributes=V}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Rr(w){const u=[];for(let p=0;p<w.length;p++){if(w[p]===null)continue;const y=w[p].split(" ");u.push(y.pop())}return u}class Jp{constructor(u,p,y,x,E,M){const N=u.gl;this.program=N.createProgram();const z=Rr(p.staticAttributes),V=y?y.getBinderAttributes():[],W=z.concat(V),H=Pr.prelude.staticUniforms?Rr(Pr.prelude.staticUniforms):[],ee=p.staticUniforms?Rr(p.staticUniforms):[],ce=y?y.getBinderUniforms():[],ue=H.concat(ee).concat(ce),ge=[];for(const Ve of ue)ge.indexOf(Ve)<0&&ge.push(Ve);const se=y?y.defines():[];E&&se.push("#define OVERDRAW_INSPECTOR;"),M&&se.push("#define TERRAIN3D;");const Ie=se.concat(Pr.prelude.fragmentSource,p.fragmentSource).join(`
`),ze=se.concat(Pr.prelude.vertexSource,p.vertexSource).join(`
`),_e=N.createShader(N.FRAGMENT_SHADER);if(N.isContextLost())return void(this.failedToCreate=!0);if(N.shaderSource(_e,Ie),N.compileShader(_e),!N.getShaderParameter(_e,N.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${N.getShaderInfoLog(_e)}`);N.attachShader(this.program,_e);const Oe=N.createShader(N.VERTEX_SHADER);if(N.isContextLost())return void(this.failedToCreate=!0);if(N.shaderSource(Oe,ze),N.compileShader(Oe),!N.getShaderParameter(Oe,N.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${N.getShaderInfoLog(Oe)}`);N.attachShader(this.program,Oe),this.attributes={};const Ue={};this.numAttributes=W.length;for(let Ve=0;Ve<this.numAttributes;Ve++)W[Ve]&&(N.bindAttribLocation(this.program,Ve,W[Ve]),this.attributes[W[Ve]]=Ve);if(N.linkProgram(this.program),!N.getProgramParameter(this.program,N.LINK_STATUS))throw new Error(`Program failed to link: ${N.getProgramInfoLog(this.program)}`);N.deleteShader(Oe),N.deleteShader(_e);for(let Ve=0;Ve<ge.length;Ve++){const Ke=ge[Ve];if(Ke&&!Ue[Ke]){const rt=N.getUniformLocation(this.program,Ke);rt&&(Ue[Ke]=rt)}}this.fixedUniforms=x(u,Ue),this.terrainUniforms=((Ve,Ke)=>({u_depth:new a.aL(Ve,Ke.u_depth),u_terrain:new a.aL(Ve,Ke.u_terrain),u_terrain_dim:new a.aM(Ve,Ke.u_terrain_dim),u_terrain_matrix:new a.aN(Ve,Ke.u_terrain_matrix),u_terrain_unpack:new a.aO(Ve,Ke.u_terrain_unpack),u_terrain_exaggeration:new a.aM(Ve,Ke.u_terrain_exaggeration)}))(u,Ue),this.binderUniforms=y?y.getUniforms(u,Ue):[]}draw(u,p,y,x,E,M,N,z,V,W,H,ee,ce,ue,ge,se,Ie,ze){const _e=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(y),u.setStencilMode(x),u.setColorMode(E),u.setCullFace(M),z){u.activeTexture.set(_e.TEXTURE2),_e.bindTexture(_e.TEXTURE_2D,z.depthTexture),u.activeTexture.set(_e.TEXTURE3),_e.bindTexture(_e.TEXTURE_2D,z.texture);for(const Ue in this.terrainUniforms)this.terrainUniforms[Ue].set(z[Ue])}for(const Ue in this.fixedUniforms)this.fixedUniforms[Ue].set(N[Ue]);ge&&ge.setUniforms(u,this.binderUniforms,ce,{zoom:ue});let Oe=0;switch(p){case _e.LINES:Oe=2;break;case _e.TRIANGLES:Oe=3;break;case _e.LINE_STRIP:Oe=1}for(const Ue of ee.get()){const Ve=Ue.vaos||(Ue.vaos={});(Ve[V]||(Ve[V]=new Tc)).bind(u,this,W,ge?ge.getPaintVertexBuffers():[],H,Ue.vertexOffset,se,Ie,ze),_e.drawElements(p,Ue.primitiveLength*Oe,_e.UNSIGNED_SHORT,Ue.primitiveOffset*Oe*2)}}}function Ha(w,u,p){const y=1/we(p,1,u.transform.tileZoom),x=Math.pow(2,p.tileID.overscaledZ),E=p.tileSize*Math.pow(2,u.transform.tileZoom)/x,M=E*(p.tileID.canonical.x+p.tileID.wrap*x),N=E*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[y,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[M>>16,N>>16],u_pixel_coord_lower:[65535&M,65535&N]}}const rv=(w,u,p,y)=>{const x=u.style.light,E=x.properties.get("position"),M=[E.x,E.y,E.z],N=function(){var V=new a.A(9);return a.A!=Float32Array&&(V[1]=0,V[2]=0,V[3]=0,V[5]=0,V[6]=0,V[7]=0),V[0]=1,V[4]=1,V[8]=1,V}();x.properties.get("anchor")==="viewport"&&function(V,W){var H=Math.sin(W),ee=Math.cos(W);V[0]=ee,V[1]=H,V[2]=0,V[3]=-H,V[4]=ee,V[5]=0,V[6]=0,V[7]=0,V[8]=1}(N,-u.transform.angle),function(V,W,H){var ee=W[0],ce=W[1],ue=W[2];V[0]=ee*H[0]+ce*H[3]+ue*H[6],V[1]=ee*H[1]+ce*H[4]+ue*H[7],V[2]=ee*H[2]+ce*H[5]+ue*H[8]}(M,M,N);const z=x.properties.get("color");return{u_matrix:w,u_lightpos:M,u_lightintensity:x.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+p,u_opacity:y}},ju=(w,u,p,y,x,E,M)=>a.e(rv(w,u,p,y),Ha(E,u,M),{u_height_factor:-Math.pow(2,x.overscaledZ)/M.tileSize/8}),x1=w=>({u_matrix:w}),iv=(w,u,p,y)=>a.e(x1(w),Ha(p,u,y)),Qp=(w,u)=>({u_matrix:w,u_world:u}),em=(w,u,p,y,x)=>a.e(iv(w,u,p,y),{u_world:x}),Uu=(w,u,p,y)=>{const x=w.transform;let E,M;if(y.paint.get("circle-pitch-alignment")==="map"){const N=we(p,1,x.zoom);E=!0,M=[N,N]}else E=!1,M=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(y.paint.get("circle-pitch-scale")==="map"),u_matrix:w.translatePosMatrix(u.posMatrix,p,y.paint.get("circle-translate"),y.paint.get("circle-translate-anchor")),u_pitch_with_map:+E,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:M}},ov=(w,u,p)=>{const y=we(p,1,u.zoom),x=Math.pow(2,u.zoom-p.tileID.overscaledZ),E=p.tileID.overscaleFactor();return{u_matrix:w,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:y,u_extrude_scale:[u.pixelsToGLUnits[0]/(y*x),u.pixelsToGLUnits[1]/(y*x)],u_overscale_factor:E}},yd=(w,u,p=1)=>({u_matrix:w,u_color:u,u_overlay:0,u_overlay_scale:p}),b1=w=>({u_matrix:w}),AC=(w,u,p,y)=>({u_matrix:w,u_extrude_scale:we(u,1,p),u_intensity:y});function av(w,u){const p=Math.pow(2,u.canonical.z),y=u.canonical.y;return[new a.U(0,y/p).toLngLat().lat,new a.U(0,(y+1)/p).toLngLat().lat]}const sv=(w,u,p,y)=>{const x=w.transform;return{u_matrix:tm(w,u,p,y),u_ratio:1/we(u,1,x.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},w1=(w,u,p,y,x)=>a.e(sv(w,u,p,x),{u_image:0,u_image_height:y}),OC=(w,u,p,y,x)=>{const E=w.transform,M=E1(u,E);return{u_matrix:tm(w,u,p,x),u_texsize:u.imageAtlasTexture.size,u_ratio:1/we(u,1,E.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[M,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},S1=(w,u,p,y,x,E)=>{const M=w.lineAtlas,N=E1(u,w.transform),z=p.layout.get("line-cap")==="round",V=M.getDash(y.from,z),W=M.getDash(y.to,z),H=V.width*x.fromScale,ee=W.width*x.toScale;return a.e(sv(w,u,p,E),{u_patternscale_a:[N/H,-V.height/2],u_patternscale_b:[N/ee,-W.height/2],u_sdfgamma:M.width/(256*Math.min(H,ee)*w.pixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:W.y,u_mix:x.t})};function E1(w,u){return 1/we(w,1,u.tileZoom)}function tm(w,u,p,y){return w.translatePosMatrix(y?y.posMatrix:u.tileID.posMatrix,u,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const C1=(w,u,p,y,x)=>{return{u_matrix:w,u_tl_parent:u,u_scale_parent:p,u_buffer_scale:1,u_fade_t:y.mix,u_opacity:y.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(M=x.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(E=x.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:I1(x.paint.get("raster-hue-rotate"))};var E,M};function I1(w){w*=Math.PI/180;const u=Math.sin(w),p=Math.cos(w);return[(2*p+1)/3,(-Math.sqrt(3)*u-p+1)/3,(Math.sqrt(3)*u-p+1)/3]}const lv=(w,u,p,y,x,E,M,N,z,V)=>{const W=x.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:W.cameraToCenterDistance,u_pitch:W.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:W.width/W.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:M,u_coord_matrix:N,u_is_text:+z,u_pitch_with_map:+y,u_texsize:V,u_texture:0}},uv=(w,u,p,y,x,E,M,N,z,V,W)=>{const H=x.transform;return a.e(lv(w,u,p,y,x,E,M,N,z,V),{u_gamma_scale:y?Math.cos(H._pitch)*H.cameraToCenterDistance:1,u_device_pixel_ratio:x.pixelRatio,u_is_halo:+W})},Pc=(w,u,p,y,x,E,M,N,z,V)=>a.e(uv(w,u,p,y,x,E,M,N,!0,z,!0),{u_texsize_icon:V,u_texture_icon:1}),nm=(w,u,p)=>({u_matrix:w,u_opacity:u,u_color:p}),Xa=(w,u,p,y,x,E)=>a.e(function(M,N,z,V){const W=z.imageManager.getPattern(M.from.toString()),H=z.imageManager.getPattern(M.to.toString()),{width:ee,height:ce}=z.imageManager.getPixelSize(),ue=Math.pow(2,V.tileID.overscaledZ),ge=V.tileSize*Math.pow(2,z.transform.tileZoom)/ue,se=ge*(V.tileID.canonical.x+V.tileID.wrap*ue),Ie=ge*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:H.tl,u_pattern_br_b:H.br,u_texsize:[ee,ce],u_mix:N.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:H.displaySize,u_scale_a:N.fromScale,u_scale_b:N.toScale,u_tile_units_to_pixels:1/we(V,1,z.transform.tileZoom),u_pixel_coord_upper:[se>>16,Ie>>16],u_pixel_coord_lower:[65535&se,65535&Ie]}}(y,E,p,x),{u_matrix:w,u_opacity:u}),rm={fillExtrusion:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_lightpos:new a.aP(w,u.u_lightpos),u_lightintensity:new a.aM(w,u.u_lightintensity),u_lightcolor:new a.aP(w,u.u_lightcolor),u_vertical_gradient:new a.aM(w,u.u_vertical_gradient),u_opacity:new a.aM(w,u.u_opacity)}),fillExtrusionPattern:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_lightpos:new a.aP(w,u.u_lightpos),u_lightintensity:new a.aM(w,u.u_lightintensity),u_lightcolor:new a.aP(w,u.u_lightcolor),u_vertical_gradient:new a.aM(w,u.u_vertical_gradient),u_height_factor:new a.aM(w,u.u_height_factor),u_image:new a.aL(w,u.u_image),u_texsize:new a.aQ(w,u.u_texsize),u_pixel_coord_upper:new a.aQ(w,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(w,u.u_pixel_coord_lower),u_scale:new a.aP(w,u.u_scale),u_fade:new a.aM(w,u.u_fade),u_opacity:new a.aM(w,u.u_opacity)}),fill:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix)}),fillPattern:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_image:new a.aL(w,u.u_image),u_texsize:new a.aQ(w,u.u_texsize),u_pixel_coord_upper:new a.aQ(w,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(w,u.u_pixel_coord_lower),u_scale:new a.aP(w,u.u_scale),u_fade:new a.aM(w,u.u_fade)}),fillOutline:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_world:new a.aQ(w,u.u_world)}),fillOutlinePattern:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_world:new a.aQ(w,u.u_world),u_image:new a.aL(w,u.u_image),u_texsize:new a.aQ(w,u.u_texsize),u_pixel_coord_upper:new a.aQ(w,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(w,u.u_pixel_coord_lower),u_scale:new a.aP(w,u.u_scale),u_fade:new a.aM(w,u.u_fade)}),circle:(w,u)=>({u_camera_to_center_distance:new a.aM(w,u.u_camera_to_center_distance),u_scale_with_map:new a.aL(w,u.u_scale_with_map),u_pitch_with_map:new a.aL(w,u.u_pitch_with_map),u_extrude_scale:new a.aQ(w,u.u_extrude_scale),u_device_pixel_ratio:new a.aM(w,u.u_device_pixel_ratio),u_matrix:new a.aN(w,u.u_matrix)}),collisionBox:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_camera_to_center_distance:new a.aM(w,u.u_camera_to_center_distance),u_pixels_to_tile_units:new a.aM(w,u.u_pixels_to_tile_units),u_extrude_scale:new a.aQ(w,u.u_extrude_scale),u_overscale_factor:new a.aM(w,u.u_overscale_factor)}),collisionCircle:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_inv_matrix:new a.aN(w,u.u_inv_matrix),u_camera_to_center_distance:new a.aM(w,u.u_camera_to_center_distance),u_viewport_size:new a.aQ(w,u.u_viewport_size)}),debug:(w,u)=>({u_color:new a.aR(w,u.u_color),u_matrix:new a.aN(w,u.u_matrix),u_overlay:new a.aL(w,u.u_overlay),u_overlay_scale:new a.aM(w,u.u_overlay_scale)}),clippingMask:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix)}),heatmap:(w,u)=>({u_extrude_scale:new a.aM(w,u.u_extrude_scale),u_intensity:new a.aM(w,u.u_intensity),u_matrix:new a.aN(w,u.u_matrix)}),heatmapTexture:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_world:new a.aQ(w,u.u_world),u_image:new a.aL(w,u.u_image),u_color_ramp:new a.aL(w,u.u_color_ramp),u_opacity:new a.aM(w,u.u_opacity)}),hillshade:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_image:new a.aL(w,u.u_image),u_latrange:new a.aQ(w,u.u_latrange),u_light:new a.aQ(w,u.u_light),u_shadow:new a.aR(w,u.u_shadow),u_highlight:new a.aR(w,u.u_highlight),u_accent:new a.aR(w,u.u_accent)}),hillshadePrepare:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_image:new a.aL(w,u.u_image),u_dimension:new a.aQ(w,u.u_dimension),u_zoom:new a.aM(w,u.u_zoom),u_unpack:new a.aO(w,u.u_unpack)}),line:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_ratio:new a.aM(w,u.u_ratio),u_device_pixel_ratio:new a.aM(w,u.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(w,u.u_units_to_pixels)}),lineGradient:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_ratio:new a.aM(w,u.u_ratio),u_device_pixel_ratio:new a.aM(w,u.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(w,u.u_units_to_pixels),u_image:new a.aL(w,u.u_image),u_image_height:new a.aM(w,u.u_image_height)}),linePattern:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_texsize:new a.aQ(w,u.u_texsize),u_ratio:new a.aM(w,u.u_ratio),u_device_pixel_ratio:new a.aM(w,u.u_device_pixel_ratio),u_image:new a.aL(w,u.u_image),u_units_to_pixels:new a.aQ(w,u.u_units_to_pixels),u_scale:new a.aP(w,u.u_scale),u_fade:new a.aM(w,u.u_fade)}),lineSDF:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_ratio:new a.aM(w,u.u_ratio),u_device_pixel_ratio:new a.aM(w,u.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(w,u.u_units_to_pixels),u_patternscale_a:new a.aQ(w,u.u_patternscale_a),u_patternscale_b:new a.aQ(w,u.u_patternscale_b),u_sdfgamma:new a.aM(w,u.u_sdfgamma),u_image:new a.aL(w,u.u_image),u_tex_y_a:new a.aM(w,u.u_tex_y_a),u_tex_y_b:new a.aM(w,u.u_tex_y_b),u_mix:new a.aM(w,u.u_mix)}),raster:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_tl_parent:new a.aQ(w,u.u_tl_parent),u_scale_parent:new a.aM(w,u.u_scale_parent),u_buffer_scale:new a.aM(w,u.u_buffer_scale),u_fade_t:new a.aM(w,u.u_fade_t),u_opacity:new a.aM(w,u.u_opacity),u_image0:new a.aL(w,u.u_image0),u_image1:new a.aL(w,u.u_image1),u_brightness_low:new a.aM(w,u.u_brightness_low),u_brightness_high:new a.aM(w,u.u_brightness_high),u_saturation_factor:new a.aM(w,u.u_saturation_factor),u_contrast_factor:new a.aM(w,u.u_contrast_factor),u_spin_weights:new a.aP(w,u.u_spin_weights)}),symbolIcon:(w,u)=>({u_is_size_zoom_constant:new a.aL(w,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(w,u.u_is_size_feature_constant),u_size_t:new a.aM(w,u.u_size_t),u_size:new a.aM(w,u.u_size),u_camera_to_center_distance:new a.aM(w,u.u_camera_to_center_distance),u_pitch:new a.aM(w,u.u_pitch),u_rotate_symbol:new a.aL(w,u.u_rotate_symbol),u_aspect_ratio:new a.aM(w,u.u_aspect_ratio),u_fade_change:new a.aM(w,u.u_fade_change),u_matrix:new a.aN(w,u.u_matrix),u_label_plane_matrix:new a.aN(w,u.u_label_plane_matrix),u_coord_matrix:new a.aN(w,u.u_coord_matrix),u_is_text:new a.aL(w,u.u_is_text),u_pitch_with_map:new a.aL(w,u.u_pitch_with_map),u_texsize:new a.aQ(w,u.u_texsize),u_texture:new a.aL(w,u.u_texture)}),symbolSDF:(w,u)=>({u_is_size_zoom_constant:new a.aL(w,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(w,u.u_is_size_feature_constant),u_size_t:new a.aM(w,u.u_size_t),u_size:new a.aM(w,u.u_size),u_camera_to_center_distance:new a.aM(w,u.u_camera_to_center_distance),u_pitch:new a.aM(w,u.u_pitch),u_rotate_symbol:new a.aL(w,u.u_rotate_symbol),u_aspect_ratio:new a.aM(w,u.u_aspect_ratio),u_fade_change:new a.aM(w,u.u_fade_change),u_matrix:new a.aN(w,u.u_matrix),u_label_plane_matrix:new a.aN(w,u.u_label_plane_matrix),u_coord_matrix:new a.aN(w,u.u_coord_matrix),u_is_text:new a.aL(w,u.u_is_text),u_pitch_with_map:new a.aL(w,u.u_pitch_with_map),u_texsize:new a.aQ(w,u.u_texsize),u_texture:new a.aL(w,u.u_texture),u_gamma_scale:new a.aM(w,u.u_gamma_scale),u_device_pixel_ratio:new a.aM(w,u.u_device_pixel_ratio),u_is_halo:new a.aL(w,u.u_is_halo)}),symbolTextAndIcon:(w,u)=>({u_is_size_zoom_constant:new a.aL(w,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(w,u.u_is_size_feature_constant),u_size_t:new a.aM(w,u.u_size_t),u_size:new a.aM(w,u.u_size),u_camera_to_center_distance:new a.aM(w,u.u_camera_to_center_distance),u_pitch:new a.aM(w,u.u_pitch),u_rotate_symbol:new a.aL(w,u.u_rotate_symbol),u_aspect_ratio:new a.aM(w,u.u_aspect_ratio),u_fade_change:new a.aM(w,u.u_fade_change),u_matrix:new a.aN(w,u.u_matrix),u_label_plane_matrix:new a.aN(w,u.u_label_plane_matrix),u_coord_matrix:new a.aN(w,u.u_coord_matrix),u_is_text:new a.aL(w,u.u_is_text),u_pitch_with_map:new a.aL(w,u.u_pitch_with_map),u_texsize:new a.aQ(w,u.u_texsize),u_texsize_icon:new a.aQ(w,u.u_texsize_icon),u_texture:new a.aL(w,u.u_texture),u_texture_icon:new a.aL(w,u.u_texture_icon),u_gamma_scale:new a.aM(w,u.u_gamma_scale),u_device_pixel_ratio:new a.aM(w,u.u_device_pixel_ratio),u_is_halo:new a.aL(w,u.u_is_halo)}),background:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_opacity:new a.aM(w,u.u_opacity),u_color:new a.aR(w,u.u_color)}),backgroundPattern:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_opacity:new a.aM(w,u.u_opacity),u_image:new a.aL(w,u.u_image),u_pattern_tl_a:new a.aQ(w,u.u_pattern_tl_a),u_pattern_br_a:new a.aQ(w,u.u_pattern_br_a),u_pattern_tl_b:new a.aQ(w,u.u_pattern_tl_b),u_pattern_br_b:new a.aQ(w,u.u_pattern_br_b),u_texsize:new a.aQ(w,u.u_texsize),u_mix:new a.aM(w,u.u_mix),u_pattern_size_a:new a.aQ(w,u.u_pattern_size_a),u_pattern_size_b:new a.aQ(w,u.u_pattern_size_b),u_scale_a:new a.aM(w,u.u_scale_a),u_scale_b:new a.aM(w,u.u_scale_b),u_pixel_coord_upper:new a.aQ(w,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(w,u.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aM(w,u.u_tile_units_to_pixels)}),terrain:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_texture:new a.aL(w,u.u_texture),u_ele_delta:new a.aM(w,u.u_ele_delta)}),terrainDepth:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_ele_delta:new a.aM(w,u.u_ele_delta)}),terrainCoords:(w,u)=>({u_matrix:new a.aN(w,u.u_matrix),u_texture:new a.aL(w,u.u_texture),u_terrain_coords_id:new a.aM(w,u.u_terrain_coords_id),u_ele_delta:new a.aM(w,u.u_ele_delta)})};class im{constructor(u,p,y){this.context=u;const x=u.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const vd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class om{constructor(u,p,y,x){this.length=p.length,this.attributes=y,this.itemSize=p.bytesPerElement,this.dynamicDraw=x,this.context=u;const E=u.gl;this.buffer=E.createBuffer(),u.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,p){for(let y=0;y<this.attributes.length;y++){const x=p.attributes[this.attributes[y].name];x!==void 0&&u.enableVertexAttribArray(x)}}setVertexAttribPointers(u,p,y){for(let x=0;x<this.attributes.length;x++){const E=this.attributes[x],M=p.attributes[E.name];M!==void 0&&u.vertexAttribPointer(M,E.components,u[vd[E.type]],!1,this.itemSize,E.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const jf=new WeakMap;function Vu(w){var u;if(jf.has(w))return jf.get(w);{const p=(u=w.getParameter(w.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return jf.set(w,p),p}}class wn{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class am extends wn{getDefault(){return a.aT.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class va extends wn{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class _a extends wn{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class cv extends wn{getDefault(){return[!0,!0,!0,!0]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class sm extends wn{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class lm extends wn{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class fv extends wn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const p=this.current;(u.func!==p.func||u.ref!==p.ref||u.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class hv extends wn{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class um extends wn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=u,this.dirty=!1}}class dv extends wn{getDefault(){return[0,1]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class pv extends wn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=u,this.dirty=!1}}class cm extends wn{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class T1 extends wn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.BLEND):p.disable(p.BLEND),this.current=u,this.dirty=!1}}class P1 extends wn{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class Uf extends wn{getDefault(){return a.aT.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class MC extends wn{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class $C extends wn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=u,this.dirty=!1}}class kC extends wn{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class NC extends wn{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class LC extends wn{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class DC extends wn{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class mv extends wn{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class fm extends wn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class gv extends wn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class yv extends wn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Vf extends wn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class A1 extends wn{getDefault(){return null}set(u){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class O1 extends wn{getDefault(){return null}set(u){var p;if(u===this.current&&!this.dirty)return;const y=this.gl;Vu(y)?y.bindVertexArray(u):(p=y.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class vv extends wn{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Ac extends wn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class M1 extends wn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class Gu extends wn{constructor(u,p){super(u),this.context=u,this.parent=p}getDefault(){return null}}class Gf extends Gu{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class $1 extends Gu{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class _v extends Gu{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Fn{constructor(u,p,y,x,E){this.context=u,this.width=p,this.height=y;const M=u.gl,N=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new Gf(u,N),x)this.depthAttachment=E?new _v(u,N):new $1(u,N);else if(E)throw new Error("Stencil cannot be setted without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,p=this.colorAttachment.get();if(p&&u.deleteTexture(p),this.depthAttachment){const y=this.depthAttachment.get();y&&u.deleteRenderbuffer(y)}u.deleteFramebuffer(this.framebuffer)}}class Ar{constructor(u,p,y){this.blendFunction=u,this.blendColor=p,this.mask=y}}Ar.Replace=[1,0],Ar.disabled=new Ar(Ar.Replace,a.aT.transparent,[!1,!1,!1,!1]),Ar.unblended=new Ar(Ar.Replace,a.aT.transparent,[!0,!0,!0,!0]),Ar.alphaBlended=new Ar([1,771],a.aT.transparent,[!0,!0,!0,!0]);class RC{constructor(u){var p,y;if(this.gl=u,this.clearColor=new am(this),this.clearDepth=new va(this),this.clearStencil=new _a(this),this.colorMask=new cv(this),this.depthMask=new sm(this),this.stencilMask=new lm(this),this.stencilFunc=new fv(this),this.stencilOp=new hv(this),this.stencilTest=new um(this),this.depthRange=new dv(this),this.depthTest=new pv(this),this.depthFunc=new cm(this),this.blend=new T1(this),this.blendFunc=new P1(this),this.blendColor=new Uf(this),this.blendEquation=new MC(this),this.cullFace=new $C(this),this.cullFaceSide=new kC(this),this.frontFace=new NC(this),this.program=new LC(this),this.activeTexture=new DC(this),this.viewport=new mv(this),this.bindFramebuffer=new fm(this),this.bindRenderbuffer=new gv(this),this.bindTexture=new yv(this),this.bindVertexBuffer=new Vf(this),this.bindElementBuffer=new A1(this),this.bindVertexArray=new O1(this),this.pixelStoreUnpack=new vv(this),this.pixelStoreUnpackPremultiplyAlpha=new Ac(this),this.pixelStoreUnpackFlipY=new M1(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),Vu(u)){this.HALF_FLOAT=u.HALF_FLOAT;const x=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=u.RGBA16F)!==null&&p!==void 0?p:x==null?void 0:x.RGBA16F_EXT,this.RGB16F=(y=u.RGB16F)!==null&&y!==void 0?y:x==null?void 0:x.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const x=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=x==null?void 0:x.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,p){return new im(this,u,p)}createVertexBuffer(u,p,y){return new om(this,u,p,y)}createRenderbuffer(u,p,y){const x=this.gl,E=x.createRenderbuffer();return this.bindRenderbuffer.set(E),x.renderbufferStorage(x.RENDERBUFFER,u,p,y),this.bindRenderbuffer.set(null),E}createFramebuffer(u,p,y,x){return new Fn(this,u,p,y,x)}clear({color:u,depth:p,stencil:y}){const x=this.gl;let E=0;u&&(E|=x.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(E|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),y!==void 0&&(E|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),x.clear(E)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){a.aG(u.blendFunction,Ar.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return Vu(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var p;return Vu(this.gl)?this.gl.deleteVertexArray(u):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}class Sn{constructor(u,p,y){this.func=u,this.mask=p,this.range=y}}Sn.ReadOnly=!1,Sn.ReadWrite=!0,Sn.disabled=new Sn(519,Sn.ReadOnly,[0,1]);const Oc=7680;class Or{constructor(u,p,y,x,E,M){this.test=u,this.ref=p,this.mask=y,this.fail=x,this.depthFail=E,this.pass=M}}Or.disabled=new Or({func:519,mask:0},0,0,Oc,Oc,Oc);class wr{constructor(u,p,y){this.enable=u,this.mode=p,this.frontFace=y}}let _d;function k1(w,u,p,y,x,E,M){const N=w.context,z=N.gl,V=w.useProgram("collisionBox"),W=[];let H=0,ee=0;for(let _e=0;_e<y.length;_e++){const Oe=y[_e],Ue=u.getTile(Oe),Ve=Ue.getBucket(p);if(!Ve)continue;let Ke=Oe.posMatrix;x[0]===0&&x[1]===0||(Ke=w.translatePosMatrix(Oe.posMatrix,Ue,x,E));const rt=M?Ve.textCollisionBox:Ve.iconCollisionBox,nt=Ve.collisionCircleArray;if(nt.length>0){const st=a.Z(),$t=Ke;a.aU(st,Ve.placementInvProjMatrix,w.transform.glCoordMatrix),a.aU(st,st,Ve.placementViewportMatrix),W.push({circleArray:nt,circleOffset:ee,transform:$t,invTransform:st,coord:Oe}),H+=nt.length/4,ee=H}rt&&V.draw(N,z.LINES,Sn.disabled,Or.disabled,w.colorModeForRenderPass(),wr.disabled,ov(Ke,w.transform,Ue),w.style.map.terrain&&w.style.map.terrain.getTerrainData(Oe),p.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,null,w.transform.zoom,null,null,rt.collisionVertexBuffer)}if(!M||!W.length)return;const ce=w.useProgram("collisionCircle"),ue=new a.aV;ue.resize(4*H),ue._trim();let ge=0;for(const _e of W)for(let Oe=0;Oe<_e.circleArray.length/4;Oe++){const Ue=4*Oe,Ve=_e.circleArray[Ue+0],Ke=_e.circleArray[Ue+1],rt=_e.circleArray[Ue+2],nt=_e.circleArray[Ue+3];ue.emplace(ge++,Ve,Ke,rt,nt,0),ue.emplace(ge++,Ve,Ke,rt,nt,1),ue.emplace(ge++,Ve,Ke,rt,nt,2),ue.emplace(ge++,Ve,Ke,rt,nt,3)}(!_d||_d.length<2*H)&&(_d=function(_e){const Oe=2*_e,Ue=new a.aX;Ue.resize(Oe),Ue._trim();for(let Ve=0;Ve<Oe;Ve++){const Ke=6*Ve;Ue.uint16[Ke+0]=4*Ve+0,Ue.uint16[Ke+1]=4*Ve+1,Ue.uint16[Ke+2]=4*Ve+2,Ue.uint16[Ke+3]=4*Ve+2,Ue.uint16[Ke+4]=4*Ve+3,Ue.uint16[Ke+5]=4*Ve+0}return Ue}(H));const se=N.createIndexBuffer(_d,!0),Ie=N.createVertexBuffer(ue,a.aW.members,!0);for(const _e of W){const Oe={u_matrix:_e.transform,u_inv_matrix:_e.invTransform,u_camera_to_center_distance:(ze=w.transform).cameraToCenterDistance,u_viewport_size:[ze.width,ze.height]};ce.draw(N,z.TRIANGLES,Sn.disabled,Or.disabled,w.colorModeForRenderPass(),wr.disabled,Oe,w.style.map.terrain&&w.style.map.terrain.getTerrainData(_e.coord),p.id,Ie,se,a.S.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,w.transform.zoom,null,null,null)}var ze;Ie.destroy(),se.destroy()}wr.disabled=new wr(!1,1029,2305),wr.backCCW=new wr(!0,1029,2305);const xv=a.ao(new Float32Array(16));function hm(w,u,p,y,x,E){const{horizontalAlign:M,verticalAlign:N}=a.au(w);return new a.P((-(M-.5)*u/x+y[0])*E,(-(N-.5)*p/x+y[1])*E)}function dm(w,u,p,y,x,E,M,N,z,V,W){const H=w.text.placedSymbolArray,ee=w.text.dynamicLayoutVertexArray,ce=w.icon.dynamicLayoutVertexArray,ue={};ee.clear();for(let ge=0;ge<H.length;ge++){const se=H.get(ge),Ie=se.hidden||!se.crossTileID||w.allowVerticalPlacement&&!se.placedOrientation?null:y[se.crossTileID];if(Ie){const ze=new a.P(se.anchorX,se.anchorY),_e=sr(ze,p?M:E,W),Oe=Hl(x.cameraToCenterDistance,_e.signedDistanceFromCamera);let Ue=a.aj(w.textSizeData,z,se)*Oe/a.ap;p&&(Ue*=w.tilePixelRatio/N);const{width:Ve,height:Ke,anchor:rt,textOffset:nt,textBoxScale:st}=Ie,$t=hm(rt,Ve,Ke,nt,st,Ue),mn=p?sr(ze.add($t),E,W).point:_e.point.add(u?$t.rotate(-x.angle):$t),gt=w.allowVerticalPlacement&&se.placedOrientation===a.ai.vertical?Math.PI/2:0;for(let Ht=0;Ht<se.numGlyphs;Ht++)a.ak(ee,mn,gt);V&&se.associatedIconIndex>=0&&(ue[se.associatedIconIndex]={shiftedAnchor:mn,angle:gt})}else ie(se.numGlyphs,ee)}if(V){ce.clear();const ge=w.icon.placedSymbolArray;for(let se=0;se<ge.length;se++){const Ie=ge.get(se);if(Ie.hidden)ie(Ie.numGlyphs,ce);else{const ze=ue[se];if(ze)for(let _e=0;_e<Ie.numGlyphs;_e++)a.ak(ce,ze.shiftedAnchor,ze.angle);else ie(Ie.numGlyphs,ce)}}w.icon.dynamicLayoutVertexBuffer.updateData(ce)}w.text.dynamicLayoutVertexBuffer.updateData(ee)}function bv(w,u,p){return p.iconsInText&&u?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function pm(w,u,p,y,x,E,M,N,z,V,W,H){const ee=w.context,ce=ee.gl,ue=w.transform,ge=N==="map",se=z==="map",Ie=N!=="viewport"&&p.layout.get("symbol-placement")!=="point",ze=ge&&!se&&!Ie,_e=!p.layout.get("symbol-sort-key").isConstant();let Oe=!1;const Ue=w.depthModeForSublayer(0,Sn.ReadOnly),Ve=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ke=[];for(const rt of y){const nt=u.getTile(rt),st=nt.getBucket(p);if(!st)continue;const $t=x?st.text:st.icon;if(!$t||!$t.segments.get().length||!$t.hasVisibleVertices)continue;const mn=$t.programConfigurations.get(p.id),gt=x||st.sdfIcons,Ht=x?st.textSizeData:st.iconSizeData,Nt=se||ue.pitch!==0,Kn=w.useProgram(bv(gt,x,st),mn),pn=a.ah(Ht,ue.zoom),un=w.style.map.terrain&&w.style.map.terrain.getTerrainData(rt);let gn,Jr,ur,Ki,wi=[0,0],li=null;if(x)Jr=nt.glyphAtlasTexture,ur=ce.LINEAR,gn=nt.glyphAtlasTexture.size,st.iconsInText&&(wi=nt.imageAtlasTexture.size,li=nt.imageAtlasTexture,Ki=Nt||w.options.rotating||w.options.zooming||Ht.kind==="composite"||Ht.kind==="camera"?ce.LINEAR:ce.NEAREST);else{const Qr=p.layout.get("icon-size").constantOr(0)!==1||st.iconsNeedLinear;Jr=nt.imageAtlasTexture,ur=gt||w.options.rotating||w.options.zooming||Qr||Nt?ce.LINEAR:ce.NEAREST,gn=nt.imageAtlasTexture.size}const wa=we(nt,1,w.transform.zoom),mr=ut(rt.posMatrix,se,ge,w.transform,wa),el=Yo(rt.posMatrix,se,ge,w.transform,wa),tl=Ve&&st.hasTextData(),Hu=p.layout.get("icon-text-fit")!=="none"&&tl&&st.hasIconData();if(Ie){const Qr=w.style.map.terrain?(ea,ei)=>w.style.map.terrain.getElevation(rt,ea,ei):null,Si=p.layout.get("text-rotation-alignment")==="map";ft(st,rt.posMatrix,w,x,mr,el,se,V,Si,Qr)}const Lc=w.translatePosMatrix(rt.posMatrix,nt,E,M),Yf=Ie||x&&Ve||Hu?xv:mr,co=w.translatePosMatrix(el,nt,E,M,!0),Yi=gt&&p.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Lo;Lo=gt?st.iconsInText?Pc(Ht.kind,pn,ze,se,w,Lc,Yf,co,gn,wi):uv(Ht.kind,pn,ze,se,w,Lc,Yf,co,x,gn,!0):lv(Ht.kind,pn,ze,se,w,Lc,Yf,co,x,gn);const Dc={program:Kn,buffers:$t,uniformValues:Lo,atlasTexture:Jr,atlasTextureIcon:li,atlasInterpolation:ur,atlasInterpolationIcon:Ki,isSDF:gt,hasHalo:Yi};if(_e&&st.canOverlap){Oe=!0;const Qr=$t.segments.get();for(const Si of Qr)Ke.push({segments:new a.S([Si]),sortKey:Si.sortKey,state:Dc,terrainData:un})}else Ke.push({segments:$t.segments,sortKey:0,state:Dc,terrainData:un})}Oe&&Ke.sort((rt,nt)=>rt.sortKey-nt.sortKey);for(const rt of Ke){const nt=rt.state;if(ee.activeTexture.set(ce.TEXTURE0),nt.atlasTexture.bind(nt.atlasInterpolation,ce.CLAMP_TO_EDGE),nt.atlasTextureIcon&&(ee.activeTexture.set(ce.TEXTURE1),nt.atlasTextureIcon&&nt.atlasTextureIcon.bind(nt.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),nt.isSDF){const st=nt.uniformValues;nt.hasHalo&&(st.u_is_halo=1,wv(nt.buffers,rt.segments,p,w,nt.program,Ue,W,H,st,rt.terrainData)),st.u_is_halo=0}wv(nt.buffers,rt.segments,p,w,nt.program,Ue,W,H,nt.uniformValues,rt.terrainData)}}function wv(w,u,p,y,x,E,M,N,z,V){const W=y.context;x.draw(W,W.gl.TRIANGLES,E,M,N,wr.disabled,z,V,p.id,w.layoutVertexBuffer,w.indexBuffer,u,p.paint,y.transform.zoom,w.programConfigurations.get(p.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function xd(w,u,p,y,x){if(!p||!y||!y.imageAtlas)return;const E=y.imageAtlas.patternPositions;let M=E[p.to.toString()],N=E[p.from.toString()];if(!M&&N&&(M=N),!N&&M&&(N=M),!M||!N){const z=x.getPaintProperty(u);M=E[z],N=E[z]}M&&N&&w.setConstantPatternPositions(M,N)}function bd(w,u,p,y,x,E,M){const N=w.context.gl,z="fill-pattern",V=p.paint.get(z),W=V&&V.constantOr(1),H=p.getCrossfadeParameters();let ee,ce,ue,ge,se;M?(ce=W&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=N.LINES):(ce=W?"fillPattern":"fill",ee=N.TRIANGLES);const Ie=V.constantOr(null);for(const ze of y){const _e=u.getTile(ze);if(W&&!_e.patternsLoaded())continue;const Oe=_e.getBucket(p);if(!Oe)continue;const Ue=Oe.programConfigurations.get(p.id),Ve=w.useProgram(ce,Ue),Ke=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ze);W&&(w.context.activeTexture.set(N.TEXTURE0),_e.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Ue.updatePaintBuffers(H)),xd(Ue,z,Ie,_e,p);const rt=Ke?ze:null,nt=w.translatePosMatrix(rt?rt.posMatrix:ze.posMatrix,_e,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(M){ge=Oe.indexBuffer2,se=Oe.segments2;const st=[N.drawingBufferWidth,N.drawingBufferHeight];ue=ce==="fillOutlinePattern"&&W?em(nt,w,H,_e,st):Qp(nt,st)}else ge=Oe.indexBuffer,se=Oe.segments,ue=W?iv(nt,w,H,_e):x1(nt);Ve.draw(w.context,ee,x,w.stencilModeForClipping(ze),E,wr.disabled,ue,Ke,p.id,Oe.layoutVertexBuffer,ge,se,p.paint,w.transform.zoom,Ue)}}function wd(w,u,p,y,x,E,M){const N=w.context,z=N.gl,V="fill-extrusion-pattern",W=p.paint.get(V),H=W.constantOr(1),ee=p.getCrossfadeParameters(),ce=p.paint.get("fill-extrusion-opacity"),ue=W.constantOr(null);for(const ge of y){const se=u.getTile(ge),Ie=se.getBucket(p);if(!Ie)continue;const ze=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ge),_e=Ie.programConfigurations.get(p.id),Oe=w.useProgram(H?"fillExtrusionPattern":"fillExtrusion",_e);H&&(w.context.activeTexture.set(z.TEXTURE0),se.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),_e.updatePaintBuffers(ee)),xd(_e,V,ue,se,p);const Ue=w.translatePosMatrix(ge.posMatrix,se,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Ve=p.paint.get("fill-extrusion-vertical-gradient"),Ke=H?ju(Ue,w,Ve,ce,ge,ee,se):rv(Ue,w,Ve,ce);Oe.draw(N,N.gl.TRIANGLES,x,E,M,wr.backCCW,Ke,ze,p.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,p.paint,w.transform.zoom,_e,w.style.map.terrain&&Ie.centroidVertexBuffer)}}function zC(w,u,p,y,x,E,M){const N=w.context,z=N.gl,V=p.fbo;if(!V)return;const W=w.useProgram("hillshade"),H=w.style.map.terrain&&w.style.map.terrain.getTerrainData(u);N.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,V.colorAttachment.get()),W.draw(N,z.TRIANGLES,x,E,M,wr.disabled,((ee,ce,ue,ge)=>{const se=ue.paint.get("hillshade-shadow-color"),Ie=ue.paint.get("hillshade-highlight-color"),ze=ue.paint.get("hillshade-accent-color");let _e=ue.paint.get("hillshade-illumination-direction")*(Math.PI/180);ue.paint.get("hillshade-illumination-anchor")==="viewport"&&(_e-=ee.transform.angle);const Oe=!ee.options.moving;return{u_matrix:ge?ge.posMatrix:ee.transform.calculatePosMatrix(ce.tileID.toUnwrapped(),Oe),u_image:0,u_latrange:av(0,ce.tileID),u_light:[ue.paint.get("hillshade-exaggeration"),_e],u_shadow:se,u_highlight:Ie,u_accent:ze}})(w,p,y,H?u:null),H,y.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}function Sv(w,u,p,y,x,E){const M=w.context,N=M.gl,z=u.dem;if(z&&z.data){const V=z.dim,W=z.stride,H=z.getPixels();if(M.activeTexture.set(N.TEXTURE1),M.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||w.getTileTexture(W),u.demTexture){const ce=u.demTexture;ce.update(H,{premultiply:!1}),ce.bind(N.NEAREST,N.CLAMP_TO_EDGE)}else u.demTexture=new oe(M,H,N.RGBA,{premultiply:!1}),u.demTexture.bind(N.NEAREST,N.CLAMP_TO_EDGE);M.activeTexture.set(N.TEXTURE0);let ee=u.fbo;if(!ee){const ce=new oe(M,{width:V,height:V,data:null},N.RGBA);ce.bind(N.LINEAR,N.CLAMP_TO_EDGE),ee=u.fbo=M.createFramebuffer(V,V,!0,!1),ee.colorAttachment.set(ce.texture)}M.bindFramebuffer.set(ee.framebuffer),M.viewport.set([0,0,V,V]),w.useProgram("hillshadePrepare").draw(M,N.TRIANGLES,y,x,E,wr.disabled,((ce,ue)=>{const ge=ue.stride,se=a.Z();return a.aS(se,0,a.N,-a.N,0,0,1),a.$(se,se,[0,-a.N,0]),{u_matrix:se,u_image:1,u_dimension:[ge,ge],u_zoom:ce.overscaledZ,u_unpack:ue.getUnpackVector()}})(u.tileID,z),null,p.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function FC(w,u,p,y,x,E){const M=y.paint.get("raster-fade-duration");if(!E&&M>0){const N=a.h.now(),z=(N-w.timeAdded)/M,V=u?(N-u.timeAdded)/M:-1,W=p.getSource(),H=x.coveringZoomLevel({tileSize:W.tileSize,roundZoom:W.roundZoom}),ee=!u||Math.abs(u.tileID.overscaledZ-H)>Math.abs(w.tileID.overscaledZ-H),ce=ee&&w.refreshedUponExpiration?1:a.ad(ee?z:1-V,0,1);return w.refreshedUponExpiration&&z>=1&&(w.refreshedUponExpiration=!1),u?{opacity:1,mix:1-ce}:{opacity:ce,mix:0}}return{opacity:1,mix:0}}const N1=new a.aT(1,0,0,1),mm=new a.aT(0,1,0,1),Ev=new a.aT(0,0,1,1),L1=new a.aT(1,0,1,1),D1=new a.aT(0,1,1,1);function Sd(w,u,p,y){ym(w,0,u+p/2,w.transform.width,p,y)}function gm(w,u,p,y){ym(w,u-p/2,0,p,w.transform.height,y)}function ym(w,u,p,y,x,E){const M=w.context,N=M.gl;N.enable(N.SCISSOR_TEST),N.scissor(u*w.pixelRatio,p*w.pixelRatio,y*w.pixelRatio,x*w.pixelRatio),M.clear({color:E}),N.disable(N.SCISSOR_TEST)}function R1(w,u,p){const y=w.context,x=y.gl,E=p.posMatrix,M=w.useProgram("debug"),N=Sn.disabled,z=Or.disabled,V=w.colorModeForRenderPass(),W="$debug",H=w.style.map.terrain&&w.style.map.terrain.getTerrainData(p);y.activeTexture.set(x.TEXTURE0);const ee=u.getTileByID(p.key).latestRawTileData,ce=Math.floor((ee&&ee.byteLength||0)/1024),ue=u.getTile(p).tileSize,ge=512/Math.min(ue,512)*(p.overscaledZ/w.transform.zoom)*.5;let se=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(se+=` => ${p.overscaledZ}`),function(Ie,ze){Ie.initDebugOverlayCanvas();const _e=Ie.debugOverlayCanvas,Oe=Ie.context.gl,Ue=Ie.debugOverlayCanvas.getContext("2d");Ue.clearRect(0,0,_e.width,_e.height),Ue.shadowColor="white",Ue.shadowBlur=2,Ue.lineWidth=1.5,Ue.strokeStyle="white",Ue.textBaseline="top",Ue.font="bold 36px Open Sans, sans-serif",Ue.fillText(ze,5,5),Ue.strokeText(ze,5,5),Ie.debugOverlayTexture.update(_e),Ie.debugOverlayTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE)}(w,`${se} ${ce}kB`),M.draw(y,x.TRIANGLES,N,z,Ar.alphaBlended,wr.disabled,yd(E,a.aT.transparent,ge),null,W,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),M.draw(y,x.LINE_STRIP,N,z,V,wr.disabled,yd(E,a.aT.red),H,W,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function zr(w,u,p){const y=w.context,x=y.gl,E=w.colorModeForRenderPass(),M=new Sn(x.LEQUAL,Sn.ReadWrite,w.depthRangeFor3D),N=w.useProgram("terrain"),z=u.getTerrainMesh();y.bindFramebuffer.set(null),y.viewport.set([0,0,w.width,w.height]);for(const V of p){const W=w.renderToTexture.getTexture(V),H=u.getTerrainData(V.tileID);y.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,W.texture);const ee={u_matrix:w.transform.calculatePosMatrix(V.tileID.toUnwrapped()),u_texture:0,u_ele_delta:u.getMeshFrameDelta(w.transform.zoom)};N.draw(y,x.TRIANGLES,M,Or.disabled,E,wr.backCCW,ee,H,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}class Mc{constructor(u,p){this.context=new RC(u),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.Z(),renderTime:0},this.setup(),this.numSublayers=Dn.maxUnderzooming+Dn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Kp}resize(u,p,y){if(this.width=Math.floor(u*y),this.height=Math.floor(p*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const x of this.style._order)this.style._layers[x].resize()}setup(){const u=this.context,p=new a.a_;p.emplaceBack(0,0),p.emplaceBack(a.N,0),p.emplaceBack(0,a.N),p.emplaceBack(a.N,a.N),this.tileExtentBuffer=u.createVertexBuffer(p,Yp.members),this.tileExtentSegments=a.S.simpleSegment(0,0,4,2);const y=new a.a_;y.emplaceBack(0,0),y.emplaceBack(a.N,0),y.emplaceBack(0,a.N),y.emplaceBack(a.N,a.N),this.debugBuffer=u.createVertexBuffer(y,Yp.members),this.debugSegments=a.S.simpleSegment(0,0,4,5);const x=new a.V;x.emplaceBack(0,0,0,0),x.emplaceBack(a.N,0,a.N,0),x.emplaceBack(0,a.N,0,a.N),x.emplaceBack(a.N,a.N,a.N,a.N),this.rasterBoundsBuffer=u.createVertexBuffer(x,Qe.members),this.rasterBoundsSegments=a.S.simpleSegment(0,0,4,2);const E=new a.a_;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(E,Yp.members),this.viewportSegments=a.S.simpleSegment(0,0,4,2);const M=new a.a$;M.emplaceBack(0),M.emplaceBack(1),M.emplaceBack(3),M.emplaceBack(2),M.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(M);const N=new a.b0;N.emplaceBack(0,1,2),N.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(N);const z=this.context.gl;this.stencilClearMode=new Or({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const u=this.context,p=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=a.Z();a.aS(y,0,this.width,this.height,0,0,1),a.a0(y,y,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,p.TRIANGLES,Sn.disabled,this.stencilClearMode,Ar.disabled,wr.disabled,b1(y),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,p){if(this.currentStencilSource===u.source||!u.isTileClipped()||!p||!p.length)return;this.currentStencilSource=u.source;const y=this.context,x=y.gl;this.nextStencilID+p.length>256&&this.clearStencil(),y.setColorMode(Ar.disabled),y.setDepthMode(Sn.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const M of p){const N=this._tileClippingMaskIDs[M.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M);E.draw(y,x.TRIANGLES,Sn.disabled,new Or({func:x.ALWAYS,mask:0},N,255,x.KEEP,x.KEEP,x.REPLACE),Ar.disabled,wr.disabled,b1(M.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,p=this.context.gl;return new Or({func:p.NOTEQUAL,mask:255},u,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(u){const p=this.context.gl;return new Or({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(u){const p=this.context.gl,y=u.sort((M,N)=>N.overscaledZ-M.overscaledZ),x=y[y.length-1].overscaledZ,E=y[0].overscaledZ-x+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const M={};for(let N=0;N<E;N++)M[N+x]=new Or({func:p.GEQUAL,mask:255},N+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=E,[M,y]}return[{[x]:Or.disabled},y]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new Ar([u.CONSTANT_COLOR,u.ONE],new a.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ar.unblended:Ar.alphaBlended}depthModeForSublayer(u,p,y){if(!this.opaquePassEnabledForLayer())return Sn.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Sn(y||this.context.gl.LEQUAL,p,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,p){this.style=u,this.options=p,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(a.h.now()),this.imageManager.beginFrame();const y=this.style._order,x=this.style.sourceCaches,E={},M={},N={};for(const z in x){const V=x[z];V.used&&V.prepare(this.context),E[z]=V.getVisibleCoordinates(),M[z]=E[z].slice().reverse(),N[z]=V.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<y.length;z++)if(this.style._layers[y[z]].is3D()){this.opaquePassCutoff=z;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const z=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||z.length)&&(a.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(V,W){const H=V.context,ee=H.gl,ce=Ar.unblended,ue=new Sn(ee.LEQUAL,Sn.ReadWrite,[0,1]),ge=W.getTerrainMesh(),se=W.sourceCache.getRenderableTiles(),Ie=V.useProgram("terrainDepth");H.bindFramebuffer.set(W.getFramebuffer("depth").framebuffer),H.viewport.set([0,0,V.width/devicePixelRatio,V.height/devicePixelRatio]),H.clear({color:a.aT.transparent,depth:1});for(const ze of se){const _e=W.getTerrainData(ze.tileID),Oe={u_matrix:V.transform.calculatePosMatrix(ze.tileID.toUnwrapped()),u_ele_delta:W.getMeshFrameDelta(V.transform.zoom)};Ie.draw(H,ee.TRIANGLES,ue,Or.disabled,ce,wr.backCCW,Oe,_e,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}H.bindFramebuffer.set(null),H.viewport.set([0,0,V.width,V.height])}(this,this.style.map.terrain),function(V,W){const H=V.context,ee=H.gl,ce=Ar.unblended,ue=new Sn(ee.LEQUAL,Sn.ReadWrite,[0,1]),ge=W.getTerrainMesh(),se=W.getCoordsTexture(),Ie=W.sourceCache.getRenderableTiles(),ze=V.useProgram("terrainCoords");H.bindFramebuffer.set(W.getFramebuffer("coords").framebuffer),H.viewport.set([0,0,V.width/devicePixelRatio,V.height/devicePixelRatio]),H.clear({color:a.aT.transparent,depth:1}),W.coordsIndex=[];for(const _e of Ie){const Oe=W.getTerrainData(_e.tileID);H.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,se.texture);const Ue={u_matrix:V.transform.calculatePosMatrix(_e.tileID.toUnwrapped()),u_terrain_coords_id:(255-W.coordsIndex.length)/255,u_texture:0,u_ele_delta:W.getMeshFrameDelta(V.transform.zoom)};ze.draw(H,ee.TRIANGLES,ue,Or.disabled,ce,wr.backCCW,Ue,Oe,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),W.coordsIndex.push(_e.tileID.key)}H.bindFramebuffer.set(null),H.viewport.set([0,0,V.width,V.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const z of y){const V=this.style._layers[z];if(!V.hasOffscreenPass()||V.isHidden(this.transform.zoom))continue;const W=M[V.source];(V.type==="custom"||W.length)&&this.renderLayer(this,x[V.source],V,W)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.aT.black:a.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[y[this.currentLayer]],V=x[z.source],W=E[z.source];this._renderTileClippingMasks(z,W),this.renderLayer(this,V,z,W)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const z=this.style._layers[y[this.currentLayer]],V=x[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const W=(z.type==="symbol"?N:M)[z.source];this._renderTileClippingMasks(z,E[z.source]),this.renderLayer(this,V,z,W)}if(this.options.showTileBoundaries){const z=function(V,W){let H=null;const ee=Object.values(V._layers).flatMap(se=>se.source&&!se.isHidden(W)?[V.sourceCaches[se.source]]:[]),ce=ee.filter(se=>se.getSource().type==="vector"),ue=ee.filter(se=>se.getSource().type!=="vector"),ge=se=>{(!H||H.getSource().maxzoom<se.getSource().maxzoom)&&(H=se)};return ce.forEach(se=>ge(se)),H||ue.forEach(se=>ge(se)),H}(this.style,this.transform.zoom);z&&function(V,W,H){for(let ee=0;ee<H.length;ee++)R1(V,W,H[ee])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const V=z.transform.padding;Sd(z,z.transform.height-(V.top||0),3,N1),Sd(z,V.bottom||0,3,mm),gm(z,V.left||0,3,Ev),gm(z,z.transform.width-(V.right||0),3,L1);const W=z.transform.centerPoint;(function(H,ee,ce,ue){ym(H,ee-1,ce-10,2,20,ue),ym(H,ee-10,ce-1,20,2,ue)})(z,W.x,z.transform.height-W.y,D1)}(this),this.context.setDefault()}renderLayer(u,p,y,x){if(!y.isHidden(this.transform.zoom)&&(y.type==="background"||y.type==="custom"||(x||[]).length))switch(this.id=y.id,y.type){case"symbol":(function(E,M,N,z,V){if(E.renderPass!=="translucent")return;const W=Or.disabled,H=E.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ee,ce,ue,ge,se,Ie,ze){const _e=ce.transform,Oe=se==="map",Ue=Ie==="map";for(const Ve of ee){const Ke=ge.getTile(Ve),rt=Ke.getBucket(ue);if(!rt||!rt.text||!rt.text.segments.get().length)continue;const nt=a.ah(rt.textSizeData,_e.zoom),st=we(Ke,1,ce.transform.zoom),$t=ut(Ve.posMatrix,Ue,Oe,ce.transform,st),mn=ue.layout.get("icon-text-fit")!=="none"&&rt.hasIconData();if(nt){const gt=Math.pow(2,_e.zoom-Ke.tileID.overscaledZ);dm(rt,Oe,Ue,ze,_e,$t,Ve.posMatrix,gt,nt,mn,ce.style.map.terrain?(Ht,Nt)=>ce.style.map.terrain.getElevation(Ve,Ht,Nt):null)}}}(z,E,N,M,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),V),N.paint.get("icon-opacity").constantOr(1)!==0&&pm(E,M,N,z,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),W,H),N.paint.get("text-opacity").constantOr(1)!==0&&pm(E,M,N,z,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),W,H),M.map.showCollisionBoxes&&(k1(E,M,N,z,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),!0),k1(E,M,N,z,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),!1))})(u,p,y,x,this.style.placement.variableOffsets);break;case"circle":(function(E,M,N,z){if(E.renderPass!=="translucent")return;const V=N.paint.get("circle-opacity"),W=N.paint.get("circle-stroke-width"),H=N.paint.get("circle-stroke-opacity"),ee=!N.layout.get("circle-sort-key").isConstant();if(V.constantOr(1)===0&&(W.constantOr(1)===0||H.constantOr(1)===0))return;const ce=E.context,ue=ce.gl,ge=E.depthModeForSublayer(0,Sn.ReadOnly),se=Or.disabled,Ie=E.colorModeForRenderPass(),ze=[];for(let _e=0;_e<z.length;_e++){const Oe=z[_e],Ue=M.getTile(Oe),Ve=Ue.getBucket(N);if(!Ve)continue;const Ke=Ve.programConfigurations.get(N.id),rt=E.useProgram("circle",Ke),nt=Ve.layoutVertexBuffer,st=Ve.indexBuffer,$t=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Oe),mn={programConfiguration:Ke,program:rt,layoutVertexBuffer:nt,indexBuffer:st,uniformValues:Uu(E,Oe,Ue,N),terrainData:$t};if(ee){const gt=Ve.segments.get();for(const Ht of gt)ze.push({segments:new a.S([Ht]),sortKey:Ht.sortKey,state:mn})}else ze.push({segments:Ve.segments,sortKey:0,state:mn})}ee&&ze.sort((_e,Oe)=>_e.sortKey-Oe.sortKey);for(const _e of ze){const{programConfiguration:Oe,program:Ue,layoutVertexBuffer:Ve,indexBuffer:Ke,uniformValues:rt,terrainData:nt}=_e.state;Ue.draw(ce,ue.TRIANGLES,ge,se,Ie,wr.disabled,rt,nt,N.id,Ve,Ke,_e.segments,N.paint,E.transform.zoom,Oe)}})(u,p,y,x);break;case"heatmap":(function(E,M,N,z){if(N.paint.get("heatmap-opacity")!==0)if(E.renderPass==="offscreen"){const V=E.context,W=V.gl,H=Or.disabled,ee=new Ar([W.ONE,W.ONE],a.aT.transparent,[!0,!0,!0,!0]);(function(ce,ue,ge){const se=ce.gl;ce.activeTexture.set(se.TEXTURE1),ce.viewport.set([0,0,ue.width/4,ue.height/4]);let Ie=ge.heatmapFbo;if(Ie)se.bindTexture(se.TEXTURE_2D,Ie.colorAttachment.get()),ce.bindFramebuffer.set(Ie.framebuffer);else{const ze=se.createTexture();se.bindTexture(se.TEXTURE_2D,ze),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_S,se.CLAMP_TO_EDGE),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_T,se.CLAMP_TO_EDGE),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MIN_FILTER,se.LINEAR),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MAG_FILTER,se.LINEAR),Ie=ge.heatmapFbo=ce.createFramebuffer(ue.width/4,ue.height/4,!1,!1),function(_e,Oe,Ue,Ve){var Ke,rt;const nt=_e.gl,st=(Ke=_e.HALF_FLOAT)!==null&&Ke!==void 0?Ke:nt.UNSIGNED_BYTE,$t=(rt=_e.RGBA16F)!==null&&rt!==void 0?rt:nt.RGBA;nt.texImage2D(nt.TEXTURE_2D,0,$t,Oe.width/4,Oe.height/4,0,nt.RGBA,st,null),Ve.colorAttachment.set(Ue)}(ce,ue,ze,Ie)}})(V,E,N),V.clear({color:a.aT.transparent});for(let ce=0;ce<z.length;ce++){const ue=z[ce];if(M.hasRenderableParent(ue))continue;const ge=M.getTile(ue),se=ge.getBucket(N);if(!se)continue;const Ie=se.programConfigurations.get(N.id),ze=E.useProgram("heatmap",Ie),{zoom:_e}=E.transform;ze.draw(V,W.TRIANGLES,Sn.disabled,H,ee,wr.disabled,AC(ue.posMatrix,ge,_e,N.paint.get("heatmap-intensity")),null,N.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,N.paint,E.transform.zoom,Ie)}V.viewport.set([0,0,E.width,E.height])}else E.renderPass==="translucent"&&(E.context.setColorMode(E.colorModeForRenderPass()),function(V,W){const H=V.context,ee=H.gl,ce=W.heatmapFbo;if(!ce)return;H.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,ce.colorAttachment.get()),H.activeTexture.set(ee.TEXTURE1);let ue=W.colorRampTexture;ue||(ue=W.colorRampTexture=new oe(H,W.colorRamp,ee.RGBA)),ue.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),V.useProgram("heatmapTexture").draw(H,ee.TRIANGLES,Sn.disabled,Or.disabled,V.colorModeForRenderPass(),wr.disabled,((ge,se,Ie,ze)=>{const _e=a.Z();a.aS(_e,0,ge.width,ge.height,0,0,1);const Oe=ge.context.gl;return{u_matrix:_e,u_world:[Oe.drawingBufferWidth,Oe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:se.paint.get("heatmap-opacity")}})(V,W),null,W.id,V.viewportBuffer,V.quadTriangleIndexBuffer,V.viewportSegments,W.paint,V.transform.zoom)}(E,N))})(u,p,y,x);break;case"line":(function(E,M,N,z){if(E.renderPass!=="translucent")return;const V=N.paint.get("line-opacity"),W=N.paint.get("line-width");if(V.constantOr(1)===0||W.constantOr(1)===0)return;const H=E.depthModeForSublayer(0,Sn.ReadOnly),ee=E.colorModeForRenderPass(),ce=N.paint.get("line-dasharray"),ue=N.paint.get("line-pattern"),ge=ue.constantOr(1),se=N.paint.get("line-gradient"),Ie=N.getCrossfadeParameters(),ze=ge?"linePattern":ce?"lineSDF":se?"lineGradient":"line",_e=E.context,Oe=_e.gl;let Ue=!0;for(const Ve of z){const Ke=M.getTile(Ve);if(ge&&!Ke.patternsLoaded())continue;const rt=Ke.getBucket(N);if(!rt)continue;const nt=rt.programConfigurations.get(N.id),st=E.context.program.get(),$t=E.useProgram(ze,nt),mn=Ue||$t.program!==st,gt=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ve),Ht=ue.constantOr(null);if(Ht&&Ke.imageAtlas){const pn=Ke.imageAtlas,un=pn.patternPositions[Ht.to.toString()],gn=pn.patternPositions[Ht.from.toString()];un&&gn&&nt.setConstantPatternPositions(un,gn)}const Nt=gt?Ve:null,Kn=ge?OC(E,Ke,N,Ie,Nt):ce?S1(E,Ke,N,ce,Ie,Nt):se?w1(E,Ke,N,rt.lineClipsArray.length,Nt):sv(E,Ke,N,Nt);if(ge)_e.activeTexture.set(Oe.TEXTURE0),Ke.imageAtlasTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),nt.updatePaintBuffers(Ie);else if(ce&&(mn||E.lineAtlas.dirty))_e.activeTexture.set(Oe.TEXTURE0),E.lineAtlas.bind(_e);else if(se){const pn=rt.gradients[N.id];let un=pn.texture;if(N.gradientVersion!==pn.version){let gn=256;if(N.stepInterpolant){const Jr=M.getSource().maxzoom,ur=Ve.canonical.z===Jr?Math.ceil(1<<E.transform.maxZoom-Ve.canonical.z):1;gn=a.ad(a.aY(rt.maxLineLength/a.N*1024*ur),256,_e.maxTextureSize)}pn.gradient=a.aZ({expression:N.gradientExpression(),evaluationKey:"lineProgress",resolution:gn,image:pn.gradient||void 0,clips:rt.lineClipsArray}),pn.texture?pn.texture.update(pn.gradient):pn.texture=new oe(_e,pn.gradient,Oe.RGBA),pn.version=N.gradientVersion,un=pn.texture}_e.activeTexture.set(Oe.TEXTURE0),un.bind(N.stepInterpolant?Oe.NEAREST:Oe.LINEAR,Oe.CLAMP_TO_EDGE)}$t.draw(_e,Oe.TRIANGLES,H,E.stencilModeForClipping(Ve),ee,wr.disabled,Kn,gt,N.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,N.paint,E.transform.zoom,nt,rt.layoutVertexBuffer2),Ue=!1}})(u,p,y,x);break;case"fill":(function(E,M,N,z){const V=N.paint.get("fill-color"),W=N.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const H=E.colorModeForRenderPass(),ee=N.paint.get("fill-pattern"),ce=E.opaquePassEnabledForLayer()&&!ee.constantOr(1)&&V.constantOr(a.aT.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(E.renderPass===ce){const ue=E.depthModeForSublayer(1,E.renderPass==="opaque"?Sn.ReadWrite:Sn.ReadOnly);bd(E,M,N,z,ue,H,!1)}if(E.renderPass==="translucent"&&N.paint.get("fill-antialias")){const ue=E.depthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,Sn.ReadOnly);bd(E,M,N,z,ue,H,!0)}})(u,p,y,x);break;case"fill-extrusion":(function(E,M,N,z){const V=N.paint.get("fill-extrusion-opacity");if(V!==0&&E.renderPass==="translucent"){const W=new Sn(E.context.gl.LEQUAL,Sn.ReadWrite,E.depthRangeFor3D);if(V!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))wd(E,M,N,z,W,Or.disabled,Ar.disabled),wd(E,M,N,z,W,E.stencilModeFor3D(),E.colorModeForRenderPass());else{const H=E.colorModeForRenderPass();wd(E,M,N,z,W,Or.disabled,H)}}})(u,p,y,x);break;case"hillshade":(function(E,M,N,z){if(E.renderPass!=="offscreen"&&E.renderPass!=="translucent")return;const V=E.context,W=E.depthModeForSublayer(0,Sn.ReadOnly),H=E.colorModeForRenderPass(),[ee,ce]=E.renderPass==="translucent"?E.stencilConfigForOverlap(z):[{},z];for(const ue of ce){const ge=M.getTile(ue);ge.needsHillshadePrepare!==void 0&&ge.needsHillshadePrepare&&E.renderPass==="offscreen"?Sv(E,ge,N,W,Or.disabled,H):E.renderPass==="translucent"&&zC(E,ue,ge,N,W,ee[ue.overscaledZ],H)}V.viewport.set([0,0,E.width,E.height])})(u,p,y,x);break;case"raster":(function(E,M,N,z){if(E.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!z.length)return;const V=E.context,W=V.gl,H=M.getSource(),ee=E.useProgram("raster"),ce=E.colorModeForRenderPass(),[ue,ge]=H instanceof dt?[{},z]:E.stencilConfigForOverlap(z),se=ge[ge.length-1].overscaledZ,Ie=!E.options.moving;for(const ze of ge){const _e=E.depthModeForSublayer(ze.overscaledZ-se,N.paint.get("raster-opacity")===1?Sn.ReadWrite:Sn.ReadOnly,W.LESS),Oe=M.getTile(ze);Oe.registerFadeDuration(N.paint.get("raster-fade-duration"));const Ue=M.findLoadedParent(ze,0),Ve=FC(Oe,Ue,M,N,E.transform,E.style.map.terrain);let Ke,rt;const nt=N.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;V.activeTexture.set(W.TEXTURE0),Oe.texture.bind(nt,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),V.activeTexture.set(W.TEXTURE1),Ue?(Ue.texture.bind(nt,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Ke=Math.pow(2,Ue.tileID.overscaledZ-Oe.tileID.overscaledZ),rt=[Oe.tileID.canonical.x*Ke%1,Oe.tileID.canonical.y*Ke%1]):Oe.texture.bind(nt,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST);const st=E.style.map.terrain&&E.style.map.terrain.getTerrainData(ze),$t=st?ze:null,mn=$t?$t.posMatrix:E.transform.calculatePosMatrix(ze.toUnwrapped(),Ie),gt=C1(mn,rt||[0,0],Ke||1,Ve,N);H instanceof dt?ee.draw(V,W.TRIANGLES,_e,Or.disabled,ce,wr.disabled,gt,st,N.id,H.boundsBuffer,E.quadTriangleIndexBuffer,H.boundsSegments):ee.draw(V,W.TRIANGLES,_e,ue[ze.overscaledZ],ce,wr.disabled,gt,st,N.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}})(u,p,y,x);break;case"background":(function(E,M,N,z){const V=N.paint.get("background-color"),W=N.paint.get("background-opacity");if(W===0)return;const H=E.context,ee=H.gl,ce=E.transform,ue=ce.tileSize,ge=N.paint.get("background-pattern");if(E.isPatternMissing(ge))return;const se=!ge&&V.a===1&&W===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass!==se)return;const Ie=Or.disabled,ze=E.depthModeForSublayer(0,se==="opaque"?Sn.ReadWrite:Sn.ReadOnly),_e=E.colorModeForRenderPass(),Oe=E.useProgram(ge?"backgroundPattern":"background"),Ue=z||ce.coveringTiles({tileSize:ue,terrain:E.style.map.terrain});ge&&(H.activeTexture.set(ee.TEXTURE0),E.imageManager.bind(E.context));const Ve=N.getCrossfadeParameters();for(const Ke of Ue){const rt=z?Ke.posMatrix:E.transform.calculatePosMatrix(Ke.toUnwrapped()),nt=ge?Xa(rt,W,E,ge,{tileID:Ke,tileSize:ue},Ve):nm(rt,W,V),st=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ke);Oe.draw(H,ee.TRIANGLES,ze,Ie,_e,wr.disabled,nt,st,N.id,E.tileExtentBuffer,E.quadTriangleIndexBuffer,E.tileExtentSegments)}})(u,0,y,x);break;case"custom":(function(E,M,N){const z=E.context,V=N.implementation;if(E.renderPass==="offscreen"){const W=V.prerender;W&&(E.setCustomLayerDefaults(),z.setColorMode(E.colorModeForRenderPass()),W.call(V,z.gl,E.transform.customLayerMatrix()),z.setDirty(),E.setBaseState())}else if(E.renderPass==="translucent"){E.setCustomLayerDefaults(),z.setColorMode(E.colorModeForRenderPass()),z.setStencilMode(Or.disabled);const W=V.renderingMode==="3d"?new Sn(E.context.gl.LEQUAL,Sn.ReadWrite,E.depthRangeFor3D):E.depthModeForSublayer(0,Sn.ReadOnly);z.setDepthMode(W),V.render(z.gl,E.transform.customLayerMatrix()),z.setDirty(),E.setBaseState(),z.bindFramebuffer.set(null)}})(u,0,y)}}translatePosMatrix(u,p,y,x,E){if(!y[0]&&!y[1])return u;const M=E?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(M){const V=Math.sin(M),W=Math.cos(M);y=[y[0]*W-y[1]*V,y[0]*V+y[1]*W]}const N=[E?y[0]:we(p,y[0],this.transform.zoom),E?y[1]:we(p,y[1],this.transform.zoom),0],z=new Float32Array(16);return a.$(z,u,N),z}saveTileTexture(u){const p=this._tileTextures[u.size[0]];p?p.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const p=this._tileTextures[u];return p&&p.length>0?p.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const p=this.imageManager.getPattern(u.from.toString()),y=this.imageManager.getPattern(u.to.toString());return!p||!y}useProgram(u,p){this.cache=this.cache||{};const y=u+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[y]||(this.cache[y]=new Jp(this.context,Pr[u],p,rm[u],this._showOverdrawInspector,this.style.map.terrain)),this.cache[y]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:p}=this.context.gl;return this.width!==u||this.height!==p}}class Jo{constructor(u,p){this.points=u,this.planes=p}static fromInvProjectionMatrix(u,p,y){const x=Math.pow(2,y),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(N=>{const z=1/(N=a.ag([],N,u))[3]/p*x;return a.b3(N,N,[z,z,1/N[3],z])}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(N=>{const z=function(ee,ce){var ue=ce[0],ge=ce[1],se=ce[2],Ie=ue*ue+ge*ge+se*se;return Ie>0&&(Ie=1/Math.sqrt(Ie)),ee[0]=ce[0]*Ie,ee[1]=ce[1]*Ie,ee[2]=ce[2]*Ie,ee}([],function(ee,ce,ue){var ge=ce[0],se=ce[1],Ie=ce[2],ze=ue[0],_e=ue[1],Oe=ue[2];return ee[0]=se*Oe-Ie*_e,ee[1]=Ie*ze-ge*Oe,ee[2]=ge*_e-se*ze,ee}([],U([],E[N[0]],E[N[1]]),U([],E[N[2]],E[N[1]]))),V=-((W=z)[0]*(H=E[N[1]])[0]+W[1]*H[1]+W[2]*H[2]);var W,H;return z.concat(V)});return new Jo(E,M)}}class qf{constructor(u,p){this.min=u,this.max=p,this.center=function(y,x,E){return y[0]=.5*x[0],y[1]=.5*x[1],y[2]=.5*x[2],y}([],function(y,x,E){return y[0]=x[0]+E[0],y[1]=x[1]+E[1],y[2]=x[2]+E[2],y}([],this.min,this.max))}quadrant(u){const p=[u%2==0,u<2],y=j(this.min),x=j(this.max);for(let E=0;E<p.length;E++)y[E]=p[E]?this.min[E]:this.center[E],x[E]=p[E]?this.center[E]:this.max[E];return x[2]=this.max[2],new qf(y,x)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let y=!0;for(let x=0;x<u.planes.length;x++){const E=u.planes[x];let M=0;for(let N=0;N<p.length;N++)a.b4(E,p[N])>=0&&M++;if(M===0)return 0;M!==p.length&&(y=!1)}if(y)return 2;for(let x=0;x<3;x++){let E=Number.MAX_VALUE,M=-Number.MAX_VALUE;for(let N=0;N<u.points.length;N++){const z=u.points[N][x]-this.min[x];E=Math.min(E,z),M=Math.max(M,z)}if(M<0||E>this.max[x]-this.min[x])return 0}return 1}}class Ed{constructor(u=0,p=0,y=0,x=0){if(isNaN(u)||u<0||isNaN(p)||p<0||isNaN(y)||y<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=p,this.left=y,this.right=x}interpolate(u,p,y){return p.top!=null&&u.top!=null&&(this.top=a.B.number(u.top,p.top,y)),p.bottom!=null&&u.bottom!=null&&(this.bottom=a.B.number(u.bottom,p.bottom,y)),p.left!=null&&u.left!=null&&(this.left=a.B.number(u.left,p.left,y)),p.right!=null&&u.right!=null&&(this.right=a.B.number(u.right,p.right,y)),this}getCenter(u,p){const y=a.ad((this.left+u-this.right)/2,0,u),x=a.ad((this.top+p-this.bottom)/2,0,p);return new a.P(y,x)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Ed(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class vm{constructor(u,p,y,x,E){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=E===void 0||!!E,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=y??0,this._maxPitch=x??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ed,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const u=new vm(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.apply(this),u}apply(u){this.tileSize=u.tileSize,this.latRange=u.latRange,this.width=u.width,this.height=u.height,this._center=u._center,this._elevation=u._elevation,this._minEleveationForCurrentTile=u._minEleveationForCurrentTile,this.zoom=u.zoom,this.angle=u.angle,this._fov=u._fov,this._pitch=u._pitch,this._unmodified=u._unmodified,this._edgeInsets=u._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const p=-a.b5(u,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=function(){var y=new a.A(4);return a.A!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y}(),function(y,x,E){var M=x[0],N=x[1],z=x[2],V=x[3],W=Math.sin(E),H=Math.cos(E);y[0]=M*H+z*W,y[1]=N*H+V*W,y[2]=M*-W+z*H,y[3]=N*-W+V*H}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const p=a.ad(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const p=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.tileZoom=Math.max(0,Math.floor(p)),this.scale=this.zoomScale(p),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,p,y){this._unmodified=!1,this._edgeInsets.interpolate(u,p,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const p=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(u){const p=[new a.b6(0,u)];if(this._renderWorldCopies){const y=this.pointCoordinate(new a.P(0,0)),x=this.pointCoordinate(new a.P(this.width,0)),E=this.pointCoordinate(new a.P(this.width,this.height)),M=this.pointCoordinate(new a.P(0,this.height)),N=Math.floor(Math.min(y.x,x.x,E.x,M.x)),z=Math.floor(Math.max(y.x,x.x,E.x,M.x)),V=1;for(let W=N-V;W<=z+V;W++)W!==0&&p.push(new a.b6(W,u))}return p}coveringTiles(u){var p,y;let x=this.coveringZoomLevel(u);const E=x;if(u.minzoom!==void 0&&x<u.minzoom)return[];u.maxzoom!==void 0&&x>u.maxzoom&&(x=u.maxzoom);const M=this.pointCoordinate(this.getCameraPoint()),N=a.U.fromLngLat(this.center),z=Math.pow(2,x),V=[z*M.x,z*M.y,0],W=[z*N.x,z*N.y,0],H=Jo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,x);let ee=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ee=x);const ce=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,ue=_e=>({aabb:new qf([_e*z,0,0],[(_e+1)*z,z,0]),zoom:0,x:0,y:0,wrap:_e,fullyVisible:!1}),ge=[],se=[],Ie=x,ze=u.reparseOverscaled?E:x;if(this._renderWorldCopies)for(let _e=1;_e<=3;_e++)ge.push(ue(-_e)),ge.push(ue(_e));for(ge.push(ue(0));ge.length>0;){const _e=ge.pop(),Oe=_e.x,Ue=_e.y;let Ve=_e.fullyVisible;if(!Ve){const $t=_e.aabb.intersects(H);if($t===0)continue;Ve=$t===2}const Ke=u.terrain?V:W,rt=_e.aabb.distanceX(Ke),nt=_e.aabb.distanceY(Ke),st=Math.max(Math.abs(rt),Math.abs(nt));if(_e.zoom===Ie||st>ce+(1<<Ie-_e.zoom)-2&&_e.zoom>=ee){const $t=Ie-_e.zoom,mn=V[0]-.5-(Oe<<$t),gt=V[1]-.5-(Ue<<$t);se.push({tileID:new a.O(_e.zoom===Ie?ze:_e.zoom,_e.wrap,_e.zoom,Oe,Ue),distanceSq:G([W[0]-.5-Oe,W[1]-.5-Ue]),tileDistanceToCamera:Math.sqrt(mn*mn+gt*gt)})}else for(let $t=0;$t<4;$t++){const mn=(Oe<<1)+$t%2,gt=(Ue<<1)+($t>>1),Ht=_e.zoom+1;let Nt=_e.aabb.quadrant($t);if(u.terrain){const Kn=new a.O(Ht,_e.wrap,Ht,mn,gt),pn=u.terrain.getMinMaxElevation(Kn),un=(p=pn.minElevation)!==null&&p!==void 0?p:this.elevation,gn=(y=pn.maxElevation)!==null&&y!==void 0?y:this.elevation;Nt=new qf([Nt.min[0],Nt.min[1],un],[Nt.max[0],Nt.max[1],gn])}ge.push({aabb:Nt,zoom:Ht,x:mn,y:gt,wrap:_e.wrap,fullyVisible:Ve})}}return se.sort((_e,Oe)=>_e.distanceSq-Oe.distanceSq).map(_e=>_e.tileID)}resize(u,p){this.width=u,this.height=p,this.pixelsToGLUnits=[2/u,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const p=a.ad(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.P(a.G(u.lng)*this.worldSize,a.H(p)*this.worldSize)}unproject(u){return new a.U(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const p=this.pointLocation(this.centerPoint,u),y=u.getElevationForLngLatZoom(p,this.tileZoom);if(!(this.elevation-y))return;const x=this.getCameraPosition(),E=a.U.fromLngLat(x.lngLat,x.altitude),M=a.U.fromLngLat(p,y),N=E.x-M.x,z=E.y-M.y,V=E.z-M.z,W=Math.sqrt(N*N+z*z+V*V),H=this.scaleZoom(this.cameraToCenterDistance/W/this.tileSize);this._elevation=y,this._center=p,this.zoom=H}setLocationAtPoint(u,p){const y=this.pointCoordinate(p),x=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(u),M=new a.U(E.x-(y.x-x.x),E.y-(y.y-x.y));this.center=this.coordinateLocation(M),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,p){return p?this.coordinatePoint(this.locationCoordinate(u),p.getElevationForLngLatZoom(u,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,p){return this.coordinateLocation(this.pointCoordinate(u,p))}locationCoordinate(u){return a.U.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,p){if(p){const ee=p.pointCoordinate(u);if(ee!=null)return ee}const y=[u.x,u.y,0,1],x=[u.x,u.y,1,1];a.ag(y,y,this.pixelMatrixInverse),a.ag(x,x,this.pixelMatrixInverse);const E=y[3],M=x[3],N=y[1]/E,z=x[1]/M,V=y[2]/E,W=x[2]/M,H=V===W?0:(0-V)/(W-V);return new a.U(a.B.number(y[0]/E,x[0]/M,H)/this.worldSize,a.B.number(N,z,H)/this.worldSize)}coordinatePoint(u,p=0,y=this.pixelMatrix){const x=[u.x*this.worldSize,u.y*this.worldSize,p,1];return a.ag(x,x,y),new a.P(x[0]/x[3],x[1]/x[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new et().extend(this.pointLocation(new a.P(0,u))).extend(this.pointLocation(new a.P(this.width,u))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new et([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(u,p=!1){const y=u.key,x=p?this._alignedPosMatrixCache:this._posMatrixCache;if(x[y])return x[y];const E=u.canonical,M=this.worldSize/this.zoomScale(E.z),N=E.x+Math.pow(2,E.z)*u.wrap,z=a.ao(new Float64Array(16));return a.$(z,z,[N*M,E.y*M,0]),a.a0(z,z,[M/a.N,M/a.N,1]),a.a1(z,p?this.alignedProjMatrix:this.projMatrix,z),x[y]=new Float32Array(z),x[y]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let u,p,y,x,E=-90,M=90,N=-180,z=180;const V=this.size,W=this._unmodified;if(this.latRange){const ce=this.latRange;E=a.H(ce[1])*this.worldSize,M=a.H(ce[0])*this.worldSize,u=M-E<V.y?V.y/(M-E):0}if(this.lngRange){const ce=this.lngRange;N=a.b5(a.G(ce[0])*this.worldSize,0,this.worldSize),z=a.b5(a.G(ce[1])*this.worldSize,0,this.worldSize),z<N&&(z+=this.worldSize),p=z-N<V.x?V.x/(z-N):0}const H=this.point,ee=Math.max(p||0,u||0);if(ee)return this.center=this.unproject(new a.P(p?(z+N)/2:H.x,u?(M+E)/2:H.y)),this.zoom+=this.scaleZoom(ee),this._unmodified=W,void(this._constraining=!1);if(this.latRange){const ce=H.y,ue=V.y/2;ce-ue<E&&(x=E+ue),ce+ue>M&&(x=M-ue)}if(this.lngRange){const ce=(N+z)/2,ue=a.b5(H.x,ce-this.worldSize/2,ce+this.worldSize/2),ge=V.x/2;ue-ge<N&&(y=N+ge),ue+ge>z&&(y=z-ge)}y===void 0&&x===void 0||(this.center=this.unproject(new a.P(y!==void 0?y:H.x,x!==void 0?x:H.y)).wrap()),this._unmodified=W,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,p=this.point.x,y=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b7(1,this.center.lat)*this.worldSize;let x=a.ao(new Float64Array(16));a.a0(x,x,[this.width/2,-this.height/2,1]),a.$(x,x,[1,-1,0]),this.labelPlaneMatrix=x,x=a.ao(new Float64Array(16)),a.a0(x,x,[1,-1,1]),a.$(x,x,[-1,-1,0]),a.a0(x,x,[2/this.width,2/this.height,1]),this.glCoordMatrix=x;const E=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),M=Math.min(this.elevation,this._minEleveationForCurrentTile),N=E-M*this._pixelPerMeter/Math.cos(this._pitch),z=M<0?N:E,V=Math.PI/2+this._pitch,W=this._fov*(.5+u.y/this.height),H=Math.sin(W)*z/Math.sin(a.ad(Math.PI-V-W,.01,Math.PI-.01)),ee=this.getHorizon(),ce=2*Math.atan(ee/this.cameraToCenterDistance)*(.5+u.y/(2*ee)),ue=Math.sin(ce)*z/Math.sin(a.ad(Math.PI-V-ce,.01,Math.PI-.01)),ge=Math.min(H,ue),se=1.01*(Math.cos(Math.PI/2-this._pitch)*ge+z),Ie=this.height/50;x=new Float64Array(16),a.b8(x,this._fov,this.width/this.height,Ie,se),x[8]=2*-u.x/this.width,x[9]=2*u.y/this.height,a.a0(x,x,[1,-1,1]),a.$(x,x,[0,0,-this.cameraToCenterDistance]),a.b9(x,x,this._pitch),a.ae(x,x,this.angle),a.$(x,x,[-p,-y,0]),this.mercatorMatrix=a.a0([],x,[this.worldSize,this.worldSize,this.worldSize]),a.a0(x,x,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.a1(new Float64Array(16),this.labelPlaneMatrix,x),a.$(x,x,[0,0,-this.elevation]),this.projMatrix=x,this.invProjMatrix=a.as([],x),this.pixelMatrix3D=a.a1(new Float64Array(16),this.labelPlaneMatrix,x);const ze=this.width%2/2,_e=this.height%2/2,Oe=Math.cos(this.angle),Ue=Math.sin(this.angle),Ve=p-Math.round(p)+Oe*ze+Ue*_e,Ke=y-Math.round(y)+Oe*_e+Ue*ze,rt=new Float64Array(x);if(a.$(rt,rt,[Ve>.5?Ve-1:Ve,Ke>.5?Ke-1:Ke,0]),this.alignedProjMatrix=rt,x=a.as(new Float64Array(16),this.pixelMatrix),!x)throw new Error("failed to invert matrix");this.pixelMatrixInverse=x,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new a.P(0,0)),p=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.ag(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,u))}getCameraQueryGeometry(u){const p=this.getCameraPoint();if(u.length===1)return[u[0],p];{let y=p.x,x=p.y,E=p.x,M=p.y;for(const N of u)y=Math.min(y,N.x),x=Math.min(x,N.y),E=Math.max(E,N.x),M=Math.max(M,N.y);return[new a.P(y,x),new a.P(E,x),new a.P(E,M),new a.P(y,M),new a.P(y,x)]}}}function $c(w,u){let p,y=!1,x=null,E=null;const M=()=>{x=null,y&&(w.apply(E,p),x=setTimeout(M,u),y=!1)};return(...N)=>(y=!0,E=this,p=N,x||M(),x)}class Cd{constructor(u){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let y;return p.split("&").map(x=>x.split("=")).forEach(x=>{x[0]===this._hashName&&(y=x)}),(y&&y[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(p.length>=3&&!p.some(y=>isNaN(y))){const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:y,pitch:+(p[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,p)}catch{}},this._updateHash=$c(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const p=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,x=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,x),M=Math.round(p.lng*E)/E,N=Math.round(p.lat*E)/E,z=this._map.getBearing(),V=this._map.getPitch();let W="";if(W+=u?`/${M}/${N}/${y}`:`${y}/${N}/${M}`,(z||V)&&(W+="/"+Math.round(10*z)/10),V&&(W+=`/${Math.round(V)}`),this._hashName){const H=this._hashName;let ee=!1;const ce=window.location.hash.slice(1).split("&").map(ue=>{const ge=ue.split("=")[0];return ge===H?(ee=!0,`${ge}=${W}`):ue}).filter(ue=>ue);return ee||ce.push(`${H}=${W}`),`#${ce.join("&")}`}return`#${W}`}}const Wf={linearity:.3,easing:a.ba(0,0,.3,1)},z1=a.e({deceleration:2500,maxSpeed:1400},Wf),F1=a.e({deceleration:20,maxSpeed:1400},Wf),B1=a.e({deceleration:1e3,maxSpeed:360},Wf),j1=a.e({deceleration:1e3,maxSpeed:90},Wf);class U1{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.h.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,p=a.h.now();for(;u.length>0&&p-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)p.zoom+=E.zoomDelta||0,p.bearing+=E.bearingDelta||0,p.pitch+=E.pitchDelta||0,E.panDelta&&p.pan._add(E.panDelta),E.around&&(p.around=E.around),E.pinchAround&&(p.pinchAround=E.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(p.pan.mag()){const E=Id(p.pan.mag(),y,a.e({},z1,u||{}));x.offset=p.pan.mult(E.amount/p.pan.mag()),x.center=this._map.transform.center,Qs(x,E)}if(p.zoom){const E=Id(p.zoom,y,F1);x.zoom=this._map.transform.zoom+E.amount,Qs(x,E)}if(p.bearing){const E=Id(p.bearing,y,B1);x.bearing=this._map.transform.bearing+a.ad(E.amount,-179,179),Qs(x,E)}if(p.pitch){const E=Id(p.pitch,y,j1);x.pitch=this._map.transform.pitch+E.amount,Qs(x,E)}if(x.zoom||x.bearing){const E=p.pinchAround===void 0?p.around:p.pinchAround;x.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),a.e(x,{noMoveStart:!0})}}function Qs(w,u){(!w.duration||w.duration<u.duration)&&(w.duration=u.duration,w.easing=u.easing)}function Id(w,u,p){const{maxSpeed:y,linearity:x,deceleration:E}=p,M=a.ad(w*x/(u/1e3),-y,y),N=Math.abs(M)/(E*x);return{easing:p.easing,duration:1e3*N,amount:M*(N/2)}}class xa extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,y,x={}){const E=d.mousePos(p.getCanvasContainer(),y),M=p.unproject(E);super(u,a.e({point:E,lngLat:M,originalEvent:y},x)),this._defaultPrevented=!1,this.target=p}}class Td extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,y){const x=u==="touchend"?y.changedTouches:y.touches,E=d.touchPos(p.getCanvasContainer(),x),M=E.map(z=>p.unproject(z)),N=E.reduce((z,V,W,H)=>z.add(V.div(H.length)),new a.P(0,0));super(u,{points:E,point:N,lngLats:M,lngLat:p.unproject(N),originalEvent:y}),this._defaultPrevented=!1}}class V1 extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,y){super(u,{originalEvent:y}),this._defaultPrevented=!1}}class G1{constructor(u,p){this._map=u,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new V1(u.type,this._map,u))}mousedown(u,p){return this._mousedownPos=p,this._firePreventable(new xa(u.type,this._map,u))}mouseup(u){this._map.fire(new xa(u.type,this._map,u))}click(u,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new xa(u.type,this._map,u))}dblclick(u){return this._firePreventable(new xa(u.type,this._map,u))}mouseover(u){this._map.fire(new xa(u.type,this._map,u))}mouseout(u){this._map.fire(new xa(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Td(u.type,this._map,u))}touchmove(u){this._map.fire(new Td(u.type,this._map,u))}touchend(u){this._map.fire(new Td(u.type,this._map,u))}touchcancel(u){this._map.fire(new Td(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class q1{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new xa(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new xa(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xl{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.pointLocation(a.P.convert(u),this._map.terrain)}}class W1{constructor(u,p){this._map=u,this._tr=new Xl(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,p){this.isEnabled()&&u.shiftKey&&u.button===0&&(d.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(u,p){if(!this._active)return;const y=p;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const x=this._startPos;this._lastPos=y,this._box||(this._box=d.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const E=Math.min(x.x,y.x),M=Math.max(x.x,y.x),N=Math.min(x.y,y.y),z=Math.max(x.y,y.y);d.setTransform(this._box,`translate(${E}px,${N}px)`),this._box.style.width=M-E+"px",this._box.style.height=z-N+"px"}mouseupWindow(u,p){if(!this._active||u.button!==0)return;const y=this._startPos,x=p;if(this.reset(),d.suppressClick(),y.x!==x.x||y.y!==x.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:u})),{cameraAnimation:E=>E.fitScreenCoordinates(y,x,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(d.remove(this._box),this._box=null),d.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,p){return this._map.fire(new a.k(u,{originalEvent:p}))}}function Za(w,u){if(w.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${u.length}`);const p={};for(let y=0;y<w.length;y++)p[w[y].identifier]=u[y];return p}class Zl{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,p,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),y.length===this.numTouches&&(this.centroid=function(x){const E=new a.P(0,0);for(const M of x)E._add(M);return E.div(x.length)}(p),this.touches=Za(y,p)))}touchmove(u,p,y){if(this.aborted||!this.centroid)return;const x=Za(y,p);for(const E in this.touches){const M=x[E];(!M||M.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(u,p,y){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class _m{constructor(u){this.singleTap=new Zl(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,p,y){this.singleTap.touchstart(u,p,y)}touchmove(u,p,y){this.singleTap.touchmove(u,p,y)}touchend(u,p,y){const x=this.singleTap.touchend(u,p,y);if(x){const E=u.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(x)<30;if(E&&M||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class Kl{constructor(u){this._tr=new Xl(u),this._zoomIn=new _m({numTouches:1,numTaps:2}),this._zoomOut=new _m({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,p,y){this._zoomIn.touchstart(u,p,y),this._zoomOut.touchstart(u,p,y)}touchmove(u,p,y){this._zoomIn.touchmove(u,p,y),this._zoomOut.touchmove(u,p,y)}touchend(u,p,y){const x=this._zoomIn.touchend(u,p,y),E=this._zoomOut.touchend(u,p,y),M=this._tr;return x?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(x)},{originalEvent:u})}):E?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(E)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yl{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const p=this._moveFunction(...u);if(p.bearingDelta||p.pitchDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(u,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=p.length?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,p){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const x=p.length?p[0]:p;return!this._moved&&x.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=x,this._move(y,x))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&d.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const BC={0:1,2:2};class Cv{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const p=d.mouseButton(u);this._eventButton=p}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!function(p,y){const x=BC[y];return p.buttons===void 0||(p.buttons&x)!==x}(u,this._eventButton)}isValidEndEvent(u){return d.mouseButton(u)===this._eventButton}}class H1{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}const xm=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=function(u){u.preventDefault()}},Hf=({enable:w,clickTolerance:u,bearingDegreesPerPixelMoved:p=.8})=>{const y=new Cv({checkCorrectEvent:x=>d.mouseButton(x)===0&&x.ctrlKey||d.mouseButton(x)===2});return new Yl({clickTolerance:u,move:(x,E)=>({bearingDelta:(E.x-x.x)*p}),moveStateManager:y,enable:w,assignEvents:xm})},Jl=({enable:w,clickTolerance:u,pitchDegreesPerPixelMoved:p=-.5})=>{const y=new Cv({checkCorrectEvent:x=>d.mouseButton(x)===0&&x.ctrlKey||d.mouseButton(x)===2});return new Yl({clickTolerance:u,move:(x,E)=>({pitchDelta:(E.y-x.y)*p}),moveStateManager:y,enable:w,assignEvents:xm})};class Pt{constructor(u,p){this._minTouches=u.cooperativeGestures?2:1,this._clickTolerance=u.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(u,p,y){return this._calculateTransform(u,p,y)}touchmove(u,p,y){if(this._map._cooperativeGestures&&(this._minTouches===2&&y.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(u,!1,y.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(y.length<this._minTouches))return u.preventDefault(),this._calculateTransform(u,p,y)}touchend(u,p,y){this._calculateTransform(u,p,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,p,y){y.length>0&&(this._active=!0);const x=Za(y,p),E=new a.P(0,0),M=new a.P(0,0);let N=0;for(const V in x){const W=x[V],H=this._touches[V];H&&(E._add(W),M._add(W.sub(H)),N++,x[V]=W)}if(this._touches=x,N<this._minTouches||!M.mag())return;const z=M.div(N);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(N),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bm{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,p,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([p[0],p[1]]))}touchmove(u,p,y){if(!this._firstTwoTouches)return;u.preventDefault();const[x,E]=this._firstTwoTouches,M=qu(y,p,x),N=qu(y,p,E);if(!M||!N)return;const z=this._aroundCenter?null:M.add(N).div(2);return this._move([M,N],z,u)}touchend(u,p,y){if(!this._firstTwoTouches)return;const[x,E]=this._firstTwoTouches,M=qu(y,p,x),N=qu(y,p,E);M&&N||(this._active&&d.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function qu(w,u,p){for(let y=0;y<w.length;y++)if(w[y].identifier===p)return u[y]}function Xf(w,u){return Math.log(w/u)/Math.LN2}class X1 extends bm{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,p){const y=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Xf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xf(this._distance,y),pinchAround:p}}}function xt(w,u){return 180*w.angleWith(u)/Math.PI}class Iv extends bm{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,p){const y=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:xt(this._vector,y),pinchAround:p}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const p=25/(Math.PI*this._minDiameter)*360,y=xt(u,this._startVector);return Math.abs(y)<p}}function Tv(w){return Math.abs(w.y)>Math.abs(w.x)}class jC extends bm{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,p,y){super.touchstart(u,p,y),this._currentTouchCount=y.length}_start(u){this._lastPoints=u,Tv(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,p,y){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const x=u[0].sub(this._lastPoints[0]),E=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(x,E,y.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(x.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(u,p,y){if(this._valid!==void 0)return this._valid;const x=u.mag()>=2,E=p.mag()>=2;if(!x&&!E)return;if(!x||!E)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const M=u.y>0==p.y>0;return Tv(u)&&Tv(p)&&M}}const Pv={panStep:100,bearingStep:15,pitchStep:10};class Z1{constructor(u){this._tr=new Xl(u);const p=Pv;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let p=0,y=0,x=0,E=0,M=0;switch(u.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:u.shiftKey?y=-1:(u.preventDefault(),E=-1);break;case 39:u.shiftKey?y=1:(u.preventDefault(),E=1);break;case 38:u.shiftKey?x=1:(u.preventDefault(),M=-1);break;case 40:u.shiftKey?x=-1:(u.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(y=0,x=0),{cameraAnimation:N=>{const z=this._tr;N.easeTo({duration:300,easeId:"keyboardHandler",easing:K1,zoom:p?Math.round(z.zoom)+p*(u.shiftKey?2:1):z.zoom,bearing:z.bearing+y*this._bearingStep,pitch:z.pitch+x*this._pitchStep,offset:[-E*this._panStep,-M*this._panStep],center:z.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function K1(w){return w*(2-w)}const Y1=4.000244140625;class UC{constructor(u,p){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=u,this._tr=new Xl(u),this._el=u.getCanvasContainer(),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!u[this._map._metaKey])return;u.preventDefault()}let p=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const y=a.h.now(),x=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,p!==0&&p%Y1==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(x*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),u.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=u,this._delta-=p,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=d.mousePos(this._el,u),y=this._tr;this._around=a.L.convert(this._aroundCenter?y.center:y.unproject(p)),this._aroundPoint=y.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(this._delta!==0){const N=this._type==="wheel"&&Math.abs(this._delta)>Y1?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&z!==0&&(z=1/z);const V=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(V*z))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,y=this._startZoom,x=this._easing;let E,M=!1;if(this._type==="wheel"&&y&&x){const N=Math.min((a.h.now()-this._lastWheelEventTime)/200,1),z=x(N);E=a.B.number(y,p,z),N<1?this._frameId||(this._frameId=!0):M=!0}else E=p,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!M,zoomDelta:E-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let p=a.bb;if(this._prevEase){const y=this._prevEase,x=(a.h.now()-y.start)/y.duration,E=y.easing(x+.01)-y.easing(x),M=.27/Math.sqrt(E*E+1e-4)*.01,N=Math.sqrt(.0729-M*M);p=a.ba(M,N,.25,1)}return this._prevEase={start:a.h.now(),duration:u,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Av{constructor(u,p){this._clickZoom=u,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ov{constructor(u){this._tr=new Xl(u),this.reset()}reset(){this._active=!1}dblclick(u,p){return u.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mv{constructor(){this._tap=new _m({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,p,y){if(!this._swipePoint)if(this._tapTime){const x=p[0],E=u.timeStamp-this._tapTime<500,M=this._tapPoint.dist(x)<30;E&&M?y.length>0&&(this._swipePoint=x,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(u,p,y)}touchmove(u,p,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const x=p[0],E=x.y-this._swipePoint.y;return this._swipePoint=x,u.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(u,p,y)}touchend(u,p,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const x=this._tap.touchend(u,p,y);x&&(this._tapTime=u.timeStamp,this._tapPoint=x)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $v{constructor(u,p,y){this._el=u,this._mousePan=p,this._touchPan=y}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Qo{constructor(u,p,y){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=p,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wu{constructor(u,p,y,x){this._el=u,this._touchZoom=p,this._touchRotate=y,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Pd=w=>w.zoom||w.drag||w.pitch||w.rotate;class kv extends a.k{}function Ad(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta}class Nv{constructor(u,p){this.handleWindowEvent=x=>{this.handleEvent(x,`${x.type}Window`)},this.handleEvent=(x,E)=>{if(x.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=x.type==="renderFrame"?void 0:x,N={needsRenderFrame:!1},z={},V={},W=x.touches,H=W?this._getMapTouches(W):void 0,ee=H?d.touchPos(this._el,H):d.mousePos(this._el,x);for(const{handlerName:ge,handler:se,allowed:Ie}of this._handlers){if(!se.isEnabled())continue;let ze;this._blockedByActive(V,Ie,ge)?se.reset():se[E||x.type]&&(ze=se[E||x.type](x,ee,H),this.mergeHandlerResult(N,z,ze,ge,M),ze&&ze.needsRenderFrame&&this._triggerRenderFrame()),(ze||se.isActive())&&(V[ge]=se)}const ce={};for(const ge in this._previousActiveHandlers)V[ge]||(ce[ge]=M);this._previousActiveHandlers=V,(Object.keys(ce).length||Ad(N))&&(this._changes.push([N,z,ce]),this._triggerRenderFrame()),(Object.keys(V).length||Ad(N))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ue}=N;ue&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ue(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new U1(u),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[x,E,M]of this._listeners)d.addEventListener(x,E,x===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[u,p,y]of this._listeners)d.removeEventListener(u,p,u===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(u){const p=this._map,y=p.getCanvasContainer();this._add("mapEvent",new G1(p,u));const x=p.boxZoom=new W1(p,u);this._add("boxZoom",x),u.interactive&&u.boxZoom&&x.enable();const E=new Kl(p),M=new Ov(p);p.doubleClickZoom=new Av(M,E),this._add("tapZoom",E),this._add("clickZoom",M),u.interactive&&u.doubleClickZoom&&p.doubleClickZoom.enable();const N=new Mv;this._add("tapDragZoom",N);const z=p.touchPitch=new jC(p);this._add("touchPitch",z),u.interactive&&u.touchPitch&&p.touchPitch.enable(u.touchPitch);const V=Hf(u),W=Jl(u);p.dragRotate=new Qo(u,V,W),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",W,["mouseRotate"]),u.interactive&&u.dragRotate&&p.dragRotate.enable();const H=(({enable:Ie,clickTolerance:ze})=>{const _e=new Cv({checkCorrectEvent:Oe=>d.mouseButton(Oe)===0&&!Oe.ctrlKey});return new Yl({clickTolerance:ze,move:(Oe,Ue)=>({around:Ue,panDelta:Ue.sub(Oe)}),activateOnStart:!0,moveStateManager:_e,enable:Ie,assignEvents:xm})})(u),ee=new Pt(u,p);p.dragPan=new $v(y,H,ee),this._add("mousePan",H),this._add("touchPan",ee,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&p.dragPan.enable(u.dragPan);const ce=new Iv,ue=new X1;p.touchZoomRotate=new Wu(y,ue,ce,N),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&p.touchZoomRotate.enable(u.touchZoomRotate);const ge=p.scrollZoom=new UC(p,()=>this._triggerRenderFrame());this._add("scrollZoom",ge,["mousePan"]),u.interactive&&u.scrollZoom&&p.scrollZoom.enable(u.scrollZoom);const se=p.keyboard=new Z1(p);this._add("keyboard",se),u.interactive&&u.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new q1(p))}_add(u,p,y){this._handlers.push({handlerName:u,handler:p,allowed:y}),this._handlersById[u]=p}stop(u){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Pd(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,p,y){for(const x in u)if(x!==y&&(!p||p.indexOf(x)<0))return!0;return!1}_getMapTouches(u){const p=[];for(const y of u)this._el.contains(y.target)&&p.push(y);return p}mergeHandlerResult(u,p,y,x,E){if(!y)return;a.e(u,y);const M={handlerName:x,originalEvent:y.originalEvent||E};y.zoomDelta!==void 0&&(p.zoom=M),y.panDelta!==void 0&&(p.drag=M),y.pitchDelta!==void 0&&(p.pitch=M),y.bearingDelta!==void 0&&(p.rotate=M)}_applyChanges(){const u={},p={},y={};for(const[x,E,M]of this._changes)x.panDelta&&(u.panDelta=(u.panDelta||new a.P(0,0))._add(x.panDelta)),x.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(u.around=x.around),x.pinchAround!==void 0&&(u.pinchAround=x.pinchAround),x.noInertia&&(u.noInertia=x.noInertia),a.e(p,E),a.e(y,M);this._updateMapTransform(u,p,y),this._changes=[]}_updateMapTransform(u,p,y){const x=this._map,E=x._getTransformForUpdate(),M=x.terrain;if(!(Ad(u)||M&&this._terrainMovement))return this._fireEvents(p,y,!0);let{panDelta:N,zoomDelta:z,bearingDelta:V,pitchDelta:W,around:H,pinchAround:ee}=u;ee!==void 0&&(H=ee),x._stop(!0),H=H||x.transform.centerPoint;const ce=E.pointLocation(N?H.sub(N):H);V&&(E.bearing+=V),W&&(E.pitch+=W),z&&(E.zoom+=z),M?this._terrainMovement||!p.drag&&!p.zoom?p.drag&&this._terrainMovement?E.center=E.pointLocation(E.centerPoint.sub(N)):E.setLocationAtPoint(ce,H):(this._terrainMovement=!0,this._map._elevationFreeze=!0,E.setLocationAtPoint(ce,H),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,E.recalculateZoom(x.terrain)})):E.setLocationAtPoint(ce,H),x._applyUpdatedTransform(E),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(p,y,!0)}_fireEvents(u,p,y){const x=Pd(this._eventsInProgress),E=Pd(u),M={};for(const W in u){const{originalEvent:H}=u[W];this._eventsInProgress[W]||(M[`${W}start`]=H),this._eventsInProgress[W]=u[W]}!x&&E&&this._fireEvent("movestart",E.originalEvent);for(const W in M)this._fireEvent(W,M[W]);E&&this._fireEvent("move",E.originalEvent);for(const W in u){const{originalEvent:H}=u[W];this._fireEvent(W,H)}const N={};let z;for(const W in this._eventsInProgress){const{handlerName:H,originalEvent:ee}=this._eventsInProgress[W];this._handlersById[H].isActive()||(delete this._eventsInProgress[W],z=p[H]||ee,N[`${W}end`]=z)}for(const W in N)this._fireEvent(W,N[W]);const V=Pd(this._eventsInProgress);if(y&&(x||E)&&!V){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!W||!W.essential&&a.h.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:z})),H(this._map.getBearing())&&this._map.resetNorth()):(H(W.bearing||this._map.getBearing())&&(W.bearing=0),W.freezeElevation=!0,this._map.easeTo(W,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(u,p){this._map.fire(new a.k(u,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new kv("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class J1 extends a.E{constructor(u,p){super(),this._renderFrameCallback=()=>{const y=Math.min((a.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=p.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.L(this.transform.center.lng,this.transform.center.lat)}setCenter(u,p){return this.jumpTo({center:u},p)}panBy(u,p,y){return u=a.P.convert(u).mult(-1),this.panTo(this.transform.center,a.e({offset:u},p),y)}panTo(u,p,y){return this.easeTo(a.e({center:u},p),y)}getZoom(){return this.transform.zoom}setZoom(u,p){return this.jumpTo({zoom:u},p),this}zoomTo(u,p,y){return this.easeTo(a.e({zoom:u},p),y)}zoomIn(u,p){return this.zoomTo(this.getZoom()+1,u,p),this}zoomOut(u,p){return this.zoomTo(this.getZoom()-1,u,p),this}getBearing(){return this.transform.bearing}setBearing(u,p){return this.jumpTo({bearing:u},p),this}getPadding(){return this.transform.padding}setPadding(u,p){return this.jumpTo({padding:u},p),this}rotateTo(u,p,y){return this.easeTo(a.e({bearing:u},p),y)}resetNorth(u,p){return this.rotateTo(0,a.e({duration:1e3},u),p),this}resetNorthPitch(u,p){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},u),p),this}snapToNorth(u,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,p):this}getPitch(){return this.transform.pitch}setPitch(u,p){return this.jumpTo({pitch:u},p),this}cameraForBounds(u,p){u=et.convert(u);const y=p&&p.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),y,p)}_cameraForBoxAndBearing(u,p,y,x){const E={top:0,bottom:0,right:0,left:0};if(typeof(x=a.e({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},x)).padding=="number"){const Ue=x.padding;x.padding={top:Ue,bottom:Ue,right:Ue,left:Ue}}x.padding=a.e(E,x.padding);const M=this.transform,N=M.padding,z=M.project(a.L.convert(u)),V=M.project(a.L.convert(p)),W=z.rotate(-y*Math.PI/180),H=V.rotate(-y*Math.PI/180),ee=new a.P(Math.max(W.x,H.x),Math.max(W.y,H.y)),ce=new a.P(Math.min(W.x,H.x),Math.min(W.y,H.y)),ue=ee.sub(ce),ge=(M.width-(N.left+N.right+x.padding.left+x.padding.right))/ue.x,se=(M.height-(N.top+N.bottom+x.padding.top+x.padding.bottom))/ue.y;if(se<0||ge<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ie=Math.min(M.scaleZoom(M.scale*Math.min(ge,se)),x.maxZoom),ze=a.P.convert(x.offset),_e=new a.P((x.padding.left-x.padding.right)/2,(x.padding.top-x.padding.bottom)/2).rotate(y*Math.PI/180),Oe=ze.add(_e).mult(M.scale/M.zoomScale(Ie));return{center:M.unproject(z.add(V).div(2).sub(Oe)),zoom:Ie,bearing:y}}fitBounds(u,p,y){return this._fitInternal(this.cameraForBounds(u,p),p,y)}fitScreenCoordinates(u,p,y,x,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(u)),this.transform.pointLocation(a.P.convert(p)),y,x),x,E)}_fitInternal(u,p,y){return u?(delete(p=a.e(u,p)).padding,p.linear?this.easeTo(p,y):this.flyTo(p,y)):this}jumpTo(u,p){this.stop();const y=this._getTransformForUpdate();let x=!1,E=!1,M=!1;return"zoom"in u&&y.zoom!==+u.zoom&&(x=!0,y.zoom=+u.zoom),u.center!==void 0&&(y.center=a.L.convert(u.center)),"bearing"in u&&y.bearing!==+u.bearing&&(E=!0,y.bearing=+u.bearing),"pitch"in u&&y.pitch!==+u.pitch&&(M=!0,y.pitch=+u.pitch),u.padding==null||y.isPaddingEqual(u.padding)||(y.padding=u.padding),this._applyUpdatedTransform(y),this.fire(new a.k("movestart",p)).fire(new a.k("move",p)),x&&this.fire(new a.k("zoomstart",p)).fire(new a.k("zoom",p)).fire(new a.k("zoomend",p)),E&&this.fire(new a.k("rotatestart",p)).fire(new a.k("rotate",p)).fire(new a.k("rotateend",p)),M&&this.fire(new a.k("pitchstart",p)).fire(new a.k("pitch",p)).fire(new a.k("pitchend",p)),this.fire(new a.k("moveend",p))}calculateCameraOptionsFromTo(u,p,y,x=0){const E=a.U.fromLngLat(u,p),M=a.U.fromLngLat(y,x),N=M.x-E.x,z=M.y-E.y,V=M.z-E.z,W=Math.hypot(N,z,V);if(W===0)throw new Error("Can't calculate camera options with same From and To");const H=Math.hypot(N,z),ee=this.transform.scaleZoom(this.transform.cameraToCenterDistance/W/this.transform.tileSize),ce=180*Math.atan2(N,-z)/Math.PI;let ue=180*Math.acos(H/W)/Math.PI;return ue=V<0?90-ue:90+ue,{center:M.toLngLat(),zoom:ee,pitch:ue,bearing:ce}}easeTo(u,p){this._stop(!1,u.easeId),((u=a.e({offset:[0,0],duration:500,easing:a.bb},u)).animate===!1||!u.essential&&a.h.prefersReducedMotion)&&(u.duration=0);const y=this._getTransformForUpdate(),x=this.getZoom(),E=this.getBearing(),M=this.getPitch(),N=this.getPadding(),z="zoom"in u?+u.zoom:x,V="bearing"in u?this._normalizeBearing(u.bearing,E):E,W="pitch"in u?+u.pitch:M,H="padding"in u?u.padding:y.padding,ee=a.P.convert(u.offset);let ce=y.centerPoint.add(ee);const ue=y.pointLocation(ce),ge=a.L.convert(u.center||ue);this._normalizeCenter(ge);const se=y.project(ue),Ie=y.project(ge).sub(se),ze=y.zoomScale(z-x);let _e,Oe;u.around&&(_e=a.L.convert(u.around),Oe=y.locationPoint(_e));const Ue={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||z!==x,this._rotating=this._rotating||E!==V,this._pitching=this._pitching||W!==M,this._padding=!y.isPaddingEqual(H),this._easeId=u.easeId,this._prepareEase(p,u.noMoveStart,Ue),this.terrain&&this._prepareElevation(ge),this._ease(Ve=>{if(this._zooming&&(y.zoom=a.B.number(x,z,Ve)),this._rotating&&(y.bearing=a.B.number(E,V,Ve)),this._pitching&&(y.pitch=a.B.number(M,W,Ve)),this._padding&&(y.interpolatePadding(N,H,Ve),ce=y.centerPoint.add(ee)),this.terrain&&!u.freezeElevation&&this._updateElevation(Ve),_e)y.setLocationAtPoint(_e,Oe);else{const Ke=y.zoomScale(y.zoom-x),rt=z>x?Math.min(2,ze):Math.max(.5,ze),nt=Math.pow(rt,1-Ve),st=y.unproject(se.add(Ie.mult(Ve*nt)).mult(Ke));y.setLocationAtPoint(y.renderWorldCopies?st.wrap():st,ce)}this._applyUpdatedTransform(y),this._fireMoveEvents(p)},Ve=>{this.terrain&&this._finalizeElevation(),this._afterEase(p,Ve)},u),this}_prepareEase(u,p,y={}){this._moving=!0,p||y.moving||this.fire(new a.k("movestart",u)),this._zooming&&!y.zooming&&this.fire(new a.k("zoomstart",u)),this._rotating&&!y.rotating&&this.fire(new a.k("rotatestart",u)),this._pitching&&!y.pitching&&this.fire(new a.k("pitchstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&p!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(y-(p-(y*u+this._elevationStart))/(1-u)),this._elevationTarget=p}this.transform.elevation=a.B.number(this._elevationStart,this._elevationTarget,u)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(u){if(!this.transformCameraUpdate)return;const p=u.clone(),{center:y,zoom:x,pitch:E,bearing:M,elevation:N}=this.transformCameraUpdate(p);y&&(p.center=y),x!==void 0&&(p.zoom=x),E!==void 0&&(p.pitch=E),M!==void 0&&(p.bearing=M),N!==void 0&&(p.elevation=N),this.transform.apply(p)}_fireMoveEvents(u){this.fire(new a.k("move",u)),this._zooming&&this.fire(new a.k("zoom",u)),this._rotating&&this.fire(new a.k("rotate",u)),this._pitching&&this.fire(new a.k("pitch",u))}_afterEase(u,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const y=this._zooming,x=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new a.k("zoomend",u)),x&&this.fire(new a.k("rotateend",u)),E&&this.fire(new a.k("pitchend",u)),this.fire(new a.k("moveend",u))}flyTo(u,p){if(!u.essential&&a.h.prefersReducedMotion){const Nt=a.F(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Nt,p)}this.stop(),u=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.bb},u);const y=this._getTransformForUpdate(),x=this.getZoom(),E=this.getBearing(),M=this.getPitch(),N=this.getPadding(),z="zoom"in u?a.ad(+u.zoom,y.minZoom,y.maxZoom):x,V="bearing"in u?this._normalizeBearing(u.bearing,E):E,W="pitch"in u?+u.pitch:M,H="padding"in u?u.padding:y.padding,ee=y.zoomScale(z-x),ce=a.P.convert(u.offset);let ue=y.centerPoint.add(ce);const ge=y.pointLocation(ue),se=a.L.convert(u.center||ge);this._normalizeCenter(se);const Ie=y.project(ge),ze=y.project(se).sub(Ie);let _e=u.curve;const Oe=Math.max(y.width,y.height),Ue=Oe/ee,Ve=ze.mag();if("minZoom"in u){const Nt=a.ad(Math.min(u.minZoom,x,z),y.minZoom,y.maxZoom),Kn=Oe/y.zoomScale(Nt-x);_e=Math.sqrt(Kn/Ve*2)}const Ke=_e*_e;function rt(Nt){const Kn=(Ue*Ue-Oe*Oe+(Nt?-1:1)*Ke*Ke*Ve*Ve)/(2*(Nt?Ue:Oe)*Ke*Ve);return Math.log(Math.sqrt(Kn*Kn+1)-Kn)}function nt(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function st(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}const $t=rt(!1);let mn=function(Nt){return st($t)/st($t+_e*Nt)},gt=function(Nt){return Oe*((st($t)*(nt(Kn=$t+_e*Nt)/st(Kn))-nt($t))/Ke)/Ve;var Kn},Ht=(rt(!0)-$t)/_e;if(Math.abs(Ve)<1e-6||!isFinite(Ht)){if(Math.abs(Oe-Ue)<1e-6)return this.easeTo(u,p);const Nt=Ue<Oe?-1:1;Ht=Math.abs(Math.log(Ue/Oe))/_e,gt=function(){return 0},mn=function(Kn){return Math.exp(Nt*_e*Kn)}}return u.duration="duration"in u?+u.duration:1e3*Ht/("screenSpeed"in u?+u.screenSpeed/_e:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=E!==V,this._pitching=W!==M,this._padding=!y.isPaddingEqual(H),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(se),this._ease(Nt=>{const Kn=Nt*Ht,pn=1/mn(Kn);y.zoom=Nt===1?z:x+y.scaleZoom(pn),this._rotating&&(y.bearing=a.B.number(E,V,Nt)),this._pitching&&(y.pitch=a.B.number(M,W,Nt)),this._padding&&(y.interpolatePadding(N,H,Nt),ue=y.centerPoint.add(ce)),this.terrain&&!u.freezeElevation&&this._updateElevation(Nt);const un=Nt===1?se:y.unproject(Ie.add(ze.mult(gt(Kn))).mult(pn));y.setLocationAtPoint(y.renderWorldCopies?un.wrap():un,ue),this._applyUpdatedTransform(y),this._fireMoveEvents(p)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(p)},u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,p)}if(!u){const y=this.handlers;y&&y.stop(!1)}return this}_ease(u,p,y){y.animate===!1||y.duration===0?(u(1),p()):(this._easeStart=a.h.now(),this._easeOptions=y,this._onEaseFrame=u,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,p){u=a.b5(u,-180,180);const y=Math.abs(u-p);return Math.abs(u-360-p)<y&&(u-=360),Math.abs(u+360-p)<y&&(u+=360),u}_normalizeCenter(u){const p=this.transform;if(!p.renderWorldCopies||p.lngRange)return;const y=u.lng-p.center.lng;u.lng+=y>180?-360:y<-180?360:0}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(a.L.convert(u),this.transform.tileZoom)-this.transform.elevation:null}}class ba{constructor(u={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options&&this.options.compact,this._container=d.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=d.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=d.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){d.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,p){const y=this._map._getUIString(`AttributionControl.${p}`);u.title=y,u.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(x=>typeof x!="string"?"":x)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const p=this._map.style.sourceCaches;for(const x in p){const E=p[x];if(E.used||E.usedForTerrain){const M=E.getSource();M.attribution&&u.indexOf(M.attribution)<0&&u.push(M.attribution)}}u=u.filter(x=>String(x).trim()),u.sort((x,E)=>x.length-E.length),u=u.filter((x,E)=>{for(let M=E+1;M<u.length;M++)if(u[M].indexOf(x)>=0)return!1;return!0});const y=u.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,u.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class pr{constructor(u={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const y=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=d.create("div","maplibregl-ctrl");const p=d.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){d.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class wm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const p=++this._id;return this._queue.push({callback:u,id:p,cancelled:!1}),p}remove(u){const p=this._currentlyRunning,y=p?this._queue.concat(p):this._queue;for(const x of y)if(x.id===u)return void(x.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const y of p)if(!y.cancelled&&(y.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Lv={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Q1=a.Q([{name:"a_pos3d",type:"Int16",components:3}]);class eb extends a.E{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,p){this.sourceCache.update(u,p),this._renderableTilesKeys=[];const y={};for(const x of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))y[x.key]=!0,this._renderableTilesKeys.push(x.key),this._tiles[x.key]||(x.posMatrix=new Float64Array(16),a.aS(x.posMatrix,0,a.N,0,a.N,0,1),this._tiles[x.key]=new sn(x,this.tileSize));for(const x in this._tiles)y[x]||delete this._tiles[x]}freeRtt(u){for(const p in this._tiles){const y=this._tiles[p];(!u||y.tileID.equals(u)||y.tileID.isChildOf(u)||u.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const p={};for(const y of this._renderableTilesKeys){const x=this._tiles[y].tileID;if(x.canonical.equals(u.canonical)){const E=u.clone();E.posMatrix=new Float64Array(16),a.aS(E.posMatrix,0,a.N,0,a.N,0,1),p[y]=E}else if(x.canonical.isChildOf(u.canonical)){const E=u.clone();E.posMatrix=new Float64Array(16);const M=x.canonical.z-u.canonical.z,N=x.canonical.x-(x.canonical.x>>M<<M),z=x.canonical.y-(x.canonical.y>>M<<M),V=a.N>>M;a.aS(E.posMatrix,0,V,0,V,0,1),a.$(E.posMatrix,E.posMatrix,[-N*V,-z*V,0]),p[y]=E}else if(u.canonical.isChildOf(x.canonical)){const E=u.clone();E.posMatrix=new Float64Array(16);const M=u.canonical.z-x.canonical.z,N=u.canonical.x-(u.canonical.x>>M<<M),z=u.canonical.y-(u.canonical.y>>M<<M),V=a.N>>M;a.aS(E.posMatrix,0,a.N,0,a.N,0,1),a.$(E.posMatrix,E.posMatrix,[N*V,z*V,0]),a.a0(E.posMatrix,E.posMatrix,[1/2**M,1/2**M,0]),p[y]=E}}return p}getSourceTile(u,p){const y=this.sourceCache._source;let x=u.overscaledZ-this.deltaZoom;if(x>y.maxzoom&&(x=y.maxzoom),x<y.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(x).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!E||!E.dem)&&p)for(;x>=y.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(u.scaledTo(x--).key);return E}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(p=>p.timeAdded>=u)}}class tb{constructor(u,p,y){this.painter=u,this.sourceCache=new eb(p),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,p,y,x=a.N){var E;if(!(p>=0&&p<x&&y>=0&&y<x))return 0;const M=this.getTerrainData(u),N=(E=M.tile)===null||E===void 0?void 0:E.dem;if(!N)return 0;const z=function(ue,ge,se){var Ie=ge[0],ze=ge[1];return ue[0]=se[0]*Ie+se[4]*ze+se[12],ue[1]=se[1]*Ie+se[5]*ze+se[13],ue}([],[p/x*a.N,y/x*a.N],M.u_terrain_matrix),V=[z[0]*N.dim,z[1]*N.dim],W=Math.floor(V[0]),H=Math.floor(V[1]),ee=V[0]-W,ce=V[1]-H;return N.get(W,H)*(1-ee)*(1-ce)+N.get(W+1,H)*ee*(1-ce)+N.get(W,H+1)*(1-ee)*ce+N.get(W+1,H+1)*ee*ce}getElevationForLngLatZoom(u,p){const{tileID:y,mercatorX:x,mercatorY:E}=this._getOverscaledTileIDFromLngLatZoom(u,p);return this.getElevation(y,x%a.N,E%a.N,a.N)}getElevation(u,p,y,x=a.N){return this.getDEMElevation(u,p,y,x)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const x=this.painter.context,E=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new oe(x,E,x.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new oe(x,new a.R({width:1,height:1}),x.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ao([])}const p=this.sourceCache.getSourceTile(u,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const x=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new oe(x,p.dem.getPixels(),x.gl.RGBA,{premultiply:!1}),p.demTexture.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const y=p&&p+p.tileID.key+u.key;if(y&&!this._demMatrixCache[y]){const x=this.sourceCache.sourceCache._source.maxzoom;let E=u.canonical.z-p.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=x?E=u.canonical.z-x:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=u.canonical.x-(u.canonical.x>>E<<E),N=u.canonical.y-(u.canonical.y>>E<<E),z=a.bc(new Float64Array(16),[1/(a.N<<E),1/(a.N<<E),0]);a.$(z,z,[M*a.N,N*a.N,0]),this._demMatrixCache[u.key]={matrix:z,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(u){const p=this.painter,y=p.width/devicePixelRatio,x=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===x||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new oe(p.context,{width:y,height:x,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new oe(p.context,{width:y,height:x,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(y,x,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,y,x))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,M=0;E<this._coordsTextureSize;E++)for(let N=0;N<this._coordsTextureSize;N++,M+=4)p[M+0]=255&N,p[M+1]=255&E,p[M+2]=N>>8<<4|E>>8,p[M+3]=0;const y=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),x=new oe(u,y,u.gl.RGBA,{premultiply:!1});return x.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=x,x}pointCoordinate(u){const p=new Uint8Array(4),y=this.painter.context,x=y.gl;y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),x.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,x.RGBA,x.UNSIGNED_BYTE,p),y.bindFramebuffer.set(null);const E=p[0]+(p[2]>>4<<8),M=p[1]+((15&p[2])<<8),N=this.coordsIndex[255-p[3]],z=N&&this.sourceCache.getTileByID(N);if(!z)return null;const V=this._coordsTextureSize,W=(1<<z.tileID.canonical.z)*V;return new a.U(this._allowMercatorOverflow(u,(z.tileID.canonical.x*V+E)/W),(z.tileID.canonical.y*V+M)/W,this.getElevation(z.tileID,E,M,V))}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.painter.context,p=new a.bd,y=new a.b0,x=this.meshSize,E=a.N/x,M=x*x;for(let H=0;H<=x;H++)for(let ee=0;ee<=x;ee++)p.emplaceBack(ee*E,H*E,0);for(let H=0;H<M;H+=x+1)for(let ee=0;ee<x;ee++)y.emplaceBack(ee+H,x+ee+H+1,x+ee+H+2),y.emplaceBack(ee+H,x+ee+H+2,ee+H+1);const N=p.length,z=N+2*(x+1);for(const H of[0,1])for(let ee=0;ee<=x;ee++)for(const ce of[0,1])p.emplaceBack(ee*E,H*a.N,ce);for(let H=0;H<2*x;H+=2)y.emplaceBack(z+H,z+H+1,z+H+3),y.emplaceBack(z+H,z+H+3,z+H+2),y.emplaceBack(N+H,N+H+3,N+H+1),y.emplaceBack(N+H,N+H+2,N+H+3);const V=p.length,W=V+2*(x+1);for(const H of[0,1])for(let ee=0;ee<=x;ee++)for(const ce of[0,1])p.emplaceBack(H*a.N,ee*E,ce);for(let H=0;H<2*x;H+=2)y.emplaceBack(V+H,V+H+1,V+H+3),y.emplaceBack(V+H,V+H+3,V+H+2),y.emplaceBack(W+H,W+H+3,W+H+1),y.emplaceBack(W+H,W+H+2,W+H+3);return this._mesh={indexBuffer:u.createIndexBuffer(y),vertexBuffer:u.createVertexBuffer(p,Q1.members),segments:a.S.simpleSegment(0,0,p.length,y.length)},this._mesh}getMeshFrameDelta(u){return 2*Math.PI*a.be/Math.pow(2,u)/5}getMinTileElevationForLngLatZoom(u,p){var y;const{tileID:x}=this._getOverscaledTileIDFromLngLatZoom(u,p);return(y=this.getMinMaxElevation(x).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(u){const p=this.getTerrainData(u).tile,y={minElevation:null,maxElevation:null};return p&&p.dem&&(y.minElevation=p.dem.min*this.exaggeration,y.maxElevation=p.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(u,p){const y=a.U.fromLngLat(u.wrap()),x=(1<<p)*a.N,E=y.x*x,M=y.y*x,N=Math.floor(E/a.N),z=Math.floor(M/a.N);return{tileID:new a.O(p,0,p,N,z),mercatorX:E,mercatorY:M}}_allowMercatorOverflow(u,p){const y=u.x<this.painter.width/2;let x=a.bf(p);const E=this.painter.transform.center.lng;return y&&Math.sign(x)>0&&Math.sign(E)<0||!y&&Math.sign(x)<0&&Math.sign(E)>0?(x=360*Math.sign(E)+x,a.G(x)):p}}class VC{constructor(u,p,y){this._context=u,this._size=p,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(y.texture),{id:u,fbo:p,texture:y,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>u.id!==p),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(u=>!u.inUse)===!1}}const No={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Sm{constructor(u,p){this.painter=u,this.terrain=p,this.pool=new VC(u.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter(y=>!u._layers[y].isHidden(p)),this._coordsDescendingInv={};for(const y in u.sourceCaches){this._coordsDescendingInv[y]={};const x=u.sourceCaches[y].getVisibleCoordinates();for(const E of x){const M=this.terrain.sourceCache.getTerrainCoords(E);for(const N in M)this._coordsDescendingInv[y][N]||(this._coordsDescendingInv[y][N]=[]),this._coordsDescendingInv[y][N].push(M[N])}}this._coordsDescendingInvStr={};for(const y of u._order){const x=u._layers[y],E=x.source;if(No[x.type]&&!this._coordsDescendingInvStr[E]){this._coordsDescendingInvStr[E]={};for(const M in this._coordsDescendingInv[E])this._coordsDescendingInvStr[E][M]=this._coordsDescendingInv[E][M].map(N=>N.key).sort().join()}}for(const y of this._renderableTiles)for(const x in this._coordsDescendingInvStr){const E=this._coordsDescendingInvStr[x][y.tileID.key];E&&E!==y.rttCoords[x]&&(y.rtt=[])}}renderLayer(u){if(u.isHidden(this.painter.transform.zoom))return!1;const p=u.type,y=this.painter,x=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(No[p]&&(this._prevType&&No[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(u.id),!x))return!0;if(No[this._prevType]||No[p]&&x){this._prevType=p;const E=this._stacks.length-1,M=this._stacks[E]||[];for(const N of this._renderableTiles){if(this.pool.isFull()&&(zr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(N),N.rtt[E]){const V=this.pool.getObjectForId(N.rtt[E].id);if(V.stamp===N.rtt[E].stamp){this.pool.useObject(V);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),N.rtt[E]={id:z.id,stamp:z.stamp},y.context.bindFramebuffer.set(z.fbo.framebuffer),y.context.clear({color:a.aT.transparent,stencil:0}),y.currentStencilSource=void 0;for(let V=0;V<M.length;V++){const W=y.style._layers[M[V]],H=W.source?this._coordsDescendingInv[W.source][N.tileID.key]:[N.tileID];y.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),y._renderTileClippingMasks(W,H),y.renderLayer(y,y.style.sourceCaches[W.source],W,H),W.source&&(N.rttCoords[W.source]=this._coordsDescendingInvStr[W.source][N.tileID.key])}}return zr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),No[p]}return!1}}const Rt=h,Wt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Od=w=>{w.touchstart=w.dragStart,w.touchmoveWindow=w.dragMove,w.touchend=w.dragEnd},Dv={showCompass:!0,showZoom:!0,visualizePitch:!1};class Rv{constructor(u,p,y=!1){this.mousedown=M=>{this.startMouse(a.e({},M,{ctrlKey:!0,preventDefault:()=>M.preventDefault()}),d.mousePos(this.element,M)),d.addEventListener(window,"mousemove",this.mousemove),d.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=M=>{this.moveMouse(M,d.mousePos(this.element,M))},this.mouseup=M=>{this.mouseRotate.dragEnd(M),this.mousePitch&&this.mousePitch.dragEnd(M),this.offTemp()},this.touchstart=M=>{M.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=d.touchPos(this.element,M.targetTouches)[0],this.startTouch(M,this._startPos),d.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),d.addEventListener(window,"touchend",this.touchend))},this.touchmove=M=>{M.targetTouches.length!==1?this.reset():(this._lastPos=d.touchPos(this.element,M.targetTouches)[0],this.moveTouch(M,this._lastPos))},this.touchend=M=>{M.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const x=u.dragRotate._mouseRotate.getClickTolerance(),E=u.dragRotate._mousePitch.getClickTolerance();this.element=p,this.mouseRotate=Hf({clickTolerance:x,enable:!0}),this.touchRotate=(({enable:M,clickTolerance:N,bearingDegreesPerPixelMoved:z=.8})=>{const V=new H1;return new Yl({clickTolerance:N,move:(W,H)=>({bearingDelta:(H.x-W.x)*z}),moveStateManager:V,enable:M,assignEvents:Od})})({clickTolerance:x,enable:!0}),this.map=u,y&&(this.mousePitch=Jl({clickTolerance:E,enable:!0}),this.touchPitch=(({enable:M,clickTolerance:N,pitchDegreesPerPixelMoved:z=-.5})=>{const V=new H1;return new Yl({clickTolerance:N,move:(W,H)=>({pitchDelta:(H.y-W.y)*z}),moveStateManager:V,enable:M,assignEvents:Od})})({clickTolerance:E,enable:!0})),d.addEventListener(p,"mousedown",this.mousedown),d.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),d.addEventListener(p,"touchcancel",this.reset)}startMouse(u,p){this.mouseRotate.dragStart(u,p),this.mousePitch&&this.mousePitch.dragStart(u,p),d.disableDrag()}startTouch(u,p){this.touchRotate.dragStart(u,p),this.touchPitch&&this.touchPitch.dragStart(u,p),d.disableDrag()}moveMouse(u,p){const y=this.map,{bearingDelta:x}=this.mouseRotate.dragMove(u,p)||{};if(x&&y.setBearing(y.getBearing()+x),this.mousePitch){const{pitchDelta:E}=this.mousePitch.dragMove(u,p)||{};E&&y.setPitch(y.getPitch()+E)}}moveTouch(u,p){const y=this.map,{bearingDelta:x}=this.touchRotate.dragMove(u,p)||{};if(x&&y.setBearing(y.getBearing()+x),this.touchPitch){const{pitchDelta:E}=this.touchPitch.dragMove(u,p)||{};E&&y.setPitch(y.getPitch()+E)}}off(){const u=this.element;d.removeEventListener(u,"mousedown",this.mousedown),d.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),d.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),d.removeEventListener(window,"touchend",this.touchend),d.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){d.enableDrag(),d.removeEventListener(window,"mousemove",this.mousemove),d.removeEventListener(window,"mouseup",this.mouseup),d.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),d.removeEventListener(window,"touchend",this.touchend)}}let si;function zv(w,u,p){if(w=new a.L(w.lng,w.lat),u){const y=new a.L(w.lng-360,w.lat),x=new a.L(w.lng+360,w.lat),E=p.locationPoint(w).distSqr(u);p.locationPoint(y).distSqr(u)<E?w=y:p.locationPoint(x).distSqr(u)<E&&(w=x)}for(;Math.abs(w.lng-p.center.lng)>180;){const y=p.locationPoint(w);if(y.x>=0&&y.y>=0&&y.x<=p.width&&y.y<=p.height)break;w.lng>p.center.lng?w.lng-=360:w.lng+=360}return w}const Ka={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function nb(w,u,p){const y=w.classList;for(const x in Ka)y.remove(`maplibregl-${p}-anchor-${x}`);y.add(`maplibregl-${p}-anchor-${u}`)}class kc extends a.E{constructor(u){if(super(),this._onKeyPress=p=>{const y=p.code,x=p.charCode||p.keyCode;y!=="Space"&&y!=="Enter"&&x!==32&&x!==13||this.togglePopup()},this._onMapClick=p=>{const y=p.originalEvent.target,x=this._element;this._popup&&(y===x||x.contains(y))&&this.togglePopup()},this._update=p=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!y)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=zv(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),p&&p.type!=="moveend"||(this._pos=this._pos.round()),d.setTransform(this._element,`${Ka[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${x}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const M=this._map.unproject(this._pos),N=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=M.distanceTo(this._lngLat)>20*N?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=p=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=a.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=d.create("div"),this._element.setAttribute("aria-label","Map marker");const p=d.createNS("http://www.w3.org/2000/svg","svg"),y=41,x=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${y}px`),p.setAttributeNS(null,"width",`${x}px`),p.setAttributeNS(null,"viewBox",`0 0 ${x} ${y}`);const E=d.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");const M=d.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const N=d.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"transform","translate(3.0, 29.0)"),N.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ie of z){const ze=d.createNS("http://www.w3.org/2000/svg","ellipse");ze.setAttributeNS(null,"opacity","0.04"),ze.setAttributeNS(null,"cx","10.5"),ze.setAttributeNS(null,"cy","5.80029008"),ze.setAttributeNS(null,"rx",Ie.rx),ze.setAttributeNS(null,"ry",Ie.ry),N.appendChild(ze)}const V=d.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill",this._color);const W=d.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),V.appendChild(W);const H=d.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");const ee=d.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(ee);const ce=d.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ce.setAttributeNS(null,"fill","#FFFFFF");const ue=d.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ge=d.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");const se=d.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#FFFFFF"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962"),ue.appendChild(ge),ue.appendChild(se),M.appendChild(N),M.appendChild(V),M.appendChild(H),M.appendChild(ce),M.appendChild(ue),p.appendChild(M),p.setAttributeNS(null,"height",y*this._scale+"px"),p.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),nb(this._element,this._anchor,"marker"),u&&u.className)for(const p of u.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),d.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=a.L.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const x=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(u){return this._offset=a.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Fr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Mr=0,Zf=!1;const Md={maxWidth:100,unit:"metric"};function $d(w,u,p){const y=p&&p.maxWidth||100,x=w._container.clientHeight/2,E=w.unproject([0,x]),M=w.unproject([y,x]),N=E.distanceTo(M);if(p&&p.unit==="imperial"){const z=3.2808*N;z>5280?Nc(u,y,z/5280,w._getUIString("ScaleControl.Miles")):Nc(u,y,z,w._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?Nc(u,y,N/1852,w._getUIString("ScaleControl.NauticalMiles")):N>=1e3?Nc(u,y,N/1e3,w._getUIString("ScaleControl.Kilometers")):Nc(u,y,N,w._getUIString("ScaleControl.Meters"))}function Nc(w,u,p,y){const x=function(E){const M=Math.pow(10,`${Math.floor(E)}`.length-1);let N=E/M;return N=N>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:function(z){const V=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*V)/V}(N),M*N}(p);w.style.width=u*(x/p)+"px",w.innerHTML=`${x}&nbsp;${y}`}const Fv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Bv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Kf(w){if(w){if(typeof w=="number"){const u=Math.round(Math.abs(w)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,w),"top-left":new a.P(u,u),"top-right":new a.P(-u,u),bottom:new a.P(0,-w),"bottom-left":new a.P(u,-u),"bottom-right":new a.P(-u,-u),left:new a.P(w,0),right:new a.P(-w,0)}}if(w instanceof a.P||Array.isArray(w)){const u=a.P.convert(w);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:a.P.convert(w.center||[0,0]),top:a.P.convert(w.top||[0,0]),"top-left":a.P.convert(w["top-left"]||[0,0]),"top-right":a.P.convert(w["top-right"]||[0,0]),bottom:a.P.convert(w.bottom||[0,0]),"bottom-left":a.P.convert(w["bottom-left"]||[0,0]),"bottom-right":a.P.convert(w["bottom-right"]||[0,0]),left:a.P.convert(w.left||[0,0]),right:a.P.convert(w.right||[0,0])}}return Kf(new a.P(0,0))}const jv={extend:(w,...u)=>a.e(w,...u),run(w){w()},logToElement(w,u=!1,p="log"){const y=window.document.getElementById(p);y&&(u&&(y.innerHTML=""),y.innerHTML+=`<br>${w}`)}},Uv=h;class Bn{static get version(){return Uv}static get workerCount(){return ko.workerCount}static set workerCount(u){ko.workerCount=u}static get maxParallelImageRequests(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(u){a.c.MAX_PARALLEL_IMAGE_REQUESTS=u}static get workerUrl(){return a.c.WORKER_URL}static set workerUrl(u){a.c.WORKER_URL=u}static addProtocol(u,p){a.c.REGISTERED_PROTOCOLS[u]=p}static removeProtocol(u){delete a.c.REGISTERED_PROTOCOLS[u]}}return Bn.Map=class extends J1{constructor(w){if(a.bg.mark(a.bh.create),(w=a.e({},Wt,w)).minZoom!=null&&w.maxZoom!=null&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(w.minPitch!=null&&w.maxPitch!=null&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(w.minPitch!=null&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(w.maxPitch!=null&&w.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new vm(w.minZoom,w.maxZoom,w.minPitch,w.maxPitch,w.renderWorldCopies),{bearingSnap:w.bearingSnap}),this._cooperativeGesturesOnWheel=u=>{this._onCooperativeGesture(u,u[this._metaKey],1)},this._contextLost=u=>{u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=w.interactive,this._cooperativeGestures=w.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=w.maxTileCacheSize,this._maxTileCacheZoomLevels=w.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=w.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=w.preserveDrawingBuffer,this._antialias=w.antialias,this._trackResize=w.trackResize,this._bearingSnap=w.bearingSnap,this._refreshExpiredTiles=w.refreshExpiredTiles,this._fadeDuration=w.fadeDuration,this._crossSourceCollisions=w.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=w.collectResourceTiming,this._renderTaskQueue=new wm,this._controls=[],this._mapId=a.a2(),this._locale=a.e({},Lv,w.locale),this._clickTolerance=w.clickTolerance,this._overridePixelRatio=w.pixelRatio,this._maxCanvasSize=w.maxCanvasSize,this.transformCameraUpdate=w.transformCameraUpdate,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new k(w.transformRequest),typeof w.container=="string"){if(this._container=document.getElementById(w.container),!this._container)throw new Error(`Container '${w.container}' not found.`)}else{if(!(w.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(w.maxBounds&&this.setMaxBounds(w.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const p=$c(y=>{this._trackResize&&!this._removed&&this.resize(y)._update()},50);this._resizeObserver=new ResizeObserver(y=>{u?p(y):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Nv(this,w),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=w.hash&&new Cd(typeof w.hash=="string"&&w.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),w.bounds&&(this.resize(),this.fitBounds(w.bounds,a.e({},w.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=w.localIdeographFontFamily,this._validateStyle=w.validateStyle,w.style&&this.setStyle(w.style,{localIdeographFontFamily:w.localIdeographFontFamily}),w.attributionControl&&this.addControl(new ba({customAttribution:w.customAttribution})),w.maplibreLogo&&this.addControl(new pr,w.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new a.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new a.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new a.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(w,u){if(u===void 0&&(u=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=w.onAdd(this);this._controls.push(w);const y=this._controlPositions[u];return u.indexOf("bottom")!==-1?y.insertBefore(p,y.firstChild):y.appendChild(p),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(w);return u>-1&&this._controls.splice(u,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}calculateCameraOptionsFromTo(w,u,p,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,u,p,y)}resize(w){var u;const p=this._containerDimensions(),y=p[0],x=p[1],E=this._getClampedPixelRatio(y,x);if(this._resizeCanvas(y,x,E),this.painter.resize(y,x,E),this.painter.overLimit()){const N=this.painter.context.gl;this._maxCanvasSize=[N.drawingBufferWidth,N.drawingBufferHeight];const z=this._getClampedPixelRatio(y,x);this._resizeCanvas(y,x,z),this.painter.resize(y,x,z)}this.transform.resize(y,x),(u=this._requestedCameraState)===null||u===void 0||u.resize(y,x);const M=!this._moving;return M&&(this.stop(),this.fire(new a.k("movestart",w)).fire(new a.k("move",w))),this.fire(new a.k("resize",w)),M&&this.fire(new a.k("moveend",w)),this}_getClampedPixelRatio(w,u){const{0:p,1:y}=this._maxCanvasSize,x=this.getPixelRatio(),E=w*x,M=u*x;return Math.min(E>p?p/E:1,M>y?y/M:1)*x}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(et.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.renderWorldCopies=w,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(w){return this._cooperativeGestures=w,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(w){return this.transform.locationPoint(a.L.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.pointLocation(a.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,u,p){if(w==="mouseenter"||w==="mouseover"){let y=!1;return{layer:u,listener:p,delegates:{mousemove:E=>{const M=this.getLayer(u)?this.queryRenderedFeatures(E.point,{layers:[u]}):[];M.length?y||(y=!0,p.call(this,new xa(w,this,E.originalEvent,{features:M}))):y=!1},mouseout:()=>{y=!1}}}}if(w==="mouseleave"||w==="mouseout"){let y=!1;return{layer:u,listener:p,delegates:{mousemove:M=>{(this.getLayer(u)?this.queryRenderedFeatures(M.point,{layers:[u]}):[]).length?y=!0:y&&(y=!1,p.call(this,new xa(w,this,M.originalEvent)))},mouseout:M=>{y&&(y=!1,p.call(this,new xa(w,this,M.originalEvent)))}}}}{const y=x=>{const E=this.getLayer(u)?this.queryRenderedFeatures(x.point,{layers:[u]}):[];E.length&&(x.features=E,p.call(this,x),delete x.features)};return{layer:u,listener:p,delegates:{[w]:y}}}}on(w,u,p){if(p===void 0)return super.on(w,u);const y=this._createDelegatedListener(w,u,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(y);for(const x in y.delegates)this.on(x,y.delegates[x]);return this}once(w,u,p){if(p===void 0)return super.once(w,u);const y=this._createDelegatedListener(w,u,p);for(const x in y.delegates)this.once(x,y.delegates[x]);return this}off(w,u,p){return p===void 0?super.off(w,u):(this._delegatedListeners&&this._delegatedListeners[w]&&(y=>{const x=this._delegatedListeners[w];for(let E=0;E<x.length;E++){const M=x[E];if(M.layer===u&&M.listener===p){for(const N in M.delegates)this.off(N,M.delegates[N]);return x.splice(E,1),this}}})(),this)}queryRenderedFeatures(w,u){if(!this.style)return[];let p;const y=w instanceof a.P||Array.isArray(w),x=y?w:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(y?{}:w)||{},x instanceof a.P||typeof x[0]=="number")p=[a.P.convert(x)];else{const E=a.P.convert(x[0]),M=a.P.convert(x[1]);p=[E,new a.P(M.x,E.y),M,new a.P(E.x,M.y),E]}return this.style.queryRenderedFeatures(p,u,this.transform)}querySourceFeatures(w,u){return this.style.querySourceFeatures(w,u)}setStyle(w,u){return(u=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(w,u))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const u=this._locale[w];if(u==null)throw new Error(`Missing UI string '${w}'`);return u}_updateStyle(w,u){if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,u));const p=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Zi(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,u,p):this.style.loadJSON(w,u,p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Zi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,u){if(typeof w=="string"){const p=this._requestManager.transformRequest(w,O.Style);a.f(p,(y,x)=>{y?this.fire(new a.j(y)):x&&this._updateDiff(x,u)})}else typeof w=="object"&&this._updateDiff(w,u)}_updateDiff(w,u){try{this.style.setState(w,u)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(w,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(w,u){return this._lazyInitEmptyStyle(),this.style.addSource(w,u),this._update(!0)}isSourceLoaded(w){const u=this.style&&this.style.sourceCaches[w];if(u!==void 0)return u.loaded();this.fire(new a.j(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const u=this.style.sourceCaches[w.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);for(const p in this.style._layers){const y=this.style._layers[p];y.type==="hillshade"&&y.source===w.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new tb(this.painter,u,w),this.painter.renderToTexture=new Sm(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=p=>{p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==w.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:w})),this}getTerrain(){var w,u;return(u=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const u in w){const p=w[u]._tiles;for(const y in p){const x=p[y];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}addSourceType(w,u,p){return this._lazyInitEmptyStyle(),this.style.addSourceType(w,u,p)}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}addImage(w,u,p={}){const{pixelRatio:y=1,sdf:x=!1,stretchX:E,stretchY:M,content:N}=p;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||a.a(u))){if(u.width===void 0||u.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:V,data:W}=u,H=u;return this.style.addImage(w,{data:new a.R({width:z,height:V},new Uint8Array(W)),pixelRatio:y,stretchX:E,stretchY:M,content:N,sdf:x,version:0,userImage:H}),H.onAdd&&H.onAdd(this,w),this}}{const{width:z,height:V,data:W}=a.h.getImageData(u);this.style.addImage(w,{data:new a.R({width:z,height:V},W),pixelRatio:y,stretchX:E,stretchY:M,content:N,sdf:x,version:0})}}updateImage(w,u){const p=this.style.getImage(w);if(!p)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=u instanceof HTMLImageElement||a.a(u)?a.h.getImageData(u):u,{width:x,height:E,data:M}=y;if(x===void 0||E===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(x!==p.data.width||E!==p.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const N=!(u instanceof HTMLImageElement||a.a(u));return p.data.replace(M,N),this.style.updateImage(w,p),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w,u){$.getImage(this._requestManager.transformRequest(w,O.Image),u)}listImages(){return this.style.listImages()}addLayer(w,u){return this._lazyInitEmptyStyle(),this.style.addLayer(w,u),this._update(!0)}moveLayer(w,u){return this.style.moveLayer(w,u),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,u,p){return this.style.setLayerZoomRange(w,u,p),this._update(!0)}setFilter(w,u,p={}){return this.style.setFilter(w,u,p),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,u,p,y={}){return this.style.setPaintProperty(w,u,p,y),this._update(!0)}getPaintProperty(w,u){return this.style.getPaintProperty(w,u)}setLayoutProperty(w,u,p,y={}){return this.style.setLayoutProperty(w,u,p,y),this._update(!0)}getLayoutProperty(w,u){return this.style.getLayoutProperty(w,u)}setGlyphs(w,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,u,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,u,p,y=>{y||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,u,p=>{p||this._update(!0)}),this}setLight(w,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(w,u){return this.style.setFeatureState(w,u),this._update()}removeFeatureState(w,u){return this.style.removeFeatureState(w,u),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,u=0;return this._container&&(w=this._container.clientWidth||400,u=this._container.clientHeight||300),[w,u]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const u=this._canvasContainer=d.create("div","maplibregl-canvas-container",w);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=d.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),y=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],y);const x=this._controlContainer=d.create("div","maplibregl-control-container",w),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{E[M]=d.create("div",`maplibregl-ctrl-${M} `,x)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=d.create("div","maplibregl-cooperative-gesture-screen",this._container);let w=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(w=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${w}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){d.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(w,u,p){this._canvas.width=Math.floor(p*w),this._canvas.height=Math.floor(p*u),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const w={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let u=null;this._canvas.addEventListener("webglcontextcreationerror",y=>{u={requestedAttributes:w},y&&(u.statusMessage=y.statusMessage,u.type=y.type)},{once:!0});const p=this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w);if(!p){const y="Failed to initialize WebGL";throw u?(u.message=y,new Error(JSON.stringify(u))):new Error(y)}this.painter=new Mc(p,this.transform),g.testSupport(p)}_onCooperativeGesture(w,u,p){return!u&&p<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){const u=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let p=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const x=this.transform.zoom,E=a.h.now();this.style.zoomHistory.update(x,E);const M=new a.a8(x,{now:E,fadeDuration:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),N=M.crossFadingFactor();N===1&&N===this._crossFadingFactor||(p=!0,this._crossFadingFactor=N),this.style.update(M)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bg.mark(a.bh.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||p)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const y=this._sourcesDirty||this._styleDirty||this._placementDirty;return y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||y||(this._fullyLoaded=!0,a.bg.mark(a.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),d.remove(this._canvasContainer),d.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.bg.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.h.frame(w=>{a.bg.frame(w),this._frame=null,this._render(w)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Rt}getCameraTargetElevation(){return this.transform.elevation}},Bn.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const u=this._map.getZoom(),p=u===this._map.getMaxZoom(),y=u===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=u},this._setButtonTitle=(u,p)=>{const y=this._map._getUIString(`NavigationControl.${p}`);u.title=y,u.setAttribute("aria-label",y)},this.options=a.e({},Dv,w),this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),d.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),d.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=d.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rv(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){d.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,u){const p=d.create("button",w,this._container);return p.type="button",p.addEventListener("click",u),p}},Bn.GeolocateControl=class extends a.E{constructor(w){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",u)),this._finish()}},this._updateCamera=u=>{const p=new a.L(u.coords.longitude,u.coords.latitude),y=u.coords.accuracy,x=this._map.getBearing(),E=a.e({bearing:x},this.options.fitBoundsOptions),M=et.fromLngLat(p,y);this._map.fitBounds(M,E,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const p=new a.L(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=u=>{if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&Zf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=u=>{if(this._map){if(this._container.addEventListener("contextmenu",p=>p.preventDefault()),this._geolocateButton=d.create("button","maplibregl-ctrl-geolocate",this._container),d.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",u===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=d.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new kc({element:this._dotElement}),this._circleElement=d.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new kc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p.originalEvent&&p.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")))})}},this.options=a.e({},Fr,w)}onAdd(w){return this._map=w,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(u,p=!1){si===void 0||p?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(y=>{si=y.state!=="denied",u(si)}).catch(()=>{si=!!window.navigator.geolocation,u(si)}):(si=!!window.navigator.geolocation,u(si)):u(si)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),d.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Mr=0,Zf=!1}_isOutOfMapMaxBounds(w){const u=this._map.getMaxBounds(),p=w.coords;return u&&(p.longitude<u.getWest()||p.longitude>u.getEast()||p.latitude<u.getSouth()||p.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const w=this._map.getBounds(),u=w.getSouthEast(),p=w.getNorthEast(),y=u.distanceTo(p),x=Math.ceil(this._accuracy/(y/this._map._container.clientHeight)*2);this._circleElement.style.width=`${x}px`,this._circleElement.style.height=`${x}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Mr--,Zf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Mr++,Mr>1?(w={maximumAge:6e5,timeout:0},Zf=!0):(w=this.options.positionOptions,Zf=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Bn.AttributionControl=ba,Bn.LogoControl=pr,Bn.ScaleControl=class{constructor(w){this._onMove=()=>{$d(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,$d(this._map,this._container,this.options)},this.options=a.e({},Md,w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){d.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Bn.FullscreenControl=class extends a.E{constructor(w={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=d.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){d.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=d.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);d.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Bn.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=w}onAdd(w){return this._map=w,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=d.create("button","maplibregl-ctrl-terrain",this._container),d.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){d.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Bn.Popup=class extends a.E{constructor(w){super(),this.remove=()=>(this._content&&d.remove(this._content),this._container&&(d.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.k("close")),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=d.create("div","maplibregl-popup",this._map.getContainer()),this._tip=d.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=zv(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!u)return;const p=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);let y=this.options.anchor;const x=Kf(this.options.offset);if(!y){const M=this._container.offsetWidth,N=this._container.offsetHeight;let z;z=p.y+x.bottom.y<N?["top"]:p.y>this._map.transform.height-N?["bottom"]:[],p.x<M/2?z.push("left"):p.x>this._map.transform.width-M/2&&z.push("right"),y=z.length===0?"bottom":z.join("-")}const E=p.add(x[y]).round();d.setTransform(this._container,`${Ka[y]} translate(${E.x}px,${E.y}px)`),nb(this._container,y,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Fv),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=a.L.convert(w),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const u=document.createDocumentFragment(),p=document.createElement("body");let y;for(p.innerHTML=w;y=p.firstChild,y;)u.appendChild(y);return this.setDOMContent(u)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=d.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){this._container&&this._container.classList.add(w)}removeClassName(w){this._container&&this._container.classList.remove(w)}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}_createCloseButton(){this.options.closeButton&&(this._closeButton=d.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Bv);w&&w.focus()}},Bn.Marker=kc,Bn.Style=Zi,Bn.LngLat=a.L,Bn.LngLatBounds=et,Bn.Point=a.P,Bn.MercatorCoordinate=a.U,Bn.Evented=a.E,Bn.AJAXError=a.bi,Bn.config=a.c,Bn.CanvasSource=We,Bn.GeoJSONSource=Vt,Bn.ImageSource=dt,Bn.RasterDEMTileSource=St,Bn.RasterTileSource=Yt,Bn.VectorTileSource=zt,Bn.VideoSource=vt,Bn.setRTLTextPlugin=a.bj,Bn.getRTLTextPluginStatus=a.bk,Bn.prewarm=function(){Bu().acquire(cn)},Bn.clearPrewarmedResources=function(){const w=Va;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(cn),Va=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},jv.extend(Bn,{isSafari:a.ac,getPerformanceMetrics:a.bg.getPerformanceMetrics}),Bn});var l=i;return l})})(nG);var s0=nG.exports;const KTe=hr(s0),YTe=b6({__proto__:null,default:KTe},[s0]);var iG={},JTe=Object.defineProperty,QTe=(e,t,n)=>t in e?JTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tF=(e,t,n)=>(QTe(e,typeof t!="symbol"?t+"":t,n),n),oG=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},su=(e,t,n)=>(oG(e,t,"read from private field"),n?n.call(e):t.get(e)),nF=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},tP=(e,t,n,r)=>(oG(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);function Xr(){}function ePe(e,t){for(const n in t)e[n]=t[n];return e}function aG(e){return e()}function rF(){return Object.create(null)}function Rf(e){e.forEach(aG)}function sG(e){return typeof e=="function"}function hd(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let dw;function ha(e,t){return e===t?!0:(dw||(dw=document.createElement("a")),dw.href=t,e===dw.href)}function tPe(e){return Object.keys(e).length===0}function nPe(e,t,n,r){if(e){const i=lG(e,t,n,r);return e[0](i)}}function lG(e,t,n,r){return e[1]&&r?ePe(n.ctx.slice(),e[1](r(t))):n.ctx}function rPe(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],l=Math.max(t.dirty.length,i.length);for(let a=0;a<l;a+=1)o[a]=t.dirty[a]|i[a];return o}return t.dirty|i}return t.dirty}function iPe(e,t,n,r,i,o){if(i){const l=lG(t,n,r,o);e.p(l,i)}}function oPe(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function iF(e){return e??""}function qn(e,t){e.appendChild(t)}function oi(e,t,n){e.insertBefore(t,n||null)}function Kr(e){e.parentNode&&e.parentNode.removeChild(e)}function vr(e){return document.createElement(e)}function mc(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function qh(e){return document.createTextNode(e)}function Is(){return qh(" ")}function aPe(){return qh("")}function Oa(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function sPe(e){return function(t){return t.preventDefault(),e.call(this,t)}}function ot(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function lPe(e){return Array.from(e.childNodes)}function _x(e,t){t=""+t,e.data!==t&&(e.data=t)}function oF(e,t){e.value=t??""}function xl(e,t,n){e.classList.toggle(t,!!n)}function uPe(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let xx;function l0(e){xx=e}function uG(){if(!xx)throw new Error("Function called outside component initialization");return xx}function cPe(e){uG().$$.on_destroy.push(e)}function fPe(){const e=uG();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=uPe(t,n,{cancelable:r});return i.slice().forEach(l=>{l.call(e,o)}),!o.defaultPrevented}return!0}}function aF(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const Hm=[],qO=[];let Sg=[];const sF=[],hPe=Promise.resolve();let WO=!1;function dPe(){WO||(WO=!0,hPe.then(cG))}function HO(e){Sg.push(e)}const nP=new Set;let qm=0;function cG(){if(qm!==0)return;const e=xx;do{try{for(;qm<Hm.length;){const t=Hm[qm];qm++,l0(t),pPe(t.$$)}}catch(t){throw Hm.length=0,qm=0,t}for(l0(null),Hm.length=0,qm=0;qO.length;)qO.pop()();for(let t=0;t<Sg.length;t+=1){const n=Sg[t];nP.has(n)||(nP.add(n),n())}Sg.length=0}while(Hm.length);for(;sF.length;)sF.pop()();WO=!1,nP.clear(),l0(e)}function pPe(e){if(e.fragment!==null){e.update(),Rf(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(HO)}}function mPe(e){const t=[],n=[];Sg.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Sg=t}const Gw=new Set;let op;function qw(){op={r:0,c:[],p:op}}function Ww(){op.r||Rf(op.c),op=op.p}function Oi(e,t){e&&e.i&&(Gw.delete(e),e.i(t))}function go(e,t,n,r){if(e&&e.o){if(Gw.has(e))return;Gw.add(e),op.c.push(()=>{Gw.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function lF(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function gPe(e,t){go(e,1,1,()=>{t.delete(e.key)})}function yPe(e,t,n,r,i,o,l,a,h,d,g,v){let b=e.length,I=o.length,T=b;const P={};for(;T--;)P[e[T].key]=T;const $=[],O=new Map,k=new Map,R=[];for(T=I;T--;){const G=v(i,o,T),Z=n(G);let ne=l.get(Z);ne?r&&R.push(()=>ne.p(G,t)):(ne=d(Z,G),ne.c()),O.set(Z,$[T]=ne),Z in P&&k.set(Z,Math.abs(T-P[Z]))}const j=new Set,F=new Set;function U(G){Oi(G,1),G.m(a,g),l.set(G.key,G),g=G.first,I--}for(;b&&I;){const G=$[I-1],Z=e[b-1],ne=G.key,oe=Z.key;G===Z?(g=G.first,b--,I--):O.has(oe)?!l.has(ne)||j.has(ne)?U(G):F.has(oe)?b--:k.get(ne)>k.get(oe)?(F.add(ne),U(G)):(j.add(oe),b--):(h(Z,l),b--)}for(;b--;){const G=e[b];O.has(G.key)||h(G,l)}for(;I;)U($[I-1]);return Rf(R),$}function Wh(e){e&&e.c()}function vf(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),HO(()=>{const o=e.$$.on_mount.map(aG).filter(sG);e.$$.on_destroy?e.$$.on_destroy.push(...o):Rf(o),e.$$.on_mount=[]}),i.forEach(HO)}function _f(e,t){const n=e.$$;n.fragment!==null&&(mPe(n.after_update),Rf(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function vPe(e,t){e.$$.dirty[0]===-1&&(Hm.push(e),dPe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function dd(e,t,n,r,i,o,l=null,a=[-1]){const h=xx;l0(e);const d=e.$$={fragment:null,ctx:[],props:o,update:Xr,not_equal:i,bound:rF(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:rF(),dirty:a,skip_bound:!1,root:t.target||h.$$.root};l&&l(d.root);let g=!1;if(d.ctx=n?n(e,t.props||{},(v,b,...I)=>{const T=I.length?I[0]:b;return d.ctx&&i(d.ctx[v],d.ctx[v]=T)&&(!d.skip_bound&&d.bound[v]&&d.bound[v](T),g&&vPe(e,v)),b}):[],d.update(),g=!0,Rf(d.before_update),d.fragment=r?r(d.ctx):!1,t.target){if(t.hydrate){const v=lPe(t.target);d.fragment&&d.fragment.l(v),v.forEach(Kr)}else d.fragment&&d.fragment.c();t.intro&&Oi(e.$$.fragment),vf(e,t.target,t.anchor),cG()}l0(h)}class pd{constructor(){tF(this,"$$"),tF(this,"$$set")}$destroy(){_f(this,1),this.$destroy=Xr}$on(t,n){if(!sG(n))return Xr;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!tPe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const _Pe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_Pe);function xPe(e){let t,n;return{c(){t=mc("svg"),n=mc("path"),ot(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),ot(t,"viewBox","0 0 14 14"),ot(t,"width","13"),ot(t,"height","13"),ot(t,"class","svelte-en2qvf")},m(r,i){oi(r,t,i),qn(t,n)},p:Xr,i:Xr,o:Xr,d(r){r&&Kr(t)}}}class fG extends pd{constructor(t){super(),dd(this,t,null,xPe,hd,{})}}function bPe(e){let t,n;return{c(){t=mc("svg"),n=mc("path"),ot(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),ot(t,"viewBox","0 0 30 30"),ot(t,"fill","none"),ot(t,"xmlns","http://www.w3.org/2000/svg"),ot(t,"class","svelte-d2loi5")},m(r,i){oi(r,t,i),qn(t,n)},p:Xr,i:Xr,o:Xr,d(r){r&&Kr(t)}}}class hG extends pd{constructor(t){super(),dd(this,t,null,bPe,hd,{})}}function wPe(e){let t,n;return{c(){t=vr("img"),ha(t.src,n=e[3]+"area.svg")||ot(t,"src",n),ot(t,"alt",e[6]),ot(t,"class","svelte-ltkwvy")},m(r,i){oi(r,t,i)},p(r,i){i&8&&!ha(t.src,n=r[3]+"area.svg")&&ot(t,"src",n),i&64&&ot(t,"alt",r[6])},d(r){r&&Kr(t)}}}function SPe(e){let t,n;return{c(){t=vr("img"),ha(t.src,n=e[3]+"reverse.svg")||ot(t,"src",n),ot(t,"alt",e[6]),ot(t,"class","svelte-ltkwvy")},m(r,i){oi(r,t,i)},p(r,i){i&8&&!ha(t.src,n=r[3]+"reverse.svg")&&ot(t,"src",n),i&64&&ot(t,"alt",r[6])},d(r){r&&Kr(t)}}}function EPe(e){let t,n;return{c(){t=vr("img"),ha(t.src,n=e[3]+"poi.svg")||ot(t,"src",n),ot(t,"alt",e[6]),ot(t,"class","svelte-ltkwvy")},m(r,i){oi(r,t,i)},p(r,i){i&8&&!ha(t.src,n=r[3]+"poi.svg")&&ot(t,"src",n),i&64&&ot(t,"alt",r[6])},d(r){r&&Kr(t)}}}function CPe(e){let t,n;return{c(){t=vr("img"),ha(t.src,n=e[3]+"postal_code.svg")||ot(t,"src",n),ot(t,"alt",e[6]),ot(t,"class","svelte-ltkwvy")},m(r,i){oi(r,t,i)},p(r,i){i&8&&!ha(t.src,n=r[3]+"postal_code.svg")&&ot(t,"src",n),i&64&&ot(t,"alt",r[6])},d(r){r&&Kr(t)}}}function IPe(e){let t,n;return{c(){t=vr("img"),ha(t.src,n=e[3]+"street.svg")||ot(t,"src",n),ot(t,"alt",e[6]),ot(t,"class","svelte-ltkwvy")},m(r,i){oi(r,t,i)},p(r,i){i&8&&!ha(t.src,n=r[3]+"street.svg")&&ot(t,"src",n),i&64&&ot(t,"alt",r[6])},d(r){r&&Kr(t)}}}function TPe(e){let t,n;return{c(){t=vr("img"),ha(t.src,n=e[3]+"road.svg")||ot(t,"src",n),ot(t,"alt",e[6]),ot(t,"class","svelte-ltkwvy")},m(r,i){oi(r,t,i)},p(r,i){i&8&&!ha(t.src,n=r[3]+"road.svg")&&ot(t,"src",n),i&64&&ot(t,"alt",r[6])},d(r){r&&Kr(t)}}}function PPe(e){let t,n;return{c(){t=vr("img"),ha(t.src,n=e[3]+"housenumber.svg")||ot(t,"src",n),ot(t,"alt",e[6]),ot(t,"class","svelte-ltkwvy")},m(r,i){oi(r,t,i)},p(r,i){i&8&&!ha(t.src,n=r[3]+"housenumber.svg")&&ot(t,"src",n),i&64&&ot(t,"alt",r[6])},d(r){r&&Kr(t)}}}function APe(e){let t,n,r,i;return{c(){t=vr("img"),ha(t.src,n=e[5])||ot(t,"src",n),ot(t,"alt",e[4]),ot(t,"class","svelte-ltkwvy")},m(o,l){oi(o,t,l),r||(i=Oa(t,"error",e[14]),r=!0)},p(o,l){l&32&&!ha(t.src,n=o[5])&&ot(t,"src",n),l&16&&ot(t,"alt",o[4])},d(o){o&&Kr(t),r=!1,i()}}}function uF(e){let t,n;return{c(){t=vr("span"),n=qh(e[6]),ot(t,"class","secondary svelte-ltkwvy")},m(r,i){oi(r,t,i),qn(t,n)},p(r,i){i&64&&_x(n,r[6])},d(r){r&&Kr(t)}}}function OPe(e){var t,n;let r,i,o,l,a,h,d,g,v=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"",b,I,T=e[2]==="always"||e[2]&&!e[0].address&&((t=e[0].properties)==null?void 0:t.kind)!=="road"&&((n=e[0].properties)==null?void 0:n.kind)!=="road_relation"&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7],P,$,O=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"",k,R,j;function F(ne,oe){var ye,fe;return oe&1&&(i=null),oe&1&&(o=null),oe&1&&(l=null),ne[5]?APe:ne[0].address?PPe:((ye=ne[0].properties)==null?void 0:ye.kind)==="road"||((fe=ne[0].properties)==null?void 0:fe.kind)==="road_relation"?TPe:(i==null&&(i=!!ne[0].id.startsWith("address.")),i?IPe:(o==null&&(o=!!ne[0].id.startsWith("postal_code.")),o?CPe:(l==null&&(l=!!ne[0].id.startsWith("poi.")),l?EPe:ne[7]?SPe:wPe)))}let U=F(e,-1),G=U(e),Z=T&&uF(e);return{c(){r=vr("li"),G.c(),a=Is(),h=vr("span"),d=vr("span"),g=vr("span"),b=qh(v),I=Is(),Z&&Z.c(),P=Is(),$=vr("span"),k=qh(O),ot(g,"class","primary svelte-ltkwvy"),ot(d,"class","svelte-ltkwvy"),ot($,"class","line2 svelte-ltkwvy"),ot(h,"class","texts svelte-ltkwvy"),ot(r,"tabindex","0"),ot(r,"data-selected",e[1]),ot(r,"class","svelte-ltkwvy"),xl(r,"selected",e[1])},m(ne,oe){oi(ne,r,oe),G.m(r,null),qn(r,a),qn(r,h),qn(h,d),qn(d,g),qn(g,b),qn(d,I),Z&&Z.m(d,null),qn(h,P),qn(h,$),qn($,k),R||(j=[Oa(r,"mouseenter",e[12]),Oa(r,"focus",e[13])],R=!0)},p(ne,[oe]){var ye,fe;U===(U=F(ne,oe))&&G?G.p(ne,oe):(G.d(1),G=U(ne),G&&(G.c(),G.m(r,a))),oe&1&&v!==(v=(ne[7]?ne[0].place_name:ne[0].place_name.replace(/,.*/,""))+"")&&_x(b,v),oe&37&&(T=ne[2]==="always"||ne[2]&&!ne[0].address&&((ye=ne[0].properties)==null?void 0:ye.kind)!=="road"&&((fe=ne[0].properties)==null?void 0:fe.kind)!=="road_relation"&&!ne[0].id.startsWith("address.")&&!ne[0].id.startsWith("postal_code.")&&(!ne[0].id.startsWith("poi.")||!ne[5])&&!ne[7]),T?Z?Z.p(ne,oe):(Z=uF(ne),Z.c(),Z.m(d,null)):Z&&(Z.d(1),Z=null),oe&1&&O!==(O=(ne[7]?"":ne[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&_x(k,O),oe&2&&ot(r,"data-selected",ne[1]),oe&2&&xl(r,"selected",ne[1])},i:Xr,o:Xr,d(ne){ne&&Kr(r),G.d(),Z&&Z.d(),R=!1,Rf(j)}}}function MPe(e,t,n){var r;let i,o,{feature:l}=t,{selected:a=!1}=t,{showPlaceType:h}=t,{missingIconsCache:d}=t,{iconsBaseUrl:g}=t;const v=(r=l.properties)==null?void 0:r.categories;let b,I,T=0,P=l.place_type[0]==="reverse";function $(j){I&&d.add(I),n(10,T++,T)}function O(j){aF.call(this,e,j)}function k(j){aF.call(this,e,j)}const R=j=>$(j.currentTarget);return e.$$set=j=>{"feature"in j&&n(0,l=j.feature),"selected"in j&&n(1,a=j.selected),"showPlaceType"in j&&n(2,h=j.showPlaceType),"missingIconsCache"in j&&n(9,d=j.missingIconsCache),"iconsBaseUrl"in j&&n(3,g=j.iconsBaseUrl)},e.$$.update=()=>{var j,F,U,G;if(e.$$.dirty&3640)do n(11,i--,i),n(4,b=v==null?void 0:v[i]),n(5,I=b?g+b.replace(/ /g,"_")+".svg":void 0);while(i>-1&&(!I||d.has(I)));e.$$.dirty&1&&n(6,o=l.id.startsWith("poi.")?(F=(j=l.properties)==null?void 0:j.categories)==null?void 0:F.join(", "):((G=(U=l.properties)==null?void 0:U.place_type_name)==null?void 0:G[0])??l.place_type[0])},n(11,i=(v==null?void 0:v.length)??0),[l,a,h,g,b,I,o,P,$,d,T,i,O,k,R]}class $Pe extends pd{constructor(t){super(),dd(this,t,MPe,OPe,hd,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function kPe(e){let t;return{c(){t=vr("div"),t.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',ot(t,"class","svelte-7cmwmc")},m(n,r){oi(n,t,r)},p:Xr,i:Xr,o:Xr,d(n){n&&Kr(t)}}}class NPe extends pd{constructor(t){super(),dd(this,t,null,kPe,hd,{})}}function LPe(e){let t,n,r;return{c(){t=mc("svg"),n=mc("path"),ot(n,"stroke-width","4"),ot(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),ot(n,"class","svelte-gzo3ar"),ot(t,"width",r=e[0]==="list"?20:void 0),ot(t,"viewBox","0 0 70 85"),ot(t,"fill","none"),ot(t,"class","svelte-gzo3ar"),xl(t,"in-map",e[0]!=="list"),xl(t,"list-icon",e[0]==="list")},m(i,o){oi(i,t,o),qn(t,n)},p(i,[o]){o&1&&r!==(r=i[0]==="list"?20:void 0)&&ot(t,"width",r),o&1&&xl(t,"in-map",i[0]!=="list"),o&1&&xl(t,"list-icon",i[0]==="list")},i:Xr,o:Xr,d(i){i&&Kr(t)}}}function DPe(e,t,n){let{displayIn:r}=t;return e.$$set=i=>{"displayIn"in i&&n(0,r=i.displayIn)},[r]}class RPe extends pd{constructor(t){super(),dd(this,t,DPe,LPe,hd,{displayIn:0})}}function zPe(e){let t,n;return{c(){t=mc("svg"),n=mc("path"),ot(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),ot(t,"viewBox","0 0 60.006 21.412"),ot(t,"width","14"),ot(t,"height","20"),ot(t,"class","svelte-en2qvf")},m(r,i){oi(r,t,i),qn(t,n)},p:Xr,i:Xr,o:Xr,d(r){r&&Kr(t)}}}class FPe extends pd{constructor(t){super(),dd(this,t,null,zPe,hd,{})}}function BPe(e){let t,n;return{c(){t=mc("svg"),n=mc("path"),ot(n,"d","M13.101 14.261 8.74 9.899a4.797 4.797 0 0 1-1.425.748 5.165 5.165 0 0 1-1.603.248c-1.446 0-2.677-.5-3.693-1.503S.495 7.164.495 5.717c0-1.446.508-2.678 1.524-3.693C3.035 1.008 4.266.5 5.712.5c1.448 0 2.672.508 3.675 1.524 1.002 1.015 1.503 2.247 1.503 3.693 0 .558-.08 1.092-.239 1.603-.159.512-.411.98-.757 1.405l4.382 4.4a.74.74 0 0 1 .229.568.81.81 0 0 1-.249.568.787.787 0 0 1-.577.239.787.787 0 0 1-.578-.239ZM5.712 9.223c.97 0 1.796-.342 2.48-1.026a3.378 3.378 0 0 0 1.026-2.48c0-.982-.34-1.818-1.016-2.509-.677-.69-1.507-1.035-2.49-1.035a3.42 3.42 0 0 0-2.509 1.035 3.42 3.42 0 0 0-1.035 2.51c0 .982.345 1.812 1.035 2.488.691.678 1.527 1.017 2.51 1.017Z"),ot(t,"width","14"),ot(t,"height","14"),ot(t,"viewBox","0 0 15 15"),ot(t,"class","svelte-en2qvf")},m(r,i){oi(r,t,i),qn(t,n)},p:Xr,i:Xr,o:Xr,d(r){r&&Kr(t)}}}class jPe extends pd{constructor(t){super(),dd(this,t,null,BPe,hd,{})}}function UPe(e,t,n){const r=t[1],i=t[0],o=r-i;return e===r&&n?e:((e-i)%o+o)%o+i}function cF(e){const t=[...e];return t[2]<t[0]&&(t[2]+=360),t}let A_;async function VPe(e,t,n){const r=e==null?void 0:e.getCenterAndZoom();for(const i of t??[])if(!(r&&(i.minZoom!=null&&i.minZoom>r[0]||i.maxZoom!=null&&i.maxZoom<r[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(A_&&i.cachedLocationExpiry&&A_.time+i.cachedLocationExpiry>Date.now()){if(!A_.coords)break e;return A_.coords}let o;try{return o=await new Promise((l,a)=>{n.signal.addEventListener("abort",()=>{a(Error("aborted"))}),navigator.geolocation.getCurrentPosition(h=>{l([h.coords.longitude,h.coords.latitude].map(d=>d.toFixed(6)).join(","))},h=>{a(h)},i)}),o}catch{}finally{i.cachedLocationExpiry&&(A_={time:Date.now(),coords:o})}if(n.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(r&&i.type==="map-center")return r[1].toFixed(6)+","+r[2].toFixed(6)}}const fF=/(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(EAST|WEST|[EW])?/i,hF=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?/i,dF=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?/i,pF=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(EAST|WEST|[EW])?/i;function GPe(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){if(e=="DD")return this.decimalCoordinates;const t=this.decimalCoordinates.split(",").map(l=>Number(l.trim()));let n=mF(t[0],e),r=mF(t[1],e);n.endsWith('.0"')&&r.endsWith('.0"')&&(n=n.replace(/\.0"$/,'"'),r=r.replace(/\.0"$/,'"'));const i=t[0]>=0?" N":" S",o=t[1]>=0?" E":" W";return`${n+i}, ${r+o}`}else throw new Error("no decimal coordinates to convert")}function mF(e,t){const n=Math.abs(e),r=Math.floor(n),i=(n-r)*60;if(t=="DM"){let a=qPe(i,3).toFixed(3).padStart(6,"0");return`${r} ${a}'`}let o=Math.floor(i),l=((i-o)*60).toFixed(1).padStart(4,"0");return o=o.toString().padStart(2,"0"),`${r} ${o}' ${l}"`}function qPe(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function Wk(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,r=null,i="",o="",l=[],a=!1;if(fF.test(e))if(l=fF.exec(e),a=pw(l),a){if(n=l[2],r=l[6],n.includes(",")&&(n=n.replace(",",".")),r.includes(",")&&(r=r.replace(",",".")),Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(r))==Number(r))throw new Error("integer only coordinate provided");l[1]?(i=l[1],o=l[5]):l[4]&&(i=l[4],o=l[8])}else throw new Error("invalid decimal coordinate format");else if(hF.test(e))if(l=hF.exec(e),a=pw(l),a)n=Math.abs(parseInt(l[2])),l[4]&&(n+=l[4]/60),l[6]&&(n+=l[6].replace(",",".")/3600),parseInt(l[2])<0&&(n=-1*n),r=Math.abs(parseInt(l[9])),l[11]&&(r+=l[11]/60),l[13]&&(r+=l[13].replace(",",".")/3600),parseInt(l[9])<0&&(r=-1*r),l[1]?(i=l[1],o=l[8]):l[7]&&(i=l[7],o=l[14]);else throw new Error("invalid DMS coordinates format");else if(dF.test(e))if(l=dF.exec(e),a=pw(l),a)n=Math.abs(parseInt(l[2])),l[4]&&(n+=l[4]/60),l[6]&&(n+=l[6]/3600),parseInt(l[2])<0&&(n=-1*n),r=Math.abs(parseInt(l[10])),l[12]&&(r+=l[12]/60),l[14]&&(r+=l[14]/3600),parseInt(l[10])<0&&(r=-1*r),l[1]?(i=l[1],o=l[9]):l[8]&&(i=l[8],o=l[16]);else throw new Error("invalid DMS coordinates format");else if(pF.test(e))if(l=pF.exec(e),a=pw(l),a)n=Math.abs(parseInt(l[2])),l[4]&&(n+=l[4]/60),l[6]&&(n+=l[6]/3600),parseInt(l[2])<0&&(n=-1*n),r=Math.abs(parseInt(l[10])),l[12]&&(r+=l[12]/60),l[14]&&(r+=l[14]/3600),parseInt(l[10])<0&&(r=-1*r),l[1]?(i=l[1],o=l[9]):l[8]&&(i=l[8],o=l[16]);else throw new Error("invalid coordinates format");if(a){if(Math.abs(r)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if((i||o)&&(!i||!o))throw new Error("invalid coordinates format");if(i&&i==o)throw new Error("invalid coordinates format");let h=/S|SOUTH/i;h.test(i)&&n>0&&(n=-1*n),h=/W|WEST/i,h.test(o)&&r>0&&(r=-1*r);const d=l[0].trim();let g,v;const b=/[,/;\u0020]/g,I=d.match(b);if(I==null){const $=Math.floor(e.length/2);g=d.substring(0,$).trim(),v=d.substring($).trim()}else{let $;I.length%2==1?$=Math.floor(I.length/2):$=I.length/2-1;let O=0;if($==0)O=d.indexOf(I[0]),g=d.substring(0,O).trim(),v=d.substring(O+1).trim();else{let k=0,R=0;for(;k<=$;)O=d.indexOf(I[k],R),R=O+1,k++;g=d.substring(0,O).trim(),v=d.substring(O+1).trim()}}const T=g.split(".");if(T.length==2&&T[1]==0&&T[1].length!=2)throw new Error("invalid coordinates format");const P=v.split(".");if(P.length==2&&P[1]==0&&P[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(g)||/^\d+$/.test(v))throw new Error("degree only coordinate/s provided");return isNaN(n)&&n.includes(",")&&(n=n.replace(",",".")),n=Number(Number(n).toFixed(t)),isNaN(r)&&r.includes(",")&&(r=r.replace(",",".")),r=Number(Number(r).toFixed(t)),Object.freeze({verbatimCoordinates:d,verbatimLatitude:g,verbatimLongitude:v,decimalLatitude:n,decimalLongitude:r,decimalCoordinates:`${n},${r}`,closeEnough:WPe,toCoordinateFormat:GPe})}else throw new Error("coordinates pattern match failed")}function pw(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,r=/[eastsouthnorthwest]+/i,i=t.length/2;for(let o=0;o<i;o++){const l=t[o],a=t[o+i],h=n.test(l)&&n.test(a),d=r.test(l)&&r.test(a),g=l==a;if(!(l==null&&a==null)){if(l==null||a==null)return!1;if(h||d||g)continue;return!1}}return!0}function gF(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function WPe(e){if(e.includes(",")){const t=e.split(",");if(Number(t[0])==NaN||Number(t[1])==NaN)throw new Error("coords are not valid decimals");return gF(this.decimalLatitude,Number(t[0]))&&gF(this.decimalLongitude,t[1])}else throw new Error("coords being tested must be separated by a comma")}const HPe=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});Wk.to=HPe;const XPe=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:'40 7 22.8" N 74 7 22.8" W',verbatimLatitude:'40 7 22.8" N',verbatimLongitude:'74 7 22.8" W'},{verbatimCoordinates:"40 7.38 , -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"N40722.8, W74722.8",verbatimLatitude:"N40722.8",verbatimLongitude:"W74722.8"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:`407'22.8"N, 747'22.8"W`,verbatimLatitude:`407'22.8"N`,verbatimLongitude:`747'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123,-74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40723"N 74723"W',verbatimLatitude:'40723"N',verbatimLongitude:'74723"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40723"S 74723"E',verbatimLatitude:'40723"S',verbatimLongitude:'74723"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40723" -74723"',verbatimLatitude:'40723"',verbatimLongitude:'-74723"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7 23" N 74d 7 23" W',verbatimLatitude:'40d 7 23" N',verbatimLongitude:'74d 7 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],ZPe={decimalLatitude:40.123,decimalLongitude:-74.123},KPe=[{verbatimCoordinates:`504'17.698"south, 1424'2.826"east`,verbatimLatitude:`504'17.698"south`,verbatimLongitude:`1424'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"402647N 795836W",verbatimLatitude:"402647N",verbatimLongitude:"795836W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26 47 N 79d 58 36 W",verbatimLatitude:"40d 26 47 N",verbatimLongitude:"79d 58 36 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195 79,948862",verbatimLatitude:"40,446195",verbatimLongitude:"79,948862",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40 26.7717, -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"1824S 2245E",verbatimLatitude:"1824S",verbatimLongitude:"2245E",decimalLatitude:-18.4,decimalLongitude:22.75}],YPe=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245 S / 28.2344 E",verbatimLatitude:"-23.3245 S",verbatimLongitude:"28.2344 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40 26.7717 -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563   E22.45634 ",verbatimLatitude:"S23.43563 ",verbatimLongitude:"E22.45634 ",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372 S 23,07771 E",verbatimLatitude:"27,71372 S",verbatimLongitude:"23,07771 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222}];function JPe(){const e=[];return XPe.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...ZPe})}),[...e,...KPe,...YPe]}const QPe=JPe();Wk.formats=QPe.map(e=>e.verbatimCoordinates);const eAe=Wk;function yF(e,t,n){const r=e.slice();return r[81]=t[n],r[83]=n,r}function vF(e){let t,n;return t=new NPe({}),{c(){Wh(t.$$.fragment)},m(r,i){vf(t,r,i),n=!0},i(r){n||(Oi(t.$$.fragment,r),n=!0)},o(r){go(t.$$.fragment,r),n=!1},d(r){_f(t,r)}}}function _F(e){let t,n,r,i,o;return n=new FPe({}),{c(){t=vr("button"),Wh(n.$$.fragment),ot(t,"type","button"),ot(t,"title",e[9]),ot(t,"class","svelte-1r7dvt7"),xl(t,"active",e[0])},m(l,a){oi(l,t,a),vf(n,t,null),r=!0,i||(o=Oa(t,"click",e[67]),i=!0)},p(l,a){(!r||a[0]&512)&&ot(t,"title",l[9]),(!r||a[0]&1)&&xl(t,"active",l[0])},i(l){r||(Oi(n.$$.fragment,l),r=!0)},o(l){go(n.$$.fragment,l),r=!1},d(l){l&&Kr(t),_f(n),i=!1,o()}}}function tAe(e){let t,n=[],r=new Map,i,o,l,a=lF(e[14]);const h=d=>d[81].id+(d[81].address?","+d[81].address:"");for(let d=0;d<a.length;d+=1){let g=yF(e,a,d),v=h(g);r.set(v,n[d]=xF(v,g))}return{c(){t=vr("ul");for(let d=0;d<n.length;d+=1)n[d].c();ot(t,"class","svelte-1r7dvt7")},m(d,g){oi(d,t,g);for(let v=0;v<n.length;v+=1)n[v]&&n[v].m(t,null);i=!0,o||(l=[Oa(t,"mouseleave",e[71]),Oa(t,"blur",e[72])],o=!0)},p(d,g){g[0]&17880064&&(a=lF(d[14]),qw(),n=yPe(n,g,h,1,d,a,r,t,gPe,xF,null,yF),Ww())},i(d){if(!i){for(let g=0;g<a.length;g+=1)Oi(n[g]);i=!0}},o(d){for(let g=0;g<n.length;g+=1)go(n[g]);i=!1},d(d){d&&Kr(t);for(let g=0;g<n.length;g+=1)n[g].d();o=!1,Rf(l)}}}function nAe(e){let t,n,r,i,o,l;return n=new hG({}),{c(){t=vr("div"),Wh(n.$$.fragment),r=Is(),i=vr("div"),o=qh(e[7]),ot(i,"class","svelte-1r7dvt7"),ot(t,"class","no-results svelte-1r7dvt7")},m(a,h){oi(a,t,h),vf(n,t,null),qn(t,r),qn(t,i),qn(i,o),l=!0},p(a,h){(!l||h[0]&128)&&_x(o,a[7])},i(a){l||(Oi(n.$$.fragment,a),l=!0)},o(a){go(n.$$.fragment,a),l=!1},d(a){a&&Kr(t),_f(n)}}}function rAe(e){let t="",n;return{c(){n=qh(t)},m(r,i){oi(r,n,i)},p:Xr,i:Xr,o:Xr,d(r){r&&Kr(n)}}}function iAe(e){let t,n,r,i,o,l,a,h,d,g,v;return n=new hG({}),h=new fG({}),{c(){t=vr("div"),Wh(n.$$.fragment),r=Is(),i=vr("div"),o=qh(e[6]),l=Is(),a=vr("button"),Wh(h.$$.fragment),ot(i,"class","svelte-1r7dvt7"),ot(a,"class","svelte-1r7dvt7"),ot(t,"class","error svelte-1r7dvt7")},m(b,I){oi(b,t,I),vf(n,t,null),qn(t,r),qn(t,i),qn(i,o),qn(t,l),qn(t,a),vf(h,a,null),d=!0,g||(v=Oa(a,"click",e[68]),g=!0)},p(b,I){(!d||I[0]&64)&&_x(o,b[6])},i(b){d||(Oi(n.$$.fragment,b),Oi(h.$$.fragment,b),d=!0)},o(b){go(n.$$.fragment,b),go(h.$$.fragment,b),d=!1},d(b){b&&Kr(t),_f(n),_f(h),g=!1,v()}}}function xF(e,t){let n,r,i;function o(){return t[69](t[83])}function l(){return t[70](t[81])}return r=new $Pe({props:{feature:t[81],showPlaceType:t[10],selected:t[15]===t[83],missingIconsCache:t[20],iconsBaseUrl:t[12]}}),r.$on("mouseenter",o),r.$on("focus",l),{key:e,first:null,c(){n=aPe(),Wh(r.$$.fragment),this.first=n},m(a,h){oi(a,n,h),vf(r,a,h),i=!0},p(a,h){t=a;const d={};h[0]&16384&&(d.feature=t[81]),h[0]&1024&&(d.showPlaceType=t[10]),h[0]&49152&&(d.selected=t[15]===t[83]),h[0]&4096&&(d.iconsBaseUrl=t[12]),r.$set(d)},i(a){i||(Oi(r.$$.fragment,a),i=!0)},o(a){go(r.$$.fragment,a),i=!1},d(a){a&&Kr(n),_f(r,a)}}}function oAe(e){let t,n,r,i,o,l,a,h,d,g,v,b,I,T,P,$,O,k,R,j,F,U=!1;o=new jPe({}),v=new fG({});let G=e[19]&&vF(),Z=e[5]===!0&&_F(e);const ne=e[59].default,oe=nPe(ne,e,e[58],null),ye=[iAe,rAe,nAe,tAe],fe=[];function $e(ae,be){var Te,Le;return ae[18]?0:ae[16]?((Te=ae[14])==null?void 0:Te.length)===0?2:ae[16]&&(Le=ae[14])!=null&&Le.length?3:-1:1}return~($=$e(e))&&(O=fe[$]=ye[$](e)),{c(){t=Is(),n=vr("form"),r=vr("div"),i=vr("button"),Wh(o.$$.fragment),l=Is(),a=vr("input"),h=Is(),d=vr("div"),g=vr("button"),Wh(v.$$.fragment),b=Is(),G&&G.c(),I=Is(),Z&&Z.c(),T=Is(),oe&&oe.c(),P=Is(),O&&O.c(),ot(i,"class","search-button svelte-1r7dvt7"),ot(i,"type","button"),ot(a,"placeholder",e[8]),ot(a,"aria-label",e[8]),ot(a,"class","svelte-1r7dvt7"),ot(g,"type","button"),ot(g,"title",e[3]),ot(g,"class","svelte-1r7dvt7"),ot(d,"class","clear-button-container svelte-1r7dvt7"),xl(d,"displayable",e[1]!==""),ot(r,"class","input-group svelte-1r7dvt7"),ot(n,"tabindex","0"),ot(n,"class",k=iF(e[2])+" svelte-1r7dvt7"),xl(n,"can-collapse",e[4]&&e[1]==="")},m(ae,be){oi(ae,t,be),oi(ae,n,be),qn(n,r),qn(r,i),vf(o,i,null),qn(r,l),qn(r,a),e[61](a),oF(a,e[1]),qn(r,h),qn(r,d),qn(d,g),vf(v,g,null),qn(d,b),G&&G.m(d,null),qn(r,I),Z&&Z.m(r,null),qn(r,T),oe&&oe.m(r,null),qn(n,P),~$&&fe[$].m(n,null),R=!0,j||(F=[Oa(i,"click",e[60]),Oa(a,"input",e[62]),Oa(a,"focus",e[63]),Oa(a,"blur",e[64]),Oa(a,"keydown",e[22]),Oa(a,"input",e[65]),Oa(g,"click",e[66]),Oa(n,"submit",sPe(e[21]))],j=!0)},p(ae,be){(!R||be[0]&256)&&ot(a,"placeholder",ae[8]),(!R||be[0]&256)&&ot(a,"aria-label",ae[8]),be[0]&2&&a.value!==ae[1]&&oF(a,ae[1]),(!R||be[0]&8)&&ot(g,"title",ae[3]),ae[19]?G?be[0]&524288&&Oi(G,1):(G=vF(),G.c(),Oi(G,1),G.m(d,null)):G&&(qw(),go(G,1,1,()=>{G=null}),Ww()),(!R||be[0]&2)&&xl(d,"displayable",ae[1]!==""),ae[5]===!0?Z?(Z.p(ae,be),be[0]&32&&Oi(Z,1)):(Z=_F(ae),Z.c(),Oi(Z,1),Z.m(r,T)):Z&&(qw(),go(Z,1,1,()=>{Z=null}),Ww()),oe&&oe.p&&(!R||be[1]&134217728)&&iPe(oe,ne,ae,ae[58],R?rPe(ne,ae[58],be,null):oPe(ae[58]),null);let Te=$;$=$e(ae),$===Te?~$&&fe[$].p(ae,be):(O&&(qw(),go(fe[Te],1,1,()=>{fe[Te]=null}),Ww()),~$?(O=fe[$],O?O.p(ae,be):(O=fe[$]=ye[$](ae),O.c()),Oi(O,1),O.m(n,null)):O=null),(!R||be[0]&4&&k!==(k=iF(ae[2])+" svelte-1r7dvt7"))&&ot(n,"class",k),(!R||be[0]&22)&&xl(n,"can-collapse",ae[4]&&ae[1]==="")},i(ae){R||(Oi(U),Oi(o.$$.fragment,ae),Oi(v.$$.fragment,ae),Oi(G),Oi(Z),Oi(oe,ae),Oi(O),R=!0)},o(ae){go(U),go(o.$$.fragment,ae),go(v.$$.fragment,ae),go(G),go(Z),go(oe,ae),go(O),R=!1},d(ae){ae&&(Kr(t),Kr(n)),_f(o),e[61](null),_f(v),G&&G.d(),Z&&Z.d(),oe&&oe.d(ae),~$&&fe[$].d(),j=!1,Rf(F)}}}function aAe(e,t,n){let r,{$$slots:i={},$$scope:o}=t,{class:l=void 0}=t,{apiKey:a}=t,{bbox:h=void 0}=t,{clearButtonTitle:d="clear"}=t,{clearOnBlur:g=!1}=t,{collapsed:v=!1}=t,{country:b=void 0}=t,{debounceSearch:I=200}=t,{enableReverse:T=!1}=t,{errorMessage:P="Something went wrong"}=t,{filter:$=()=>!0}=t,{flyTo:O=!0}=t,{fuzzyMatch:k=!0}=t,{language:R=void 0}=t,{limit:j=void 0}=t,{mapController:F=void 0}=t,{minLength:U=2}=t,{noResultsMessage:G="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=t,{placeholder:Z="Search"}=t,{proximity:ne=[{type:"server-geolocation"}]}=t,{reverseActive:oe=T==="always"}=t,{reverseButtonTitle:ye="toggle reverse geocoding"}=t,{searchValue:fe=""}=t,{showFullGeometry:$e=!0}=t,{showPlaceType:ae="ifNeeded"}=t,{showResultsWhileTyping:be=!0}=t,{selectFirst:Te=!0}=t,{flyToSelected:Le=!1}=t,{markerOnSelected:Ee=!0}=t,{types:de=void 0}=t,{excludeTypes:De=!1}=t,{zoom:He=16}=t,{maxZoom:je=18}=t,{apiUrl:et="https://api.maptiler.com/geocoding"}=t,{fetchParameters:Et={}}=t,{iconsBaseUrl:zt="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.0/icons/"}=t,{adjustUrlQuery:Yt=Q=>{}}=t;function St(){yn.focus()}function Vt(){yn.blur()}function Qe(Q,he=!0){n(1,fe=Q),he?(n(15,sn=-1),Va()):(Yo(),setTimeout(()=>{yn.focus(),yn.select()}))}function dt(){n(14,Ot=void 0),n(55,Tt=void 0),n(15,sn=-1)}function vt(){n(54,Ct=[]),n(55,Tt=void 0)}let We=!1,Ot,Ct,Tt,Tn="",yn,sn=-1,br,Ge=[],Dn,ar,bn,cn;const ko=new Set,Di=fPe();cPe(()=>{F&&(F.setEventHandler(void 0),F.indicateReverse(!1),F.setSelectedMarker(-1),F.setMarkers(void 0,void 0))});function Va(Q){if(ar&&(clearTimeout(ar),ar=void 0),sn>-1&&Ot)n(55,Tt=Ot[sn]),n(1,fe=Tt.place_type[0]==="reverse"?Tt.place_name:Tt.place_name.replace(/,.*/,"")),n(18,br=void 0),n(54,Ct=void 0),n(15,sn=-1);else if(fe){const he=Q||!Bu(fe);Ys(fe,{exact:!0}).then(()=>{n(54,Ct=Ot),n(55,Tt=void 0),he&&Js()}).catch(Ae=>n(18,br=Ae))}}function Bu(Q){try{return eAe(Q,6)}catch{return!1}}async function Ys(Q,{byId:he=!1,exact:Ae=!1}={}){n(18,br=void 0),Dn==null||Dn.abort();const we=new AbortController;n(19,Dn=we);try{const pe=Bu(Q),Ce=new URLSearchParams;if(R!==void 0&&Ce.set("language",Array.isArray(R)?R.join(","):R??""),de&&Ce.set("types",de.join(",")),De&&Ce.set("excludeTypes",String(De)),h&&Ce.set("bbox",h.map(Dt=>Dt.toFixed(6)).join(",")),b&&Ce.set("country",Array.isArray(b)?b.join(","):b),!he&&!pe){const Dt=await VPe(F,ne,we);Dt&&Ce.set("proximity",Dt),(Ae||!be)&&Ce.set("autocomplete","false"),Ce.set("fuzzyMatch",String(k))}j!==void 0&&(!pe||(de==null?void 0:de.length)===1)&&Ce.set("limit",String(j)),Ce.set("key",a),Yt(Ce);const Xe=et+"/"+encodeURIComponent(pe?pe.decimalLongitude+","+pe.decimalLatitude:Q)+".json?"+Ce.toString();if(Xe===Tn){he?(n(14,Ot=void 0),n(55,Tt=Ge[0])):n(14,Ot=Ge);return}Tn=Xe;const Ze=await fetch(Xe,{signal:we.signal,...Et});if(!Ze.ok)throw new Error(await Ze.text());const Ye=await Ze.json();Di("response",{url:Xe,featureCollection:Ye}),he?(n(14,Ot=void 0),n(55,Tt=Ye.features[0]),Ge=[Tt]):(n(14,Ot=Ye.features.filter($)),pe&&Ot.unshift({type:"Feature",properties:{},id:"reverse_"+pe.decimalLongitude+"_"+pe.decimalLatitude,text:pe.decimalLatitude+", "+pe.decimalLongitude,place_name:pe.decimalLatitude+", "+pe.decimalLongitude,place_type:["reverse"],center:[pe.decimalLongitude,pe.decimalLatitude],bbox:[pe.decimalLongitude,pe.decimalLatitude,pe.decimalLongitude,pe.decimalLatitude],geometry:{type:"Point",coordinates:[pe.decimalLongitude,pe.decimalLatitude]}}),Ge=Ot,pe&&yn.focus())}catch(pe){if(pe&&typeof pe=="object"&&"name"in pe&&pe.name==="AbortError")return;throw pe}finally{we===Dn&&n(19,Dn=void 0)}}function Js(){var Q;if(!(Ct!=null&&Ct.length)||!O)return;const he=[180,90,-180,-90],Ae=!Ct.some(we=>!we.matching_text);for(const we of Ct)if(Ae||!we.matching_text)for(const pe of[0,1,2,3])he[pe]=Math[pe<2?"min":"max"](he[pe],((Q=we.bbox)==null?void 0:Q[pe])??we.center[pe%2]);F&&Ct.length>0&&(Tt&&he[0]===he[2]&&he[1]===he[3]?F.flyTo(Tt.center,He):F.fitBounds(cF(he),50,je))}function Wl(Q){n(0,oe=T==="always"),n(14,Ot=void 0),n(55,Tt=void 0),n(15,sn=-1),Qe(Q[1].toFixed(6)+", "+UPe(Q[0],[-180,180],!0).toFixed(6),!1)}function ut(Q){if(!Ot)return;let he=Q.key==="ArrowDown"?1:Q.key==="ArrowUp"?-1:0;he&&(sn===(Te?0:-1)&&he===-1&&n(15,sn=Ot.length),n(15,sn+=he),sn>=Ot.length&&n(15,sn=-1),sn<0&&Te&&n(15,sn=0),Q.preventDefault())}function Yo(Q=!0){if(n(18,br=void 0),be){if(ar&&clearTimeout(ar),fe.length<U)return;const he=fe;ar=window.setTimeout(()=>{Ys(he).catch(Ae=>n(18,br=Ae))},Q?I:0)}else n(14,Ot=void 0),n(18,br=void 0)}function sr(Q){n(55,Tt=Q),n(1,fe=Q.place_name),n(15,sn=-1)}const Hl=()=>yn.focus();function gs(Q){qO[Q?"unshift":"push"](()=>{yn=Q,n(17,yn)})}function ft(){fe=this.value,n(1,fe),n(13,We),n(27,g)}const ln=()=>n(13,We=!0),en=()=>n(13,We=!1),Hi=()=>Yo(),Ga=()=>{n(1,fe=""),yn.focus()},rn=()=>n(0,oe=!oe),ys=()=>n(18,br=void 0),me=Q=>n(15,sn=Q),K=Q=>sr(Q),J=()=>{Te||n(15,sn=-1)},ie=()=>{};return e.$$set=Q=>{"class"in Q&&n(2,l=Q.class),"apiKey"in Q&&n(25,a=Q.apiKey),"bbox"in Q&&n(26,h=Q.bbox),"clearButtonTitle"in Q&&n(3,d=Q.clearButtonTitle),"clearOnBlur"in Q&&n(27,g=Q.clearOnBlur),"collapsed"in Q&&n(4,v=Q.collapsed),"country"in Q&&n(28,b=Q.country),"debounceSearch"in Q&&n(29,I=Q.debounceSearch),"enableReverse"in Q&&n(5,T=Q.enableReverse),"errorMessage"in Q&&n(6,P=Q.errorMessage),"filter"in Q&&n(30,$=Q.filter),"flyTo"in Q&&n(31,O=Q.flyTo),"fuzzyMatch"in Q&&n(32,k=Q.fuzzyMatch),"language"in Q&&n(33,R=Q.language),"limit"in Q&&n(34,j=Q.limit),"mapController"in Q&&n(35,F=Q.mapController),"minLength"in Q&&n(36,U=Q.minLength),"noResultsMessage"in Q&&n(7,G=Q.noResultsMessage),"placeholder"in Q&&n(8,Z=Q.placeholder),"proximity"in Q&&n(37,ne=Q.proximity),"reverseActive"in Q&&n(0,oe=Q.reverseActive),"reverseButtonTitle"in Q&&n(9,ye=Q.reverseButtonTitle),"searchValue"in Q&&n(1,fe=Q.searchValue),"showFullGeometry"in Q&&n(38,$e=Q.showFullGeometry),"showPlaceType"in Q&&n(10,ae=Q.showPlaceType),"showResultsWhileTyping"in Q&&n(39,be=Q.showResultsWhileTyping),"selectFirst"in Q&&n(11,Te=Q.selectFirst),"flyToSelected"in Q&&n(40,Le=Q.flyToSelected),"markerOnSelected"in Q&&n(41,Ee=Q.markerOnSelected),"types"in Q&&n(42,de=Q.types),"excludeTypes"in Q&&n(43,De=Q.excludeTypes),"zoom"in Q&&n(44,He=Q.zoom),"maxZoom"in Q&&n(45,je=Q.maxZoom),"apiUrl"in Q&&n(46,et=Q.apiUrl),"fetchParameters"in Q&&n(47,Et=Q.fetchParameters),"iconsBaseUrl"in Q&&n(12,zt=Q.iconsBaseUrl),"adjustUrlQuery"in Q&&n(48,Yt=Q.adjustUrlQuery),"$$scope"in Q&&n(58,o=Q.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&134225920&&setTimeout(()=>{n(16,bn=We),g&&!We&&n(1,fe="")}),e.$$.dirty[0]&16386|e.$$.dirty[1]&32&&fe.length<U&&(n(55,Tt=void 0),n(14,Ot=void 0),n(18,br=void 0),n(54,Ct=Ot)),e.$$.dirty[1]&16777344&&$e&&Tt&&!Tt.address&&Tt.geometry.type==="Point"&&Tt.place_type[0]!=="reverse"&&Ys(Tt.id,{byId:!0}).catch(Q=>n(18,br=Q)),e.$$.dirty[1]&50356241&&(F&&Tt&&Tt.id!==cn&&O&&(!Tt.bbox||Tt.bbox[0]===Tt.bbox[2]&&Tt.bbox[1]===Tt.bbox[3]?F.flyTo(Tt.center,Tt.id.startsWith("poi.")||Tt.id.startsWith("address.")?je:He):F.fitBounds(cF(Tt.bbox),50,je),n(14,Ot=void 0),n(54,Ct=void 0),n(15,sn=-1)),n(56,cn=Tt==null?void 0:Tt.id)),e.$$.dirty[0]&18432&&Te&&Ot!=null&&Ot.length&&n(15,sn=0),e.$$.dirty[0]&2050&&(Te||n(15,sn=-1)),e.$$.dirty[0]&16384|e.$$.dirty[1]&8388608&&Ct!==Ot&&n(54,Ct=void 0),e.$$.dirty[0]&81921|e.$$.dirty[1]&8388624&&F&&F.setEventHandler(Q=>{switch(Q.type){case"mapClick":oe&&Wl(Q.coordinates);break;case"markerClick":{const he=Ot==null?void 0:Ot.find(Ae=>Ae.id===Q.id);he&&sr(he)}break;case"markerMouseEnter":Ct&&n(15,sn=bn?(Ot==null?void 0:Ot.findIndex(he=>he.id===Q.id))??-1:-1);break;case"markerMouseLeave":Ct&&n(15,sn=-1);break}}),e.$$.dirty[0]&49152&&n(57,r=Ot==null?void 0:Ot[sn]),e.$$.dirty[1]&67133969&&F&&r&&O&&Le&&F.flyTo(r.center,r.id.startsWith("poi.")||r.id.startsWith("address.")?je:He),e.$$.dirty[1]&1040&&(Ee||F==null||F.setMarkers(void 0,void 0)),e.$$.dirty[1]&75498512&&F&&Ee&&!Ct&&(F.setMarkers(r?[r]:void 0,void 0),F.setSelectedMarker(r?0:-1)),e.$$.dirty[1]&25165840&&F&&F.setMarkers(Ct,Tt),e.$$.dirty[0]&32768|e.$$.dirty[1]&8388624&&Ct&&F&&F.setSelectedMarker(sn),e.$$.dirty[0]&2|e.$$.dirty[1]&16&&F){const Q=Bu(fe);F.setReverseMarker(Q?[Q.decimalLongitude,Q.decimalLatitude]:void 0)}e.$$.dirty[1]&67108864&&Di("select",r),e.$$.dirty[1]&16777216&&Di("pick",Tt),e.$$.dirty[0]&81920&&Di("optionsVisibilityChange",bn&&!!Ot),e.$$.dirty[0]&16384&&Di("featuresListed",Ot),e.$$.dirty[1]&8388608&&Di("featuresMarked",Ct),e.$$.dirty[0]&1&&Di("reverseToggle",oe),e.$$.dirty[0]&2&&Di("queryChange",fe),e.$$.dirty[0]&1|e.$$.dirty[1]&16&&F&&F.indicateReverse(oe)},[oe,fe,l,d,v,T,P,G,Z,ye,ae,Te,zt,We,Ot,sn,bn,yn,br,Dn,ko,Va,ut,Yo,sr,a,h,g,b,I,$,O,k,R,j,F,U,ne,$e,be,Le,Ee,de,De,He,je,et,Et,Yt,St,Vt,Qe,dt,vt,Ct,Tt,cn,r,o,i,Hl,gs,ft,ln,en,Hi,Ga,rn,ys,me,K,J,ie]}let sAe=class extends pd{constructor(e){super(),dd(this,e,aAe,oAe,hd,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}};/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function lAe(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function a(d){return function(g){return h([d,g])}}function h(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(g){d=[6,g],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Hh=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function uAe(e,t){return e>t?1:e<t?-1:0}function bh(e,t,n){for(var r=new Hh(null,null),i=r,o=r;;){var l=n(e,t.key);if(l<0){if(t.left===null)break;if(n(e,t.left.key)<0){var a=t.left;if(t.left=a.right,a.right=t,t=a,t.left===null)break}o.left=t,o=t,t=t.left}else if(l>0){if(t.right===null)break;if(n(e,t.right.key)>0){var a=t.right;if(t.right=a.left,a.left=t,t=a,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=r.right,t.right=r.left,t}function rP(e,t,n,r){var i=new Hh(e,t);if(n===null)return i.left=i.right=null,i;n=bh(e,n,r);var o=r(e,n.key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function bF(e,t,n){var r=null,i=null;if(t){t=bh(e,t,n);var o=n(t.key,e);o===0?(r=t.left,i=t.right):o<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function cAe(e,t,n){return t===null?e:(e===null||(t=bh(e.key,t,n),t.left=e),t)}function XO(e,t,n,r,i){if(e){r(""+t+(n?" ":" ")+i(e)+`
`);var o=t+(n?"    ":"   ");e.left&&XO(e.left,o,!1,r,i),e.right&&XO(e.right,o,!0,r,i)}}var Hk=function(){function e(t){t===void 0&&(t=uAe),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=rP(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new Hh(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,o=bh(t,this._root,i),l=i(t,o.key);return l===0?this._root=o:(l<0?(r.left=o.left,r.right=o,o.left=null):l>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var i;if(n===null)return null;n=bh(t,n,r);var o=r(t,n.key);return o===0?(n.left===null?i=n.right:(i=bh(t,n.left,r),i.right=n.right),this._size--,i):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=bh(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=bh(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,i=[],o=!1;!o;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),t.call(n,r),r=r.right):o=!0;return this},e.prototype.range=function(t,n,r,i){for(var o=[],l=this._comparator,a=this._root,h;o.length!==0||a;)if(a)o.push(a),a=a.left;else{if(a=o.pop(),h=l(a.key,n),h>0)break;if(l(a.key,t)>=0&&r.call(i,a))return this;a=a.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,i=0,o=[];!r;)if(n)o.push(n),n=n.left;else if(o.length>0){if(n=o.pop(),i===t)return n;i++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return hAe(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=t.length,o=this._comparator;if(r&&YO(t,n,0,i-1,o),this._root===null)this._root=ZO(t,n,0,i),this._size=i;else{var l=dAe(this.toList(),fAe(t,n),o);i=this._size+i,this._root=KO({head:l},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return XO(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var i=this._comparator,o=bF(t,this._root,i),l=o.left,a=o.right;i(t,n)<0?a=rP(n,r,a,i):l=rP(n,r,l,i),this._root=cAe(l,a,i)},e.prototype.split=function(t){return bF(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,r;return lAe(this,function(i){switch(i.label){case 0:t=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function ZO(e,t,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),l=e[o],a=t[o],h=new Hh(l,a);return h.left=ZO(e,t,n,o),h.right=ZO(e,t,o+1,r),h}return null}function fAe(e,t){for(var n=new Hh(null,null),r=n,i=0;i<e.length;i++)r=r.next=new Hh(e[i],t[i]);return r.next=null,n.next}function hAe(e){for(var t=e,n=[],r=!1,i=new Hh(null,null),o=i;!r;)t?(n.push(t),t=t.left):n.length>0?(t=o=o.next=n.pop(),t=t.right):r=!0;return o.next=null,i.next}function KO(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=KO(e,t,i),l=e.head;return l.left=o,e.head=e.head.next,l.right=KO(e,i+1,n),l}return null}function dAe(e,t,n){for(var r=new Hh(null,null),i=r,o=e,l=t;o!==null&&l!==null;)n(o.key,l.key)<0?(i.next=o,o=o.next):(i.next=l,l=l.next),i=i.next;return o!==null?i.next=o:l!==null&&(i.next=l),r.next}function YO(e,t,n,r,i){if(!(n>=r)){for(var o=e[n+r>>1],l=n-1,a=r+1;;){do l++;while(i(e[l],o)<0);do a--;while(i(e[a],o)>0);if(l>=a)break;var h=e[l];e[l]=e[a],e[a]=h,h=t[l],t[l]=t[a],t[a]=h}YO(e,t,n,a,i),YO(e,t,a+1,r,i)}}function Vl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function La(e,t,n){return t&&wF(e.prototype,t),n&&wF(e,n),e}var O_=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},JO=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,o=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},Ch=Number.EPSILON;Ch===void 0&&(Ch=Math.pow(2,-52));var pAe=Ch*Ch,QO=function(e,t){if(-Ch<e&&e<Ch&&-Ch<t&&t<Ch)return 0;var n=e-t;return n*n<pAe*e*t?0:e<t?-1:1},mAe=function(){function e(){Vl(this,e),this.reset()}return La(e,[{key:"reset",value:function(){this.xRounder=new SF,this.yRounder=new SF}},{key:"round",value:function(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}]),e}(),SF=function(){function e(){Vl(this,e),this.tree=new Hk,this.round(0)}return La(e,[{key:"round",value:function(t){var n=this.tree.add(t),r=this.tree.prev(n);if(r!==null&&QO(n.key,r.key)===0)return this.tree.remove(t),r.key;var i=this.tree.next(n);return i!==null&&QO(n.key,i.key)===0?(this.tree.remove(t),i.key):t}}]),e}(),bx=new mAe,u0=function(e,t){return e.x*t.y-e.y*t.x},dG=function(e,t){return e.x*t.x+e.y*t.y},EF=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},o=u0(r,i);return QO(o,0)},wE=function(e){return Math.sqrt(dG(e,e))},gAe=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return u0(i,r)/wE(i)/wE(r)},yAe=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return dG(i,r)/wE(i)/wE(r)},CF=function(e,t,n){return t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},IF=function(e,t,n){return t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},vAe=function(e,t,n,r){if(t.x===0)return IF(n,r,e.x);if(r.x===0)return IF(e,t,n.x);if(t.y===0)return CF(n,r,e.y);if(r.y===0)return CF(e,t,n.y);var i=u0(t,r);if(i==0)return null;var o={x:n.x-e.x,y:n.y-e.y},l=u0(o,t)/i,a=u0(o,r)/i,h=e.x+a*t.x,d=n.x+l*r.x,g=e.y+a*t.y,v=n.y+l*r.y,b=(h+d)/2,I=(g+v)/2;return{x:b,y:I}},nc=function(){La(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:SE.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}}]);function e(t,n){Vl(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}return La(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var n=t.point.events,r=0,i=n.length;r<i;r++){var o=n[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,n=0;n<t;n++){var r=this.point.events[n];if(r.segment.consumedBy===void 0)for(var i=n+1;i<t;i++){var o=this.point.events[i];o.consumedBy===void 0&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],n=0,r=this.point.events.length;n<r;n++){var i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var n=this,r=new Map,i=function(o){var l=o.otherSE;r.set(o,{sine:gAe(n.point,t.point,l.point),cosine:yAe(n.point,t.point,l.point)})};return function(o,l){r.has(o)||i(o),r.has(l)||i(l);var a=r.get(o),h=a.sine,d=a.cosine,g=r.get(l),v=g.sine,b=g.cosine;return h>=0&&v>=0?d<b?1:d>b?-1:0:h<0&&v<0?d<b?-1:d>b?1:0:v<h?-1:v>h?1:0}}}]),e}(),_Ae=0,SE=function(){La(e,null,[{key:"compare",value:function(t,n){var r=t.leftSE.point.x,i=n.leftSE.point.x,o=t.rightSE.point.x,l=n.rightSE.point.x;if(l<r)return 1;if(o<i)return-1;var a=t.leftSE.point.y,h=n.leftSE.point.y,d=t.rightSE.point.y,g=n.rightSE.point.y;if(r<i){if(h<a&&h<d)return 1;if(h>a&&h>d)return-1;var v=t.comparePoint(n.leftSE.point);if(v<0)return 1;if(v>0)return-1;var b=n.comparePoint(t.rightSE.point);return b!==0?b:-1}if(r>i){if(a<h&&a<g)return-1;if(a>h&&a>g)return 1;var I=n.comparePoint(t.leftSE.point);if(I!==0)return I;var T=t.comparePoint(n.rightSE.point);return T<0?1:T>0?-1:1}if(a<h)return-1;if(a>h)return 1;if(o<l){var P=n.comparePoint(t.rightSE.point);if(P!==0)return P}if(o>l){var $=t.comparePoint(n.rightSE.point);if($<0)return 1;if($>0)return-1}if(o!==l){var O=d-a,k=o-r,R=g-h,j=l-i;if(O>k&&R<j)return 1;if(O<k&&R>j)return-1}return o>l?1:o<l||d<g?-1:d>g?1:t.id<n.id?-1:t.id>n.id?1:0}}]);function e(t,n,r,i){Vl(this,e),this.id=++_Ae,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}return La(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return t.x===n.x?0:t.x<n.x?1:-1;var o=(t.y-n.y)/i.y,l=n.x+o*i.x;if(t.x===l)return 0;var a=(t.x-n.x)/i.x,h=n.y+a*i.y;return t.y===h?0:t.y<h?-1:1}},{key:"getIntersection",value:function(t){var n=this.bbox(),r=t.bbox(),i=JO(n,r);if(i===null)return null;var o=this.leftSE.point,l=this.rightSE.point,a=t.leftSE.point,h=t.rightSE.point,d=O_(n,a)&&this.comparePoint(a)===0,g=O_(r,o)&&t.comparePoint(o)===0,v=O_(n,h)&&this.comparePoint(h)===0,b=O_(r,l)&&t.comparePoint(l)===0;if(g&&d)return b&&!v?l:!b&&v?h:null;if(g)return v&&o.x===h.x&&o.y===h.y?null:o;if(d)return b&&l.x===a.x&&l.y===a.y?null:a;if(b&&v)return null;if(b)return l;if(v)return h;var I=vAe(o,this.vector(),a,t.vector());return I===null||!O_(i,I)?null:bx.round(I.x,I.y)}},{key:"split",value:function(t){var n=[],r=t.events!==void 0,i=new nc(t,!0),o=new nc(t,!1),l=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new e(i,l,this.rings.slice(),this.windings.slice());return nc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),nc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(i!==0){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var l=n;n=r,r=l}for(var a=0,h=r.rings.length;a<h;a++){var d=r.rings[a],g=r.windings[a],v=n.rings.indexOf(d);v===-1?(n.rings.push(d),n.windings.push(g)):n.windings[v]+=g}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys,o=0,l=this.rings.length;o<l;o++){var a=this.rings[o],h=this.windings[o],d=n.indexOf(a);d===-1?(n.push(a),r.push(h)):r[d]+=h}for(var g=[],v=[],b=0,I=n.length;b<I;b++)if(r[b]!==0){var T=n[b],P=T.poly;if(v.indexOf(P)===-1)if(T.isExterior)g.push(P);else{v.indexOf(P)===-1&&v.push(P);var $=g.indexOf(T.poly);$!==-1&&g.splice($,1)}}for(var O=0,k=g.length;O<k;O++){var R=g[O].multiPoly;i.indexOf(R)===-1&&i.push(R)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(vu.type){case"union":{var r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{var o,l;t.length<n.length?(o=t.length,l=n.length):(o=n.length,l=t.length),this._isInResult=l===vu.numMultiPolys&&o<l;break}case"xor":{var a=Math.abs(t.length-n.length);this._isInResult=a%2===1;break}case"difference":{var h=function(d){return d.length===1&&d[0].isSubject};this._isInResult=h(t)!==h(n);break}default:throw new Error("Unrecognized operation type found ".concat(vu.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,l,a=nc.comparePoints(t,n);if(a<0)i=t,o=n,l=1;else if(a>0)i=n,o=t,l=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var h=new nc(i,!0),d=new nc(o,!1);return new e(h,d,[r],[l])}}]),e}(),TF=function(){function e(t,n,r){if(Vl(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=bx.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,l=1,a=t.length;l<a;l++){if(typeof t[l][0]!="number"||typeof t[l][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var h=bx.round(t[l][0],t[l][1]);h.x===o.x&&h.y===o.y||(this.segments.push(SE.fromRing(o,h,this)),h.x<this.bbox.ll.x&&(this.bbox.ll.x=h.x),h.y<this.bbox.ll.y&&(this.bbox.ll.y=h.y),h.x>this.bbox.ur.x&&(this.bbox.ur.x=h.x),h.y>this.bbox.ur.y&&(this.bbox.ur.y=h.y),o=h)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(SE.fromRing(o,i,this))}return La(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.segments.length;n<r;n++){var i=this.segments[n];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),e}(),xAe=function(){function e(t,n){if(Vl(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new TF(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=t.length;r<i;r++){var o=new TF(t[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return La(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),n=0,r=this.interiorRings.length;n<r;n++)for(var i=this.interiorRings[n].getSweepEvents(),o=0,l=i.length;o<l;o++)t.push(i[o]);return t}}]),e}(),PF=function(){function e(t,n){if(Vl(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=t.length;r<i;r++){var o=new xAe(t[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return La(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++)for(var i=this.polys[n].getSweepEvents(),o=0,l=i.length;o<l;o++)t.push(i[o]);return t}}]),e}(),bAe=function(){La(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!(!o.isInResult()||o.ringOut)){for(var l=null,a=o.leftSE,h=o.rightSE,d=[a],g=a.point,v=[];l=a,a=h,d.push(a),a.point!==g;)for(;;){var b=a.getAvailableLinkedEvents();if(b.length===0){var I=d[0].point,T=d[d.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(I.x,",")+" ".concat(I.y,"]. Last matching segment found ends at")+" [".concat(T.x,", ").concat(T.y,"]."))}if(b.length===1){h=b[0].otherSE;break}for(var P=null,$=0,O=v.length;$<O;$++)if(v[$].point===a.point){P=$;break}if(P!==null){var k=v.splice(P)[0],R=d.splice(k.index);R.unshift(R[0].otherSE),n.push(new e(R.reverse()));continue}v.push({index:d.length,point:a.point});var j=a.getLeftmostComparator(l);h=b.sort(j)[0].otherSE;break}n.push(new e(d))}}return n}}]);function e(t){Vl(this,e),this.events=t;for(var n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}return La(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,n=[t],r=1,i=this.events.length-1;r<i;r++){var o=this.events[r].point,l=this.events[r+1].point;EF(o,t,l)!==0&&(n.push(o),t=o)}if(n.length===1)return null;var a=n[0],h=n[1];EF(a,t,h)===0&&n.shift(),n.push(n[0]);for(var d=this.isExteriorRing()?1:-1,g=this.isExteriorRing()?0:n.length-1,v=this.isExteriorRing()?n.length:-1,b=[],I=g;I!=v;I+=d)b.push([n[I].x,n[I].y]);return b}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],n=1,r=this.events.length;n<r;n++){var i=this.events[n];nc.compare(t,i)>0&&(t=i)}for(var o=t.segment.prevInResult(),l=o?o.prevInResult():null;;){if(!o)return null;if(!l)return o.ringOut;if(l.ringOut!==o.ringOut)return l.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=l.prevInResult(),l=o?o.prevInResult():null}}}]),e}(),AF=function(){function e(t){Vl(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return La(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}}]),e}(),wAe=function(){function e(t){Vl(this,e),this.rings=t,this.polys=this._composePolys(t)}return La(e,[{key:"getGeom",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++){var i=this.polys[n].getGeom();i!==null&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!o.poly)if(o.isExteriorRing())n.push(new AF(o));else{var l=o.enclosingRing();l.poly||n.push(new AF(l)),l.poly.addInterior(o)}}return n}}]),e}(),SAe=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:SE.compare;Vl(this,e),this.queue=t,this.tree=new Hk(n),this.segments=[]}return La(e,[{key:"process",value:function(t){var n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;var i=t.isLeft?this.tree.insert(n):this.tree.find(n);if(!i)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=i,l=i,a=void 0,h=void 0;a===void 0;)o=this.tree.prev(o),o===null?a=null:o.key.consumedBy===void 0&&(a=o.key);for(;h===void 0;)l=this.tree.next(l),l===null?h=null:l.key.consumedBy===void 0&&(h=l.key);if(t.isLeft){var d=null;if(a){var g=a.getIntersection(n);if(g!==null&&(n.isAnEndpoint(g)||(d=g),!a.isAnEndpoint(g)))for(var v=this._splitSafely(a,g),b=0,I=v.length;b<I;b++)r.push(v[b])}var T=null;if(h){var P=h.getIntersection(n);if(P!==null&&(n.isAnEndpoint(P)||(T=P),!h.isAnEndpoint(P)))for(var $=this._splitSafely(h,P),O=0,k=$.length;O<k;O++)r.push($[O])}if(d!==null||T!==null){var R=null;if(d===null)R=T;else if(T===null)R=d;else{var j=nc.comparePoints(d,T);R=j<=0?d:T}this.queue.remove(n.rightSE),r.push(n.rightSE);for(var F=n.split(R),U=0,G=F.length;U<G;U++)r.push(F[U])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=a)}else{if(a&&h){var Z=a.getIntersection(h);if(Z!==null){if(!a.isAnEndpoint(Z))for(var ne=this._splitSafely(a,Z),oe=0,ye=ne.length;oe<ye;oe++)r.push(ne[oe]);if(!h.isAnEndpoint(Z))for(var fe=this._splitSafely(h,Z),$e=0,ae=fe.length;$e<ae;$e++)r.push(fe[$e])}}this.tree.remove(n)}return r}},{key:"_splitSafely",value:function(t,n){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var i=t.split(n);return i.push(r),t.consumedBy===void 0&&this.tree.insert(t),i}}]),e}(),OF=typeof process<"u"&&iG.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,EAe=typeof process<"u"&&iG.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,CAe=function(){function e(){Vl(this,e)}return La(e,[{key:"run",value:function(t,n,r){vu.type=t,bx.reset();for(var i=[new PF(n,!0)],o=0,l=r.length;o<l;o++)i.push(new PF(r[o],!1));if(vu.numMultiPolys=i.length,vu.type==="difference")for(var a=i[0],h=1;h<i.length;)JO(i[h].bbox,a.bbox)!==null?h++:i.splice(h,1);if(vu.type==="intersection"){for(var d=0,g=i.length;d<g;d++)for(var v=i[d],b=d+1,I=i.length;b<I;b++)if(JO(v.bbox,i[b].bbox)===null)return[]}for(var T=new Hk(nc.compare),P=0,$=i.length;P<$;P++)for(var O=i[P].getSweepEvents(),k=0,R=O.length;k<R;k++)if(T.insert(O[k]),T.size>OF)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var j=new SAe(T),F=T.size,U=T.pop();U;){var G=U.key;if(T.size===F){var Z=G.segment;throw new Error("Unable to pop() ".concat(G.isLeft?"left":"right"," SweepEvent ")+"[".concat(G.point.x,", ").concat(G.point.y,"] from segment #").concat(Z.id," ")+"[".concat(Z.leftSE.point.x,", ").concat(Z.leftSE.point.y,"] -> ")+"[".concat(Z.rightSE.point.x,", ").concat(Z.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(T.size>OF)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(j.segments.length>EAe)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var ne=j.process(G),oe=0,ye=ne.length;oe<ye;oe++){var fe=ne[oe];fe.consumedBy===void 0&&T.insert(fe)}F=T.size,U=T.pop()}bx.reset();var $e=bAe.factory(j.segments),ae=new wAe($e);return ae.getGeom()}}]),e}(),vu=new CAe,IAe=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vu.run("union",e,n)},TAe=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vu.run("intersection",e,n)},PAe=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vu.run("xor",e,n)},AAe=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vu.run("difference",e,n)},pG={union:IAe,intersection:TAe,xor:PAe,difference:AAe},Pa=63710088e-1,mG={centimeters:Pa*100,centimetres:Pa*100,degrees:Pa/111325,feet:Pa*3.28084,inches:Pa*39.37,kilometers:Pa/1e3,kilometres:Pa/1e3,meters:Pa,metres:Pa,miles:Pa/1609.344,millimeters:Pa*1e3,millimetres:Pa*1e3,nauticalmiles:Pa/1852,radians:1,yards:Pa*1.0936};function sC(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function OAe(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!MF(e[0])||!MF(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return sC(r,t,n)}function gG(e,t,n){n===void 0&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<o[o.length-1].length;l++)if(o[o.length-1][l]!==o[0][l])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:e};return sC(a,t,n)}function eM(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function yG(e,t,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:e};return sC(r,t,n)}function MAe(e,t){t===void 0&&(t="kilometers");var n=mG[t];if(!n)throw new Error(t+" units is invalid");return e*n}function $Ae(e,t){t===void 0&&(t="kilometers");var n=mG[t];if(!n)throw new Error(t+" units is invalid");return e/n}function MF(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function EE(e){return e.type==="Feature"?e.geometry:e}function kAe(e,t,n){n===void 0&&(n={});var r=EE(e),i=EE(t),o=pG.union(r.coordinates,i.coordinates);return o.length===0?null:o.length===1?gG(o[0],n.properties):yG(o,n.properties)}function vG(e,t,n){if(e!==null)for(var r,i,o,l,a,h,d,g=0,v=0,b,I=e.type,T=I==="FeatureCollection",P=I==="Feature",$=T?e.features.length:1,O=0;O<$;O++){d=T?e.features[O].geometry:P?e.geometry:e,b=d?d.type==="GeometryCollection":!1,a=b?d.geometries.length:1;for(var k=0;k<a;k++){var R=0,j=0;if(l=b?d.geometries[k]:d,l!==null){h=l.coordinates;var F=l.type;switch(g=n&&(F==="Polygon"||F==="MultiPolygon")?1:0,F){case null:break;case"Point":if(t(h,v,O,R,j)===!1)return!1;v++,R++;break;case"LineString":case"MultiPoint":for(r=0;r<h.length;r++){if(t(h[r],v,O,R,j)===!1)return!1;v++,F==="MultiPoint"&&R++}F==="LineString"&&R++;break;case"Polygon":case"MultiLineString":for(r=0;r<h.length;r++){for(i=0;i<h[r].length-g;i++){if(t(h[r][i],v,O,R,j)===!1)return!1;v++}F==="MultiLineString"&&R++,F==="Polygon"&&j++}F==="Polygon"&&R++;break;case"MultiPolygon":for(r=0;r<h.length;r++){for(j=0,i=0;i<h[r].length;i++){for(o=0;o<h[r][i].length-g;o++){if(t(h[r][i][o],v,O,R,j)===!1)return!1;v++}j++}R++}break;case"GeometryCollection":for(r=0;r<l.geometries.length;r++)if(vG(l.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $F(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function _G(e,t){var n,r,i,o,l,a,h,d,g,v,b=0,I=e.type==="FeatureCollection",T=e.type==="Feature",P=I?e.features.length:1;for(n=0;n<P;n++){for(a=I?e.features[n].geometry:T?e.geometry:e,d=I?e.features[n].properties:T?e.properties:{},g=I?e.features[n].bbox:T?e.bbox:void 0,v=I?e.features[n].id:T?e.id:void 0,h=a?a.type==="GeometryCollection":!1,l=h?a.geometries.length:1,i=0;i<l;i++){if(o=h?a.geometries[i]:a,o===null){if(t(null,b,d,g,v)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,b,d,g,v)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],b,d,g,v)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}b++}}function tM(e){var t=[1/0,1/0,-1/0,-1/0];return vG(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}tM.default=tM;function NAe(e,t){t===void 0&&(t={});var n=tM(e),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return OAe([r,i],t.properties,t)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)t[r]=e,++r;return t},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var bp=function(){};bp.prototype.interfaces_=function(){return[]};bp.prototype.getClass=function(){return bp};bp.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var xr=function(e){function t(n){e.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),tn=function(){},xG={MAX_VALUE:{configurable:!0}};tn.isNaN=function(e){return Number.isNaN(e)};tn.doubleToLongBits=function(e){return e};tn.longBitsToDouble=function(e){return e};tn.isInfinite=function(e){return!Number.isFinite(e)};xG.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(tn,xG);var ps=function(){},lC=function(){},oy=function(){};function ms(){}var Ne=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Vp={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Ne.prototype.setOrdinate=function(e,t){switch(e){case Ne.X:this.x=t;break;case Ne.Y:this.y=t;break;case Ne.Z:this.z=t;break;default:throw new xr("Invalid ordinate index: "+e)}};Ne.prototype.equals2D=function(){if(arguments.length===1){var e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return!(!bp.equalsWithTolerance(this.x,t.x,n)||!bp.equalsWithTolerance(this.y,t.y,n))}};Ne.prototype.getOrdinate=function(e){switch(e){case Ne.X:return this.x;case Ne.Y:return this.y;case Ne.Z:return this.z}throw new xr("Invalid ordinate index: "+e)};Ne.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||tn.isNaN(this.z))&&tn.isNaN(e.z)};Ne.prototype.equals=function(e){return e instanceof Ne?this.equals2D(e):!1};Ne.prototype.equalInZ=function(e,t){return bp.equalsWithTolerance(this.z,e.z,t)};Ne.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};Ne.prototype.clone=function(){};Ne.prototype.copy=function(){return new Ne(this)};Ne.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};Ne.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)};Ne.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)};Ne.prototype.hashCode=function(){var e=17;return e=37*e+Ne.hashCode(this.x),e=37*e+Ne.hashCode(this.y),e};Ne.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z};Ne.prototype.interfaces_=function(){return[ps,lC,ms]};Ne.prototype.getClass=function(){return Ne};Ne.hashCode=function(){if(arguments.length===1){var e=arguments[0],t=tn.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}};Vp.DimensionalComparator.get=function(){return Jc};Vp.serialVersionUID.get=function(){return 6683108902428367e3};Vp.NULL_ORDINATE.get=function(){return tn.NaN};Vp.X.get=function(){return 0};Vp.Y.get=function(){return 1};Vp.Z.get=function(){return 2};Object.defineProperties(Ne,Vp);var Jc=function(e){if(this._dimensionsToTest=2,arguments.length!==0&&arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new xr("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};Jc.prototype.compare=function(e,t){var n=e,r=t,i=Jc.compare(n.x,r.x);if(i!==0)return i;var o=Jc.compare(n.y,r.y);if(o!==0)return o;if(this._dimensionsToTest<=2)return 0;var l=Jc.compare(n.z,r.z);return l};Jc.prototype.interfaces_=function(){return[oy]};Jc.prototype.getClass=function(){return Jc};Jc.compare=function(e,t){return e<t?-1:e>t?1:tn.isNaN(e)?tn.isNaN(t)?0:-1:tn.isNaN(t)?1:0};var ay=function(){};ay.prototype.create=function(){};ay.prototype.interfaces_=function(){return[]};ay.prototype.getClass=function(){return ay};var Fe=function(){},h1={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Fe.prototype.interfaces_=function(){return[]};Fe.prototype.getClass=function(){return Fe};Fe.toLocationSymbol=function(e){switch(e){case Fe.EXTERIOR:return"e";case Fe.BOUNDARY:return"b";case Fe.INTERIOR:return"i";case Fe.NONE:return"-"}throw new xr("Unknown location value: "+e)};h1.INTERIOR.get=function(){return 0};h1.BOUNDARY.get=function(){return 1};h1.EXTERIOR.get=function(){return 2};h1.NONE.get=function(){return-1};Object.defineProperties(Fe,h1);var Kt=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},Da=function(){},bG={LOG_10:{configurable:!0}};Da.prototype.interfaces_=function(){return[]};Da.prototype.getClass=function(){return Da};Da.log10=function(e){var t=Math.log(e);return tn.isInfinite(t)||tn.isNaN(t)?t:t/Da.LOG_10};Da.min=function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i};Da.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}};Da.wrap=function(e,t){return e<0?t- -e%t:e%t};Da.max=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],r=e;return t>r&&(r=t),n>r&&(r=n),r}else if(arguments.length===4){var i=arguments[0],o=arguments[1],l=arguments[2],a=arguments[3],h=i;return o>h&&(h=o),l>h&&(h=l),a>h&&(h=a),h}};Da.average=function(e,t){return(e+t)/2};bG.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(Da,bG);var Gl=function(e){this.str=e};Gl.prototype.append=function(e){this.str+=e};Gl.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};Gl.prototype.toString=function(e){return this.str};var Ml=function(e){this.value=e};Ml.prototype.intValue=function(){return this.value};Ml.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0};Ml.isNaN=function(e){return Number.isNaN(e)};var wx=function(){};wx.isWhitespace=function(e){return e<=32&&e>=0||e===127};wx.toUpperCase=function(e){return e.toUpperCase()};var qe=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];e.call(this,e.parse(r))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},Zs={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};qe.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo};qe.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),r=qe.magnitude(n._hi),i=qe.TEN.pow(r);n=n.divide(i),n.gt(qe.TEN)?(n=n.divide(qe.TEN),r+=1):n.lt(qe.ONE)&&(n=n.multiply(qe.TEN),r-=1);for(var o=r+1,l=new Gl,a=qe.MAX_PRINT_DIGITS-1,h=0;h<=a;h++){e&&h===o&&l.append(".");var d=Math.trunc(n._hi);if(d<0)break;var g=!1,v=0;d>9?(g=!0,v="9"):v="0"+d,l.append(v),n=n.subtract(qe.valueOf(d)).multiply(qe.TEN),g&&n.selfAdd(qe.TEN);var b=!0,I=qe.magnitude(n._hi);if(I<0&&Math.abs(I)>=a-h&&(b=!1),!b)break}return t[0]=r,l.toString()};qe.prototype.sqr=function(){return this.multiply(this)};qe.prototype.doubleValue=function(){return this._hi+this._lo};qe.prototype.subtract=function(){if(arguments[0]instanceof qe){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}};qe.prototype.equals=function(){if(arguments.length===1){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}};qe.prototype.isZero=function(){return this._hi===0&&this._lo===0};qe.prototype.selfSubtract=function(){if(arguments[0]instanceof qe){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}};qe.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};qe.prototype.min=function(e){return this.le(e)?this:e};qe.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof qe){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,l=null,a=null,h=null,d=null,g=null,v=null;return h=this._hi/n,d=qe.SPLIT*h,i=d-h,v=qe.SPLIT*n,i=d-i,o=h-i,l=v-n,g=h*n,l=v-l,a=n-l,v=i*l-g+i*a+o*l+o*a,d=(this._hi-g-v+this._lo-h*r)/n,v=h+d,this._hi=v,this._lo=h-v+d,this}};qe.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};qe.prototype.divide=function(){if(arguments[0]instanceof qe){var e=arguments[0],t=null,n=null,r=null,i=null,o=null,l=null,a=null,h=null;o=this._hi/e._hi,l=qe.SPLIT*o,t=l-o,h=qe.SPLIT*e._hi,t=l-t,n=o-t,r=h-e._hi,a=o*e._hi,r=h-r,i=e._hi-r,h=t*r-a+t*i+n*r+n*i,l=(this._hi-a-h+this._lo-o*e._lo)/e._hi,h=o+l;var d=h,g=o-h+l;return new qe(d,g)}else if(typeof arguments[0]=="number"){var v=arguments[0];return tn.isNaN(v)?qe.createNaN():qe.copy(this).selfDivide(v,0)}};qe.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo};qe.prototype.pow=function(e){if(e===0)return qe.valueOf(1);var t=new qe(this),n=qe.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(t),r/=2,r>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n};qe.prototype.ceil=function(){if(this.isNaN())return qe.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new qe(e,t)};qe.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};qe.prototype.rint=function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()};qe.prototype.setValue=function(){if(arguments[0]instanceof qe){var e=arguments[0];return this.init(e),this}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}};qe.prototype.max=function(e){return this.ge(e)?this:e};qe.prototype.sqrt=function(){if(this.isZero())return qe.valueOf(0);if(this.isNegative())return qe.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=qe.valueOf(t),r=this.subtract(n.sqr()),i=r._hi*(e*.5);return n.add(i)};qe.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof qe){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0],n=null,r=null,i=null,o=null,l=null,a=null;return i=this._hi+t,l=i-this._hi,o=i-l,o=t-l+(this._hi-o),a=o+this._lo,n=i+a,r=a+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(arguments.length===2){var h=arguments[0],d=arguments[1],g=null,v=null,b=null,I=null,T=null,P=null,$=null,O=null;T=this._hi+h,b=this._lo+d,$=T-this._hi,O=b-this._lo,P=T-$,I=b-O,P=h-$+(this._hi-P),I=d-O+(this._lo-I),$=P+b,g=T+$,v=$+(T-g),$=I+v;var k=g+$,R=$+(g-k);return this._hi=k,this._lo=R,this}};qe.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof qe){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,l=null,a=null,h=null,d=null;h=qe.SPLIT*this._hi,i=h-this._hi,d=qe.SPLIT*n,i=h-i,o=this._hi-i,l=d-n,h=this._hi*n,l=d-l,a=n-l,d=i*l-h+i*a+o*l+o*a+(this._hi*r+this._lo*n);var g=h+d;i=h-g;var v=d+i;return this._hi=g,this._lo=v,this}};qe.prototype.selfSqr=function(){return this.selfMultiply(this)};qe.prototype.floor=function(){if(this.isNaN())return qe.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new qe(e,t)};qe.prototype.negate=function(){return this.isNaN()?this:new qe(-this._hi,-this._lo)};qe.prototype.clone=function(){};qe.prototype.multiply=function(){if(arguments[0]instanceof qe){var e=arguments[0];return e.isNaN()?qe.createNaN():qe.copy(this).selfMultiply(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return tn.isNaN(t)?qe.createNaN():qe.copy(this).selfMultiply(t,0)}};qe.prototype.isNaN=function(){return tn.isNaN(this._hi)};qe.prototype.intValue=function(){return Math.trunc(this._hi)};qe.prototype.toString=function(){var e=qe.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()};qe.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,i=n;if(n.charAt(0)===".")i="0"+n;else if(r<0)i="0."+qe.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length,l=qe.stringOfChar("0",o);i=n+l+".0"}return this.isNegative()?"-"+i:i};qe.prototype.reciprocal=function(){var e=null,t=null,n=null,r=null,i=null,o=null,l=null,a=null;i=1/this._hi,o=qe.SPLIT*i,e=o-i,a=qe.SPLIT*this._hi,e=o-e,t=i-e,n=a-this._hi,l=i*this._hi,n=a-n,r=this._hi-n,a=e*n-l+e*r+t*n+t*r,o=(1-l-a-i*this._lo)/this._hi;var h=i+o,d=i-h+o;return new qe(h,d)};qe.prototype.toSciNotation=function(){if(this.isZero())return qe.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=qe.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r};qe.prototype.abs=function(){return this.isNaN()?qe.NaN:this.isNegative()?this.negate():new qe(this)};qe.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};qe.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo};qe.prototype.add=function(){if(arguments[0]instanceof qe){var e=arguments[0];return qe.copy(this).selfAdd(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return qe.copy(this).selfAdd(t)}};qe.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof qe){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}};qe.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo};qe.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};qe.prototype.trunc=function(){return this.isNaN()?qe.NaN:this.isPositive()?this.floor():this.ceil()};qe.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};qe.prototype.interfaces_=function(){return[ms,ps,lC]};qe.prototype.getClass=function(){return qe};qe.sqr=function(e){return qe.valueOf(e).selfMultiply(e)};qe.valueOf=function(){if(typeof arguments[0]=="string"){var e=arguments[0];return qe.parse(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return new qe(t)}};qe.sqrt=function(e){return qe.valueOf(e).sqrt()};qe.parse=function(e){for(var t=0,n=e.length;wx.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var i=e.charAt(t);(i==="-"||i==="+")&&(t++,i==="-"&&(r=!0))}for(var o=new qe,l=0,a=0,h=0;!(t>=n);){var d=e.charAt(t);if(t++,wx.isDigit(d)){var g=d-"0";o.selfMultiply(qe.TEN),o.selfAdd(g),l++;continue}if(d==="."){a=l;continue}if(d==="e"||d==="E"){var v=e.substring(t);try{h=Ml.parseInt(v)}catch($){throw $ instanceof Error?new Error("Invalid exponent "+v+" in string "+e):$}finally{}break}throw new Error("Unexpected character '"+d+"' at position "+t+" in string "+e)}var b=o,I=l-a-h;if(I===0)b=o;else if(I>0){var T=qe.TEN.pow(I);b=o.divide(T)}else if(I<0){var P=qe.TEN.pow(-I);b=o.multiply(P)}return r?b.negate():b};qe.createNaN=function(){return new qe(tn.NaN,tn.NaN)};qe.copy=function(e){return new qe(e)};qe.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return i*10<=t&&(r+=1),r};qe.stringOfChar=function(e,t){for(var n=new Gl,r=0;r<t;r++)n.append(e);return n.toString()};Zs.PI.get=function(){return new qe(3.141592653589793,12246467991473532e-32)};Zs.TWO_PI.get=function(){return new qe(6.283185307179586,24492935982947064e-32)};Zs.PI_2.get=function(){return new qe(1.5707963267948966,6123233995736766e-32)};Zs.E.get=function(){return new qe(2.718281828459045,14456468917292502e-32)};Zs.NaN.get=function(){return new qe(tn.NaN,tn.NaN)};Zs.EPS.get=function(){return 123259516440783e-46};Zs.SPLIT.get=function(){return 134217729};Zs.MAX_PRINT_DIGITS.get=function(){return 32};Zs.TEN.get=function(){return qe.valueOf(10)};Zs.ONE.get=function(){return qe.valueOf(1)};Zs.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};Zs.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(qe,Zs);var Go=function(){},wG={DP_SAFE_EPSILON:{configurable:!0}};Go.prototype.interfaces_=function(){return[]};Go.prototype.getClass=function(){return Go};Go.orientationIndex=function(e,t,n){var r=Go.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=qe.valueOf(t.x).selfAdd(-e.x),o=qe.valueOf(t.y).selfAdd(-e.y),l=qe.valueOf(n.x).selfAdd(-t.x),a=qe.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(l)).signum()};Go.signOfDet2x2=function(e,t,n,r){var i=e.multiply(r).selfSubtract(t.multiply(n));return i.signum()};Go.intersection=function(e,t,n,r){var i=qe.valueOf(r.y).selfSubtract(n.y).selfMultiply(qe.valueOf(t.x).selfSubtract(e.x)),o=qe.valueOf(r.x).selfSubtract(n.x).selfMultiply(qe.valueOf(t.y).selfSubtract(e.y)),l=i.subtract(o),a=qe.valueOf(r.x).selfSubtract(n.x).selfMultiply(qe.valueOf(e.y).selfSubtract(n.y)),h=qe.valueOf(r.y).selfSubtract(n.y).selfMultiply(qe.valueOf(e.x).selfSubtract(n.x)),d=a.subtract(h),g=d.selfDivide(l).doubleValue(),v=qe.valueOf(e.x).selfAdd(qe.valueOf(t.x).selfSubtract(e.x).selfMultiply(g)).doubleValue(),b=qe.valueOf(t.x).selfSubtract(e.x).selfMultiply(qe.valueOf(e.y).selfSubtract(n.y)),I=qe.valueOf(t.y).selfSubtract(e.y).selfMultiply(qe.valueOf(e.x).selfSubtract(n.x)),T=b.subtract(I),P=T.selfDivide(l).doubleValue(),$=qe.valueOf(n.y).selfAdd(qe.valueOf(r.y).selfSubtract(n.y).selfMultiply(P)).doubleValue();return new Ne(v,$)};Go.orientationIndexFilter=function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),l=i-o;if(i>0){if(o<=0)return Go.signum(l);r=i+o}else if(i<0){if(o>=0)return Go.signum(l);r=-i-o}else return Go.signum(l);var a=Go.DP_SAFE_EPSILON*r;return l>=a||-l>=a?Go.signum(l):2};Go.signum=function(e){return e>0?1:e<0?-1:0};wG.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(Go,wG);var In=function(){},d1={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};d1.X.get=function(){return 0};d1.Y.get=function(){return 1};d1.Z.get=function(){return 2};d1.M.get=function(){return 3};In.prototype.setOrdinate=function(e,t,n){};In.prototype.size=function(){};In.prototype.getOrdinate=function(e,t){};In.prototype.getCoordinate=function(){};In.prototype.getCoordinateCopy=function(e){};In.prototype.getDimension=function(){};In.prototype.getX=function(e){};In.prototype.clone=function(){};In.prototype.expandEnvelope=function(e){};In.prototype.copy=function(){};In.prototype.getY=function(e){};In.prototype.toCoordinateArray=function(){};In.prototype.interfaces_=function(){return[lC]};In.prototype.getClass=function(){return In};Object.defineProperties(In,d1);var SG=function(){},Ky=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(SG),Vi=function(){};Vi.arraycopy=function(e,t,n,r,i){for(var o=0,l=t;l<t+i;l++)n[r+o]=e[l],o++};Vi.getProperty=function(e){return{"line.separator":`
`}[e]};var ks=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof Ne&&arguments[1]instanceof Ne){var l=arguments[0],a=arguments[1];this.x=l.y-a.y,this.y=a.x-l.x,this.w=l.x*a.y-a.x*l.y}}else if(arguments.length===3){var h=arguments[0],d=arguments[1],g=arguments[2];this.x=h,this.y=d,this.w=g}else if(arguments.length===4){var v=arguments[0],b=arguments[1],I=arguments[2],T=arguments[3],P=v.y-b.y,$=b.x-v.x,O=v.x*b.y-b.x*v.y,k=I.y-T.y,R=T.x-I.x,j=I.x*T.y-T.x*I.y;this.x=$*j-R*O,this.y=k*O-P*j,this.w=P*R-k*$}};ks.prototype.getY=function(){var e=this.y/this.w;if(tn.isNaN(e)||tn.isInfinite(e))throw new Ky;return e};ks.prototype.getX=function(){var e=this.x/this.w;if(tn.isNaN(e)||tn.isInfinite(e))throw new Ky;return e};ks.prototype.getCoordinate=function(){var e=new Ne;return e.x=this.getX(),e.y=this.getY(),e};ks.prototype.interfaces_=function(){return[]};ks.prototype.getClass=function(){return ks};ks.intersection=function(e,t,n,r){var i=e.y-t.y,o=t.x-e.x,l=e.x*t.y-t.x*e.y,a=n.y-r.y,h=r.x-n.x,d=n.x*r.y-r.x*n.y,g=o*d-h*l,v=a*l-i*d,b=i*h-a*o,I=g/b,T=v/b;if(tn.isNaN(I)||tn.isInfinite(I)||tn.isNaN(T)||tn.isInfinite(T))throw new Ky;return new Ne(I,T)};var Bt=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Ne){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],l=arguments[1],a=arguments[2],h=arguments[3];this.init(o,l,a,h)}},EG={serialVersionUID:{configurable:!0}};Bt.prototype.getArea=function(){return this.getWidth()*this.getHeight()};Bt.prototype.equals=function(e){if(!(e instanceof Bt))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};Bt.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new Bt;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,r=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new Bt(t,r,n,i)};Bt.prototype.isNull=function(){return this._maxx<this._minx};Bt.prototype.getMaxX=function(){return this._maxx};Bt.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof Ne){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof Bt){var t=arguments[0];return this.isNull()||t.isNull()?!1:t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}};Bt.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof Bt){var e=arguments[0];return this.isNull()||e.isNull()?!1:!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof Ne){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}};Bt.prototype.getMinY=function(){return this._miny};Bt.prototype.getMinX=function(){return this._minx};Bt.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof Ne){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof Bt){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}};Bt.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t};Bt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};Bt.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};Bt.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)};Bt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};Bt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};Bt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};Bt.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t};Bt.prototype.expandBy=function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};Bt.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof Bt){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof Ne){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}};Bt.prototype.centre=function(){return this.isNull()?null:new Ne((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};Bt.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Ne){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof Bt){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],l=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),l<a?(this._miny=l,this._maxy=a):(this._miny=a,this._maxy=l)}};Bt.prototype.getMaxY=function(){return this._maxy};Bt.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)};Bt.prototype.hashCode=function(){var e=17;return e=37*e+Ne.hashCode(this._minx),e=37*e+Ne.hashCode(this._maxx),e=37*e+Ne.hashCode(this._miny),e=37*e+Ne.hashCode(this._maxy),e};Bt.prototype.interfaces_=function(){return[ps,ms]};Bt.prototype.getClass=function(){return Bt};Bt.intersects=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],l=arguments[3],a=Math.min(o.x,l.x),h=Math.max(o.x,l.x),d=Math.min(r.x,i.x),g=Math.max(r.x,i.x);return!(d>h||g<a||(a=Math.min(o.y,l.y),h=Math.max(o.y,l.y),d=Math.min(r.y,i.y),g=Math.max(r.y,i.y),d>h)||g<a)}};EG.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(Bt,EG);var fl={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},uC=function(e){this.geometryFactory=e||new hn};uC.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=fl.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(i=fl.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],fg[n]&&(t=fg[n].apply(this,[r]))),t===void 0)throw new Error("Could not parse WKT "+e);return t};uC.prototype.write=function(e){return this.extractGeometry(e)};uC.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!ec[t])return null;var n=t.toUpperCase(),r;return e.isEmpty()?r=n+" EMPTY":r=n+"("+ec[t].apply(this,[e])+")",r};var ec={coordinate:function(e){return e.x+" "+e.y},point:function(e){return ec.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+ec.point.apply(t,[e._geometries[r]])+")");return n.join(",")},linestring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(ec.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},linearring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(ec.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},multilinestring:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+ec.linestring.apply(t,[e._geometries[r]])+")");return n.join(",")},polygon:function(e){var t=this,n=[];n.push("("+ec.linestring.apply(this,[e._shell])+")");for(var r=0,i=e._holes.length;r<i;++r)n.push("("+ec.linestring.apply(t,[e._holes[r]])+")");return n.join(",")},multipolygon:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+ec.polygon.apply(t,[e._geometries[r]])+")");return n.join(",")},geometrycollection:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push(t.extractGeometry(e._geometries[r]));return n.join(",")}},fg={point:function(e){if(e===void 0)return this.geometryFactory.createPoint();var t=e.trim().split(fl.spaces);return this.geometryFactory.createPoint(new Ne(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPoint();for(var n,r=e.trim().split(","),i=[],o=0,l=r.length;o<l;++o)n=r[o].replace(fl.trimParens,"$1"),i.push(fg.point.apply(t,[n]));return this.geometryFactory.createMultiPoint(i)},linestring:function(e){if(e===void 0)return this.geometryFactory.createLineString();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(fl.spaces),n.push(new Ne(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLineString(n)},linearring:function(e){if(e===void 0)return this.geometryFactory.createLinearRing();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(fl.spaces),n.push(new Ne(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiLineString();for(var n,r=e.trim().split(fl.parenComma),i=[],o=0,l=r.length;o<l;++o)n=r[o].replace(fl.trimParens,"$1"),i.push(fg.linestring.apply(t,[n]));return this.geometryFactory.createMultiLineString(i)},polygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createPolygon();for(var n,r,i,o=e.trim().split(fl.parenComma),l,a=[],h=0,d=o.length;h<d;++h)n=o[h].replace(fl.trimParens,"$1"),r=fg.linestring.apply(t,[n]),i=t.geometryFactory.createLinearRing(r._points),h===0?l=i:a.push(i);return this.geometryFactory.createPolygon(l,a)},multipolygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPolygon();for(var n,r=e.trim().split(fl.doubleParenComma),i=[],o=0,l=r.length;o<l;++o)n=r[o].replace(fl.trimParens,"$1"),i.push(fg.polygon.apply(t,[n]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(e){var t=this;if(e===void 0)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=e.trim().split("|"),r=[],i=0,o=n.length;i<o;++i)r.push(t.read(n[i]));return this.geometryFactory.createGeometryCollection(r)}},Rs=function(e){this.parser=new uC(e)};Rs.prototype.write=function(e){return this.parser.write(e)};Rs.toLineString=function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var gc=function(e){function t(n){e.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),CE=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var n=arguments[0];e.call(this,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(gc),an=function(){};an.prototype.interfaces_=function(){return[]};an.prototype.getClass=function(){return an};an.shouldNeverReachHere=function(){if(arguments.length===0)an.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new CE("Should never reach here"+(e!==null?": "+e:""))}};an.isTrue=function(){var e,t;if(arguments.length===1)e=arguments[0],an.isTrue(e,null);else if(arguments.length===2&&(e=arguments[0],t=arguments[1],!e))throw t===null?new CE:new CE(t)};an.equals=function(){var e,t,n;if(arguments.length===2)e=arguments[0],t=arguments[1],an.equals(e,t,null);else if(arguments.length===3&&(e=arguments[0],t=arguments[1],n=arguments[2],!t.equals(e)))throw new CE("Expected "+e+" but encountered "+t+(n!==null?": "+n:""))};var Ir=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Ne,this._intPt[1]=new Ne,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Gp={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Ir.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]};Ir.prototype.getTopologySummary=function(){var e=new Gl;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()};Ir.prototype.computeIntersection=function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)};Ir.prototype.getIntersectionNum=function(){return this._result};Ir.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}};Ir.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};Ir.prototype.setPrecisionModel=function(e){this._precisionModel=e};Ir.prototype.isInteriorIntersection=function(){var e=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var t=arguments[0],n=0;n<this._result;n++)if(!(e._intPt[n].equals2D(e._inputLines[t][0])||e._intPt[n].equals2D(e._inputLines[t][1])))return!0;return!1}};Ir.prototype.getIntersection=function(e){return this._intPt[e]};Ir.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};Ir.prototype.hasIntersection=function(){return this._result!==Ir.NO_INTERSECTION};Ir.prototype.getEdgeDistance=function(e,t){var n=Ir.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return n};Ir.prototype.isCollinear=function(){return this._result===Ir.COLLINEAR_INTERSECTION};Ir.prototype.toString=function(){return Rs.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Rs.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};Ir.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]};Ir.prototype.isIntersection=function(e){for(var t=this,n=0;n<this._result;n++)if(t._intPt[n].equals2D(e))return!0;return!1};Ir.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]};Ir.prototype.interfaces_=function(){return[]};Ir.prototype.getClass=function(){return Ir};Ir.computeEdgeDistance=function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))r>i?o=r:o=i;else{var l=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y);r>i?o=l:o=a,o===0&&!e.equals(t)&&(o=Math.max(l,a))}return an.isTrue(!(o===0&&!e.equals(t)),"Bad distance calculation"),o};Ir.nonRobustComputeEdgeDistance=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i);return an.isTrue(!(o===0&&!e.equals(t)),"Invalid distance calculation"),o};Gp.DONT_INTERSECT.get=function(){return 0};Gp.DO_INTERSECT.get=function(){return 1};Gp.COLLINEAR.get=function(){return 2};Gp.NO_INTERSECTION.get=function(){return 0};Gp.POINT_INTERSECTION.get=function(){return 1};Gp.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(Ir,Gp);var md=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var r=new Bt(this._inputLines[0][0],this._inputLines[0][1]),i=new Bt(this._inputLines[1][0],this._inputLines[1][1]);return r.contains(n)&&i.contains(n)},t.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(this._isProper=!1,Bt.intersects(r,i,n)&&wt.orientationIndex(r,i,n)===0&&wt.orientationIndex(i,r,n)===0)return this._isProper=!0,(n.equals(r)||n.equals(i))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(n,r,i,o,l){l.x=this.smallestInAbsValue(n.x,r.x,i.x,o.x),l.y=this.smallestInAbsValue(n.y,r.y,i.y,o.y),n.x-=l.x,n.y-=l.y,r.x-=l.x,r.y-=l.y,i.x-=l.x,i.y-=l.y,o.x-=l.x,o.y-=l.y},t.prototype.safeHCoordinateIntersection=function(n,r,i,o){var l=null;try{l=ks.intersection(n,r,i,o)}catch(a){if(a instanceof Ky)l=t.nearestEndpoint(n,r,i,o);else throw a}finally{}return l},t.prototype.intersection=function(n,r,i,o){var l=this.intersectionWithNormalization(n,r,i,o);return this.isInSegmentEnvelopes(l)||(l=new Ne(t.nearestEndpoint(n,r,i,o))),this._precisionModel!==null&&this._precisionModel.makePrecise(l),l},t.prototype.smallestInAbsValue=function(n,r,i,o){var l=n,a=Math.abs(l);return Math.abs(r)<a&&(l=r,a=Math.abs(r)),Math.abs(i)<a&&(l=i,a=Math.abs(i)),Math.abs(o)<a&&(l=o),l},t.prototype.checkDD=function(n,r,i,o,l){var a=Go.intersection(n,r,i,o),h=this.isInSegmentEnvelopes(a);Vi.out.println("DD in env = "+h+"  --------------------- "+a),l.distance(a)>1e-4&&Vi.out.println("Distance = "+l.distance(a))},t.prototype.intersectionWithNormalization=function(n,r,i,o){var l=new Ne(n),a=new Ne(r),h=new Ne(i),d=new Ne(o),g=new Ne;this.normalizeToEnvCentre(l,a,h,d,g);var v=this.safeHCoordinateIntersection(l,a,h,d);return v.x+=g.x,v.y+=g.y,v},t.prototype.computeCollinearIntersection=function(n,r,i,o){var l=Bt.intersects(n,r,i),a=Bt.intersects(n,r,o),h=Bt.intersects(i,o,n),d=Bt.intersects(i,o,r);return l&&a?(this._intPt[0]=i,this._intPt[1]=o,e.COLLINEAR_INTERSECTION):h&&d?(this._intPt[0]=n,this._intPt[1]=r,e.COLLINEAR_INTERSECTION):l&&h?(this._intPt[0]=i,this._intPt[1]=n,i.equals(n)&&!a&&!d?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):l&&d?(this._intPt[0]=i,this._intPt[1]=r,i.equals(r)&&!a&&!h?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):a&&h?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!l&&!d?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):a&&d?(this._intPt[0]=o,this._intPt[1]=r,o.equals(r)&&!l&&!h?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,r,i,o,l){var a=n.x<r.x?n.x:r.x,h=n.y<r.y?n.y:r.y,d=n.x>r.x?n.x:r.x,g=n.y>r.y?n.y:r.y,v=i.x<o.x?i.x:o.x,b=i.y<o.y?i.y:o.y,I=i.x>o.x?i.x:o.x,T=i.y>o.y?i.y:o.y,P=a>v?a:v,$=d<I?d:I,O=h>b?h:b,k=g<T?g:T,R=(P+$)/2,j=(O+k)/2;l.x=R,l.y=j,n.x-=l.x,n.y-=l.y,r.x-=l.x,r.y-=l.y,i.x-=l.x,i.y-=l.y,o.x-=l.x,o.y-=l.y},t.prototype.computeIntersect=function(n,r,i,o){if(this._isProper=!1,!Bt.intersects(n,r,i,o))return e.NO_INTERSECTION;var l=wt.orientationIndex(n,r,i),a=wt.orientationIndex(n,r,o);if(l>0&&a>0||l<0&&a<0)return e.NO_INTERSECTION;var h=wt.orientationIndex(i,o,n),d=wt.orientationIndex(i,o,r);if(h>0&&d>0||h<0&&d<0)return e.NO_INTERSECTION;var g=l===0&&a===0&&h===0&&d===0;return g?this.computeCollinearIntersection(n,r,i,o):(l===0||a===0||h===0||d===0?(this._isProper=!1,n.equals2D(i)||n.equals2D(o)?this._intPt[0]=n:r.equals2D(i)||r.equals2D(o)?this._intPt[0]=r:l===0?this._intPt[0]=new Ne(i):a===0?this._intPt[0]=new Ne(o):h===0?this._intPt[0]=new Ne(n):d===0&&(this._intPt[0]=new Ne(r))):(this._isProper=!0,this._intPt[0]=this.intersection(n,r,i,o)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,r,i,o){var l=n,a=wt.distancePointLine(n,i,o),h=wt.distancePointLine(r,i,o);return h<a&&(a=h,l=r),h=wt.distancePointLine(i,n,r),h<a&&(a=h,l=i),h=wt.distancePointLine(o,n,r),h<a&&(a=h,l=o),l},t}(Ir),wp=function(){};wp.prototype.interfaces_=function(){return[]};wp.prototype.getClass=function(){return wp};wp.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,l=n.y-t.y;return wp.signOfDet2x2(r,i,o,l)};wp.signOfDet2x2=function(e,t,n,r){var i=null,o=null,l=null;if(i=1,e===0||r===0)return t===0||n===0?0:t>0?n>0?-i:i:n>0?i:-i;if(t===0||n===0)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?t<=r||(i=-i,o=e,e=n,n=o,o=t,t=r,r=o):t<=-r?(i=-i,n=-n,r=-r):(o=e,e=-n,n=o,o=t,t=-r,r=o):r>0?-t<=r?(i=-i,e=-e,t=-t):(o=-e,e=n,n=o,o=-t,t=r,r=o):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,o=-e,e=-n,n=o,o=-t,t=-r,r=o),e>0)if(n>0){if(!(e<=n))return i}else return i;else{if(n>0)return-i;if(e>=n)i=-i,e=-e,n=-n;else return-i}for(;;){if(l=Math.floor(n/e),n=n-l*e,r=r-l*t,r<0)return-i;if(r>t)return i;if(e>n+n){if(t<r+r)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(r===0)return n===0?0:-i;if(n===0||(l=Math.floor(e/n),e=e-l*n,t=t-l*r,t<0))return i;if(t>r)return-i;if(n>e+e){if(r<t+t)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(t===0)return e===0?0:i;if(e===0)return-i}};var El=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};El.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,o=e.y-this._p.y,l=t.x-this._p.x,a=t.y-this._p.y,h=wp.signOfDet2x2(i,o,l,a);if(h===0)return this._isPointOnSegment=!0,null;a<o&&(h=-h),h>0&&this._crossingCount++}};El.prototype.isPointInPolygon=function(){return this.getLocation()!==Fe.EXTERIOR};El.prototype.getLocation=function(){return this._isPointOnSegment?Fe.BOUNDARY:this._crossingCount%2===1?Fe.INTERIOR:Fe.EXTERIOR};El.prototype.isOnSegment=function(){return this._isPointOnSegment};El.prototype.interfaces_=function(){return[]};El.prototype.getClass=function(){return El};El.locatePointInRing=function(){if(arguments[0]instanceof Ne&&Kt(arguments[1],In)){for(var e=arguments[0],t=arguments[1],n=new El(e),r=new Ne,i=new Ne,o=1;o<t.size();o++)if(t.getCoordinate(o,r),t.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof Ne&&arguments[1]instanceof Array){for(var l=arguments[0],a=arguments[1],h=new El(l),d=1;d<a.length;d++){var g=a[d],v=a[d-1];if(h.countSegment(g,v),h.isOnSegment())return h.getLocation()}return h.getLocation()}};var wt=function(){},qp={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};wt.prototype.interfaces_=function(){return[]};wt.prototype.getClass=function(){return wt};wt.orientationIndex=function(e,t,n){return Go.orientationIndex(e,t,n)};wt.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var i=e[r].x-n,o=e[r+1].y,l=e[r-1].y;t+=i*(l-o)}return t/2}else if(Kt(arguments[0],In)){var a=arguments[0],h=a.size();if(h<3)return 0;var d=new Ne,g=new Ne,v=new Ne;a.getCoordinate(0,g),a.getCoordinate(1,v);var b=g.x;v.x-=b;for(var I=0,T=1;T<h-1;T++)d.y=g.y,g.x=v.x,g.y=v.y,a.getCoordinate(T+1,v),v.x-=b,I+=g.x*(d.y-v.y);return I/2}};wt.distanceLineLine=function(e,t,n,r){if(e.equals(t))return wt.distancePointLine(e,n,r);if(n.equals(r))return wt.distancePointLine(r,e,t);var i=!1;if(!Bt.intersects(e,t,n,r))i=!0;else{var o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(o===0)i=!0;else{var l=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),a=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),h=a/o,d=l/o;(d<0||d>1||h<0||h>1)&&(i=!0)}}return i?Da.min(wt.distancePointLine(e,n,r),wt.distancePointLine(t,n,r),wt.distancePointLine(n,e,t),wt.distancePointLine(r,e,t)):0};wt.isPointInRing=function(e,t){return wt.locatePointInRing(e,t)!==Fe.EXTERIOR};wt.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new Ne;e.getCoordinate(0,r);for(var i=r.x,o=r.y,l=1;l<t;l++){e.getCoordinate(l,r);var a=r.x,h=r.y,d=a-i,g=h-o;n+=Math.sqrt(d*d+g*g),i=a,o=h}return n};wt.isCCW=function(e){var t=e.length-1;if(t<3)throw new xr("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var o=e[i];o.y>n.y&&(n=o,r=i)}var l=r;do l=l-1,l<0&&(l=t);while(e[l].equals2D(n)&&l!==r);var a=r;do a=(a+1)%t;while(e[a].equals2D(n)&&a!==r);var h=e[l],d=e[a];if(h.equals2D(n)||d.equals2D(n)||h.equals2D(d))return!1;var g=wt.computeOrientation(h,n,d),v=!1;return g===0?v=h.x>d.x:v=g>0,v};wt.locatePointInRing=function(e,t){return El.locatePointInRing(e,t)};wt.distancePointLinePerpendicular=function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)};wt.computeOrientation=function(e,t,n){return wt.orientationIndex(e,t,n)};wt.distancePointLine=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(t.length===0)throw new xr("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var i=wt.distancePointLine(e,t[r],t[r+1]);i<n&&(n=i)}return n}else if(arguments.length===3){var o=arguments[0],l=arguments[1],a=arguments[2];if(l.x===a.x&&l.y===a.y)return o.distance(l);var h=(a.x-l.x)*(a.x-l.x)+(a.y-l.y)*(a.y-l.y),d=((o.x-l.x)*(a.x-l.x)+(o.y-l.y)*(a.y-l.y))/h;if(d<=0)return o.distance(l);if(d>=1)return o.distance(a);var g=((l.y-o.y)*(a.x-l.x)-(l.x-o.x)*(a.y-l.y))/h;return Math.abs(g)*Math.sqrt(h)}};wt.isOnLine=function(e,t){for(var n=new md,r=1;r<t.length;r++){var i=t[r-1],o=t[r];if(n.computeIntersection(e,i,o),n.hasIntersection())return!0}return!1};qp.CLOCKWISE.get=function(){return-1};qp.RIGHT.get=function(){return wt.CLOCKWISE};qp.COUNTERCLOCKWISE.get=function(){return 1};qp.LEFT.get=function(){return wt.COUNTERCLOCKWISE};qp.COLLINEAR.get=function(){return 0};qp.STRAIGHT.get=function(){return wt.COLLINEAR};Object.defineProperties(wt,qp);var yc=function(){};yc.prototype.filter=function(e){};yc.prototype.interfaces_=function(){return[]};yc.prototype.getClass=function(){return yc};var Xt=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},Fu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Xt.prototype.isGeometryCollection=function(){return this.getSortIndex()===Xt.SORTINDEX_GEOMETRYCOLLECTION};Xt.prototype.getFactory=function(){return this._factory};Xt.prototype.getGeometryN=function(e){return this};Xt.prototype.getArea=function(){return 0};Xt.prototype.isRectangle=function(){return!1};Xt.prototype.equals=function(){if(arguments[0]instanceof Xt){var e=arguments[0];return e===null?!1:this.equalsTopo(e)}else if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof Xt))return!1;var n=t;return this.equalsExact(n)}};Xt.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)};Xt.prototype.geometryChanged=function(){this.apply(Xt.geometryChangedFilter)};Xt.prototype.geometryChangedAction=function(){this._envelope=null};Xt.prototype.equalsNorm=function(e){return e===null?!1:this.norm().equalsExact(e.norm())};Xt.prototype.getLength=function(){return 0};Xt.prototype.getNumGeometries=function(){return 1};Xt.prototype.compareTo=function(){if(arguments.length===1){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}};Xt.prototype.getUserData=function(){return this._userData};Xt.prototype.getSRID=function(){return this._SRID};Xt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};Xt.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===Xt.SORTINDEX_GEOMETRYCOLLECTION)throw new xr("This method does not support GeometryCollection arguments")};Xt.prototype.equal=function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n};Xt.prototype.norm=function(){var e=this.copy();return e.normalize(),e};Xt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};Xt.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Bt(this._envelope)};Xt.prototype.setSRID=function(e){this._SRID=e};Xt.prototype.setUserData=function(e){this._userData=e};Xt.prototype.compare=function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),l=i.compareTo(o);if(l!==0)return l}return n.hasNext()?1:r.hasNext()?-1:0};Xt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};Xt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Xt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Xt.SORTINDEX_MULTIPOINT||this.getSortIndex()===Xt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Xt.SORTINDEX_MULTIPOLYGON};Xt.prototype.interfaces_=function(){return[lC,ps,ms]};Xt.prototype.getClass=function(){return Xt};Xt.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1};Xt.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1};Fu.serialVersionUID.get=function(){return 8763622679187377e3};Fu.SORTINDEX_POINT.get=function(){return 0};Fu.SORTINDEX_MULTIPOINT.get=function(){return 1};Fu.SORTINDEX_LINESTRING.get=function(){return 2};Fu.SORTINDEX_LINEARRING.get=function(){return 3};Fu.SORTINDEX_MULTILINESTRING.get=function(){return 4};Fu.SORTINDEX_POLYGON.get=function(){return 5};Fu.SORTINDEX_MULTIPOLYGON.get=function(){return 6};Fu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};Fu.geometryChangedFilter.get=function(){return Xk};Object.defineProperties(Xt,Fu);var Xk=function(){};Xk.interfaces_=function(){return[yc]};Xk.filter=function(e){e.geometryChangedAction()};var Pu=function(){};Pu.prototype.filter=function(e){};Pu.prototype.interfaces_=function(){return[]};Pu.prototype.getClass=function(){return Pu};var us=function(){},Cc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};us.prototype.isInBoundary=function(e){};us.prototype.interfaces_=function(){return[]};us.prototype.getClass=function(){return us};Cc.Mod2BoundaryNodeRule.get=function(){return sy};Cc.EndPointBoundaryNodeRule.get=function(){return ly};Cc.MultiValentEndPointBoundaryNodeRule.get=function(){return uy};Cc.MonoValentEndPointBoundaryNodeRule.get=function(){return cy};Cc.MOD2_BOUNDARY_RULE.get=function(){return new sy};Cc.ENDPOINT_BOUNDARY_RULE.get=function(){return new ly};Cc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new uy};Cc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new cy};Cc.OGC_SFS_BOUNDARY_RULE.get=function(){return us.MOD2_BOUNDARY_RULE};Object.defineProperties(us,Cc);var sy=function(){};sy.prototype.isInBoundary=function(e){return e%2===1};sy.prototype.interfaces_=function(){return[us]};sy.prototype.getClass=function(){return sy};var ly=function(){};ly.prototype.isInBoundary=function(e){return e>0};ly.prototype.interfaces_=function(){return[us]};ly.prototype.getClass=function(){return ly};var uy=function(){};uy.prototype.isInBoundary=function(e){return e>1};uy.prototype.interfaces_=function(){return[us]};uy.prototype.getClass=function(){return uy};var cy=function(){};cy.prototype.isInBoundary=function(e){return e===1};cy.prototype.interfaces_=function(){return[us]};cy.prototype.getClass=function(){return cy};var fi=function(){};fi.prototype.add=function(){};fi.prototype.addAll=function(){};fi.prototype.isEmpty=function(){};fi.prototype.iterator=function(){};fi.prototype.size=function(){};fi.prototype.toArray=function(){};fi.prototype.remove=function(){};function Zk(e){this.message=e||""}Zk.prototype=new Error;Zk.prototype.name="IndexOutOfBoundsException";var Yy=function(){};Yy.prototype.hasNext=function(){};Yy.prototype.next=function(){};Yy.prototype.remove=function(){};var Ns=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(fi);function Jy(e){this.message=e||""}Jy.prototype=new Error;Jy.prototype.name="NoSuchElementException";var mt=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof fi&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,fi]},t.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.set=function(n,r){var i=this.array_[n];return this.array_[n]=r,i},t.prototype.iterator=function(){return new LAe(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new Zk;return this.array_[n]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.remove=function(n){for(var r=this,i=!1,o=0,l=this.array_.length;o<l;o++)if(r.array_[o]===n){r.array_.splice(o,1),i=!0;break}return i},t}(Ns),LAe=function(e){function t(n){e.call(this),this.arrayList_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Jy;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(Yy),p1=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(r){return this.get(r)},t.prototype.addAll=function(){var r=this;if(arguments.length===2){for(var i=arguments[0],o=arguments[1],l=!1,a=i.iterator();a.hasNext();)r.add(a.next(),o),l=!0;return l}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var r=this,i=e.prototype.clone.call(this),o=0;o<this.size();o++)i.add(o,r.get(o).copy());return i},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var r=this;if(arguments.length===1){var i=arguments[0];e.prototype.add.call(this,i)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var o=arguments[0],l=arguments[1];return this.add(o,l,!0),!0}else if(arguments[0]instanceof Ne&&typeof arguments[1]=="boolean"){var a=arguments[0],h=arguments[1];if(!h&&this.size()>=1){var d=this.get(this.size()-1);if(d.equals2D(a))return null}e.prototype.add.call(this,a)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var g=arguments[0],v=arguments[1];return this.add(g,v),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var b=arguments[0],I=arguments[1],T=arguments[2];if(T)for(var P=0;P<b.length;P++)r.add(b[P],I);else for(var $=b.length-1;$>=0;$--)r.add(b[$],I);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Ne){var O=arguments[0],k=arguments[1],R=arguments[2];if(!R){var j=this.size();if(j>0){if(O>0){var F=this.get(O-1);if(F.equals2D(k))return null}if(O<j){var U=this.get(O);if(U.equals2D(k))return null}}}e.prototype.add.call(this,O,k)}}else if(arguments.length===4){var G=arguments[0],Z=arguments[1],ne=arguments[2],oe=arguments[3],ye=1;ne>oe&&(ye=-1);for(var fe=ne;fe!==oe;fe+=ye)r.add(G[fe],Z);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new Ne(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(mt),dn=function(){},cC={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};cC.ForwardComparator.get=function(){return Sx};cC.BidirectionalComparator.get=function(){return fy};cC.coordArrayType.get=function(){return new Array(0).fill(null)};dn.prototype.interfaces_=function(){return[]};dn.prototype.getClass=function(){return dn};dn.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))};dn.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(dn.indexOf(r,t)<0)return r}return null};dn.scroll=function(e,t){var n=dn.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);Vi.arraycopy(e,n,r,0,e.length-n),Vi.arraycopy(e,0,r,e.length-n,n),Vi.arraycopy(r,0,e,0,e.length)};dn.equals=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(r===null||i===null||r.length!==i.length)return!1;for(var l=0;l<r.length;l++)if(o.compare(r[l],i[l])!==0)return!1;return!0}};dn.intersection=function(e,t){for(var n=new p1,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()};dn.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1};dn.removeRepeatedPoints=function(e){if(!dn.hasRepeatedPoints(e))return e;var t=new p1(e,!1);return t.toCoordinateArray()};dn.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}};dn.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var r=new Array(t).fill(null);if(t===0)return r;for(var i=0,o=0;o<e.length;o++)e[o]!==null&&(r[i++]=e[o]);return r};dn.copyDeep=function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new Ne(e[n]);return t}else if(arguments.length===5)for(var r=arguments[0],i=arguments[1],o=arguments[2],l=arguments[3],a=arguments[4],h=0;h<a;h++)o[l+h]=new Ne(r[i+h])};dn.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(r.compareTo(i)!==0)return!1}return!0};dn.envelope=function(e){for(var t=new Bt,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t};dn.toCoordinateArray=function(e){return e.toArray(dn.coordArrayType)};dn.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};dn.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1};dn.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(r!==0)return r}return 1};dn.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(r!==0)return r;n++}return n<t.length?-1:n<e.length?1:0};dn.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t};dn.extract=function(e,t,n){t=Da.clamp(t,0,e.length),n=Da.clamp(n,-1,e.length);var r=n-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(r===0)return i;for(var o=0,l=t;l<=n;l++)i[o++]=e[l];return i};Object.defineProperties(dn,cC);var Sx=function(){};Sx.prototype.compare=function(e,t){var n=e,r=t;return dn.compare(n,r)};Sx.prototype.interfaces_=function(){return[oy]};Sx.prototype.getClass=function(){return Sx};var fy=function(){};fy.prototype.compare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var i=dn.compare(n,r),o=dn.isEqualReversed(n,r);return o?0:i};fy.prototype.OLDcompare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var i=dn.increasingDirection(n),o=dn.increasingDirection(r),l=i>0?0:n.length-1,a=o>0?0:n.length-1,h=0;h<n.length;h++){var d=n[l].compareTo(r[a]);if(d!==0)return d;l+=i,a+=o}return 0};fy.prototype.interfaces_=function(){return[oy]};fy.prototype.getClass=function(){return fy};var Wp=function(){};Wp.prototype.get=function(){};Wp.prototype.put=function(){};Wp.prototype.size=function(){};Wp.prototype.values=function(){};Wp.prototype.entrySet=function(){};var DAe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Wp);function m1(e){this.message=e||""}m1.prototype=new Error;m1.prototype.name="OperationNotSupported";function fC(){}fC.prototype=new fi;fC.prototype.contains=function(){};var Kk=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof fi&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var r=this,i=0,o=this.array_.length;i<o;i++){var l=r.array_[i];if(l===n)return!0}return!1},t.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.remove=function(n){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.iterator=function(){return new RAe(this)},t}(fC),RAe=function(e){function t(n){e.call(this),this.hashSet_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Jy;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new m1},t}(Yy),rc=0,lh=1;function kF(e){return e===null?rc:e.color}function nr(e){return e===null?null:e.parent}function Yu(e,t){e!==null&&(e.color=t)}function iP(e){return e===null?null:e.left}function NF(e){return e===null?null:e.right}function io(){this.root_=null,this.size_=0}io.prototype=new DAe;io.prototype.get=function(e){for(var t=this.root_;t!==null;){var n=e.compareTo(t.key);if(n<0)t=t.left;else if(n>0)t=t.right;else return t.value}return null};io.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:rc,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=e.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var o=n.value;return n.value=t,o}while(n!==null);var l={key:e,left:null,right:null,value:t,parent:r,color:rc,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=l:r.right=l,this.fixAfterInsertion(l),this.size_++,null};io.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=lh;e!=null&&e!==this.root_&&e.parent.color===lh;)if(nr(e)===iP(nr(nr(e)))){var n=NF(nr(nr(e)));kF(n)===lh?(Yu(nr(e),rc),Yu(n,rc),Yu(nr(nr(e)),lh),e=nr(nr(e))):(e===NF(nr(e))&&(e=nr(e),t.rotateLeft(e)),Yu(nr(e),rc),Yu(nr(nr(e)),lh),t.rotateRight(nr(nr(e))))}else{var r=iP(nr(nr(e)));kF(r)===lh?(Yu(nr(e),rc),Yu(r,rc),Yu(nr(nr(e)),lh),e=nr(nr(e))):(e===iP(nr(e))&&(e=nr(e),t.rotateRight(e)),Yu(nr(e),rc),Yu(nr(nr(e)),lh),t.rotateLeft(nr(nr(e))))}this.root_.color=rc};io.prototype.values=function(){var e=new mt,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=io.successor(t))!==null;)e.add(t.value);return e};io.prototype.entrySet=function(){var e=new Kk,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=io.successor(t))!==null;)e.add(t);return e};io.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};io.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};io.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};io.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var n=e.parent,r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}};io.prototype.size=function(){return this.size_};var Ex=function(){};Ex.prototype.interfaces_=function(){return[]};Ex.prototype.getClass=function(){return Ex};function CG(){}CG.prototype=new fC;function $l(){this.array_=[],arguments[0]instanceof fi&&this.addAll(arguments[0])}$l.prototype=new CG;$l.prototype.contains=function(e){for(var t=this,n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===0)return!0}return!1};$l.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===1)return t.array_.splice(n,0,e),!0}return this.array_.push(e),!0};$l.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next());return!0};$l.prototype.remove=function(e){throw new m1};$l.prototype.size=function(){return this.array_.length};$l.prototype.isEmpty=function(){return this.array_.length===0};$l.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};$l.prototype.iterator=function(){return new hC(this)};var hC=function(e){this.treeSet_=e,this.position_=0};hC.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Jy;return this.treeSet_.array_[this.position_++]};hC.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};hC.prototype.remove=function(){throw new m1};var Dh=function(){};Dh.sort=function(){var e=arguments[0],t,n,r,i;if(arguments.length===1)i=function(l,a){return l.compareTo(a)},e.sort(i);else if(arguments.length===2)r=arguments[1],i=function(l,a){return r.compare(l,a)},e.sort(i);else if(arguments.length===3){n=e.slice(arguments[1],arguments[2]),n.sort();var o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));for(e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])}else if(arguments.length===4)for(n=e.slice(arguments[1],arguments[2]),r=arguments[3],i=function(l,a){return r.compare(l,a)},n.sort(i),o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length)),e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])};Dh.asList=function(e){for(var t=new mt,n=0,r=e.length;n<r;n++)t.add(e[n]);return t};var Mn=function(){},Ks={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ks.P.get=function(){return 0};Ks.L.get=function(){return 1};Ks.A.get=function(){return 2};Ks.FALSE.get=function(){return-1};Ks.TRUE.get=function(){return-2};Ks.DONTCARE.get=function(){return-3};Ks.SYM_FALSE.get=function(){return"F"};Ks.SYM_TRUE.get=function(){return"T"};Ks.SYM_DONTCARE.get=function(){return"*"};Ks.SYM_P.get=function(){return"0"};Ks.SYM_L.get=function(){return"1"};Ks.SYM_A.get=function(){return"2"};Mn.prototype.interfaces_=function(){return[]};Mn.prototype.getClass=function(){return Mn};Mn.toDimensionSymbol=function(e){switch(e){case Mn.FALSE:return Mn.SYM_FALSE;case Mn.TRUE:return Mn.SYM_TRUE;case Mn.DONTCARE:return Mn.SYM_DONTCARE;case Mn.P:return Mn.SYM_P;case Mn.L:return Mn.SYM_L;case Mn.A:return Mn.SYM_A}throw new xr("Unknown dimension value: "+e)};Mn.toDimensionValue=function(e){switch(wx.toUpperCase(e)){case Mn.SYM_FALSE:return Mn.FALSE;case Mn.SYM_TRUE:return Mn.TRUE;case Mn.SYM_DONTCARE:return Mn.DONTCARE;case Mn.SYM_P:return Mn.P;case Mn.SYM_L:return Mn.L;case Mn.SYM_A:return Mn.A}throw new xr("Unknown dimension symbol: "+e)};Object.defineProperties(Mn,Ks);var kl=function(){};kl.prototype.filter=function(e){};kl.prototype.interfaces_=function(){return[]};kl.prototype.getClass=function(){return kl};var zs=function(){};zs.prototype.filter=function(e,t){};zs.prototype.isDone=function(){};zs.prototype.isGeometryChanged=function(){};zs.prototype.interfaces_=function(){return[]};zs.prototype.getClass=function(){return zs};var To=function(e){function t(r,i){if(e.call(this,i),this._geometries=r||[],e.hasNullElements(this._geometries))throw new xr("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var r=this,i=new Bt,o=0;o<this._geometries.length;o++)i.expandToInclude(r._geometries[o].getEnvelopeInternal());return i},t.prototype.getGeometryN=function(r){return this._geometries[r]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var r=this,i=new Array(this.getNumPoints()).fill(null),o=-1,l=0;l<this._geometries.length;l++)for(var a=r._geometries[l].getCoordinates(),h=0;h<a.length;h++)o++,i[o]=a[h];return i},t.prototype.getArea=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getArea();return i},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var l=i;if(this._geometries.length!==l._geometries.length)return!1;for(var a=0;a<this._geometries.length;a++)if(!r._geometries[a].equalsExact(l._geometries[a],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<this._geometries.length;i++)r._geometries[i].normalize();Dh.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var r=this,i=Mn.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getBoundaryDimension());return i},t.prototype.getDimension=function(){for(var r=this,i=Mn.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getDimension());return i},t.prototype.getLength=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getNumPoints();return i},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),l=0;l<this._geometries.length;l++)o[l]=r._geometries[l].reverse();return this.getFactory().createGeometryCollection(o)},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=new $l(Dh.asList(this._geometries)),l=new $l(Dh.asList(i._geometries));return this.compare(o,l)}else if(arguments.length===2){for(var a=arguments[0],h=arguments[1],d=a,g=this.getNumGeometries(),v=d.getNumGeometries(),b=0;b<g&&b<v;){var I=r.getGeometryN(b),T=d.getGeometryN(b),P=I.compareToSameClass(T,h);if(P!==0)return P;b++}return b<g?1:b<v?-1:0}},t.prototype.apply=function(){var r=this;if(Kt(arguments[0],Pu))for(var i=arguments[0],o=0;o<this._geometries.length;o++)r._geometries[o].apply(i);else if(Kt(arguments[0],zs)){var l=arguments[0];if(this._geometries.length===0)return null;for(var a=0;a<this._geometries.length&&(r._geometries[a].apply(l),!l.isDone());a++);l.isGeometryChanged()&&this.geometryChanged()}else if(Kt(arguments[0],kl)){var h=arguments[0];h.filter(this);for(var d=0;d<this._geometries.length;d++)r._geometries[d].apply(h)}else if(Kt(arguments[0],yc)){var g=arguments[0];g.filter(this);for(var v=0;v<this._geometries.length;v++)r._geometries[v].apply(g)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),an.shouldNeverReachHere(),null},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._geometries=new Array(this._geometries.length).fill(null);for(var o=0;o<this._geometries.length;o++)i._geometries[o]=r._geometries[o].clone();return i},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.isEmpty=function(){for(var r=this,i=0;i<this._geometries.length;i++)if(!r._geometries[i].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,n),t}(Xt),Xh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Xt.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Mn.FALSE:0},t.prototype.isClosed=function(){var r=this;if(this.isEmpty())return!1;for(var i=0;i<this._geometries.length;i++)if(!r._geometries[i].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),l=0;l<this._geometries.length;l++)o[i-1-l]=r._geometries[l].reverse();return this.getFactory().createMultiLineString(o)},t.prototype.getBoundary=function(){return new os(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[Ex]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,n),t}(To),os=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var e=arguments[0],t=us.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};os.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};os.prototype.getBoundary=function(){return this._geom instanceof Lr?this.boundaryLineString(this._geom):this._geom instanceof Xh?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};os.prototype.boundaryLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])};os.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};os.prototype.computeBoundaryCoordinates=function(e){var t=this,n=new mt;this._endpointMap=new io;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);i.getNumPoints()!==0&&(t.addEndpoint(i.getCoordinateN(0)),t.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var l=o.next(),a=l.getValue(),h=a.count;t._bnRule.isInBoundary(h)&&n.add(l.getKey())}return dn.toCoordinateArray(n)};os.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);t===null&&(t=new IE,this._endpointMap.put(e,t)),t.count++};os.prototype.interfaces_=function(){return[]};os.prototype.getClass=function(){return os};os.getBoundary=function(){if(arguments.length===1){var e=arguments[0],t=new os(e);return t.getBoundary()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new os(n,r);return i.getBoundary()}};var IE=function(){this.count=null};IE.prototype.interfaces_=function(){return[]};IE.prototype.getClass=function(){return IE};function zAe(){}function FAe(){}var BAe=function(){};function jAe(){}function UAe(){}function VAe(){}var as=function(){},Yk={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};as.prototype.interfaces_=function(){return[]};as.prototype.getClass=function(){return as};as.chars=function(e,t){for(var n=new Array(t).fill(null),r=0;r<t;r++)n[r]=e;return String(n)};as.getStackTrace=function(){if(arguments.length===1){var e=arguments[0],t=new jAe,n=new zAe;return e.printStackTrace(n),t.toString()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o="";new FAe(as.getStackTrace(r));for(var l=new VAe,a=0;a<i;a++)try{o+=l.readLine()+as.NEWLINE}catch(h){if(h instanceof UAe)an.shouldNeverReachHere();else throw h}finally{}return o}};as.split=function(e,t){for(var n=t.length,r=new mt,i=""+e,o=i.indexOf(t);o>=0;){var l=i.substring(0,o);r.add(l),i=i.substring(o+n),o=i.indexOf(t)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),h=0;h<a.length;h++)a[h]=r.get(h);return a};as.toString=function(){if(arguments.length===1){var e=arguments[0];return as.SIMPLE_ORDINATE_FORMAT.format(e)}};as.spaces=function(e){return as.chars(" ",e)};Yk.NEWLINE.get=function(){return Vi.getProperty("line.separator")};Yk.SIMPLE_ORDINATE_FORMAT.get=function(){return new BAe};Object.defineProperties(as,Yk);var Zr=function(){};Zr.prototype.interfaces_=function(){return[]};Zr.prototype.getClass=function(){return Zr};Zr.copyCoord=function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))};Zr.isRing=function(e){var t=e.size();return t===0?!0:t<=3?!1:e.getOrdinate(0,In.X)===e.getOrdinate(t-1,In.X)&&e.getOrdinate(0,In.Y)===e.getOrdinate(t-1,In.Y)};Zr.isEqual=function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),o=0;o<n;o++)for(var l=0;l<i;l++){var a=e.getOrdinate(o,l),h=t.getOrdinate(o,l);if(e.getOrdinate(o,l)!==t.getOrdinate(o,l)&&!(tn.isNaN(a)&&tn.isNaN(h)))return!1}return!0};Zr.extend=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(Zr.copy(t,0,r,0,i),i>0)for(var o=i;o<n;o++)Zr.copy(t,i-1,r,o,1);return r};Zr.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)Zr.swap(e,r,t-r)};Zr.swap=function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}};Zr.copy=function(e,t,n,r,i){for(var o=0;o<i;o++)Zr.copyCoord(e,t+o,n,r+o)};Zr.toString=function(){if(arguments.length===1){var e=arguments[0],t=e.size();if(t===0)return"()";var n=e.getDimension(),r=new Gl;r.append("(");for(var i=0;i<t;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(as.toString(e.getOrdinate(i,o)))}return r.append(")"),r.toString()}};Zr.ensureValidRing=function(e,t){var n=t.size();if(n===0)return t;if(n<=3)return Zr.createClosedRing(e,t,4);var r=t.getOrdinate(0,In.X)===t.getOrdinate(n-1,In.X)&&t.getOrdinate(0,In.Y)===t.getOrdinate(n-1,In.Y);return r?t:Zr.createClosedRing(e,t,n+1)};Zr.createClosedRing=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();Zr.copy(t,0,r,0,i);for(var o=i;o<n;o++)Zr.copy(t,0,r,o,1);return r};var Lr=function(e){function t(r,i){e.call(this,i),this._points=null,this.init(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Bt:this._points.expandEnvelope(new Bt)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var l=i;if(this._points.size()!==l._points.size())return!1;for(var a=0;a<this._points.size();a++)if(!r.equal(r._points.getCoordinate(a),l._points.getCoordinate(a),o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<Math.trunc(this._points.size()/2);i++){var o=r._points.size()-1-i;if(!r._points.getCoordinate(i).equals(r._points.getCoordinate(o)))return r._points.getCoordinate(i).compareTo(r._points.getCoordinate(o))>0&&Zr.reverse(r._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Mn.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return wt.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var r=this._points.copy();Zr.reverse(r);var i=this.getFactory().createLineString(r);return i},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){for(var i=arguments[0],o=i,l=0,a=0;l<this._points.size()&&a<o._points.size();){var h=r._points.getCoordinate(l).compareTo(o._points.getCoordinate(a));if(h!==0)return h;l++,a++}return l<this._points.size()?1:a<o._points.size()?-1:0}else if(arguments.length===2){var d=arguments[0],g=arguments[1],v=d;return g.compare(this._points,v._points)}},t.prototype.apply=function(){var r=this;if(Kt(arguments[0],Pu))for(var i=arguments[0],o=0;o<this._points.size();o++)i.filter(r._points.getCoordinate(o));else if(Kt(arguments[0],zs)){var l=arguments[0];if(this._points.size()===0)return null;for(var a=0;a<this._points.size()&&(l.filter(r._points,a),!l.isDone());a++);l.isGeometryChanged()&&this.geometryChanged()}else if(Kt(arguments[0],kl)){var h=arguments[0];h.filter(this)}else if(Kt(arguments[0],yc)){var d=arguments[0];d.filter(this)}},t.prototype.getBoundary=function(){return new os(this).getBoundary()},t.prototype.isEquivalentClass=function(r){return r instanceof t},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._points=this._points.clone(),r},t.prototype.getCoordinateN=function(r){return this._points.getCoordinate(r)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(r){if(r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),r.size()===1)throw new xr("Invalid number of points in LineString (found "+r.size()+" - must be 0 or >= 2)");this._points=r},t.prototype.isCoordinate=function(r){for(var i=this,o=0;o<this._points.size();o++)if(i._points.getCoordinate(o).equals(r))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(r){return this.getFactory().createPoint(this._points.getCoordinate(r))},t.prototype.interfaces_=function(){return[Ex]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(Xt),Cx=function(){};Cx.prototype.interfaces_=function(){return[]};Cx.prototype.getClass=function(){return Cx};var da=function(e){function t(r,i){e.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Bt;var r=new Bt;return r.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),r},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?this.isEmpty()&&r.isEmpty()?!0:this.isEmpty()!==r.isEmpty()?!1:this.equal(r.getCoordinate(),this.getCoordinate(),i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return Mn.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var r=arguments[0],i=r;return this.getCoordinate().compareTo(i.getCoordinate())}else if(arguments.length===2){var o=arguments[0],l=arguments[1],a=o;return l.compare(this._coordinates,a._coordinates)}},t.prototype.apply=function(){if(Kt(arguments[0],Pu)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(Kt(arguments[0],zs)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else if(Kt(arguments[0],kl)){var o=arguments[0];o.filter(this)}else if(Kt(arguments[0],yc)){var l=arguments[0];l.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._coordinates=this._coordinates.clone(),r},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(r){r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),an.isTrue(r.size()<=1),this._coordinates=r},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[Cx]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,n),t}(Xt),xf=function(){};xf.prototype.interfaces_=function(){return[]};xf.prototype.getClass=function(){return xf};var yi=function(e){function t(r,i,o){if(e.call(this,o),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new xr("holes must not contain null elements");if(r.isEmpty()&&e.hasNonEmptyElements(i))throw new xr("shell is empty but holes are not");this._shell=r,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var r=this;if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),o=-1,l=this._shell.getCoordinates(),a=0;a<l.length;a++)o++,i[o]=l[a];for(var h=0;h<this._holes.length;h++)for(var d=r._holes[h].getCoordinates(),g=0;g<d.length;g++)o++,i[o]=d[g];return i},t.prototype.getArea=function(){var r=this,i=0;i+=Math.abs(wt.signedArea(this._shell.getCoordinateSequence()));for(var o=0;o<this._holes.length;o++)i-=Math.abs(wt.signedArea(r._holes[o].getCoordinateSequence()));return i},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var r=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),o=0;o<5;o++){var l=r.getX(o);if(!(l===i.getMinX()||l===i.getMaxX()))return!1;var a=r.getY(o);if(!(a===i.getMinY()||a===i.getMaxY()))return!1}for(var h=r.getX(0),d=r.getY(0),g=1;g<=4;g++){var v=r.getX(g),b=r.getY(g),I=v!==h,T=b!==d;if(I===T)return!1;h=v,d=b}return!0},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var l=i,a=this._shell,h=l._shell;if(!a.equalsExact(h,o)||this._holes.length!==l._holes.length)return!1;for(var d=0;d<this._holes.length;d++)if(!r._holes[d].equalsExact(l._holes[d],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var r=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var i=0;i<this._holes.length;i++)r.normalize(r._holes[i],!1);Dh.sort(this._holes)}else if(arguments.length===2){var o=arguments[0],l=arguments[1];if(o.isEmpty())return null;var a=new Array(o.getCoordinates().length-1).fill(null);Vi.arraycopy(o.getCoordinates(),0,a,0,a.length);var h=dn.minCoordinate(o.getCoordinates());dn.scroll(a,h),Vi.arraycopy(a,0,o.getCoordinates(),0,a.length),o.getCoordinates()[a.length]=a[0],wt.isCCW(o.getCoordinates())===l&&dn.reverse(o.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var r=this,i=0;i+=this._shell.getLength();for(var o=0;o<this._holes.length;o++)i+=r._holes[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=this._shell.getNumPoints(),o=0;o<this._holes.length;o++)i+=r._holes[o].getNumPoints();return i},t.prototype.reverse=function(){var r=this,i=this.copy();i._shell=this._shell.copy().reverse(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].copy().reverse();return i},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=this._shell,l=i._shell;return o.compareToSameClass(l)}else if(arguments.length===2){var a=arguments[0],h=arguments[1],d=a,g=this._shell,v=d._shell,b=g.compareToSameClass(v,h);if(b!==0)return b;for(var I=this.getNumInteriorRing(),T=d.getNumInteriorRing(),P=0;P<I&&P<T;){var $=r.getInteriorRingN(P),O=d.getInteriorRingN(P),k=$.compareToSameClass(O,h);if(k!==0)return k;P++}return P<I?1:P<T?-1:0}},t.prototype.apply=function(r){var i=this;if(Kt(r,Pu)){this._shell.apply(r);for(var o=0;o<this._holes.length;o++)i._holes[o].apply(r)}else if(Kt(r,zs)){if(this._shell.apply(r),!r.isDone())for(var l=0;l<this._holes.length&&(i._holes[l].apply(r),!r.isDone());l++);r.isGeometryChanged()&&this.geometryChanged()}else if(Kt(r,kl))r.filter(this);else if(Kt(r,yc)){r.filter(this),this._shell.apply(r);for(var a=0;a<this._holes.length;a++)i._holes[a].apply(r)}},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var i=new Array(this._holes.length+1).fill(null);i[0]=this._shell;for(var o=0;o<this._holes.length;o++)i[o+1]=r._holes[o];return i.length<=1?this.getFactory().createLinearRing(i[0].getCoordinateSequence()):this.getFactory().createMultiLineString(i)},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].clone();return i},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var r=this,i=this._shell.copy(),o=new Array(this._holes.length).fill(null),l=0;l<o.length;l++)o[l]=r._holes[l].copy();return new t(i,o,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(r){return this._holes[r]},t.prototype.interfaces_=function(){return[xf]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(Xt),hy=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Xt.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var r=arguments[0];return this._geometries[r].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return Mn.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[Cx]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,n),t}(To),Au=function(e){function t(r,i){r instanceof Ne&&i instanceof hn&&(r=i.getCoordinateSequenceFactory().create(r)),e.call(this,r,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Xt.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return Mn.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var r=this._points.copy();Zr.reverse(r);var i=this.getFactory().createLinearRing(r);return i},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new xr("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new xr("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(Lr),Su=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Xt.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),l=0;l<this._geometries.length;l++)o[l]=r._geometries[l].reverse();return this.getFactory().createMultiPolygon(o)},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var i=new mt,o=0;o<this._geometries.length;o++)for(var l=r._geometries[o],a=l.getBoundary(),h=0;h<a.getNumGeometries();h++)i.add(a.getGeometryN(h));var d=new Array(i.size()).fill(null);return this.getFactory().createMultiLineString(i.toArray(d))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[xf]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(To),cs=function(e){this._factory=e||null,this._isUserDataCopied=!1},dC={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};cs.prototype.setCopyUserData=function(e){this._isUserDataCopied=e};cs.prototype.edit=function(e,t){if(e===null)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n};cs.prototype.editInternal=function(e,t){return this._factory===null&&(this._factory=e.getFactory()),e instanceof To?this.editGeometryCollection(e,t):e instanceof yi?this.editPolygon(e,t):e instanceof da?t.edit(e,this._factory):e instanceof Lr?t.edit(e,this._factory):(an.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)};cs.prototype.editGeometryCollection=function(e,t){for(var n=this,r=t.edit(e,this._factory),i=new mt,o=0;o<r.getNumGeometries();o++){var l=n.edit(r.getGeometryN(o),t);l===null||l.isEmpty()||i.add(l)}return r.getClass()===hy?this._factory.createMultiPoint(i.toArray([])):r.getClass()===Xh?this._factory.createMultiLineString(i.toArray([])):r.getClass()===Su?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))};cs.prototype.editPolygon=function(e,t){var n=this,r=t.edit(e,this._factory);if(r===null&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var i=this.edit(r.getExteriorRing(),t);if(i===null||i.isEmpty())return this._factory.createPolygon();for(var o=new mt,l=0;l<r.getNumInteriorRing();l++){var a=n.edit(r.getInteriorRingN(l),t);a===null||a.isEmpty()||o.add(a)}return this._factory.createPolygon(i,o.toArray([]))};cs.prototype.interfaces_=function(){return[]};cs.prototype.getClass=function(){return cs};cs.GeometryEditorOperation=function(){};dC.NoOpGeometryOperation.get=function(){return Ix};dC.CoordinateOperation.get=function(){return Tx};dC.CoordinateSequenceOperation.get=function(){return Px};Object.defineProperties(cs,dC);var Ix=function(){};Ix.prototype.edit=function(e,t){return e};Ix.prototype.interfaces_=function(){return[cs.GeometryEditorOperation]};Ix.prototype.getClass=function(){return Ix};var Tx=function(){};Tx.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return n===null?e:e instanceof Au?t.createLinearRing(n):e instanceof Lr?t.createLineString(n):e instanceof da?n.length>0?t.createPoint(n[0]):t.createPoint():e};Tx.prototype.interfaces_=function(){return[cs.GeometryEditorOperation]};Tx.prototype.getClass=function(){return Tx};var Px=function(){};Px.prototype.edit=function(e,t){return e instanceof Au?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Lr?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof da?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e};Px.prototype.interfaces_=function(){return[cs.GeometryEditorOperation]};Px.prototype.getClass=function(){return Px};var Wr=function(){var e=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)e._coordinates[n]=new Ne}else if(Kt(arguments[0],In)){var r=arguments[0];if(r===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)e._coordinates[i]=r.getCoordinateCopy(i)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],l=arguments[1];this._coordinates=o,this._dimension=l,o===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],h=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=h;for(var d=0;d<a;d++)e._coordinates[d]=new Ne}}},IG={serialVersionUID:{configurable:!0}};Wr.prototype.setOrdinate=function(e,t,n){switch(t){case In.X:this._coordinates[e].x=n;break;case In.Y:this._coordinates[e].y=n;break;case In.Z:this._coordinates[e].z=n;break;default:throw new xr("invalid ordinateIndex")}};Wr.prototype.size=function(){return this._coordinates.length};Wr.prototype.getOrdinate=function(e,t){switch(t){case In.X:return this._coordinates[e].x;case In.Y:return this._coordinates[e].y;case In.Z:return this._coordinates[e].z}return tn.NaN};Wr.prototype.getCoordinate=function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}};Wr.prototype.getCoordinateCopy=function(e){return new Ne(this._coordinates[e])};Wr.prototype.getDimension=function(){return this._dimension};Wr.prototype.getX=function(e){return this._coordinates[e].x};Wr.prototype.clone=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].clone();return new Wr(t,this._dimension)};Wr.prototype.expandEnvelope=function(e){for(var t=this,n=0;n<this._coordinates.length;n++)e.expandToInclude(t._coordinates[n]);return e};Wr.prototype.copy=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].copy();return new Wr(t,this._dimension)};Wr.prototype.toString=function(){var e=this;if(this._coordinates.length>0){var t=new Gl(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)t.append(", "),t.append(e._coordinates[n]);return t.append(")"),t.toString()}else return"()"};Wr.prototype.getY=function(e){return this._coordinates[e].y};Wr.prototype.toCoordinateArray=function(){return this._coordinates};Wr.prototype.interfaces_=function(){return[In,ms]};Wr.prototype.getClass=function(){return Wr};IG.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(Wr,IG);var Ou=function(){},Jk={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Ou.prototype.readResolve=function(){return Ou.instance()};Ou.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new Wr(e)}else if(Kt(arguments[0],In)){var t=arguments[0];return new Wr(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new Wr(n):new Wr(n,r)}};Ou.prototype.interfaces_=function(){return[ay,ms]};Ou.prototype.getClass=function(){return Ou};Ou.instance=function(){return Ou.instanceObject};Jk.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};Jk.instanceObject.get=function(){return new Ou};Object.defineProperties(Ou,Jk);var TG=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,r){return this.map_.set(n,r),r},t.prototype.values=function(){for(var n=new mt,r=this.map_.values(),i=r.next();!i.done;)n.add(i.value),i=r.next();return n},t.prototype.entrySet=function(){var n=new Kk;return this.map_.entries().forEach(function(r){return n.add(r)}),n},t.prototype.size=function(){return this.map_.size()},t}(Wp),Nn=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Nl){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},Qk={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Nn.prototype.equals=function(e){if(!(e instanceof Nn))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale};Nn.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new Ml(n).compareTo(new Ml(r))};Nn.prototype.getScale=function(){return this._scale};Nn.prototype.isFloating=function(){return this._modelType===Nn.FLOATING||this._modelType===Nn.FLOATING_SINGLE};Nn.prototype.getType=function(){return this._modelType};Nn.prototype.toString=function(){var e="UNKNOWN";return this._modelType===Nn.FLOATING?e="Floating":this._modelType===Nn.FLOATING_SINGLE?e="Floating-Single":this._modelType===Nn.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e};Nn.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var e=arguments[0];if(tn.isNaN(e))return e;if(this._modelType===Nn.FLOATING_SINGLE){var t=e;return t}return this._modelType===Nn.FIXED?Math.round(e*this._scale)/this._scale:e}else if(arguments[0]instanceof Ne){var n=arguments[0];if(this._modelType===Nn.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};Nn.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===Nn.FLOATING?e=16:this._modelType===Nn.FLOATING_SINGLE?e=6:this._modelType===Nn.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e};Nn.prototype.setScale=function(e){this._scale=Math.abs(e)};Nn.prototype.interfaces_=function(){return[ms,ps]};Nn.prototype.getClass=function(){return Nn};Nn.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t};Qk.serialVersionUID.get=function(){return 7777263578777804e3};Qk.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(Nn,Qk);var Nl=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},eN={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Nl.prototype.readResolve=function(){return Nl.nameToTypeMap.get(this._name)};Nl.prototype.toString=function(){return this._name};Nl.prototype.interfaces_=function(){return[ms]};Nl.prototype.getClass=function(){return Nl};eN.serialVersionUID.get=function(){return-552860263173159e4};eN.nameToTypeMap.get=function(){return new TG};Object.defineProperties(Nl,eN);Nn.Type=Nl;Nn.FIXED=new Nl("FIXED");Nn.FLOATING=new Nl("FLOATING");Nn.FLOATING_SINGLE=new Nl("FLOATING SINGLE");var hn=function e(){this._precisionModel=new Nn,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?Kt(arguments[0],ay)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Nn&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},PG={serialVersionUID:{configurable:!0}};hn.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new Ne(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new Ne(e.getMinX(),e.getMinY()),new Ne(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new Ne(e.getMinX(),e.getMinY()),new Ne(e.getMinX(),e.getMaxY()),new Ne(e.getMaxX(),e.getMaxY()),new Ne(e.getMaxX(),e.getMinY()),new Ne(e.getMinX(),e.getMinY())]),null)};hn.prototype.createLineString=function(e){if(e){if(e instanceof Array)return new Lr(this.getCoordinateSequenceFactory().create(e),this);if(Kt(e,In))return new Lr(e,this)}else return new Lr(this.getCoordinateSequenceFactory().create([]),this)};hn.prototype.createMultiLineString=function(){if(arguments.length===0)return new Xh(null,this);if(arguments.length===1){var e=arguments[0];return new Xh(e,this)}};hn.prototype.buildGeometry=function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var o=i.next(),l=o.getClass();t===null&&(t=l),l!==t&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(t===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(hn.toGeometryArray(e));var a=e.iterator().next(),h=e.size()>1;if(h){if(a instanceof yi)return this.createMultiPolygon(hn.toPolygonArray(e));if(a instanceof Lr)return this.createMultiLineString(hn.toLineStringArray(e));if(a instanceof da)return this.createMultiPoint(hn.toPointArray(e));an.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a};hn.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)};hn.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Ne){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(Kt(arguments[0],In)){var t=arguments[0];return new da(t,this)}}};hn.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};hn.prototype.createPolygon=function(){if(arguments.length===0)return new yi(null,null,this);if(arguments.length===1){if(Kt(arguments[0],In)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof Au){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return new yi(r,i,this)}};hn.prototype.getSRID=function(){return this._SRID};hn.prototype.createGeometryCollection=function(){if(arguments.length===0)return new To(null,this);if(arguments.length===1){var e=arguments[0];return new To(e,this)}};hn.prototype.createGeometry=function(e){var t=new cs(this);return t.edit(e,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};hn.prototype.getPrecisionModel=function(){return this._precisionModel};hn.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(Kt(arguments[0],In)){var t=arguments[0];return new Au(t,this)}}};hn.prototype.createMultiPolygon=function(){if(arguments.length===0)return new Su(null,this);if(arguments.length===1){var e=arguments[0];return new Su(e,this)}};hn.prototype.createMultiPoint=function(){var e=this;if(arguments.length===0)return new hy(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new hy(t,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(Kt(arguments[0],In)){var r=arguments[0];if(r===null)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var l=e.getCoordinateSequenceFactory().create(1,r.getDimension());Zr.copy(r,o,l,0,1),i[o]=e.createPoint(l)}return this.createMultiPoint(i)}}};hn.prototype.interfaces_=function(){return[ms]};hn.prototype.getClass=function(){return hn};hn.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};hn.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};hn.getDefaultCoordinateSequenceFactory=function(){return Ou.instance()};hn.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};hn.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};hn.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};hn.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};hn.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};hn.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};hn.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)};PG.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(hn,PG);var GAe=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],pC=function(e){this.geometryFactory=e||new hn};pC.prototype.read=function(e){var t;typeof e=="string"?t=JSON.parse(e):t=e;var n=t.type;if(!dl[n])throw new Error("Unknown GeoJSON type: "+t.type);return GAe.indexOf(n)!==-1?dl[n].apply(this,[t.coordinates]):n==="GeometryCollection"?dl[n].apply(this,[t.geometries]):dl[n].apply(this,[t])};pC.prototype.write=function(e){var t=e.getGeometryType();if(!tc[t])throw new Error("Geometry is not supported");return tc[t].apply(this,[e])};var dl={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!dl[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=dl.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t=this,n={};if(e.features){n.features=[];for(var r=0;r<e.features.length;++r)n.features.push(t.read(e.features[r]))}return e.bbox&&(n.bbox=this.parse.bbox.apply(this,[e.bbox])),n},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new Ne(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new Ne(e[0],e[1]),new Ne(e[2],e[1]),new Ne(e[2],e[3]),new Ne(e[0],e[3]),new Ne(e[0],e[1])])},Point:function(e){var t=new Ne(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(dl.Point.apply(t,[e[r]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(e){var t=dl.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(dl.LineString.apply(t,[e[r]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(e){for(var t=this,n=dl.coordinates.apply(this,[e[0]]),r=this.geometryFactory.createLinearRing(n),i=[],o=1;o<e.length;++o){var l=e[o],a=dl.coordinates.apply(t,[l]),h=t.geometryFactory.createLinearRing(a);i.push(h)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(dl.Polygon.apply(t,[i]))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(t.read(i))}return this.geometryFactory.createGeometryCollection(n)}},tc={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=tc.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=tc.Point.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(e){for(var t=this,n=[],r=e.getCoordinates(),i=0;i<r.length;++i){var o=r[i];n.push(tc.coordinate.apply(t,[o]))}return{type:"LineString",coordinates:n}},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=tc.LineString.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(e){var t=this,n=[],r=tc.LineString.apply(this,[e._shell]);n.push(r.coordinates);for(var i=0;i<e._holes.length;++i){var o=e._holes[i],l=tc.LineString.apply(t,[o]);n.push(l.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=tc.Polygon.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=i.getGeometryType();n.push(tc[o].apply(t,[i]))}return{type:"GeometryCollection",geometries:n}}},tN=function(e){this.geometryFactory=e||new hn,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new pC(this.geometryFactory)};tN.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===Nn.FIXED&&this.reducePrecision(t),t};tN.prototype.reducePrecision=function(e){var t=this,n,r;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(n=0,r=e.points.length;n<r;n++)t.precisionModel.makePrecise(e.points[n]);else if(e.geometries)for(n=0,r=e.geometries.length;n<r;n++)t.reducePrecision(e.geometries[n])};var AG=function(){this.parser=new pC(this.geometryFactory)};AG.prototype.write=function(e){return this.parser.write(e)};var at=function(){},mC={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]};at.prototype.getClass=function(){return at};at.opposite=function(e){return e===at.LEFT?at.RIGHT:e===at.RIGHT?at.LEFT:e};mC.ON.get=function(){return 0};mC.LEFT.get=function(){return 1};mC.RIGHT.get=function(){return 2};Object.defineProperties(at,mC);function gC(e){this.message=e||""}gC.prototype=new Error;gC.prototype.name="EmptyStackException";function ql(){this.array_=[]}ql.prototype=new Ns;ql.prototype.add=function(e){return this.array_.push(e),!0};ql.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};ql.prototype.push=function(e){return this.array_.push(e),e};ql.prototype.pop=function(e){if(this.array_.length===0)throw new gC;return this.array_.pop()};ql.prototype.peek=function(){if(this.array_.length===0)throw new gC;return this.array_[this.array_.length-1]};ql.prototype.empty=function(){return this.array_.length===0};ql.prototype.isEmpty=function(){return this.empty()};ql.prototype.search=function(e){return this.array_.indexOf(e)};ql.prototype.size=function(){return this.array_.length};ql.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};var Ll=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ll.prototype.getCoordinate=function(){return this._minCoord};Ll.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n};Ll.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();an.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=wt.computeOrientation(this._minCoord,n,t),i=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===wt.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===wt.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)};Ll.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(t<0||t+1>=r.length||r[t].y===r[t+1].y)return-1;var i=at.LEFT;return r[t].y<r[t+1].y&&(i=at.RIGHT),i};Ll.prototype.getEdge=function(){return this._orientedDe};Ll.prototype.checkForRightmostCoordinate=function(e){for(var t=this,n=e.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(t._minCoord===null||n[r].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=r,t._minCoord=n[r])};Ll.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};Ll.prototype.findEdge=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();r.isForward()&&t.checkForRightmostCoordinate(r)}an.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var i=this.getRightmostSide(this._minDe,this._minIndex);i===at.LEFT&&(this._orientedDe=this._minDe.getSym())};Ll.prototype.interfaces_=function(){return[]};Ll.prototype.getClass=function(){return Ll};var vc=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new Ne(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,r){return r?n:n+" [ "+r+" ]"},t}(gc),yC=function(){this.array_=[]};yC.prototype.addLast=function(e){this.array_.push(e)};yC.prototype.removeFirst=function(){return this.array_.shift()};yC.prototype.isEmpty=function(){return this.array_.length===0};var Po=function(){this._finder=null,this._dirEdgeList=new mt,this._nodes=new mt,this._rightMostCoord=null,this._env=null,this._finder=new Ll};Po.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}};Po.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};Po.prototype.computeNodeDepth=function(e){for(var t=this,n=null,r=e.getEdges().iterator();r.hasNext();){var i=r.next();if(i.isVisited()||i.getSym().isVisited()){n=i;break}}if(n===null)throw new vc("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var o=e.getEdges().iterator();o.hasNext();){var l=o.next();l.setVisited(!0),t.copySymDepths(l)}};Po.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(at.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)};Po.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};Po.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(at.RIGHT)>=1&&t.getDepth(at.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}};Po.prototype.computeDepths=function(e){var t=this,n=new Kk,r=new yC,i=e.getNode();for(r.addLast(i),n.add(i),e.setVisited(!0);!r.isEmpty();){var o=r.removeFirst();n.add(o),t.computeNodeDepth(o);for(var l=o.getEdges().iterator();l.hasNext();){var a=l.next(),h=a.getSym();if(!h.isVisited()){var d=h.getNode();n.contains(d)||(r.addLast(d),n.add(d))}}}};Po.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};Po.prototype.getEnvelope=function(){if(this._env===null){for(var e=new Bt,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)e.expandToInclude(r[i]);this._env=e}return this._env};Po.prototype.addReachable=function(e){var t=this,n=new ql;for(n.add(e);!n.empty();){var r=n.pop();t.add(r,n)}};Po.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(at.LEFT,e.getDepth(at.RIGHT)),t.setDepth(at.RIGHT,e.getDepth(at.LEFT))};Po.prototype.add=function(e,t){var n=this;e.setVisited(!0),this._nodes.add(e);for(var r=e.getEdges().iterator();r.hasNext();){var i=r.next();n._dirEdgeList.add(i);var o=i.getSym(),l=o.getNode();l.isVisited()||t.push(l)}};Po.prototype.getNodes=function(){return this._nodes};Po.prototype.getDirectedEdges=function(){return this._dirEdgeList};Po.prototype.interfaces_=function(){return[ps]};Po.prototype.getClass=function(){return Po};var rr=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[at.ON]=r}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var l=arguments[0],a=arguments[1],h=arguments[2];this.init(3),this.location[at.ON]=l,this.location[at.LEFT]=a,this.location[at.RIGHT]=h}};rr.prototype.setAllLocations=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]=e};rr.prototype.isNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]!==Fe.NONE)return!1;return!0};rr.prototype.setAllLocationsIfNull=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]===Fe.NONE&&(t.location[n]=e)};rr.prototype.isLine=function(){return this.location.length===1};rr.prototype.merge=function(e){var t=this;if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[at.ON]=this.location[at.ON],n[at.LEFT]=Fe.NONE,n[at.RIGHT]=Fe.NONE,this.location=n}for(var r=0;r<this.location.length;r++)t.location[r]===Fe.NONE&&r<e.location.length&&(t.location[r]=e.location[r])};rr.prototype.getLocations=function(){return this.location};rr.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[at.LEFT];this.location[at.LEFT]=this.location[at.RIGHT],this.location[at.RIGHT]=e};rr.prototype.toString=function(){var e=new Gl;return this.location.length>1&&e.append(Fe.toLocationSymbol(this.location[at.LEFT])),e.append(Fe.toLocationSymbol(this.location[at.ON])),this.location.length>1&&e.append(Fe.toLocationSymbol(this.location[at.RIGHT])),e.toString()};rr.prototype.setLocations=function(e,t,n){this.location[at.ON]=e,this.location[at.LEFT]=t,this.location[at.RIGHT]=n};rr.prototype.get=function(e){return e<this.location.length?this.location[e]:Fe.NONE};rr.prototype.isArea=function(){return this.location.length>1};rr.prototype.isAnyNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]===Fe.NONE)return!0;return!1};rr.prototype.setLocation=function(){if(arguments.length===1){var e=arguments[0];this.setLocation(at.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}};rr.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(Fe.NONE)};rr.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]};rr.prototype.allPositionsEqual=function(e){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==e)return!1;return!0};rr.prototype.interfaces_=function(){return[]};rr.prototype.getClass=function(){return rr};var Un=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new rr(t),this.elt[1]=new rr(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new rr(n.elt[0]),this.elt[1]=new rr(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new rr(Fe.NONE),this.elt[1]=new rr(Fe.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var o=arguments[0],l=arguments[1],a=arguments[2];this.elt[0]=new rr(o,l,a),this.elt[1]=new rr(o,l,a)}else if(arguments.length===4){var h=arguments[0],d=arguments[1],g=arguments[2],v=arguments[3];this.elt[0]=new rr(Fe.NONE,Fe.NONE,Fe.NONE),this.elt[1]=new rr(Fe.NONE,Fe.NONE,Fe.NONE),this.elt[h].setLocations(d,g,v)}};Un.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e};Un.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)};Un.prototype.isNull=function(e){return this.elt[e].isNull()};Un.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}};Un.prototype.isLine=function(e){return this.elt[e].isLine()};Un.prototype.merge=function(e){for(var t=this,n=0;n<2;n++)t.elt[n]===null&&e.elt[n]!==null?t.elt[n]=new rr(e.elt[n]):t.elt[n].merge(e.elt[n])};Un.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};Un.prototype.getLocation=function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(at.ON)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}};Un.prototype.toString=function(){var e=new Gl;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()};Un.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}};Un.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()};Un.prototype.setLocation=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(at.ON,t)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}};Un.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)};Un.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)};Un.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new rr(this.elt[e].location[0]))};Un.prototype.interfaces_=function(){return[]};Un.prototype.getClass=function(){return Un};Un.toLineLabel=function(e){for(var t=new Un(Fe.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var ai=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new mt,this._pts=new mt,this._label=new Un(Fe.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new mt,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};ai.prototype.computeRing=function(){var e=this;if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=e._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=wt.isCCW(this._ring.getCoordinates())};ai.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};ai.prototype.computePoints=function(e){var t=this;this._startDe=e;var n=e,r=!0;do{if(n===null)throw new vc("Found null DirectedEdge");if(n.getEdgeRing()===t)throw new vc("Directed Edge visited twice during ring-building at "+n.getCoordinate());t._edges.add(n);var i=n.getLabel();an.isTrue(i.isArea()),t.mergeLabel(i),t.addPoints(n.getEdge(),n.isForward(),r),r=!1,t.setEdgeRing(n,t),n=t.getNext(n)}while(n!==this._startDe)};ai.prototype.getLinearRing=function(){return this._ring};ai.prototype.getCoordinate=function(e){return this._pts.get(e)};ai.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var n=t.getNode(),r=n.getEdges().getOutgoingDegree(e);r>e._maxNodeDegree&&(e._maxNodeDegree=r),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2};ai.prototype.addPoints=function(e,t,n){var r=this,i=e.getCoordinates();if(t){var o=1;n&&(o=0);for(var l=o;l<i.length;l++)r._pts.add(i[l])}else{var a=i.length-2;n&&(a=i.length-1);for(var h=a;h>=0;h--)r._pts.add(i[h])}};ai.prototype.isHole=function(){return this._isHole};ai.prototype.setInResult=function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)};ai.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e)||!wt.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(e))return!1}return!0};ai.prototype.addHole=function(e){this._holes.add(e)};ai.prototype.isShell=function(){return this._shell===null};ai.prototype.getLabel=function(){return this._label};ai.prototype.getEdges=function(){return this._edges};ai.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};ai.prototype.getShell=function(){return this._shell};ai.prototype.mergeLabel=function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=t.getLocation(n,at.RIGHT);if(r===Fe.NONE)return null;if(this._label.getLocation(n)===Fe.NONE)return this._label.setLocation(n,r),null}};ai.prototype.setShell=function(e){this._shell=e,e!==null&&e.addHole(this)};ai.prototype.toPolygon=function(e){for(var t=this,n=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)n[r]=t._holes.get(r).getLinearRing();var i=e.createPolygon(this.getLinearRing(),n);return i};ai.prototype.interfaces_=function(){return[]};ai.prototype.getClass=function(){return ai};var qAe=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,r){n.setMinEdgeRing(r)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ai),WAe=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var n=this,r=new mt,i=this._startDe;do{if(i.getMinEdgeRing()===null){var o=new qAe(i,n._geometryFactory);r.add(o)}i=i.getNext()}while(i!==this._startDe);return r},t.prototype.setEdgeRing=function(n,r){n.setEdgeRing(r)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,r=this._startDe;do{var i=r.getNode();i.getEdges().linkMinimalDirectedEdges(n),r=r.getNext()}while(r!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ai),Ra=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._label=e}};Ra.prototype.setVisited=function(e){this._isVisited=e};Ra.prototype.setInResult=function(e){this._isInResult=e};Ra.prototype.isCovered=function(){return this._isCovered};Ra.prototype.isCoveredSet=function(){return this._isCoveredSet};Ra.prototype.setLabel=function(e){this._label=e};Ra.prototype.getLabel=function(){return this._label};Ra.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0};Ra.prototype.updateIM=function(e){an.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)};Ra.prototype.isInResult=function(){return this._isInResult};Ra.prototype.isVisited=function(){return this._isVisited};Ra.prototype.interfaces_=function(){return[]};Ra.prototype.getClass=function(){return Ra};var vC=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new Un(0,Fe.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(n){},t.prototype.computeMergedLocation=function(n,r){var i=Fe.NONE;if(i=this._label.getLocation(r),!n.isNull(r)){var o=n.getLocation(r);i!==Fe.BOUNDARY&&(i=o)}return i},t.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];this._label===null?this._label=new Un(n,r):this._label.setLocation(n,r)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof t){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof Un)for(var i=arguments[0],o=0;o<2;o++){var l=n.computeMergedLocation(i,o),a=n._label.getLocation(o);a===Fe.NONE&&n._label.setLocation(o,l)}},t.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},t.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var r=Fe.NONE;this._label!==null&&(r=this._label.getLocation(n));var i=null;switch(r){case Fe.BOUNDARY:i=Fe.INTERIOR;break;case Fe.INTERIOR:i=Fe.BOUNDARY;break;default:i=Fe.BOUNDARY;break}this._label.setLocation(n,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ra),Dl=function(){this.nodeMap=new io,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};Dl.prototype.find=function(e){return this.nodeMap.get(e)};Dl.prototype.addNode=function(){if(arguments[0]instanceof Ne){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}else if(arguments[0]instanceof vC){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return r===null?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}};Dl.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Dl.prototype.iterator=function(){return this.nodeMap.values().iterator()};Dl.prototype.values=function(){return this.nodeMap.values()};Dl.prototype.getBoundaryNodes=function(e){for(var t=new mt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===Fe.BOUNDARY&&t.add(r)}return t};Dl.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)};Dl.prototype.interfaces_=function(){return[]};Dl.prototype.getClass=function(){return Dl};var Hn=function(){},g1={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Hn.prototype.interfaces_=function(){return[]};Hn.prototype.getClass=function(){return Hn};Hn.isNorthern=function(e){return e===Hn.NE||e===Hn.NW};Hn.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return n===2};Hn.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(n===2)return-1;var r=e<t?e:t,i=e>t?e:t;return r===0&&i===3?3:r};Hn.isInHalfPlane=function(e,t){return t===Hn.SE?e===Hn.SE||e===Hn.SW:e===t||e===t+1};Hn.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new xr("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?Hn.NE:Hn.SE:t>=0?Hn.NW:Hn.SW}else if(arguments[0]instanceof Ne&&arguments[1]instanceof Ne){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new xr("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Hn.NE:Hn.SE:r.y>=n.y?Hn.NW:Hn.SW}};g1.NE.get=function(){return 0};g1.NW.get=function(){return 1};g1.SW.get=function(){return 2};g1.SE.get=function(){return 3};Object.defineProperties(Hn,g1);var oo=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=t,this.init(n,r),this._label=i}else if(arguments.length===4){var o=arguments[0],l=arguments[1],a=arguments[2],h=arguments[3];this._edge=o,this.init(l,a),this._label=h}};oo.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:wt.computeOrientation(e._p0,e._p1,this._p1)};oo.prototype.getDy=function(){return this._dy};oo.prototype.getCoordinate=function(){return this._p0};oo.prototype.setNode=function(e){this._node=e};oo.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)};oo.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)};oo.prototype.getDirectedCoordinate=function(){return this._p1};oo.prototype.getDx=function(){return this._dx};oo.prototype.getLabel=function(){return this._label};oo.prototype.getEdge=function(){return this._edge};oo.prototype.getQuadrant=function(){return this._quadrant};oo.prototype.getNode=function(){return this._node};oo.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label};oo.prototype.computeLabel=function(e){};oo.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Hn.quadrant(this._dx,this._dy),an.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};oo.prototype.interfaces_=function(){return[ps]};oo.prototype.getClass=function(){return oo};var nM=function(e){function t(){var n=arguments[0],r=arguments[1];if(e.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new Un(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,r){if(this._depth[n]!==-999&&this._depth[n]!==r)throw new vc("assigned depths do not match",this.getCoordinate());this._depth[n]=r},t.prototype.isInteriorAreaEdge=function(){for(var n=this,r=!0,i=0;i<2;i++)n._label.isArea(i)&&n._label.getLocation(i,at.LEFT)===Fe.INTERIOR&&n._label.getLocation(i,at.RIGHT)===Fe.INTERIOR||(r=!1);return r},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(n){e.prototype.print.call(this,n),n.print(" "+this._depth[at.LEFT]+"/"+this._depth[at.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),r=!this._label.isArea(0)||this._label.allPositionsEqual(0,Fe.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,Fe.EXTERIOR);return n&&r&&i},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,r){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var o=1;n===at.LEFT&&(o=-1);var l=at.opposite(n),a=i*o,h=r+a;this.setDepth(n,r),this.setDepth(l,h)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,r){return n===Fe.EXTERIOR&&r===Fe.INTERIOR?1:n===Fe.INTERIOR&&r===Fe.EXTERIOR?-1:0},t}(oo),dy=function(){};dy.prototype.createNode=function(e){return new vC(e,null)};dy.prototype.interfaces_=function(){return[]};dy.prototype.getClass=function(){return dy};var Tr=function(){if(this._edges=new mt,this._nodes=null,this._edgeEndList=new mt,arguments.length===0)this._nodes=new Dl(new dy);else if(arguments.length===1){var e=arguments[0];this._nodes=new Dl(e)}};Tr.prototype.printEdges=function(e){var t=this;e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var r=t._edges.get(n);r.print(e),r.eiList.print(e)}};Tr.prototype.find=function(e){return this._nodes.find(e)};Tr.prototype.addNode=function(){if(arguments[0]instanceof vC){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof Ne){var t=arguments[0];return this._nodes.addNode(t)}};Tr.prototype.getNodeIterator=function(){return this._nodes.iterator()};Tr.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}};Tr.prototype.debugPrintln=function(e){Vi.out.println(e)};Tr.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(e)===Fe.BOUNDARY};Tr.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}};Tr.prototype.matchInSameDirection=function(e,t,n,r){return e.equals(n)?wt.computeOrientation(e,t,r)===wt.COLLINEAR&&Hn.quadrant(e,t)===Hn.quadrant(n,r):!1};Tr.prototype.getEdgeEnds=function(){return this._edgeEndList};Tr.prototype.debugPrint=function(e){Vi.out.print(e)};Tr.prototype.getEdgeIterator=function(){return this._edges.iterator()};Tr.prototype.findEdgeInSameDirection=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(e,t,o[0],o[1])||n.matchInSameDirection(e,t,o[o.length-1],o[o.length-2]))return i}return null};Tr.prototype.insertEdge=function(e){this._edges.add(e)};Tr.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null};Tr.prototype.addEdges=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();t._edges.add(r);var i=new nM(r,!0),o=new nM(r,!1);i.setSym(o),o.setSym(i),t.add(i),t.add(o)}};Tr.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};Tr.prototype.getNodes=function(){return this._nodes.values()};Tr.prototype.findEdge=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(e.equals(o[0])&&t.equals(o[1]))return i}return null};Tr.prototype.interfaces_=function(){return[]};Tr.prototype.getClass=function(){return Tr};Tr.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};var pa=function(){this._geometryFactory=null,this._shellList=new mt;var e=arguments[0];this._geometryFactory=e};pa.prototype.sortShellsAndHoles=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}};pa.prototype.computePolygons=function(e){for(var t=this,n=new mt,r=e.iterator();r.hasNext();){var i=r.next(),o=i.toPolygon(t._geometryFactory);n.add(o)}return n};pa.prototype.placeFreeHoles=function(e,t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();if(i.getShell()===null){var o=n.findEdgeRingContaining(i,e);if(o===null)throw new vc("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(o)}}};pa.prototype.buildMinimalEdgeRings=function(e,t,n){for(var r=this,i=new mt,o=e.iterator();o.hasNext();){var l=o.next();if(l.getMaxNodeDegree()>2){l.linkDirectedEdgesForMinimalEdgeRings();var a=l.buildMinimalRings(),h=r.findShell(a);h!==null?(r.placePolygonHoles(h,a),t.add(h)):n.addAll(a)}else i.add(l)}return i};pa.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1};pa.prototype.buildMaximalEdgeRings=function(e){for(var t=this,n=new mt,r=e.iterator();r.hasNext();){var i=r.next();if(i.isInResult()&&i.getLabel().isArea()&&i.getEdgeRing()===null){var o=new WAe(i,t._geometryFactory);n.add(o),o.setInResult()}}return n};pa.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}};pa.prototype.getPolygons=function(){var e=this.computePolygons(this._shellList);return e};pa.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,l=null,a=t.iterator();a.hasNext();){var h=a.next(),d=h.getLinearRing(),g=d.getEnvelopeInternal();o!==null&&(l=o.getLinearRing().getEnvelopeInternal());var v=!1;g.contains(r)&&wt.isPointInRing(i,d.getCoordinates())&&(v=!0),v&&(o===null||l.contains(g))&&(o=h)}return o};pa.prototype.findShell=function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return an.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n};pa.prototype.add=function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];Tr.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),i=new mt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}};pa.prototype.interfaces_=function(){return[]};pa.prototype.getClass=function(){return pa};var py=function(){};py.prototype.getBounds=function(){};py.prototype.interfaces_=function(){return[]};py.prototype.getClass=function(){return py};var Fs=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};Fs.prototype.getItem=function(){return this._item};Fs.prototype.getBounds=function(){return this._bounds};Fs.prototype.interfaces_=function(){return[py,ms]};Fs.prototype.getClass=function(){return Fs};var _c=function(){this._size=null,this._items=null,this._size=0,this._items=new mt,this._items.add(null)};_c.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e};_c.prototype.size=function(){return this._size};_c.prototype.reorder=function(e){for(var t=this,n=null,r=this._items.get(e);e*2<=this._size&&(n=e*2,n!==t._size&&t._items.get(n+1).compareTo(t._items.get(n))<0&&n++,t._items.get(n).compareTo(r)<0);e=n)t._items.set(e,t._items.get(n));this._items.set(e,r)};_c.prototype.clear=function(){this._size=0,this._items.clear()};_c.prototype.isEmpty=function(){return this._size===0};_c.prototype.add=function(e){var t=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)t._items.set(n,t._items.get(Math.trunc(n/2)));this._items.set(n,e)};_c.prototype.interfaces_=function(){return[]};_c.prototype.getClass=function(){return _c};var bf=function(){};bf.prototype.visitItem=function(e){};bf.prototype.interfaces_=function(){return[]};bf.prototype.getClass=function(){return bf};var Sp=function(){};Sp.prototype.insert=function(e,t){};Sp.prototype.remove=function(e,t){};Sp.prototype.query=function(){};Sp.prototype.interfaces_=function(){return[]};Sp.prototype.getClass=function(){return Sp};var pi=function(){if(this._childBoundables=new mt,this._bounds=null,this._level=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._level=e}},OG={serialVersionUID:{configurable:!0}};pi.prototype.getLevel=function(){return this._level};pi.prototype.size=function(){return this._childBoundables.size()};pi.prototype.getChildBoundables=function(){return this._childBoundables};pi.prototype.addChildBoundable=function(e){an.isTrue(this._bounds===null),this._childBoundables.add(e)};pi.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};pi.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};pi.prototype.interfaces_=function(){return[py,ms]};pi.prototype.getClass=function(){return pi};OG.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(pi,OG);var Bs=function(){};Bs.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}};Bs.min=function(e){return Bs.sort(e),e.get(0)};Bs.sort=function(e,t){var n=e.toArray();t?Dh.sort(n,t):Dh.sort(n);for(var r=e.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])};Bs.singletonList=function(e){var t=new mt;return t.add(e),t};var ni=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};ni.prototype.expandToQueue=function(e,t){var n=ni.isComposite(this._boundable1),r=ni.isComposite(this._boundable2);if(n&&r)return ni.area(this._boundable1)>ni.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new xr("neither boundable is composite")};ni.prototype.isLeaves=function(){return!(ni.isComposite(this._boundable1)||ni.isComposite(this._boundable2))};ni.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0};ni.prototype.expand=function(e,t,n,r){for(var i=this,o=e.getChildBoundables(),l=o.iterator();l.hasNext();){var a=l.next(),h=new ni(a,t,i._itemDistance);h.getDistance()<r&&n.add(h)}};ni.prototype.getBoundable=function(e){return e===0?this._boundable1:this._boundable2};ni.prototype.getDistance=function(){return this._distance};ni.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};ni.prototype.interfaces_=function(){return[ps]};ni.prototype.getClass=function(){return ni};ni.area=function(e){return e.getBounds().getArea()};ni.isComposite=function(e){return e instanceof pi};var ki=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new mt,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var n=arguments[0];an.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},_C={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};ki.prototype.getNodeCapacity=function(){return this._nodeCapacity};ki.prototype.lastNode=function(e){return e.get(e.size()-1)};ki.prototype.size=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof pi?n+=e.size(i):i instanceof Fs&&(n+=1)}return n}};ki.prototype.removeItem=function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Fs&&i.getItem()===t&&(n=i)}return n!==null?(e.getChildBoundables().remove(n),!0):!1};ki.prototype.itemsTree=function(){var e=this;if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new mt:t}else if(arguments.length===1){for(var n=arguments[0],r=new mt,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof pi){var l=e.itemsTree(o);l!==null&&r.add(l)}else o instanceof Fs?r.add(o.getItem()):an.shouldNeverReachHere()}return r.size()<=0?null:r}};ki.prototype.insert=function(e,t){an.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Fs(e,t))};ki.prototype.boundablesAtLevel=function(){var e=this;if(arguments.length===1){var t=arguments[0],n=new mt;return this.boundablesAtLevel(t,this._root,n),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(an.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var l=i.getChildBoundables().iterator();l.hasNext();){var a=l.next();a instanceof pi?e.boundablesAtLevel(r,a,o):(an.isTrue(a instanceof Fs),r===-1&&o.add(a))}return null}};ki.prototype.query=function(){var e=this;if(arguments.length===1){var t=arguments[0];this.build();var n=new mt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,n),n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(arguments.length===3){if(Kt(arguments[2],bf)&&arguments[0]instanceof Object&&arguments[1]instanceof pi)for(var o=arguments[0],l=arguments[1],a=arguments[2],h=l.getChildBoundables(),d=0;d<h.size();d++){var g=h.get(d);e.getIntersectsOp().intersects(g.getBounds(),o)&&(g instanceof pi?e.query(o,g,a):g instanceof Fs?a.visitItem(g.getItem()):an.shouldNeverReachHere())}else if(Kt(arguments[2],Ns)&&arguments[0]instanceof Object&&arguments[1]instanceof pi)for(var v=arguments[0],b=arguments[1],I=arguments[2],T=b.getChildBoundables(),P=0;P<T.size();P++){var $=T.get(P);e.getIntersectsOp().intersects($.getBounds(),v)&&($ instanceof pi?e.query(v,$,I):$ instanceof Fs?I.add($.getItem()):an.shouldNeverReachHere())}}};ki.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};ki.prototype.getRoot=function(){return this.build(),this._root};ki.prototype.remove=function(){var e=this;if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),t)?this.remove(t,this._root,n):!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],l=this.removeItem(i,o);if(l)return!0;for(var a=null,h=i.getChildBoundables().iterator();h.hasNext();){var d=h.next();if(e.getIntersectsOp().intersects(d.getBounds(),r)&&d instanceof pi&&(l=e.remove(r,d,o),l)){a=d;break}}return a!==null&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),l}};ki.prototype.createHigherLevels=function(e,t){an.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)};ki.prototype.depth=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof pi){var o=e.depth(i);o>n&&(n=o)}}return n+1}};ki.prototype.createParentBoundables=function(e,t){var n=this;an.isTrue(!e.isEmpty());var r=new mt;r.add(this.createNode(t));var i=new mt(e);Bs.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var l=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(t)),n.lastNode(r).addChildBoundable(l)}return r};ki.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};ki.prototype.interfaces_=function(){return[ms]};ki.prototype.getClass=function(){return ki};ki.compareDoubles=function(e,t){return e>t?1:e<t?-1:0};_C.IntersectsOp.get=function(){return HAe};_C.serialVersionUID.get=function(){return-3886435814360241e3};_C.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(ki,_C);var HAe=function(){},my=function(){};my.prototype.distance=function(e,t){};my.prototype.interfaces_=function(){return[]};my.prototype.getClass=function(){return my};var MG=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(r,i){var o=this;an.isTrue(r.length>0);for(var l=new mt,a=0;a<r.length;a++)l.addAll(o.createParentBoundablesFromVerticalSlice(r[a],i));return l},t.prototype.createNode=function(r){return new LF(r)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];if(r.isNull())return null;e.prototype.insert.call(this,r,i)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(r,i){for(var o=Math.trunc(Math.ceil(r.size()/i)),l=new Array(i).fill(null),a=r.iterator(),h=0;h<i;h++){l[h]=new mt;for(var d=0;a.hasNext()&&d<o;){var g=a.next();l[h].add(g),d++}}return l},t.prototype.query=function(){if(arguments.length===1){var r=arguments[0];return e.prototype.query.call(this,r)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];e.prototype.query.call(this,i,o)}else if(arguments.length===3){if(Kt(arguments[2],bf)&&arguments[0]instanceof Object&&arguments[1]instanceof pi){var l=arguments[0],a=arguments[1],h=arguments[2];e.prototype.query.call(this,l,a,h)}else if(Kt(arguments[2],Ns)&&arguments[0]instanceof Object&&arguments[1]instanceof pi){var d=arguments[0],g=arguments[1],v=arguments[2];e.prototype.query.call(this,d,g,v)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(r,i){return e.prototype.createParentBoundables.call(this,r,i)},t.prototype.remove=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return e.prototype.remove.call(this,r,i)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(r,i){an.isTrue(!r.isEmpty());var o=Math.trunc(Math.ceil(r.size()/this.getNodeCapacity())),l=new mt(r);Bs.sort(l,t.xComparator);var a=this.verticalSlices(l,Math.trunc(Math.ceil(Math.sqrt(o))));return this.createParentBoundablesFromVerticalSlices(a,i)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(Kt(arguments[0],my)){var r=arguments[0],i=new ni(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}else if(arguments[0]instanceof ni){var o=arguments[0];return this.nearestNeighbour(o,tn.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&Kt(arguments[1],my)){var l=arguments[0],a=arguments[1],h=new ni(this.getRoot(),l.getRoot(),a);return this.nearestNeighbour(h)}else if(arguments[0]instanceof ni&&typeof arguments[1]=="number"){var d=arguments[0],g=arguments[1],v=g,b=null,I=new _c;for(I.add(d);!I.isEmpty()&&v>0;){var T=I.poll(),P=T.getDistance();if(P>=v)break;T.isLeaves()?(v=P,b=T):T.expandToQueue(I,v)}return[b.getBoundable(0).getItem(),b.getBoundable(1).getItem()]}}else if(arguments.length===3){var $=arguments[0],O=arguments[1],k=arguments[2],R=new Fs($,O),j=new ni(this.getRoot(),R,k);return this.nearestNeighbour(j)[0]}},t.prototype.interfaces_=function(){return[Sp,ms]},t.prototype.getClass=function(){return t},t.centreX=function(r){return t.avg(r.getMinX(),r.getMaxX())},t.avg=function(r,i){return(r+i)/2},t.centreY=function(r){return t.avg(r.getMinY(),r.getMaxY())},n.STRtreeNode.get=function(){return LF},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[oy]},compare:function(r,i){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[oy]},compare:function(r,i){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,n),t}(ki),LF=function(e){function t(){var n=arguments[0];e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var n=null,r=this.getChildBoundables().iterator();r.hasNext();){var i=r.next();n===null?n=new Bt(i.getBounds()):n.expandToInclude(i.getBounds())}return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(pi),Vo=function(){};Vo.prototype.interfaces_=function(){return[]};Vo.prototype.getClass=function(){return Vo};Vo.relativeSign=function(e,t){return e<t?-1:e>t?1:0};Vo.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=Vo.relativeSign(t.x,n.x),i=Vo.relativeSign(t.y,n.y);switch(e){case 0:return Vo.compareValue(r,i);case 1:return Vo.compareValue(i,r);case 2:return Vo.compareValue(i,-r);case 3:return Vo.compareValue(-r,i);case 4:return Vo.compareValue(-r,-i);case 5:return Vo.compareValue(-i,-r);case 6:return Vo.compareValue(-i,r);case 7:return Vo.compareValue(r,-i)}return an.shouldNeverReachHere("invalid octant value"),0};Vo.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var wf=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._segString=e,this.coord=new Ne(t),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))};wf.prototype.getCoordinate=function(){return this.coord};wf.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)};wf.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:Vo.compare(this._segmentOctant,this.coord,t.coord)};wf.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e};wf.prototype.isInterior=function(){return this._isInterior};wf.prototype.interfaces_=function(){return[ps]};wf.prototype.getClass=function(){return wf};var Ao=function(){this._nodeMap=new io,this._edge=null;var e=arguments[0];this._edge=e};Ao.prototype.getSplitCoordinates=function(){var e=this,t=new p1;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();e.addEdgeCoordinates(r,i,t),r=i}return t.toCoordinateArray()};Ao.prototype.addCollapsedNodes=function(){var e=this,t=new mt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var r=n.next().intValue();e.add(e._edge.getCoordinate(r),r)}};Ao.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Ao.prototype.findCollapsesFromExistingVertices=function(e){for(var t=this,n=0;n<this._edge.size()-2;n++){var r=t._edge.getCoordinate(n),i=t._edge.getCoordinate(n+2);r.equals2D(i)&&e.add(new Ml(n+1))}};Ao.prototype.addEdgeCoordinates=function(e,t,n){var r=this,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);n.add(new Ne(e.coord),!1);for(var l=e.segmentIndex+1;l<=t.segmentIndex;l++)n.add(r._edge.getCoordinate(l));o&&n.add(new Ne(t.coord))};Ao.prototype.iterator=function(){return this._nodeMap.values().iterator()};Ao.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};Ao.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,r===1?(n[0]=e.segmentIndex+1,!0):!1};Ao.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=this,n=new Array(1).fill(null),r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),l=t.findCollapseIndex(i,o,n);l&&e.add(new Ml(n[0])),i=o}};Ao.prototype.getEdge=function(){return this._edge};Ao.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)};Ao.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);o||r--;var l=new Array(r).fill(null),a=0;l[a++]=new Ne(e.coord);for(var h=e.segmentIndex+1;h<=t.segmentIndex;h++)l[a++]=n._edge.getCoordinate(h);return o&&(l[a]=new Ne(t.coord)),new Yr(l,this._edge.getData())};Ao.prototype.add=function(e,t){var n=new wf(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return r!==null?(an.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)};Ao.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new gc("bad split edge start point at "+r);var i=e.get(e.size()-1),o=i.getCoordinates(),l=o[o.length-1];if(!l.equals2D(t[t.length-1]))throw new gc("bad split edge end point at "+l)};Ao.prototype.interfaces_=function(){return[]};Ao.prototype.getClass=function(){return Ao};var Ep=function(){};Ep.prototype.interfaces_=function(){return[]};Ep.prototype.getClass=function(){return Ep};Ep.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new xr("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5}else if(arguments[0]instanceof Ne&&arguments[1]instanceof Ne){var i=arguments[0],o=arguments[1],l=o.x-i.x,a=o.y-i.y;if(l===0&&a===0)throw new xr("Cannot compute the octant for two identical points "+i);return Ep.octant(l,a)}};var Mu=function(){};Mu.prototype.getCoordinates=function(){};Mu.prototype.size=function(){};Mu.prototype.getCoordinate=function(e){};Mu.prototype.isClosed=function(){};Mu.prototype.setData=function(e){};Mu.prototype.getData=function(){};Mu.prototype.interfaces_=function(){return[]};Mu.prototype.getClass=function(){return Mu};var Ax=function(){};Ax.prototype.addIntersection=function(e,t){};Ax.prototype.interfaces_=function(){return[Mu]};Ax.prototype.getClass=function(){return Ax};var Yr=function(){this._nodeList=new Ao(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Yr.prototype.getCoordinates=function(){return this._pts};Yr.prototype.size=function(){return this._pts.length};Yr.prototype.getCoordinate=function(e){return this._pts[e]};Yr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Yr.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))};Yr.prototype.setData=function(e){this._data=e};Yr.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:Ep.octant(e,t)};Yr.prototype.getData=function(){return this._data};Yr.prototype.addIntersection=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[3],o=new Ne(n.getIntersection(i));this.addIntersection(o,r)}};Yr.prototype.toString=function(){return Rs.toLineString(new Wr(this._pts))};Yr.prototype.getNodeList=function(){return this._nodeList};Yr.prototype.addIntersectionNode=function(e,t){var n=t,r=n+1;if(r<this._pts.length){var i=this._pts[r];e.equals2D(i)&&(n=r)}var o=this._nodeList.add(e,n);return o};Yr.prototype.addIntersections=function(e,t,n){for(var r=this,i=0;i<e.getIntersectionNum();i++)r.addIntersection(e,t,n,i)};Yr.prototype.interfaces_=function(){return[Ax]};Yr.prototype.getClass=function(){return Yr};Yr.getNodedSubstrings=function(){if(arguments.length===1){var e=arguments[0],t=new mt;return Yr.getNodedSubstrings(e,t),t}else if(arguments.length===2)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var Ut=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new Ne,this.p1=new Ne;else if(arguments.length===1){var e=arguments[0];this.p0=new Ne(e.p0),this.p1=new Ne(e.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new Ne(t,n),this.p1=new Ne(r,i)}},$G={serialVersionUID:{configurable:!0}};Ut.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};Ut.prototype.orientationIndex=function(){if(arguments[0]instanceof Ut){var e=arguments[0],t=wt.orientationIndex(this.p0,this.p1,e.p0),n=wt.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}else if(arguments[0]instanceof Ne){var r=arguments[0];return wt.orientationIndex(this.p0,this.p1,r)}};Ut.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])};Ut.prototype.isVertical=function(){return this.p0.x===this.p1.x};Ut.prototype.equals=function(e){if(!(e instanceof Ut))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};Ut.prototype.intersection=function(e){var t=new md;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null};Ut.prototype.project=function(){if(arguments[0]instanceof Ne){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new Ne(e);var t=this.projectionFactor(e),n=new Ne;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof Ut){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1||i<=0&&o<=0)return null;var l=this.project(r.p0);i<0&&(l=this.p0),i>1&&(l=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new Ut(l,a)}};Ut.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};Ut.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};Ut.prototype.getCoordinate=function(e){return e===0?this.p0:this.p1};Ut.prototype.distancePerpendicular=function(e){return wt.distancePointLinePerpendicular(e,this.p0,this.p1)};Ut.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};Ut.prototype.midPoint=function(){return Ut.midPoint(this.p0,this.p1)};Ut.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(r<=0)return tn.NaN;var i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i};Ut.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),r=tn.MAX_VALUE,i=null,o=this.closestPoint(e.p0);r=o.distance(e.p0),n[0]=o,n[1]=e.p0;var l=this.closestPoint(e.p1);i=l.distance(e.p1),i<r&&(r=i,n[0]=l,n[1]=e.p1);var a=e.closestPoint(this.p0);i=a.distance(this.p0),i<r&&(r=i,n[0]=this.p0,n[1]=a);var h=e.closestPoint(this.p1);return i=h.distance(this.p1),i<r&&(r=i,n[0]=this.p1,n[1]=h),n};Ut.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return n<r?this.p0:this.p1};Ut.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};Ut.prototype.getLength=function(){return this.p0.distance(this.p1)};Ut.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)};Ut.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e};Ut.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)};Ut.prototype.lineIntersection=function(e){try{var t=ks.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof Ky))throw n}finally{}return null};Ut.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};Ut.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,l=Math.sqrt(i*i+o*o),a=0,h=0;if(t!==0){if(l<=0)throw new Error("Cannot compute offset from zero-length line segment");a=t*i/l,h=t*o/l}var d=n-h,g=r+a,v=new Ne(d,g);return v};Ut.prototype.setCoordinates=function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}};Ut.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||tn.isNaN(t))&&(t=1),t};Ut.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};Ut.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};Ut.prototype.distance=function(){if(arguments[0]instanceof Ut){var e=arguments[0];return wt.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof Ne){var t=arguments[0];return wt.distancePointLine(t,this.p0,this.p1)}};Ut.prototype.pointAlong=function(e){var t=new Ne;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t};Ut.prototype.hashCode=function(){var e=tn.doubleToLongBits(this.p0.x);e^=tn.doubleToLongBits(this.p0.y)*31;var t=Math.trunc(e)^Math.trunc(e>>32),n=tn.doubleToLongBits(this.p1.x);n^=tn.doubleToLongBits(this.p1.y)*31;var r=Math.trunc(n)^Math.trunc(n>>32);return t^r};Ut.prototype.interfaces_=function(){return[ps,ms]};Ut.prototype.getClass=function(){return Ut};Ut.midPoint=function(e,t){return new Ne((e.x+t.x)/2,(e.y+t.y)/2)};$G.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(Ut,$G);var Ox=function(){this.tempEnv1=new Bt,this.tempEnv2=new Bt,this._overlapSeg1=new Ut,this._overlapSeg2=new Ut};Ox.prototype.overlap=function(){if(arguments.length!==2&&arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}};Ox.prototype.interfaces_=function(){return[]};Ox.prototype.getClass=function(){return Ox};var ma=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=r};ma.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]};ma.prototype.computeSelect=function(e,t,n,r){var i=this._pts[t],o=this._pts[n];if(r.tempEnv1.init(i,o),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var l=Math.trunc((t+n)/2);t<l&&this.computeSelect(e,t,l,r),l<n&&this.computeSelect(e,l,n,r)};ma.prototype.getCoordinates=function(){for(var e=this,t=new Array(this._end-this._start+1).fill(null),n=0,r=this._start;r<=this._end;r++)t[n++]=e._pts[r];return t};ma.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)};ma.prototype.setId=function(e){this._id=e};ma.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)};ma.prototype.getEnvelope=function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new Bt(e,t)}return this._env};ma.prototype.getEndIndex=function(){return this._end};ma.prototype.getStartIndex=function(){return this._start};ma.prototype.getContext=function(){return this._context};ma.prototype.getId=function(){return this._id};ma.prototype.computeOverlapsInternal=function(e,t,n,r,i,o){var l=this._pts[e],a=this._pts[t],h=n._pts[r],d=n._pts[i];if(t-e===1&&i-r===1)return o.overlap(this,e,n,r),null;if(o.tempEnv1.init(l,a),o.tempEnv2.init(h,d),!o.tempEnv1.intersects(o.tempEnv2))return null;var g=Math.trunc((e+t)/2),v=Math.trunc((r+i)/2);e<g&&(r<v&&this.computeOverlapsInternal(e,g,n,r,v,o),v<i&&this.computeOverlapsInternal(e,g,n,v,i,o)),g<t&&(r<v&&this.computeOverlapsInternal(g,t,n,r,v,o),v<i&&this.computeOverlapsInternal(g,t,n,v,i,o))};ma.prototype.interfaces_=function(){return[]};ma.prototype.getClass=function(){return ma};var Cl=function(){};Cl.prototype.interfaces_=function(){return[]};Cl.prototype.getClass=function(){return Cl};Cl.getChainStartIndices=function(e){var t=0,n=new mt;n.add(new Ml(t));do{var r=Cl.findChainEnd(e,t);n.add(new Ml(r)),t=r}while(t<e.length-1);var i=Cl.toIntArray(n);return i};Cl.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=Hn.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var o=Hn.quadrant(e[i-1],e[i]);if(o!==r)break}i++}return i-1};Cl.getChains=function(){if(arguments.length===1){var e=arguments[0];return Cl.getChains(e,null)}else if(arguments.length===2){for(var t=arguments[0],n=arguments[1],r=new mt,i=Cl.getChainStartIndices(t),o=0;o<i.length-1;o++){var l=new ma(t,i[o],i[o+1],n);r.add(l)}return r}};Cl.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var Zh=function(){};Zh.prototype.computeNodes=function(e){};Zh.prototype.getNodedSubstrings=function(){};Zh.prototype.interfaces_=function(){return[]};Zh.prototype.getClass=function(){return Zh};var Mx=function(){if(this._segInt=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}};Mx.prototype.setSegmentIntersector=function(e){this._segInt=e};Mx.prototype.interfaces_=function(){return[Zh]};Mx.prototype.getClass=function(){return Mx};var nN=function(e){function t(r){r?e.call(this,r):e.call(this),this._monoChains=new mt,this._index=new MG,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Yr.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(r){for(var i=this,o=Cl.getChains(r.getCoordinates(),r),l=o.iterator();l.hasNext();){var a=l.next();a.setId(i._idCounter++),i._index.insert(a.getEnvelope(),a),i._monoChains.add(a)}},t.prototype.computeNodes=function(r){var i=this;this._nodedSegStrings=r;for(var o=r.iterator();o.hasNext();)i.add(o.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var r=this,i=new DF(this._segInt),o=this._monoChains.iterator();o.hasNext();)for(var l=o.next(),a=r._index.query(l.getEnvelope()),h=a.iterator();h.hasNext();){var d=h.next();if(d.getId()>l.getId()&&(l.computeOverlaps(d,i),r._nOverlaps++),r._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return DF},Object.defineProperties(t,n),t}(Mx),DF=function(e){function t(){e.call(this),this._si=null;var n=arguments[0];this._si=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],l=n.getContext(),a=i.getContext();this._si.processIntersections(l,r,a,o)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ox),kn=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],l=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(l),this.setMitreLimit(a)}}},Ic={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};kn.prototype.getEndCapStyle=function(){return this._endCapStyle};kn.prototype.isSingleSided=function(){return this._isSingleSided};kn.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=kn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=kn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==kn.JOIN_ROUND&&(this._quadrantSegments=kn.DEFAULT_QUADRANT_SEGMENTS)};kn.prototype.getJoinStyle=function(){return this._joinStyle};kn.prototype.setJoinStyle=function(e){this._joinStyle=e};kn.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e};kn.prototype.getSimplifyFactor=function(){return this._simplifyFactor};kn.prototype.getQuadrantSegments=function(){return this._quadrantSegments};kn.prototype.setEndCapStyle=function(e){this._endCapStyle=e};kn.prototype.getMitreLimit=function(){return this._mitreLimit};kn.prototype.setMitreLimit=function(e){this._mitreLimit=e};kn.prototype.setSingleSided=function(e){this._isSingleSided=e};kn.prototype.interfaces_=function(){return[]};kn.prototype.getClass=function(){return kn};kn.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)};Ic.CAP_ROUND.get=function(){return 1};Ic.CAP_FLAT.get=function(){return 2};Ic.CAP_SQUARE.get=function(){return 3};Ic.JOIN_ROUND.get=function(){return 1};Ic.JOIN_MITRE.get=function(){return 2};Ic.JOIN_BEVEL.get=function(){return 3};Ic.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};Ic.DEFAULT_MITRE_LIMIT.get=function(){return 5};Ic.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(kn,Ic);var Dr=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=wt.COUNTERCLOCKWISE,this._inputLine=e||null},y1={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Dr.prototype.isDeletable=function(e,t,n,r){var i=this._inputLine[e],o=this._inputLine[t],l=this._inputLine[n];return!this.isConcave(i,o,l)||!this.isShallow(i,o,l,r)?!1:this.isShallowSampled(i,o,e,n,r)};Dr.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;e.isDeletable(t,n,r,e._distanceTol)&&(e._isDeleted[n]=Dr.DELETE,o=!0,i=!0),o?t=r:t=n,n=e.findNextNonDeletedIndex(t),r=e.findNextNonDeletedIndex(n)}return i};Dr.prototype.isShallowConcavity=function(e,t,n,r){var i=wt.computeOrientation(e,t,n),o=i===this._angleOrientation;if(!o)return!1;var l=wt.distancePointLine(t,e,n);return l<r};Dr.prototype.isShallowSampled=function(e,t,n,r,i){var o=this,l=Math.trunc((r-n)/Dr.NUM_PTS_TO_CHECK);l<=0&&(l=1);for(var a=n;a<r;a+=l)if(!o.isShallow(e,t,o._inputLine[a],i))return!1;return!0};Dr.prototype.isConcave=function(e,t,n){var r=wt.computeOrientation(e,t,n),i=r===this._angleOrientation;return i};Dr.prototype.simplify=function(e){var t=this;this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=wt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=t.deleteShallowConcavities();while(n);return this.collapseLine()};Dr.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===Dr.DELETE;)t++;return t};Dr.prototype.isShallow=function(e,t,n,r){var i=wt.distancePointLine(t,e,n);return i<r};Dr.prototype.collapseLine=function(){for(var e=this,t=new p1,n=0;n<this._inputLine.length;n++)e._isDeleted[n]!==Dr.DELETE&&t.add(e._inputLine[n]);return t.toCoordinateArray()};Dr.prototype.interfaces_=function(){return[]};Dr.prototype.getClass=function(){return Dr};Dr.simplify=function(e,t){var n=new Dr(e);return n.simplify(t)};y1.INIT.get=function(){return 0};y1.DELETE.get=function(){return 1};y1.KEEP.get=function(){return 1};y1.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(Dr,y1);var za=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new mt},kG={COORDINATE_ARRAY_TYPE:{configurable:!0}};za.prototype.getCoordinates=function(){var e=this._ptList.toArray(za.COORDINATE_ARRAY_TYPE);return e};za.prototype.setPrecisionModel=function(e){this._precisionModel=e};za.prototype.addPt=function(e){var t=new Ne(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};za.prototype.revere=function(){};za.prototype.addPts=function(e,t){var n=this;if(t)for(var r=0;r<e.length;r++)n.addPt(e[r]);else for(var i=e.length-1;i>=0;i--)n.addPt(e[i])};za.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),n=e.distance(t);return n<this._minimimVertexDistance};za.prototype.toString=function(){var e=new hn,t=e.createLineString(this.getCoordinates());return t.toString()};za.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new Ne(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)};za.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e};za.prototype.interfaces_=function(){return[]};za.prototype.getClass=function(){return za};kG.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(za,kG);var xn=function(){},Hp={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};xn.prototype.interfaces_=function(){return[]};xn.prototype.getClass=function(){return xn};xn.toDegrees=function(e){return e*180/Math.PI};xn.normalize=function(e){for(;e>Math.PI;)e-=xn.PI_TIMES_2;for(;e<=-Math.PI;)e+=xn.PI_TIMES_2;return e};xn.angle=function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)}};xn.isAcute=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,l=n.y-t.y,a=r*o+i*l;return a>0};xn.isObtuse=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,l=n.y-t.y,a=r*o+i*l;return a<0};xn.interiorAngle=function(e,t,n){var r=xn.angle(t,e),i=xn.angle(t,n);return Math.abs(i-r)};xn.normalizePositive=function(e){if(e<0){for(;e<0;)e+=xn.PI_TIMES_2;e>=xn.PI_TIMES_2&&(e=0)}else{for(;e>=xn.PI_TIMES_2;)e-=xn.PI_TIMES_2;e<0&&(e=0)}return e};xn.angleBetween=function(e,t,n){var r=xn.angle(t,e),i=xn.angle(t,n);return xn.diff(r,i)};xn.diff=function(e,t){var n=null;return e<t?n=t-e:n=e-t,n>Math.PI&&(n=2*Math.PI-n),n};xn.toRadians=function(e){return e*Math.PI/180};xn.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?xn.COUNTERCLOCKWISE:n<0?xn.CLOCKWISE:xn.NONE};xn.angleBetweenOriented=function(e,t,n){var r=xn.angle(t,e),i=xn.angle(t,n),o=i-r;return o<=-Math.PI?o+xn.PI_TIMES_2:o>Math.PI?o-xn.PI_TIMES_2:o};Hp.PI_TIMES_2.get=function(){return 2*Math.PI};Hp.PI_OVER_2.get=function(){return Math.PI/2};Hp.PI_OVER_4.get=function(){return Math.PI/4};Hp.COUNTERCLOCKWISE.get=function(){return wt.COUNTERCLOCKWISE};Hp.CLOCKWISE.get=function(){return wt.CLOCKWISE};Hp.NONE.get=function(){return wt.COLLINEAR};Object.defineProperties(xn,Hp);var fr=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ut,this._seg1=new Ut,this._offset0=new Ut,this._offset1=new Ut,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new md,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===kn.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},v1={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};fr.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=wt.computeOrientation(this._s0,this._s1,this._s2),r=n===wt.CLOCKWISE&&this._side===at.LEFT||n===wt.COUNTERCLOCKWISE&&this._side===at.RIGHT;n===0?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)};fr.prototype.addLineEndCap=function(e,t){var n=new Ut(e,t),r=new Ut;this.computeOffsetSegment(n,at.LEFT,this._distance,r);var i=new Ut;this.computeOffsetSegment(n,at.RIGHT,this._distance,i);var o=t.x-e.x,l=t.y-e.y,a=Math.atan2(l,o);switch(this._bufParams.getEndCapStyle()){case kn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(t,a+Math.PI/2,a-Math.PI/2,wt.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case kn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case kn.CAP_SQUARE:var h=new Ne;h.x=Math.abs(this._distance)*Math.cos(a),h.y=Math.abs(this._distance)*Math.sin(a);var d=new Ne(r.p1.x+h.x,r.p1.y+h.y),g=new Ne(i.p1.x+h.x,i.p1.y+h.y);this._segList.addPt(d),this._segList.addPt(g);break}};fr.prototype.getCoordinates=function(){var e=this._segList.getCoordinates();return e};fr.prototype.addMitreJoin=function(e,t,n,r){var i=!0,o=null;try{o=ks.intersection(t.p0,t.p1,n.p0,n.p1);var l=r<=0?1:o.distance(e)/Math.abs(r);l>this._bufParams.getMitreLimit()&&(i=!1)}catch(a){if(a instanceof Ky)o=new Ne(0,0),i=!1;else throw a}finally{}i?this._segList.addPt(o):this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())};fr.prototype.addFilletCorner=function(e,t,n,r,i){var o=t.x-e.x,l=t.y-e.y,a=Math.atan2(l,o),h=n.x-e.x,d=n.y-e.y,g=Math.atan2(d,h);r===wt.CLOCKWISE?a<=g&&(a+=2*Math.PI):a>=g&&(a-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,a,g,r,i),this._segList.addPt(n)};fr.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*fr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===kn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===kn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))};fr.prototype.createSquare=function(e){this._segList.addPt(new Ne(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new Ne(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new Ne(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new Ne(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()};fr.prototype.addSegments=function(e,t){this._segList.addPts(e,t)};fr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};fr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};fr.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};fr.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this._seg0.p1,o=xn.angle(i,this._seg0.p0),l=xn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1),a=l/2,h=xn.normalize(o+a),d=xn.normalize(h+Math.PI),g=r*n,v=g*Math.abs(Math.sin(a)),b=n-v,I=i.x+g*Math.cos(d),T=i.y+g*Math.sin(d),P=new Ne(I,T),$=new Ut(i,P),O=$.pointAlongOffset(1,b),k=$.pointAlongOffset(1,-b);this._side===at.LEFT?(this._segList.addPt(O),this._segList.addPt(k)):(this._segList.addPt(k),this._segList.addPt(O))};fr.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===at.LEFT?1:-1,o=e.p1.x-e.p0.x,l=e.p1.y-e.p0.y,a=Math.sqrt(o*o+l*l),h=i*n*o/a,d=i*n*l/a;r.p0.x=e.p0.x-d,r.p0.y=e.p0.y+h,r.p1.x=e.p1.x-d,r.p1.y=e.p1.y+h};fr.prototype.addFilletArc=function(e,t,n,r,i){var o=this,l=r===wt.CLOCKWISE?-1:1,a=Math.abs(t-n),h=Math.trunc(a/this._filletAngleQuantum+.5);if(h<1)return null;for(var d=0,g=a/h,v=d,b=new Ne;v<a;){var I=t+l*v;b.x=e.x+i*Math.cos(I),b.y=e.y+i*Math.sin(I),o._segList.addPt(b),v+=g}};fr.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*fr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Ne((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new Ne((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};fr.prototype.createCircle=function(e){var t=new Ne(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};fr.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)};fr.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new za,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*fr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};fr.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===kn.JOIN_BEVEL||this._bufParams.getJoinStyle()===kn.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,wt.CLOCKWISE,this._distance))};fr.prototype.closeRing=function(){this._segList.closeRing()};fr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};fr.prototype.interfaces_=function(){return[]};fr.prototype.getClass=function(){return fr};v1.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};v1.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};v1.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};v1.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(fr,v1);var Xo=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};Xo.prototype.getOffsetCurve=function(e,t){if(this._distance=t,t===0)return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var o=i.getCoordinates();return n&&dn.reverse(o),o};Xo.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=Dr.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],at.LEFT),n.addFirstSegment();for(var l=o-2;l>=0;l--)n.addNextSegment(i[l],!0)}else{n.addSegments(e,!1);var a=Dr.simplify(e,r),h=a.length-1;n.initSideSegments(a[0],a[1],at.LEFT),n.addFirstSegment();for(var d=2;d<=h;d++)n.addNextSegment(a[d],!0)}n.addLastSegment(),n.closeRing()};Xo.prototype.computeRingBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);t===at.RIGHT&&(r=-r);var i=Dr.simplify(e,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],t);for(var l=1;l<=o;l++){var a=l!==1;n.addNextSegment(i[l],a)}n.closeRing()};Xo.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),r=Dr.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],at.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var l=Dr.simplify(e,-n),a=l.length-1;t.initSideSegments(l[a],l[a-1],at.LEFT);for(var h=a-2;h>=0;h--)t.addNextSegment(l[h],!0);t.addLastSegment(),t.addLineEndCap(l[1],l[0]),t.closeRing()};Xo.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case kn.CAP_ROUND:t.createCircle(e);break;case kn.CAP_SQUARE:t.createSquare(e);break}};Xo.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided()||t===0)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var o=r.getCoordinates();return o};Xo.prototype.getBufferParameters=function(){return this._bufParams};Xo.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()};Xo.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return Xo.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()};Xo.prototype.computeOffsetCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=Dr.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],at.LEFT),n.addFirstSegment();for(var l=o-2;l>=0;l--)n.addNextSegment(i[l],!0)}else{var a=Dr.simplify(e,r),h=a.length-1;n.initSideSegments(a[0],a[1],at.LEFT),n.addFirstSegment();for(var d=2;d<=h;d++)n.addNextSegment(a[d],!0)}n.addLastSegment()};Xo.prototype.getSegGen=function(e){return new fr(this._precisionModel,this._bufParams,e)};Xo.prototype.interfaces_=function(){return[]};Xo.prototype.getClass=function(){return Xo};Xo.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new Ne(e[n]);return t};var Cp=function(){this._subgraphs=null,this._seg=new Ut,this._cga=new wt;var e=arguments[0];this._subgraphs=e},NG={DepthSegment:{configurable:!0}};Cp.prototype.findStabbedSegments=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=new mt,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();t.y<o.getMinY()||t.y>o.getMaxY()||e.findStabbedSegments(t,i.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(Kt(arguments[2],Ns)&&arguments[0]instanceof Ne&&arguments[1]instanceof nM)for(var l=arguments[0],a=arguments[1],h=arguments[2],d=a.getEdge().getCoordinates(),g=0;g<d.length-1;g++){e._seg.p0=d[g],e._seg.p1=d[g+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var v=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(v<l.x)&&!e._seg.isHorizontal()&&!(l.y<e._seg.p0.y||l.y>e._seg.p1.y)&&wt.computeOrientation(e._seg.p0,e._seg.p1,l)!==wt.RIGHT){var b=a.getDepth(at.LEFT);e._seg.p0.equals(d[g])||(b=a.getDepth(at.RIGHT));var I=new Kh(e._seg,b);h.add(I)}}else if(Kt(arguments[2],Ns)&&arguments[0]instanceof Ne&&Kt(arguments[1],Ns))for(var T=arguments[0],P=arguments[1],$=arguments[2],O=P.iterator();O.hasNext();){var k=O.next();k.isForward()&&e.findStabbedSegments(T,k,$)}}};Cp.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.size()===0)return 0;var n=Bs.min(t);return n._leftDepth};Cp.prototype.interfaces_=function(){return[]};Cp.prototype.getClass=function(){return Cp};NG.DepthSegment.get=function(){return Kh};Object.defineProperties(Cp,NG);var Kh=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new Ut(e),this._leftDepth=t};Kh.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return n!==0||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(t._upwardSeg)};Kh.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)};Kh.prototype.toString=function(){return this._upwardSeg.toString()};Kh.prototype.interfaces_=function(){return[ps]};Kh.prototype.getClass=function(){return Kh};var Ln=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};Ln.prototype.area=function(){return Ln.area(this.p0,this.p1,this.p2)};Ln.prototype.signedArea=function(){return Ln.signedArea(this.p0,this.p1,this.p2)};Ln.prototype.interpolateZ=function(e){if(e===null)throw new xr("Supplied point is null.");return Ln.interpolateZ(e,this.p0,this.p1,this.p2)};Ln.prototype.longestSideLength=function(){return Ln.longestSideLength(this.p0,this.p1,this.p2)};Ln.prototype.isAcute=function(){return Ln.isAcute(this.p0,this.p1,this.p2)};Ln.prototype.circumcentre=function(){return Ln.circumcentre(this.p0,this.p1,this.p2)};Ln.prototype.area3D=function(){return Ln.area3D(this.p0,this.p1,this.p2)};Ln.prototype.centroid=function(){return Ln.centroid(this.p0,this.p1,this.p2)};Ln.prototype.inCentre=function(){return Ln.inCentre(this.p0,this.p1,this.p2)};Ln.prototype.interfaces_=function(){return[]};Ln.prototype.getClass=function(){return Ln};Ln.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)};Ln.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2};Ln.det=function(e,t,n,r){return e*r-t*n};Ln.interpolateZ=function(e,t,n,r){var i=t.x,o=t.y,l=n.x-i,a=r.x-i,h=n.y-o,d=r.y-o,g=l*d-a*h,v=e.x-i,b=e.y-o,I=(d*v-a*b)/g,T=(-h*v+l*b)/g,P=t.z+I*(n.z-t.z)+T*(r.z-t.z);return P};Ln.longestSideLength=function(e,t,n){var r=e.distance(t),i=t.distance(n),o=n.distance(e),l=r;return i>l&&(l=i),o>l&&(l=o),l};Ln.isAcute=function(e,t,n){return!(!xn.isAcute(e,t,n)||!xn.isAcute(t,n,e)||!xn.isAcute(n,e,t))};Ln.circumcentre=function(e,t,n){var r=n.x,i=n.y,o=e.x-r,l=e.y-i,a=t.x-r,h=t.y-i,d=2*Ln.det(o,l,a,h),g=Ln.det(l,o*o+l*l,h,a*a+h*h),v=Ln.det(o,o*o+l*l,a,a*a+h*h),b=r-g/d,I=i+v/d;return new Ne(b,I)};Ln.perpendicularBisector=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new ks(e.x+n/2,e.y+r/2,1),o=new ks(e.x-r+n/2,e.y+n+r/2,1);return new ks(i,o)};Ln.angleBisector=function(e,t,n){var r=t.distance(e),i=t.distance(n),o=r/(r+i),l=n.x-e.x,a=n.y-e.y,h=new Ne(e.x+o*l,e.y+o*a);return h};Ln.area3D=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,l=n.x-e.x,a=n.y-e.y,h=n.z-e.z,d=i*h-o*a,g=o*l-r*h,v=r*a-i*l,b=d*d+g*g+v*v,I=Math.sqrt(b)/2;return I};Ln.centroid=function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new Ne(r,i)};Ln.inCentre=function(e,t,n){var r=t.distance(n),i=e.distance(n),o=e.distance(t),l=r+i+o,a=(r*e.x+i*t.x+o*n.x)/l,h=(r*e.y+i*t.y+o*n.y)/l;return new Ne(a,h)};var fs=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new mt;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};fs.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,Fe.EXTERIOR,Fe.INTERIOR)};fs.prototype.addPolygon=function(e){var t=this,n=this._distance,r=at.LEFT;this._distance<0&&(n=-this._distance,r=at.RIGHT);var i=e.getExteriorRing(),o=dn.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,Fe.EXTERIOR,Fe.INTERIOR);for(var l=0;l<e.getNumInteriorRing();l++){var a=e.getInteriorRingN(l),h=dn.removeRepeatedPoints(a.getCoordinates());t._distance>0&&t.isErodedCompletely(a,-t._distance)||t.addPolygonRing(h,n,at.opposite(r),Fe.INTERIOR,Fe.EXTERIOR)}};fs.prototype.isTriangleErodedCompletely=function(e,t){var n=new Ln(e[0],e[1],e[2]),r=n.inCentre(),i=wt.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)};fs.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=dn.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,Fe.EXTERIOR,Fe.INTERIOR)};fs.prototype.addCurve=function(e,t,n){if(e===null||e.length<2)return null;var r=new Yr(e,new Un(0,Fe.BOUNDARY,t,n));this._curveList.add(r)};fs.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};fs.prototype.addPolygonRing=function(e,t,n,r,i){if(t===0&&e.length<Au.MINIMUM_VALID_SIZE)return null;var o=r,l=i;e.length>=Au.MINIMUM_VALID_SIZE&&wt.isCCW(e)&&(o=i,l=r,n=at.opposite(n));var a=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(a,o,l)};fs.prototype.add=function(e){if(e.isEmpty())return null;e instanceof yi?this.addPolygon(e):e instanceof Lr?this.addLineString(e):e instanceof da?this.addPoint(e):e instanceof hy?this.addCollection(e):e instanceof Xh?this.addCollection(e):e instanceof Su?this.addCollection(e):e instanceof To&&this.addCollection(e)};fs.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(n.length===4)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i};fs.prototype.addCollection=function(e){for(var t=this,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);t.add(r)}};fs.prototype.interfaces_=function(){return[]};fs.prototype.getClass=function(){return fs};var gy=function(){};gy.prototype.locate=function(e){};gy.prototype.interfaces_=function(){return[]};gy.prototype.getClass=function(){return gy};var Eu=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};Eu.prototype.next=function(){if(this._atStart)return this._atStart=!1,Eu.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Jy;var e=this._parent.getGeometryN(this._index++);return e instanceof To?(this._subcollectionIterator=new Eu(e),this._subcollectionIterator.next()):e};Eu.prototype.remove=function(){throw new Error(this.getClass().getName())};Eu.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};Eu.prototype.interfaces_=function(){return[Yy]};Eu.prototype.getClass=function(){return Eu};Eu.isAtomic=function(e){return!(e instanceof To)};var Na=function(){this._geom=null;var e=arguments[0];this._geom=e};Na.prototype.locate=function(e){return Na.locate(e,this._geom)};Na.prototype.interfaces_=function(){return[gy]};Na.prototype.getClass=function(){return Na};Na.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?wt.isPointInRing(e,t.getCoordinates()):!1};Na.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!Na.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(Na.isPointInRing(e,i))return!1}return!0};Na.containsPoint=function(e,t){if(t instanceof yi)return Na.containsPointInPolygon(e,t);if(t instanceof To)for(var n=new Eu(t);n.hasNext();){var r=n.next();if(r!==t&&Na.containsPoint(e,r))return!0}return!1};Na.locate=function(e,t){return t.isEmpty()?Fe.EXTERIOR:Na.containsPoint(e,t)?Fe.INTERIOR:Fe.EXTERIOR};var ao=function(){this._edgeMap=new io,this._edgeList=null,this._ptInAreaLocation=[Fe.NONE,Fe.NONE]};ao.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return t===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};ao.prototype.propagateSideLabels=function(e){for(var t=Fe.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,at.LEFT)!==Fe.NONE&&(t=i.getLocation(e,at.LEFT))}if(t===Fe.NONE)return null;for(var o=t,l=this.iterator();l.hasNext();){var a=l.next(),h=a.getLabel();if(h.getLocation(e,at.ON)===Fe.NONE&&h.setLocation(e,at.ON,o),h.isArea(e)){var d=h.getLocation(e,at.LEFT),g=h.getLocation(e,at.RIGHT);if(g!==Fe.NONE){if(g!==o)throw new vc("side location conflict",a.getCoordinate());d===Fe.NONE&&an.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),o=d}else an.isTrue(h.getLocation(e,at.LEFT)===Fe.NONE,"found single null side"),h.setLocation(e,at.RIGHT,o),h.setLocation(e,at.LEFT,o)}}};ao.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()};ao.prototype.print=function(e){Vi.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};ao.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};ao.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,at.LEFT);an.isTrue(i!==Fe.NONE,"Found unlabelled area edge");for(var o=i,l=this.iterator();l.hasNext();){var a=l.next(),h=a.getLabel();an.isTrue(h.isArea(e),"Found non-area edge");var d=h.getLocation(e,at.LEFT),g=h.getLocation(e,at.RIGHT);if(d===g||g!==o)return!1;o=d}return!0};ao.prototype.findIndex=function(e){var t=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var r=t._edgeList.get(n);if(r===e)return n}return-1};ao.prototype.iterator=function(){return this.getEdges().iterator()};ao.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new mt(this._edgeMap.values())),this._edgeList};ao.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===Fe.NONE&&(this._ptInAreaLocation[e]=Na.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]};ao.prototype.toString=function(){var e=new Gl;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append(`
`)}return e.toString()};ao.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}};ao.prototype.computeLabelling=function(e){var t=this;this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],r=this.iterator();r.hasNext();)for(var i=r.next(),o=i.getLabel(),l=0;l<2;l++)o.isLine(l)&&o.getLocation(l)===Fe.BOUNDARY&&(n[l]=!0);for(var a=this.iterator();a.hasNext();)for(var h=a.next(),d=h.getLabel(),g=0;g<2;g++)if(d.isAnyNull(g)){var v=Fe.NONE;if(n[g])v=Fe.EXTERIOR;else{var b=h.getCoordinate();v=t.getLocation(g,b,e)}d.setAllLocationsIfNull(g,v)}};ao.prototype.getDegree=function(){return this._edgeMap.size()};ao.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null};ao.prototype.interfaces_=function(){return[]};ao.prototype.getClass=function(){return ao};var XAe=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var r=null,i=null,o=this._SCANNING_FOR_INCOMING,l=0;l<this._resultAreaEdgeList.size();l++){var a=n._resultAreaEdgeList.get(l),h=a.getSym();if(a.getLabel().isArea())switch(r===null&&a.isInResult()&&(r=a),o){case n._SCANNING_FOR_INCOMING:if(!h.isInResult())continue;i=h,o=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!a.isInResult())continue;i.setNext(a),o=n._SCANNING_FOR_INCOMING;break}}if(o===this._LINKING_TO_OUTGOING){if(r===null)throw new vc("no outgoing dirEdge found",this.getCoordinate());an.isTrue(r.isInResult(),"unable to link last incoming dirEdge"),i.setNext(r)}},t.prototype.insert=function(n){var r=n;this.insertEdgeEnd(r,r)},t.prototype.getRightmostEdge=function(){var n=this.getEdges(),r=n.size();if(r<1)return null;var i=n.get(0);if(r===1)return i;var o=n.get(r-1),l=i.getQuadrant(),a=o.getQuadrant();return Hn.isNorthern(l)&&Hn.isNorthern(a)?i:!Hn.isNorthern(l)&&!Hn.isNorthern(a)?o:i.getDy()!==0?i:o.getDy()!==0?o:(an.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(n){Vi.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var i=r.next();n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()}},t.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new mt;for(var r=this.iterator();r.hasNext();){var i=r.next();(i.isInResult()||i.getSym().isInResult())&&n._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.setAllLocationsIfNull(0,n.getLocation(0)),o.setAllLocationsIfNull(1,n.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var r=null,i=null,o=this._edgeList.size()-1;o>=0;o--){var l=n._edgeList.get(o),a=l.getSym();i===null&&(i=a),r!==null&&a.setNext(r),r=l}i.setNext(r)},t.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var r=arguments[0],i=this.findIndex(r),o=r.getDepth(at.LEFT),l=r.getDepth(at.RIGHT),a=this.computeDepths(i+1,this._edgeList.size(),o),h=this.computeDepths(0,i,a);if(h!==l)throw new vc("depth mismatch at "+r.getCoordinate())}else if(arguments.length===3){for(var d=arguments[0],g=arguments[1],v=arguments[2],b=v,I=d;I<g;I++){var T=n._edgeList.get(I);T.setEdgeDepths(at.RIGHT,b),b=T.getDepth(at.LEFT)}return b}},t.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.merge(r.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(n){for(var r=this,i=null,o=null,l=this._SCANNING_FOR_INCOMING,a=this._resultAreaEdgeList.size()-1;a>=0;a--){var h=r._resultAreaEdgeList.get(a),d=h.getSym();switch(i===null&&h.getEdgeRing()===n&&(i=h),l){case r._SCANNING_FOR_INCOMING:if(d.getEdgeRing()!==n)continue;o=d,l=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(h.getEdgeRing()!==n)continue;o.setNextMin(h),l=r._SCANNING_FOR_INCOMING;break}}l===this._LINKING_TO_OUTGOING&&(an.isTrue(i!==null,"found null for first outgoing dirEdge"),an.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),o.setNextMin(i))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,r=this.iterator();r.hasNext();){var i=r.next();i.isInResult()&&n++}return n}else if(arguments.length===1){for(var o=arguments[0],l=0,a=this.iterator();a.hasNext();){var h=a.next();h.getEdgeRing()===o&&l++}return l}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var n=Fe.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){n=Fe.INTERIOR;break}if(o.isInResult()){n=Fe.EXTERIOR;break}}}if(n===Fe.NONE)return null;for(var l=n,a=this.iterator();a.hasNext();){var h=a.next(),d=h.getSym();h.isLineEdge()?h.getEdge().setCovered(l===Fe.INTERIOR):(h.isInResult()&&(l=Fe.EXTERIOR),d.isInResult()&&(l=Fe.INTERIOR))}},t.prototype.computeLabelling=function(n){var r=this;e.prototype.computeLabelling.call(this,n),this._label=new Un(Fe.NONE);for(var i=this.iterator();i.hasNext();)for(var o=i.next(),l=o.getEdge(),a=l.getLabel(),h=0;h<2;h++){var d=a.getLocation(h);(d===Fe.INTERIOR||d===Fe.BOUNDARY)&&r._label.setLocation(h,Fe.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ao),LG=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new vC(n,new XAe)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(dy),Sf=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};Sf.prototype.compareTo=function(e){var t=e,n=Sf.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return n};Sf.prototype.interfaces_=function(){return[ps]};Sf.prototype.getClass=function(){return Sf};Sf.orientation=function(e){return dn.increasingDirection(e)===1};Sf.compareOriented=function(e,t,n,r){for(var i=t?1:-1,o=r?1:-1,l=t?e.length:-1,a=r?n.length:-1,h=t?0:e.length-1,d=r?0:n.length-1;;){var g=e[h].compareTo(n[d]);if(g!==0)return g;h+=i,d+=o;var v=h===l,b=d===a;if(v&&!b)return-1;if(!v&&b)return 1;if(v&&b)return 0}};var js=function(){this._edges=new mt,this._ocaMap=new io};js.prototype.print=function(e){var t=this;e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var r=t._edges.get(n);n>0&&e.print(","),e.print("(");for(var i=r.getCoordinates(),o=0;o<i.length;o++)o>0&&e.print(","),e.print(i[o].x+" "+i[o].y);e.println(")")}e.print(")  ")};js.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next())};js.prototype.findEdgeIndex=function(e){for(var t=this,n=0;n<this._edges.size();n++)if(t._edges.get(n).equals(e))return n;return-1};js.prototype.iterator=function(){return this._edges.iterator()};js.prototype.getEdges=function(){return this._edges};js.prototype.get=function(e){return this._edges.get(e)};js.prototype.findEqualEdge=function(e){var t=new Sf(e.getCoordinates()),n=this._ocaMap.get(t);return n};js.prototype.add=function(e){this._edges.add(e);var t=new Sf(e.getCoordinates());this._ocaMap.put(t,e)};js.prototype.interfaces_=function(){return[]};js.prototype.getClass=function(){return js};var Yh=function(){};Yh.prototype.processIntersections=function(e,t,n,r){};Yh.prototype.isDone=function(){};Yh.prototype.interfaces_=function(){return[]};Yh.prototype.getClass=function(){return Yh};var Fa=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};Fa.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(Fa.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};Fa.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Fa.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Fa.prototype.getLineIntersector=function(){return this._li};Fa.prototype.hasProperIntersection=function(){return this._hasProper};Fa.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],l=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,l,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};Fa.prototype.hasIntersection=function(){return this._hasIntersection};Fa.prototype.isDone=function(){return!1};Fa.prototype.hasInteriorIntersection=function(){return this._hasInterior};Fa.prototype.interfaces_=function(){return[Yh]};Fa.prototype.getClass=function(){return Fa};Fa.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var Rl=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new Ne(e),this.segmentIndex=t,this.dist=n};Rl.prototype.getSegmentIndex=function(){return this.segmentIndex};Rl.prototype.getCoordinate=function(){return this.coord};Rl.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)};Rl.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)};Rl.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e};Rl.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};Rl.prototype.getDistance=function(){return this.dist};Rl.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0};Rl.prototype.interfaces_=function(){return[ps]};Rl.prototype.getClass=function(){return Rl};var $u=function(){this._nodeMap=new io,this.edge=null;var e=arguments[0];this.edge=e};$u.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};$u.prototype.iterator=function(){return this._nodeMap.values().iterator()};$u.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};$u.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)};$u.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this.edge.pts[t.segmentIndex],o=t.dist>0||!t.coord.equals2D(i);o||r--;var l=new Array(r).fill(null),a=0;l[a++]=new Ne(e.coord);for(var h=e.segmentIndex+1;h<=t.segmentIndex;h++)l[a++]=n.edge.pts[h];return o&&(l[a]=t.coord),new TE(l,new Un(this.edge._label))};$u.prototype.add=function(e,t,n){var r=new Rl(e,t,n),i=this._nodeMap.get(r);return i!==null?i:(this._nodeMap.put(r,r),r)};$u.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1};$u.prototype.interfaces_=function(){return[]};$u.prototype.getClass=function(){return $u};var Jh=function(){};Jh.prototype.getChainStartIndices=function(e){var t=this,n=0,r=new mt;r.add(new Ml(n));do{var i=t.findChainEnd(e,n);r.add(new Ml(i)),n=i}while(n<e.length-1);var o=Jh.toIntArray(r);return o};Jh.prototype.findChainEnd=function(e,t){for(var n=Hn.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var i=Hn.quadrant(e[r-1],e[r]);if(i!==n)break;r++}return r-1};Jh.prototype.interfaces_=function(){return[]};Jh.prototype.getClass=function(){return Jh};Jh.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var xc=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Bt,this.env2=new Bt;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new Jh;this.startIndex=t.getChainStartIndices(this.pts)};xc.prototype.getCoordinates=function(){return this.pts};xc.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n};xc.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n};xc.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r)}else if(arguments.length===6){var i=arguments[0],o=arguments[1],l=arguments[2],a=arguments[3],h=arguments[4],d=arguments[5],g=this.pts[i],v=this.pts[o],b=l.pts[a],I=l.pts[h];if(o-i===1&&h-a===1)return d.addIntersections(this.e,i,l.e,a),null;if(this.env1.init(g,v),this.env2.init(b,I),!this.env1.intersects(this.env2))return null;var T=Math.trunc((i+o)/2),P=Math.trunc((a+h)/2);i<T&&(a<P&&this.computeIntersectsForChain(i,T,l,a,P,d),P<h&&this.computeIntersectsForChain(i,T,l,P,h,d)),T<o&&(a<P&&this.computeIntersectsForChain(T,o,l,a,P,d),P<h&&this.computeIntersectsForChain(T,o,l,P,h,d))}};xc.prototype.getStartIndexes=function(){return this.startIndex};xc.prototype.computeIntersects=function(e,t){for(var n=this,r=0;r<this.startIndex.length-1;r++)for(var i=0;i<e.startIndex.length-1;i++)n.computeIntersectsForChain(r,e,i,t)};xc.prototype.interfaces_=function(){return[]};xc.prototype.getClass=function(){return xc};var ji=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)t._depth[n][r]=e.NULL_VALUE},DG={NULL_VALUE:{configurable:!0}};ji.prototype.getDepth=function(e,t){return this._depth[e][t]};ji.prototype.setDepth=function(e,t,n){this._depth[e][t]=n};ji.prototype.isNull=function(){var e=this;if(arguments.length===0){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(e._depth[t][n]!==ji.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var r=arguments[0];return this._depth[r][1]===ji.NULL_VALUE}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._depth[i][o]===ji.NULL_VALUE}};ji.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var n=e._depth[t][1];e._depth[t][2]<n&&(n=e._depth[t][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;e._depth[t][r]>n&&(i=1),e._depth[t][r]=i}}};ji.prototype.getDelta=function(e){return this._depth[e][at.RIGHT]-this._depth[e][at.LEFT]};ji.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?Fe.EXTERIOR:Fe.INTERIOR};ji.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};ji.prototype.add=function(){var e=this;if(arguments.length===1)for(var t=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=t.getLocation(n,r);(i===Fe.EXTERIOR||i===Fe.INTERIOR)&&(e.isNull(n,r)?e._depth[n][r]=ji.depthAtLocation(i):e._depth[n][r]+=ji.depthAtLocation(i))}else if(arguments.length===3){var o=arguments[0],l=arguments[1],a=arguments[2];a===Fe.INTERIOR&&this._depth[o][l]++}};ji.prototype.interfaces_=function(){return[]};ji.prototype.getClass=function(){return ji};ji.depthAtLocation=function(e){return e===Fe.EXTERIOR?0:e===Fe.INTERIOR?1:ji.NULL_VALUE};DG.NULL_VALUE.get=function(){return-1};Object.defineProperties(ji,DG);var TE=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new $u(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ji,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var r=new t(n,Un.toLineLabel(this._label));return r},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var r=this;if(!(n instanceof t))return!1;var i=n;if(this.pts.length!==i.pts.length)return!1;for(var o=!0,l=!0,a=this.pts.length,h=0;h<this.pts.length;h++)if(r.pts[h].equals2D(i.pts[h])||(o=!1),r.pts[h].equals2D(i.pts[--a])||(l=!1),!o&&!l)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){var r=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.print(","),n.print(r.pts[i].x+" "+r.pts[i].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){var r=this;n.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)n.print(r.pts[i]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new xc(this)),this._mce},t.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new Bt;for(var r=0;r<this.pts.length;r++)n._env.expandToInclude(n.pts[r])}return this._env},t.prototype.addIntersection=function(n,r,i,o){var l=new Ne(n.getIntersection(o)),a=r,h=n.getEdgeDistance(i,o),d=a+1;if(d<this.pts.length){var g=this.pts[d];l.equals2D(g)&&(a=d,h=0)}this.eiList.add(l,a,h)},t.prototype.toString=function(){var n=this,r=new Gl;r.append("edge "+this._name+": "),r.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&r.append(","),r.append(n.pts[i].x+" "+n.pts[i].y);return r.append(")  "+this._label+" "+this._depthDelta),r.toString()},t.prototype.isPointwiseEqual=function(n){var r=this;if(this.pts.length!==n.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!r.pts[i].equals2D(n.pts[i]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,r,i){for(var o=this,l=0;l<n.getIntersectionNum();l++)o.addIntersection(n,r,i,l)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];r.setAtLeastIfValid(n.getLocation(0,at.ON),n.getLocation(1,at.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,at.LEFT),n.getLocation(1,at.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,at.RIGHT),n.getLocation(1,at.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(Ra),Io=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new js,this._bufParams=e||null};Io.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e};Io.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new Un(e.getLabel()),r.flip()),n.merge(r);var i=Io.depthDelta(r),o=t.getDepthDelta(),l=o+i;t.setDepthDelta(l)}else this._edgeList.add(e),e.setDepthDelta(Io.depthDelta(e.getLabel()))};Io.prototype.buildSubgraphs=function(e,t){for(var n=new mt,r=e.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),l=new Cp(n),a=l.getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}};Io.prototype.createSubgraphs=function(e){for(var t=new mt,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Po;i.create(r),t.add(i)}}return Bs.sort(t,Bs.reverseOrder()),t};Io.prototype.createEmptyResultGeometry=function(){var e=this._geomFact.createPolygon();return e};Io.prototype.getNoder=function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new nN,n=new md;return n.setPrecisionModel(e),t.setSegmentIntersector(new Fa(n)),t};Io.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new Xo(n,this._bufParams),i=new fs(e,t,r),o=i.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new Tr(new LG),this._graph.addEdges(this._edgeList.getEdges());var l=this.createSubgraphs(this._graph),a=new pa(this._geomFact);this.buildSubgraphs(l,a);var h=a.getPolygons();if(h.size()<=0)return this.createEmptyResultGeometry();var d=this._geomFact.buildGeometry(h);return d};Io.prototype.computeNodedEdges=function(e,t){var n=this,r=this.getNoder(t);r.computeNodes(e);for(var i=r.getNodedSubstrings(),o=i.iterator();o.hasNext();){var l=o.next(),a=l.getCoordinates();if(!(a.length===2&&a[0].equals2D(a[1]))){var h=l.getData(),d=new TE(l.getCoordinates(),new Un(h));n.insertUniqueEdge(d)}}};Io.prototype.setNoder=function(e){this._workingNoder=e};Io.prototype.interfaces_=function(){return[]};Io.prototype.getClass=function(){return Io};Io.depthDelta=function(e){var t=e.getLocation(0,at.LEFT),n=e.getLocation(0,at.RIGHT);return t===Fe.INTERIOR&&n===Fe.EXTERIOR?1:t===Fe.EXTERIOR&&n===Fe.INTERIOR?-1:0};Io.convertSegStrings=function(e){for(var t=new hn,n=new mt;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)};var Ef=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};Ef.prototype.rescale=function(){var e=this;if(Kt(arguments[0],fi))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/e._scaleFactor+e._offsetX,i[o].y=i[o].y/e._scaleFactor+e._offsetY;i.length===2&&i[0].equals2D(i[1])&&Vi.out.println(i)}};Ef.prototype.scale=function(){var e=this;if(Kt(arguments[0],fi)){for(var t=arguments[0],n=new mt,r=t.iterator();r.hasNext();){var i=r.next();n.add(new Yr(e.scale(i.getCoordinates()),i.getData()))}return n}else if(arguments[0]instanceof Array){for(var o=arguments[0],l=new Array(o.length).fill(null),a=0;a<o.length;a++)l[a]=new Ne(Math.round((o[a].x-e._offsetX)*e._scaleFactor),Math.round((o[a].y-e._offsetY)*e._scaleFactor),o[a].z);var h=dn.removeRepeatedPoints(l);return h}};Ef.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};Ef.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e};Ef.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)};Ef.prototype.interfaces_=function(){return[Zh]};Ef.prototype.getClass=function(){return Ef};var zl=function(){this._li=new md,this._segStrings=null;var e=arguments[0];this._segStrings=e},RG={fact:{configurable:!0}};zl.prototype.checkEndPtVertexIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next(),r=n.getCoordinates();e.checkEndPtVertexIntersections(r[0],e._segStrings),e.checkEndPtVertexIntersections(r[r.length-1],e._segStrings)}else if(arguments.length===2){for(var i=arguments[0],o=arguments[1],l=o.iterator();l.hasNext();)for(var a=l.next(),h=a.getCoordinates(),d=1;d<h.length-1;d++)if(h[d].equals(i))throw new gc("found endpt/interior pt intersection at index "+d+" :pt "+i)}};zl.prototype.checkInteriorIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var n=t.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();e.checkInteriorIntersections(n,i)}else if(arguments.length===2)for(var o=arguments[0],l=arguments[1],a=o.getCoordinates(),h=l.getCoordinates(),d=0;d<a.length-1;d++)for(var g=0;g<h.length-1;g++)e.checkInteriorIntersections(o,d,l,g);else if(arguments.length===4){var v=arguments[0],b=arguments[1],I=arguments[2],T=arguments[3];if(v===I&&b===T)return null;var P=v.getCoordinates()[b],$=v.getCoordinates()[b+1],O=I.getCoordinates()[T],k=I.getCoordinates()[T+1];if(this._li.computeIntersection(P,$,O,k),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,P,$)||this.hasInteriorIntersection(this._li,O,k)))throw new gc("found non-noded intersection at "+P+"-"+$+" and "+O+"-"+k)}};zl.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};zl.prototype.checkCollapses=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();e.checkCollapses(n)}else if(arguments.length===1)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)e.checkCollapse(i[o],i[o+1],i[o+2])};zl.prototype.hasInteriorIntersection=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!(i.equals(t)||i.equals(n)))return!0}return!1};zl.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new gc("found non-noded collapse at "+zl.fact.createLineString([e,t,n]))};zl.prototype.interfaces_=function(){return[]};zl.prototype.getClass=function(){return zl};RG.fact.get=function(){return new hn};Object.defineProperties(zl,RG);var Zo=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new xr("Scale factor must be non-zero");t!==1&&(this._pt=new Ne(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new Ne,this._p1Scaled=new Ne),this.initCorners(this._pt)},zG={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Zo.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),l=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(l)return!1;var a=this.intersectsToleranceSquare(e,t);return an.isTrue(!(l&&a),"Found bad envelope test"),a};Zo.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new Ne(this._maxx,this._maxy),this._corner[1]=new Ne(this._minx,this._maxy),this._corner[2]=new Ne(this._minx,this._miny),this._corner[3]=new Ne(this._maxx,this._miny)};Zo.prototype.intersects=function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};Zo.prototype.scale=function(e){return Math.round(e*this._scaleFactor)};Zo.prototype.getCoordinate=function(){return this._originalPt};Zo.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)};Zo.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var e=Zo.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Bt(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv};Zo.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))};Zo.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper())||n&&r||e.equals(this._pt)||t.equals(this._pt))};Zo.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1};Zo.prototype.interfaces_=function(){return[]};Zo.prototype.getClass=function(){return Zo};zG.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(Zo,zG);var $x=function(){this.tempEnv1=new Bt,this.selectedSegment=new Ut};$x.prototype.select=function(){if(arguments.length!==1&&arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}};$x.prototype.interfaces_=function(){return[]};$x.prototype.getClass=function(){return $x};var yy=function(){this._index=null;var e=arguments[0];this._index=e},FG={HotPixelSnapAction:{configurable:!0}};yy.prototype.snap=function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getSafeEnvelope(),o=new BG(t,n,r);return this._index.query(i,{interfaces_:function(){return[bf]},visitItem:function(l){var a=l;a.select(i,o)}}),o.isNodeAdded()}};yy.prototype.interfaces_=function(){return[]};yy.prototype.getClass=function(){return yy};FG.HotPixelSnapAction.get=function(){return BG};Object.defineProperties(yy,FG);var BG=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getContext();if(this._parentEdge!==null&&i===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,r)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}($x),Ip=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new mt};Ip.prototype.processIntersections=function(e,t,n,r){var i=this;if(e===n&&t===r)return null;var o=e.getCoordinates()[t],l=e.getCoordinates()[t+1],a=n.getCoordinates()[r],h=n.getCoordinates()[r+1];if(this._li.computeIntersection(o,l,a,h),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var d=0;d<this._li.getIntersectionNum();d++)i._interiorIntersections.add(i._li.getIntersection(d));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}};Ip.prototype.isDone=function(){return!1};Ip.prototype.getInteriorIntersections=function(){return this._interiorIntersections};Ip.prototype.interfaces_=function(){return[Yh]};Ip.prototype.getClass=function(){return Ip};var ku=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new md,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};ku.prototype.checkCorrectness=function(e){var t=Yr.getNodedSubstrings(e),n=new zl(t);try{n.checkValid()}catch(r){if(r instanceof SG)r.printStackTrace();else throw r}finally{}};ku.prototype.getNodedSubstrings=function(){return Yr.getNodedSubstrings(this._nodedSegStrings)};ku.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)};ku.prototype.findInteriorIntersections=function(e,t){var n=new Ip(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()};ku.prototype.computeVertexSnaps=function(){var e=this;if(Kt(arguments[0],fi))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.computeVertexSnaps(r)}else if(arguments[0]instanceof Yr)for(var i=arguments[0],o=i.getCoordinates(),l=0;l<o.length;l++){var a=new Zo(o[l],e._scaleFactor,e._li),h=e._pointSnapper.snap(a,i,l);h&&i.addIntersection(o[l],l)}};ku.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new nN,this._pointSnapper=new yy(this._noder.getIndex()),this.snapRound(e,this._li)};ku.prototype.computeIntersectionSnaps=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=new Zo(r,t._scaleFactor,t._li);t._pointSnapper.snap(i)}};ku.prototype.interfaces_=function(){return[Zh]};ku.prototype.getClass=function(){return ku};var Bi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new kn,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},Qy={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Bi.prototype.bufferFixedPrecision=function(e){var t=new Ef(new ku(new Nn(1)),e.getScale()),n=new Io(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)};Bi.prototype.bufferReducedPrecision=function(){var e=this;if(arguments.length===0){for(var t=Bi.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(o){if(o instanceof vc)e._saveException=o;else throw o}finally{}if(e._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],r=Bi.precisionScaleFactor(this._argGeom,this._distance,n),i=new Nn(r);this.bufferFixedPrecision(i)}};Bi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===Nn.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()};Bi.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)};Bi.prototype.bufferOriginalPrecision=function(){try{var e=new Io(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof gc)this._saveException=t;else throw t}finally{}};Bi.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry};Bi.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)};Bi.prototype.interfaces_=function(){return[]};Bi.prototype.getClass=function(){return Bi};Bi.bufferOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Bi(e),r=n.getResultGeometry(t);return r}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Xt&&typeof arguments[1]=="number"){var i=arguments[0],o=arguments[1],l=arguments[2],a=new Bi(i);a.setQuadrantSegments(l);var h=a.getResultGeometry(o);return h}else if(arguments[2]instanceof kn&&arguments[0]instanceof Xt&&typeof arguments[1]=="number"){var d=arguments[0],g=arguments[1],v=arguments[2],b=new Bi(d,v),I=b.getResultGeometry(g);return I}}else if(arguments.length===4){var T=arguments[0],P=arguments[1],$=arguments[2],O=arguments[3],k=new Bi(T);k.setQuadrantSegments($),k.setEndCapStyle(O);var R=k.getResultGeometry(P);return R}};Bi.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=Da.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),o=t>0?t:0,l=i+2*o,a=Math.trunc(Math.log(l)/Math.log(10)+1),h=n-a,d=Math.pow(10,h);return d};Qy.CAP_ROUND.get=function(){return kn.CAP_ROUND};Qy.CAP_BUTT.get=function(){return kn.CAP_FLAT};Qy.CAP_FLAT.get=function(){return kn.CAP_FLAT};Qy.CAP_SQUARE.get=function(){return kn.CAP_SQUARE};Qy.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Bi,Qy);var wo=function(){this._pt=[new Ne,new Ne],this._distance=tn.NaN,this._isNull=!0};wo.prototype.getCoordinates=function(){return this._pt};wo.prototype.getCoordinate=function(e){return this._pt[e]};wo.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};wo.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};wo.prototype.getDistance=function(){return this._distance};wo.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};wo.prototype.interfaces_=function(){return[]};wo.prototype.getClass=function(){return wo};var pu=function(){};pu.prototype.interfaces_=function(){return[]};pu.prototype.getClass=function(){return pu};pu.computeDistance=function(){if(arguments[2]instanceof wo&&arguments[0]instanceof Lr&&arguments[1]instanceof Ne)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=e.getCoordinates(),i=new Ut,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var l=i.closestPoint(t);n.setMinimum(l,t)}else if(arguments[2]instanceof wo&&arguments[0]instanceof yi&&arguments[1]instanceof Ne){var a=arguments[0],h=arguments[1],d=arguments[2];pu.computeDistance(a.getExteriorRing(),h,d);for(var g=0;g<a.getNumInteriorRing();g++)pu.computeDistance(a.getInteriorRingN(g),h,d)}else if(arguments[2]instanceof wo&&arguments[0]instanceof Xt&&arguments[1]instanceof Ne){var v=arguments[0],b=arguments[1],I=arguments[2];if(v instanceof Lr)pu.computeDistance(v,b,I);else if(v instanceof yi)pu.computeDistance(v,b,I);else if(v instanceof To)for(var T=v,P=0;P<T.getNumGeometries();P++){var $=T.getGeometryN(P);pu.computeDistance($,b,I)}else I.setMinimum(v.getCoordinate(),b)}else if(arguments[2]instanceof wo&&arguments[0]instanceof Ut&&arguments[1]instanceof Ne){var O=arguments[0],k=arguments[1],R=arguments[2],j=O.closestPoint(k);R.setMinimum(j,k)}};var Qh=function(e){this._maxPtDist=new wo,this._inputGeom=e||null},rN={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Qh.prototype.computeMaxMidpointDistance=function(e){var t=new Cf(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Qh.prototype.computeMaxVertexDistance=function(e){var t=new Tp(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Qh.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()};Qh.prototype.getDistancePoints=function(){return this._maxPtDist};Qh.prototype.interfaces_=function(){return[]};Qh.prototype.getClass=function(){return Qh};rN.MaxPointDistanceFilter.get=function(){return Tp};rN.MaxMidpointDistanceFilter.get=function(){return Cf};Object.defineProperties(Qh,rN);var Tp=function(e){this._maxPtDist=new wo,this._minPtDist=new wo,this._geom=e||null};Tp.prototype.filter=function(e){this._minPtDist.initialize(),pu.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Tp.prototype.getMaxPointDistance=function(){return this._maxPtDist};Tp.prototype.interfaces_=function(){return[Pu]};Tp.prototype.getClass=function(){return Tp};var Cf=function(e){this._maxPtDist=new wo,this._minPtDist=new wo,this._geom=e||null};Cf.prototype.filter=function(e,t){if(t===0)return null;var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=new Ne((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),pu.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Cf.prototype.isDone=function(){return!1};Cf.prototype.isGeometryChanged=function(){return!1};Cf.prototype.getMaxPointDistance=function(){return this._maxPtDist};Cf.prototype.interfaces_=function(){return[zs]};Cf.prototype.getClass=function(){return Cf};var hc=function(e){this._comps=e||null};hc.prototype.filter=function(e){e instanceof yi&&this._comps.add(e)};hc.prototype.interfaces_=function(){return[kl]};hc.prototype.getClass=function(){return hc};hc.getPolygons=function(){if(arguments.length===1){var e=arguments[0];return hc.getPolygons(e,new mt)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof yi?n.add(t):t instanceof To&&t.apply(new hc(n)),n}};var Ri=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var e=arguments[0];this._lines=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};Ri.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof Au){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof Lr&&this._lines.add(e)};Ri.prototype.setForceToLineString=function(e){this._isForcedToLineString=e};Ri.prototype.interfaces_=function(){return[yc]};Ri.prototype.getClass=function(){return Ri};Ri.getGeometry=function(){if(arguments.length===1){var e=arguments[0];return e.getFactory().buildGeometry(Ri.getLines(e))}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(Ri.getLines(t,n))}};Ri.getLines=function(){if(arguments.length===1){var e=arguments[0];return Ri.getLines(e,!1)}else if(arguments.length===2){if(Kt(arguments[0],fi)&&Kt(arguments[1],fi)){for(var t=arguments[0],n=arguments[1],r=t.iterator();r.hasNext();){var i=r.next();Ri.getLines(i,n)}return n}else if(arguments[0]instanceof Xt&&typeof arguments[1]=="boolean"){var o=arguments[0],l=arguments[1],a=new mt;return o.apply(new Ri(a,l)),a}else if(arguments[0]instanceof Xt&&Kt(arguments[1],fi)){var h=arguments[0],d=arguments[1];return h instanceof Lr?d.add(h):h.apply(new Ri(d)),d}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&Kt(arguments[0],fi)&&Kt(arguments[1],fi)){for(var g=arguments[0],v=arguments[1],b=arguments[2],I=g.iterator();I.hasNext();){var T=I.next();Ri.getLines(T,v,b)}return v}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Xt&&Kt(arguments[1],fi)){var P=arguments[0],$=arguments[1],O=arguments[2];return P.apply(new Ri($,O)),$}}};var Us=function(){if(this._boundaryRule=us.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];if(e===null)throw new xr("Rule must be non-null");this._boundaryRule=e}};Us.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof Ne&&arguments[1]instanceof yi){var t=arguments[0],n=arguments[1];if(n.isEmpty())return Fe.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(t,r);if(i===Fe.EXTERIOR)return Fe.EXTERIOR;if(i===Fe.BOUNDARY)return Fe.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var l=n.getInteriorRingN(o),a=e.locateInPolygonRing(t,l);if(a===Fe.INTERIOR)return Fe.EXTERIOR;if(a===Fe.BOUNDARY)return Fe.BOUNDARY}return Fe.INTERIOR}else if(arguments[0]instanceof Ne&&arguments[1]instanceof Lr){var h=arguments[0],d=arguments[1];if(!d.getEnvelopeInternal().intersects(h))return Fe.EXTERIOR;var g=d.getCoordinates();return!d.isClosed()&&(h.equals(g[0])||h.equals(g[g.length-1]))?Fe.BOUNDARY:wt.isOnLine(h,g)?Fe.INTERIOR:Fe.EXTERIOR}else if(arguments[0]instanceof Ne&&arguments[1]instanceof da){var v=arguments[0],b=arguments[1],I=b.getCoordinate();return I.equals2D(v)?Fe.INTERIOR:Fe.EXTERIOR}};Us.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?wt.locatePointInRing(e,t.getCoordinates()):Fe.EXTERIOR};Us.prototype.intersects=function(e,t){return this.locate(e,t)!==Fe.EXTERIOR};Us.prototype.updateLocationInfo=function(e){e===Fe.INTERIOR&&(this._isIn=!0),e===Fe.BOUNDARY&&this._numBoundaries++};Us.prototype.computeLocation=function(e,t){var n=this;if(t instanceof da&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof Lr)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof yi)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Xh)for(var r=t,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(e,o))}else if(t instanceof Su)for(var l=t,a=0;a<l.getNumGeometries();a++){var h=l.getGeometryN(a);n.updateLocationInfo(n.locateInternal(e,h))}else if(t instanceof To)for(var d=new Eu(t);d.hasNext();){var g=d.next();g!==t&&n.computeLocation(e,g)}};Us.prototype.locate=function(e,t){return t.isEmpty()?Fe.EXTERIOR:t instanceof Lr?this.locateInternal(e,t):t instanceof yi?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?Fe.BOUNDARY:this._numBoundaries>0||this._isIn?Fe.INTERIOR:Fe.EXTERIOR)};Us.prototype.interfaces_=function(){return[]};Us.prototype.getClass=function(){return Us};var So=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},jG={INSIDE_AREA:{configurable:!0}};So.prototype.isInsideArea=function(){return this._segIndex===So.INSIDE_AREA};So.prototype.getCoordinate=function(){return this._pt};So.prototype.getGeometryComponent=function(){return this._component};So.prototype.getSegmentIndex=function(){return this._segIndex};So.prototype.interfaces_=function(){return[]};So.prototype.getClass=function(){return So};jG.INSIDE_AREA.get=function(){return-1};Object.defineProperties(So,jG);var rf=function(e){this._pts=e||null};rf.prototype.filter=function(e){e instanceof da&&this._pts.add(e)};rf.prototype.interfaces_=function(){return[kl]};rf.prototype.getClass=function(){return rf};rf.getPoints=function(){if(arguments.length===1){var e=arguments[0];return e instanceof da?Bs.singletonList(e):rf.getPoints(e,new mt)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof da?n.add(t):t instanceof To&&t.apply(new rf(n)),n}};var Pp=function(){this._locations=null;var e=arguments[0];this._locations=e};Pp.prototype.filter=function(e){(e instanceof da||e instanceof Lr||e instanceof yi)&&this._locations.add(new So(e,0,e.getCoordinate()))};Pp.prototype.interfaces_=function(){return[kl]};Pp.prototype.getClass=function(){return Pp};Pp.getLocations=function(e){var t=new mt;return e.apply(new Pp(t)),t};var Gi=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Us,this._minDistanceLocation=null,this._minDistance=tn.MAX_VALUE,arguments.length===2){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Gi.prototype.computeContainmentDistance=function(){var e=this;if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=1-n,o=hc.getPolygons(this._geom[n]);if(o.size()>0){var l=Pp.getLocations(this._geom[i]);if(this.computeContainmentDistance(l,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&Kt(arguments[0],Ns)&&Kt(arguments[1],Ns)){for(var a=arguments[0],h=arguments[1],d=arguments[2],g=0;g<a.size();g++)for(var v=a.get(g),b=0;b<h.size();b++)if(e.computeContainmentDistance(v,h.get(b),d),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof So&&arguments[1]instanceof yi){var I=arguments[0],T=arguments[1],P=arguments[2],$=I.getCoordinate();if(Fe.EXTERIOR!==this._ptLocator.locate($,T))return this._minDistance=0,P[0]=I,P[1]=new So(T,$),null}}};Gi.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),l=0;l<t.size();l++){var a=t.get(l);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}};Gi.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=Ri.getLines(this._geom[0]),n=Ri.getLines(this._geom[1]),r=rf.getPoints(this._geom[0]),i=rf.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),this.updateMinDistance(e,!1)};Gi.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};Gi.prototype.updateMinDistance=function(e,t){if(e[0]===null)return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])};Gi.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e};Gi.prototype.computeMinDistance=function(){var e=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Lr&&arguments[1]instanceof da){var t=arguments[0],n=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),o=n.getCoordinate(),l=0;l<i.length-1;l++){var a=wt.distancePointLine(o,i[l],i[l+1]);if(a<e._minDistance){e._minDistance=a;var h=new Ut(i[l],i[l+1]),d=h.closestPoint(o);r[0]=new So(t,l,d),r[1]=new So(n,0,o)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Lr&&arguments[1]instanceof Lr){var g=arguments[0],v=arguments[1],b=arguments[2];if(g.getEnvelopeInternal().distance(v.getEnvelopeInternal())>this._minDistance)return null;for(var I=g.getCoordinates(),T=v.getCoordinates(),P=0;P<I.length-1;P++)for(var $=0;$<T.length-1;$++){var O=wt.distanceLineLine(I[P],I[P+1],T[$],T[$+1]);if(O<e._minDistance){e._minDistance=O;var k=new Ut(I[P],I[P+1]),R=new Ut(T[$],T[$+1]),j=k.closestPoints(R);b[0]=new So(g,P,j[0]),b[1]=new So(v,$,j[1])}if(e._minDistance<=e._terminateDistance)return null}}}};Gi.prototype.computeMinDistancePoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),l=0;l<t.size();l++){var a=t.get(l),h=o.getCoordinate().distance(a.getCoordinate());if(h<r._minDistance&&(r._minDistance=h,n[0]=new So(o,0,o.getCoordinate()),n[1]=new So(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}};Gi.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new xr("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};Gi.prototype.computeMinDistanceLines=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),l=0;l<t.size();l++){var a=t.get(l);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}};Gi.prototype.interfaces_=function(){return[]};Gi.prototype.getClass=function(){return Gi};Gi.distance=function(e,t){var n=new Gi(e,t);return n.distance()};Gi.isWithinDistance=function(e,t,n){var r=new Gi(e,t,n);return r.distance()<=n};Gi.nearestPoints=function(e,t){var n=new Gi(e,t);return n.nearestPoints()};var ro=function(){this._pt=[new Ne,new Ne],this._distance=tn.NaN,this._isNull=!0};ro.prototype.getCoordinates=function(){return this._pt};ro.prototype.getCoordinate=function(e){return this._pt[e]};ro.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};ro.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};ro.prototype.toString=function(){return Rs.toLineString(this._pt[0],this._pt[1])};ro.prototype.getDistance=function(){return this._distance};ro.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};ro.prototype.interfaces_=function(){return[]};ro.prototype.getClass=function(){return ro};var yl=function(){};yl.prototype.interfaces_=function(){return[]};yl.prototype.getClass=function(){return yl};yl.computeDistance=function(){if(arguments[2]instanceof ro&&arguments[0]instanceof Lr&&arguments[1]instanceof Ne)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=new Ut,i=e.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var l=r.closestPoint(t);n.setMinimum(l,t)}else if(arguments[2]instanceof ro&&arguments[0]instanceof yi&&arguments[1]instanceof Ne){var a=arguments[0],h=arguments[1],d=arguments[2];yl.computeDistance(a.getExteriorRing(),h,d);for(var g=0;g<a.getNumInteriorRing();g++)yl.computeDistance(a.getInteriorRingN(g),h,d)}else if(arguments[2]instanceof ro&&arguments[0]instanceof Xt&&arguments[1]instanceof Ne){var v=arguments[0],b=arguments[1],I=arguments[2];if(v instanceof Lr)yl.computeDistance(v,b,I);else if(v instanceof yi)yl.computeDistance(v,b,I);else if(v instanceof To)for(var T=v,P=0;P<T.getNumGeometries();P++){var $=T.getGeometryN(P);yl.computeDistance($,b,I)}else I.setMinimum(v.getCoordinate(),b)}else if(arguments[2]instanceof ro&&arguments[0]instanceof Ut&&arguments[1]instanceof Ne){var O=arguments[0],k=arguments[1],R=arguments[2],j=O.closestPoint(k);R.setMinimum(j,k)}};var ss=function(){this._g0=null,this._g1=null,this._ptDist=new ro,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},iN={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};ss.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};ss.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new xr("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e};ss.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)};ss.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};ss.prototype.computeOrientedDistance=function(e,t,n){var r=new Ap(t);if(e.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new If(t,this._densifyFrac);e.apply(i),n.setMaximum(i.getMaxPointDistance())}};ss.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};ss.prototype.interfaces_=function(){return[]};ss.prototype.getClass=function(){return ss};ss.distance=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new ss(e,t);return n.distance()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],l=new ss(r,i);return l.setDensifyFraction(o),l.distance()}};iN.MaxPointDistanceFilter.get=function(){return Ap};iN.MaxDensifiedByFractionDistanceFilter.get=function(){return If};Object.defineProperties(ss,iN);var Ap=function(){this._maxPtDist=new ro,this._minPtDist=new ro,this._euclideanDist=new yl,this._geom=null;var e=arguments[0];this._geom=e};Ap.prototype.filter=function(e){this._minPtDist.initialize(),yl.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Ap.prototype.getMaxPointDistance=function(){return this._maxPtDist};Ap.prototype.interfaces_=function(){return[Pu]};Ap.prototype.getClass=function(){return Ap};var If=function(){this._maxPtDist=new ro,this._minPtDist=new ro,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};If.prototype.filter=function(e,t){var n=this;if(t===0)return null;for(var r=e.getCoordinate(t-1),i=e.getCoordinate(t),o=(i.x-r.x)/this._numSubSegs,l=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var h=r.x+a*o,d=r.y+a*l,g=new Ne(h,d);n._minPtDist.initialize(),yl.computeDistance(n._geom,g,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};If.prototype.isDone=function(){return!1};If.prototype.isGeometryChanged=function(){return!1};If.prototype.getMaxPointDistance=function(){return this._maxPtDist};If.prototype.interfaces_=function(){return[zs]};If.prototype.getClass=function(){return If};var ca=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},oN={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};ca.prototype.checkMaximumDistance=function(e,t,n){var r=new ss(t,e);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Rs.toLineString(i[0],i[1])+")"}};ca.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=ca.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),ca.VERBOSE&&Vi.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};ca.prototype.checkNegativeValid=function(){if(!(this._input instanceof yi||this._input instanceof Su||this._input instanceof To))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)};ca.prototype.getErrorIndicator=function(){return this._errorIndicator};ca.prototype.checkMinimumDistance=function(e,t,n){var r=new Gi(e,t,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Rs.toLineString(i[0],i[1])+" )"}};ca.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)};ca.prototype.getErrorLocation=function(){return this._errorLocation};ca.prototype.getPolygonLines=function(e){for(var t=new mt,n=new Ri(t),r=hc.getPolygons(e),i=r.iterator();i.hasNext();){var o=i.next();o.apply(n)}return e.getFactory().buildGeometry(t)};ca.prototype.getErrorMessage=function(){return this._errMsg};ca.prototype.interfaces_=function(){return[]};ca.prototype.getClass=function(){return ca};oN.VERBOSE.get=function(){return!1};oN.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(ca,oN);var qi=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},aN={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};qi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};qi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*qi.MAX_ENV_DIFF_FRAC;e===0&&(e=.001);var t=new Bt(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new Bt(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};qi.prototype.checkDistance=function(){var e=new ca(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")};qi.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};qi.prototype.checkPolygonal=function(){this._result instanceof yi||this._result instanceof Su||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};qi.prototype.getErrorIndicator=function(){return this._errorIndicator};qi.prototype.getErrorLocation=function(){return this._errorLocation};qi.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};qi.prototype.report=function(e){if(!qi.VERBOSE)return null;Vi.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))};qi.prototype.getErrorMessage=function(){return this._errorMsg};qi.prototype.interfaces_=function(){return[]};qi.prototype.getClass=function(){return qi};qi.isValidMsg=function(e,t,n){var r=new qi(e,t,n);return r.isValid()?null:r.getErrorMessage()};qi.isValid=function(e,t,n){var r=new qi(e,t,n);return!!r.isValid()};aN.VERBOSE.get=function(){return!1};aN.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(qi,aN);var Fl=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Fl.prototype.getCoordinates=function(){return this._pts};Fl.prototype.size=function(){return this._pts.length};Fl.prototype.getCoordinate=function(e){return this._pts[e]};Fl.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Fl.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:Ep.octant(this.getCoordinate(e),this.getCoordinate(e+1))};Fl.prototype.setData=function(e){this._data=e};Fl.prototype.getData=function(){return this._data};Fl.prototype.toString=function(){return Rs.toLineString(new Wr(this._pts))};Fl.prototype.interfaces_=function(){return[Mu]};Fl.prototype.getClass=function(){return Fl};var Ni=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new mt,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};Ni.prototype.getInteriorIntersection=function(){return this._interiorIntersection};Ni.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e};Ni.prototype.getIntersectionSegments=function(){return this._intSegments};Ni.prototype.count=function(){return this._intersectionCount};Ni.prototype.getIntersections=function(){return this._intersections};Ni.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};Ni.prototype.setKeepIntersections=function(e){this._keepIntersections=e};Ni.prototype.processIntersections=function(e,t,n,r){if(!this._findAllIntersections&&this.hasIntersection()||e===n&&t===r)return null;if(this._isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!i)return null}var o=e.getCoordinates()[t],l=e.getCoordinates()[t+1],a=n.getCoordinates()[r],h=n.getCoordinates()[r+1];this._li.computeIntersection(o,l,a,h),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=o,this._intSegments[1]=l,this._intSegments[2]=a,this._intSegments[3]=h,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};Ni.prototype.isEndSegment=function(e,t){return t===0||t>=e.size()-2};Ni.prototype.hasIntersection=function(){return this._interiorIntersection!==null};Ni.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};Ni.prototype.interfaces_=function(){return[Yh]};Ni.prototype.getClass=function(){return Ni};Ni.createAllIntersectionsFinder=function(e){var t=new Ni(e);return t.setFindAllIntersections(!0),t};Ni.createAnyIntersectionFinder=function(e){return new Ni(e)};Ni.createIntersectionCounter=function(e){var t=new Ni(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var Vs=function(){this._li=new md,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};Vs.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};Vs.prototype.getIntersections=function(){return this._segInt.getIntersections()};Vs.prototype.isValid=function(){return this.execute(),this._isValid};Vs.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};Vs.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Ni(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new nN;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};Vs.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new vc(this.getErrorMessage(),this._segInt.getInteriorIntersection())};Vs.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Rs.toLineString(e[0],e[1])+" and "+Rs.toLineString(e[2],e[3])};Vs.prototype.interfaces_=function(){return[]};Vs.prototype.getClass=function(){return Vs};Vs.computeIntersections=function(e){var t=new Vs(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var ed=function e(){this._nv=null;var t=arguments[0];this._nv=new Vs(e.toSegmentStrings(t))};ed.prototype.checkValid=function(){this._nv.checkValid()};ed.prototype.interfaces_=function(){return[]};ed.prototype.getClass=function(){return ed};ed.toSegmentStrings=function(e){for(var t=new mt,n=e.iterator();n.hasNext();){var r=n.next();t.add(new Fl(r.getCoordinates(),r))}return t};ed.checkValid=function(e){var t=new ed(e);t.checkValid()};var Op=function(e){this._mapOp=e};Op.prototype.map=function(e){for(var t=this,n=new mt,r=0;r<e.getNumGeometries();r++){var i=t._mapOp.map(e.getGeometryN(r));i.isEmpty()||n.add(i)}return e.getFactory().createGeometryCollection(hn.toGeometryArray(n))};Op.prototype.interfaces_=function(){return[]};Op.prototype.getClass=function(){return Op};Op.map=function(e,t){var n=new Op(t);return n.map(e)};var Bl=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new mt,this._resultLineList=new mt;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};Bl.prototype.collectLines=function(e){for(var t=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();t.collectLineEdge(r,e,t._lineEdgesList),t.collectBoundaryTouchEdge(r,e,t._lineEdgesList)}};Bl.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)};Bl.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList};Bl.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&!e.isVisited()&&on.isResultOfOp(r,t)&&!i.isCovered()&&(n.add(i),e.setVisitedEdge(!0))};Bl.prototype.findCoveredLineEdges=function(){for(var e=this,t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();n.getEdges().findCoveredLineEdges()}for(var r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getEdge();if(i.isLineEdge()&&!o.isCoveredSet()){var l=e._op.isCoveredByA(i.getCoordinate());o.setCovered(l)}}};Bl.prototype.labelIsolatedLines=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?t.labelIsolatedLine(r,0):t.labelIsolatedLine(r,1))}};Bl.prototype.buildLines=function(e){for(var t=this,n=this._lineEdgesList.iterator();n.hasNext();){var r=n.next(),i=t._geometryFactory.createLineString(r.getCoordinates());t._resultLineList.add(i),r.setInResult(!0)}};Bl.prototype.collectBoundaryTouchEdge=function(e,t,n){var r=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;an.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),on.isResultOfOp(r,t)&&t===on.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))};Bl.prototype.interfaces_=function(){return[]};Bl.prototype.getClass=function(){return Bl};var Mp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new mt;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Mp.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}};Mp.prototype.extractNonCoveredResultNodes=function(e){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isInResult()&&!r.isIncidentEdgeInResult()&&(r.getEdges().getDegree()===0||e===on.INTERSECTION)){var i=r.getLabel();on.isResultOfOp(i,e)&&t.filterCoveredNodeToPoint(r)}}};Mp.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList};Mp.prototype.interfaces_=function(){return[]};Mp.prototype.getClass=function(){return Mp};var Ko=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Ko.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))};Ko.prototype.transformPolygon=function(e,t){var n=this,r=!0,i=this.transformLinearRing(e.getExteriorRing(),e);(i===null||!(i instanceof Au)||i.isEmpty())&&(r=!1);for(var o=new mt,l=0;l<e.getNumInteriorRing();l++){var a=n.transformLinearRing(e.getInteriorRingN(l),e);a===null||a.isEmpty()||(a instanceof Au||(r=!1),o.add(a))}if(r)return this._factory.createPolygon(i,o.toArray([]));var h=new mt;return i!==null&&h.add(i),h.addAll(o),this._factory.buildGeometry(h)};Ko.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)};Ko.prototype.getInputGeometry=function(){return this._inputGeom};Ko.prototype.transformMultiLineString=function(e,t){for(var n=this,r=new mt,i=0;i<e.getNumGeometries();i++){var o=n.transformLineString(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Ko.prototype.transformCoordinates=function(e,t){return this.copy(e)};Ko.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))};Ko.prototype.transformMultiPoint=function(e,t){for(var n=this,r=new mt,i=0;i<e.getNumGeometries();i++){var o=n.transformPoint(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Ko.prototype.transformMultiPolygon=function(e,t){for(var n=this,r=new mt,i=0;i<e.getNumGeometries();i++){var o=n.transformPolygon(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Ko.prototype.copy=function(e){return e.copy()};Ko.prototype.transformGeometryCollection=function(e,t){for(var n=this,r=new mt,i=0;i<e.getNumGeometries();i++){var o=n.transform(e.getGeometryN(i));o!==null&&(n._pruneEmptyGeometry&&o.isEmpty()||r.add(o))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(hn.toGeometryArray(r)):this._factory.buildGeometry(r)};Ko.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof da)return this.transformPoint(e,null);if(e instanceof hy)return this.transformMultiPoint(e,null);if(e instanceof Au)return this.transformLinearRing(e,null);if(e instanceof Lr)return this.transformLineString(e,null);if(e instanceof Xh)return this.transformMultiLineString(e,null);if(e instanceof yi)return this.transformPolygon(e,null);if(e instanceof Su)return this.transformMultiPolygon(e,null);if(e instanceof To)return this.transformGeometryCollection(e,null);throw new xr("Unknown Geometry subtype: "+e.getClass().getName())};Ko.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(n===null)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};Ko.prototype.interfaces_=function(){return[]};Ko.prototype.getClass=function(){return Ko};var Nu=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Ut,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Lr&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};Nu.prototype.snapVertices=function(e,t){for(var n=this,r=this._isClosed?e.size()-1:e.size(),i=0;i<r;i++){var o=e.get(i),l=n.findSnapForVertex(o,t);l!==null&&(e.set(i,new Ne(l)),i===0&&n._isClosed&&e.set(e.size()-1,new Ne(l)))}};Nu.prototype.findSnapForVertex=function(e,t){for(var n=this,r=0;r<t.length;r++){if(e.equals2D(t[r]))return null;if(e.distance(t[r])<n._snapTolerance)return t[r]}return null};Nu.prototype.snapTo=function(e){var t=new p1(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n};Nu.prototype.snapSegments=function(e,t){var n=this;if(t.length===0)return null;var r=t.length;t[0].equals2D(t[t.length-1])&&(r=t.length-1);for(var i=0;i<r;i++){var o=t[i],l=n.findSegmentIndexToSnap(o,e);l>=0&&e.add(l+1,new Ne(o),!1)}};Nu.prototype.findSegmentIndexToSnap=function(e,t){for(var n=this,r=tn.MAX_VALUE,i=-1,o=0;o<t.size()-1;o++){if(n._seg.p0=t.get(o),n._seg.p1=t.get(o+1),n._seg.p0.equals2D(e)||n._seg.p1.equals2D(e)){if(n._allowSnappingToSourceVertices)continue;return-1}var l=n._seg.distance(e);l<n._snapTolerance&&l<r&&(r=l,i=o)}return i};Nu.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e};Nu.prototype.interfaces_=function(){return[]};Nu.prototype.getClass=function(){return Nu};Nu.isClosed=function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])};var Hr=function(e){this._srcGeom=e||null},UG={SNAP_PRECISION_FACTOR:{configurable:!0}};Hr.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),r=new VG(t,n);return r.transform(this._srcGeom)};Hr.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),r=new VG(e,n,!0),i=r.transform(this._srcGeom),o=i;return t&&Kt(o,xf)&&(o=i.buffer(0)),o};Hr.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n};Hr.prototype.extractTargetCoordinates=function(e){for(var t=new $l,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0).fill(null))};Hr.prototype.computeMinimumSegmentLength=function(e){for(var t=tn.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t};Hr.prototype.interfaces_=function(){return[]};Hr.prototype.getClass=function(){return Hr};Hr.snap=function(e,t,n){var r=new Array(2).fill(null),i=new Hr(e);r[0]=i.snapTo(t,n);var o=new Hr(t);return r[1]=o.snapTo(r[0],n),r};Hr.computeOverlaySnapTolerance=function(){if(arguments.length===1){var e=arguments[0],t=Hr.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===Nn.FIXED){var r=1/n.getScale()*2/1.415;r>t&&(t=r)}return t}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return Math.min(Hr.computeOverlaySnapTolerance(i),Hr.computeOverlaySnapTolerance(o))}};Hr.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),r=n*Hr.SNAP_PRECISION_FACTOR;return r};Hr.snapToSelf=function(e,t,n){var r=new Hr(e);return r.snapToSelf(t,n)};UG.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(Hr,UG);var VG=function(e){function t(n,r,i){e.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,r){var i=new Nu(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(r)},t.prototype.transformCoordinates=function(n,r){var i=n.toCoordinateArray(),o=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ko),bo=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};bo.prototype.getCommon=function(){return tn.longBitsToDouble(this._commonBits)};bo.prototype.add=function(e){var t=tn.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=bo.signExpBits(this._commonBits),this._isFirst=!1,null;var n=bo.signExpBits(t);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=bo.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=bo.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};bo.prototype.toString=function(){if(arguments.length===1){var e=arguments[0],t=tn.longBitsToDouble(e),n=tn.toBinaryString(e),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+t+" ]";return o}};bo.prototype.interfaces_=function(){return[]};bo.prototype.getClass=function(){return bo};bo.getBit=function(e,t){var n=1<<t;return e&n?1:0};bo.signExpBits=function(e){return e>>52};bo.zeroLowerBits=function(e,t){var n=(1<<t)-1,r=~n,i=e&r;return i};bo.numCommonMostSigMantissaBits=function(e,t){for(var n=0,r=52;r>=0;r--){if(bo.getBit(e,r)!==bo.getBit(t,r))return n;n++}return 52};var Tf=function(){this._commonCoord=null,this._ccFilter=new $p},sN={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Tf.prototype.addCommonBits=function(e){var t=new Pf(this._commonCoord);e.apply(t),e.geometryChanged()};Tf.prototype.removeCommonBits=function(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var t=new Ne(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new Pf(t);return e.apply(n),e.geometryChanged(),e};Tf.prototype.getCommonCoordinate=function(){return this._commonCoord};Tf.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};Tf.prototype.interfaces_=function(){return[]};Tf.prototype.getClass=function(){return Tf};sN.CommonCoordinateFilter.get=function(){return $p};sN.Translater.get=function(){return Pf};Object.defineProperties(Tf,sN);var $p=function(){this._commonBitsX=new bo,this._commonBitsY=new bo};$p.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)};$p.prototype.getCommonCoordinate=function(){return new Ne(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};$p.prototype.interfaces_=function(){return[Pu]};$p.prototype.getClass=function(){return $p};var Pf=function(){this.trans=null;var e=arguments[0];this.trans=e};Pf.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)};Pf.prototype.isDone=function(){return!1};Pf.prototype.isGeometryChanged=function(){return!0};Pf.prototype.interfaces_=function(){return[zs]};Pf.prototype.getClass=function(){return Pf};var Li=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};Li.prototype.selfSnap=function(e){var t=new Hr(e),n=t.snapTo(e,this._snapTolerance);return n};Li.prototype.removeCommonBits=function(e){this._cbr=new Tf,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t};Li.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e};Li.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=on.overlayOp(t[0],t[1],e);return this.prepareResult(n)};Li.prototype.checkValid=function(e){e.isValid()||Vi.out.println("Snapped geometry is invalid")};Li.prototype.computeSnapTolerance=function(){this._snapTolerance=Hr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};Li.prototype.snap=function(e){var t=this.removeCommonBits(e),n=Hr.snap(t[0],t[1],this._snapTolerance);return n};Li.prototype.interfaces_=function(){return[]};Li.prototype.getClass=function(){return Li};Li.overlayOp=function(e,t,n){var r=new Li(e,t);return r.getResultGeometry(n)};Li.union=function(e,t){return Li.overlayOp(e,t,on.UNION)};Li.intersection=function(e,t){return Li.overlayOp(e,t,on.INTERSECTION)};Li.symDifference=function(e,t){return Li.overlayOp(e,t,on.SYMDIFFERENCE)};Li.difference=function(e,t){return Li.overlayOp(e,t,on.DIFFERENCE)};var Oo=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};Oo.prototype.getResultGeometry=function(e){var t=null,n=!1,r=null;try{t=on.overlayOp(this._geom[0],this._geom[1],e);var i=!0;i&&(n=!0)}catch(o){if(o instanceof gc)r=o;else throw o}finally{}if(!n)try{t=Li.overlayOp(this._geom[0],this._geom[1],e)}catch(o){throw o instanceof gc?r:o}finally{}return t};Oo.prototype.interfaces_=function(){return[]};Oo.prototype.getClass=function(){return Oo};Oo.overlayOp=function(e,t,n){var r=new Oo(e,t);return r.getResultGeometry(n)};Oo.union=function(e,t){return Oo.overlayOp(e,t,on.UNION)};Oo.intersection=function(e,t){return Oo.overlayOp(e,t,on.INTERSECTION)};Oo.symDifference=function(e,t){return Oo.overlayOp(e,t,on.SYMDIFFERENCE)};Oo.difference=function(e,t){return Oo.overlayOp(e,t,on.DIFFERENCE)};var kx=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};kx.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)};kx.prototype.interfaces_=function(){return[]};kx.prototype.getClass=function(){return kx};var ga=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},lN={INSERT:{configurable:!0},DELETE:{configurable:!0}};ga.prototype.isDelete=function(){return this._eventType===ga.DELETE};ga.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e};ga.prototype.getObject=function(){return this._obj};ga.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};ga.prototype.getInsertEvent=function(){return this._insertEvent};ga.prototype.isInsert=function(){return this._eventType===ga.INSERT};ga.prototype.isSameLabel=function(e){return this._label===null?!1:this._label===e._label};ga.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};ga.prototype.interfaces_=function(){return[ps]};ga.prototype.getClass=function(){return ga};lN.INSERT.get=function(){return 1};lN.DELETE.get=function(){return 2};Object.defineProperties(ga,lN);var PE=function(){};PE.prototype.interfaces_=function(){return[]};PE.prototype.getClass=function(){return PE};var Wi=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};Wi.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(Wi.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};Wi.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Wi.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e};Wi.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Wi.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1};Wi.prototype.hasProperIntersection=function(){return this._hasProper};Wi.prototype.hasIntersection=function(){return this._hasIntersection};Wi.prototype.isDone=function(){return this._isDone};Wi.prototype.isBoundaryPoint=function(e,t){return t===null?!1:!!(this.isBoundaryPointInternal(e,t[0])||this.isBoundaryPointInternal(e,t[1]))};Wi.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t};Wi.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],l=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,l,a),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};Wi.prototype.interfaces_=function(){return[]};Wi.prototype.getClass=function(){return Wi};Wi.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var ZAe=function(e){function t(){e.call(this),this.events=new mt,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var n=this;Bs.sort(this.events);for(var r=0;r<this.events.size();r++){var i=n.events.get(r);i.isDelete()&&i.getInsertEvent().setDeleteEventIndex(r)}},t.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var o=n.events.get(i);if(o.isInsert()&&n.processOverlaps(i,o.getDeleteEventIndex(),o,r),r.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Wi&&Kt(arguments[0],Ns)&&Kt(arguments[1],Ns)){var l=arguments[0],a=arguments[1],h=arguments[2];this.addEdges(l,l),this.addEdges(a,a),this.computeIntersections(h)}else if(typeof arguments[2]=="boolean"&&Kt(arguments[0],Ns)&&arguments[1]instanceof Wi){var d=arguments[0],g=arguments[1],v=arguments[2];v?this.addEdges(d,null):this.addEdges(d),this.computeIntersections(g)}}},t.prototype.addEdge=function(n,r){for(var i=this,o=n.getMonotoneChainEdge(),l=o.getStartIndexes(),a=0;a<l.length-1;a++){var h=new kx(o,a),d=new ga(r,o.getMinX(a),h);i.events.add(d),i.events.add(new ga(o.getMaxX(a),d))}},t.prototype.processOverlaps=function(n,r,i,o){for(var l=this,a=i.getObject(),h=n;h<r;h++){var d=l.events.get(h);if(d.isInsert()){var g=d.getObject();i.isSameLabel(d)||(a.computeIntersections(g,o),l.nOverlaps++)}}},t.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var r=arguments[0],i=r.iterator();i.hasNext();){var o=i.next();n.addEdge(o,o)}else if(arguments.length===2)for(var l=arguments[0],a=arguments[1],h=l.iterator();h.hasNext();){var d=h.next();n.addEdge(d,a)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(PE),Lu=function(){this._min=tn.POSITIVE_INFINITY,this._max=tn.NEGATIVE_INFINITY},GG={NodeComparator:{configurable:!0}};Lu.prototype.getMin=function(){return this._min};Lu.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)};Lu.prototype.getMax=function(){return this._max};Lu.prototype.toString=function(){return Rs.toLineString(new Ne(this._min,0),new Ne(this._max,0))};Lu.prototype.interfaces_=function(){return[]};Lu.prototype.getClass=function(){return Lu};GG.NodeComparator.get=function(){return Nx};Object.defineProperties(Lu,GG);var Nx=function(){};Nx.prototype.compare=function(e,t){var n=e,r=t,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0};Nx.prototype.interfaces_=function(){return[oy]};Nx.prototype.getClass=function(){return Nx};var KAe=function(e){function t(){e.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;i.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Lu),YAe=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,r){this._min=Math.min(n._min,r._min),this._max=Math.max(n._max,r._max)},t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;this._node1!==null&&this._node1.query(n,r,i),this._node2!==null&&this._node2.query(n,r,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Lu),Du=function(){this._leaves=new mt,this._root=null,this._level=0};Du.prototype.buildTree=function(){var e=this;Bs.sort(this._leaves,new Lu.NodeComparator);for(var t=this._leaves,n=null,r=new mt;;){if(e.buildLevel(t,r),r.size()===1)return r.get(0);n=t,t=r,r=n}};Du.prototype.insert=function(e,t,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new KAe(e,t,n))};Du.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)};Du.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};Du.prototype.printNode=function(e){Vi.out.println(Rs.toLineString(new Ne(e._min,this._level),new Ne(e._max,this._level)))};Du.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};Du.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),i=n+1<e.size()?e.get(n):null;if(i===null)t.add(r);else{var o=new YAe(e.get(n),e.get(n+1));t.add(o)}}};Du.prototype.interfaces_=function(){return[]};Du.prototype.getClass=function(){return Du};var vy=function(){this._items=new mt};vy.prototype.visitItem=function(e){this._items.add(e)};vy.prototype.getItems=function(){return this._items};vy.prototype.interfaces_=function(){return[bf]};vy.prototype.getClass=function(){return vy};var _y=function(){this._index=null;var e=arguments[0];if(!Kt(e,xf))throw new xr("Argument must be Polygonal");this._index=new td(e)},uN={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_y.prototype.locate=function(e){var t=new El(e),n=new xy(t);return this._index.query(e.y,e.y,n),t.getLocation()};_y.prototype.interfaces_=function(){return[gy]};_y.prototype.getClass=function(){return _y};uN.SegmentVisitor.get=function(){return xy};uN.IntervalIndexedGeometry.get=function(){return td};Object.defineProperties(_y,uN);var xy=function(){this._counter=null;var e=arguments[0];this._counter=e};xy.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};xy.prototype.interfaces_=function(){return[bf]};xy.prototype.getClass=function(){return xy};var td=function(){this._index=new Du;var e=arguments[0];this.init(e)};td.prototype.init=function(e){for(var t=this,n=Ri.getLines(e),r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();t.addLine(o)}};td.prototype.addLine=function(e){for(var t=this,n=1;n<e.length;n++){var r=new Ut(e[n-1],e[n]),i=Math.min(r.p0.y,r.p1.y),o=Math.max(r.p0.y,r.p1.y);t._index.insert(i,o,r)}};td.prototype.query=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new vy;return this._index.query(e,t,n),n.getItems()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}};td.prototype.interfaces_=function(){return[]};td.prototype.getClass=function(){return td};var M_=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new TG,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Us,arguments.length===2){var n=arguments[0],r=arguments[1],i=us.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var o=arguments[0],l=arguments[1],a=arguments[2];this._argIndex=o,this._parentGeom=l,this._boundaryNodeRule=a,l!==null&&this.add(l)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,r){var i=this._nodes.addNode(r),o=i.getLabel(),l=1,a=Fe.NONE;a=o.getLocation(n,at.ON),a===Fe.BOUNDARY&&l++;var h=t.determineBoundary(this._boundaryNodeRule,l);o.setLocation(n,h)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.computeSelfNodes(n,r,!1)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],l=arguments[2],a=new Wi(i,!0,!1);a.setIsDoneIfProperInt(l);var h=this.createEdgeSetIntersector(),d=this._parentGeom instanceof Au||this._parentGeom instanceof yi||this._parentGeom instanceof Su,g=o||!d;return h.computeIntersections(this._edges,a,g),this.addSelfIntersectionNodes(this._argIndex),a}},t.prototype.computeSplitEdges=function(n){for(var r=this._edges.iterator();r.hasNext();){var i=r.next();i.eiList.addSplitEdges(n)}},t.prototype.computeEdgeIntersections=function(n,r,i){var o=new Wi(r,i,!0);o.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var l=this.createEdgeSetIntersector();return l.computeIntersections(this._edges,n._edges,o),o},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof da){var n=arguments[0],r=n.getCoordinate();this.insertPoint(this._argIndex,r,Fe.INTERIOR)}else if(arguments[0]instanceof Ne){var i=arguments[0];this.insertPoint(this._argIndex,i,Fe.INTERIOR)}},t.prototype.addPolygon=function(n){var r=this;this.addPolygonRing(n.getExteriorRing(),Fe.EXTERIOR,Fe.INTERIOR);for(var i=0;i<n.getNumInteriorRing();i++){var o=n.getInteriorRingN(i);r.addPolygonRing(o,Fe.INTERIOR,Fe.EXTERIOR)}},t.prototype.addEdge=function(n){this.insertEdge(n);var r=n.getCoordinates();this.insertPoint(this._argIndex,r[0],Fe.BOUNDARY),this.insertPoint(this._argIndex,r[r.length-1],Fe.BOUNDARY)},t.prototype.addLineString=function(n){var r=dn.removeRepeatedPoints(n.getCoordinates());if(r.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=new TE(r,new Un(this._argIndex,Fe.INTERIOR));this._lineEdgeMap.put(n,i),this.insertEdge(i),an.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,r[0]),this.insertBoundaryPoint(this._argIndex,r[r.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),r=new Array(n.size()).fill(null),i=0,o=n.iterator();o.hasNext();){var l=o.next();r[i++]=l.getCoordinate().copy()}return r},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,r,i){if(this.isBoundaryNode(n,r))return null;i===Fe.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,r):this.insertPoint(n,r,i)},t.prototype.addPolygonRing=function(n,r,i){if(n.isEmpty())return null;var o=dn.removeRepeatedPoints(n.getCoordinates());if(o.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var l=r,a=i;wt.isCCW(o)&&(l=i,a=r);var h=new TE(o,new Un(this._argIndex,Fe.BOUNDARY,l,a));this._lineEdgeMap.put(n,h),this.insertEdge(h),this.insertPoint(this._argIndex,o[0],Fe.BOUNDARY)},t.prototype.insertPoint=function(n,r,i){var o=this._nodes.addNode(r),l=o.getLabel();l===null?o._label=new Un(n,i):l.setLocation(n,i)},t.prototype.createEdgeSetIntersector=function(){return new ZAe},t.prototype.addSelfIntersectionNodes=function(n){for(var r=this,i=this._edges.iterator();i.hasNext();)for(var o=i.next(),l=o.getLabel().getLocation(n),a=o.eiList.iterator();a.hasNext();){var h=a.next();r.addSelfIntersectionNode(n,h.coord,l)}},t.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Su&&(this._useBoundaryDeterminationRule=!1),n instanceof yi)this.addPolygon(n);else if(n instanceof Lr)this.addLineString(n);else if(n instanceof da)this.addPoint(n);else if(n instanceof hy)this.addCollection(n);else if(n instanceof Xh)this.addCollection(n);else if(n instanceof Su)this.addCollection(n);else if(n instanceof To)this.addCollection(n);else throw new Error(n.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(n){for(var r=this,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.add(o)}},t.prototype.locate=function(n){return Kt(this._parentGeom,xf)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new _y(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,r){return n.isInBoundary(r)?Fe.BOUNDARY:Fe.INTERIOR},t}(Tr),by=function(){if(this._li=new md,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new M_(0,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=us.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new M_(0,t,r),this._arg[1]=new M_(1,n,r)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],l=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new M_(0,i,l),this._arg[1]=new M_(1,o,l)}};by.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()};by.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)};by.prototype.interfaces_=function(){return[]};by.prototype.getClass=function(){return by};var Rh=function(){};Rh.prototype.interfaces_=function(){return[]};Rh.prototype.getClass=function(){return Rh};Rh.map=function(){if(arguments[0]instanceof Xt&&Kt(arguments[1],Rh.MapOp)){for(var e=arguments[0],t=arguments[1],n=new mt,r=0;r<e.getNumGeometries();r++){var i=t.map(e.getGeometryN(r));i!==null&&n.add(i)}return e.getFactory().buildGeometry(n)}else if(Kt(arguments[0],fi)&&Kt(arguments[1],Rh.MapOp)){for(var o=arguments[0],l=arguments[1],a=new mt,h=o.iterator();h.hasNext();){var d=h.next(),g=l.map(d);g!==null&&a.add(g)}return a}};Rh.MapOp=function(){};var on=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r),this._ptLocator=new Us,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new js,this._resultPolyList=new mt,this._resultLineList=new mt,this._resultPointList=new mt,this._graph=new Tr(new LG),this._geomFact=n.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var r=this._edgeList.findEqualEdge(n);if(r!==null){var i=r.getLabel(),o=n.getLabel();r.isPointwiseEqual(n)||(o=new Un(n.getLabel()),o.flip());var l=r.getDepth();l.isNull()&&l.add(i),l.add(o),i.merge(o)}else this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getSym();r.isInResult()&&i.isInResult()&&(r.setInResult(!1),i.setInResult(!1))}},t.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},t.prototype.computeGeometry=function(n,r,i,o){var l=new mt;return l.addAll(n),l.addAll(r),l.addAll(i),l.isEmpty()?t.createEmptyResult(o,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(l)},t.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(n,r){for(var i=this,o=r.iterator();o.hasNext();){var l=o.next(),a=i._ptLocator.locate(n,l);if(a!==Fe.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var n=new mt,r=this._edgeList.iterator();r.hasNext();){var i=r.next();i.isCollapsed()&&(r.remove(),n.add(i.getCollapsedEdge()))}this._edgeList.addAll(n)},t.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next(),i=r.getEdges().getLabel();r.getLabel().merge(i)}},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var r=this,i=n.iterator();i.hasNext();){var o=i.next();r.insertUniqueEdge(o)}},t.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var r=new mt;this._arg[0].computeSplitEdges(r),this._arg[1].computeSplitEdges(r),this.insertUniqueEdges(r),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ed.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var i=new pa(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var o=new Bl(this,this._geomFact,this._ptLocator);this._resultLineList=o.build(n);var l=new Mp(this,this._geomFact,this._ptLocator);this._resultPointList=l.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,r){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[r].getGeometry());n.getLabel().setLocation(r,i)},t.prototype.copyPoints=function(n){for(var r=this,i=this._arg[n].getNodeIterator();i.hasNext();){var o=i.next(),l=r._graph.addNode(o.getCoordinate());l.setLabel(n,o.getLabel().getLocation(n))}},t.prototype.findResultAreaEdges=function(n){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea()&&!i.isInteriorAreaEdge()&&t.isResultOfOp(o.getLocation(0,at.RIGHT),o.getLocation(1,at.RIGHT),n)&&i.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),o=r.getDepth();if(!o.isNull()){o.normalize();for(var l=0;l<2;l++)!i.isNull(l)&&i.isArea()&&!o.isNull(l)&&(o.getDelta(l)===0?i.toLine(l):(an.isTrue(!o.isNull(l,at.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(l,at.LEFT,o.getLocation(l,at.LEFT)),an.isTrue(!o.isNull(l,at.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(l,at.RIGHT,o.getLocation(l,at.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?n.labelIncompleteNode(i,0):n.labelIncompleteNode(i,1)),i.getEdges().updateLabelling(o)}},t.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(by);on.overlayOp=function(e,t,n){var r=new on(e,t),i=r.getResultGeometry(n);return i};on.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return on.createEmptyResult(on.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return Op.map(e,{interfaces_:function(){return[Rh.MapOp]},map:function(r){return r.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Oo.overlayOp(e,t,on.INTERSECTION)};on.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return on.createEmptyResult(on.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Oo.overlayOp(e,t,on.SYMDIFFERENCE)};on.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case on.INTERSECTION:o=Math.min(r,i);break;case on.UNION:o=Math.max(r,i);break;case on.DIFFERENCE:o=r;break;case on.SYMDIFFERENCE:o=Math.max(r,i);break}return o};on.createEmptyResult=function(e,t,n,r){var i=null;switch(on.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};on.difference=function(e,t){return e.isEmpty()?on.createEmptyResult(on.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Oo.overlayOp(e,t,on.DIFFERENCE))};on.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return on.isResultOfOp(n,r,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],l=arguments[2];switch(i===Fe.BOUNDARY&&(i=Fe.INTERIOR),o===Fe.BOUNDARY&&(o=Fe.INTERIOR),l){case on.INTERSECTION:return i===Fe.INTERIOR&&o===Fe.INTERIOR;case on.UNION:return i===Fe.INTERIOR||o===Fe.INTERIOR;case on.DIFFERENCE:return i===Fe.INTERIOR&&o!==Fe.INTERIOR;case on.SYMDIFFERENCE:return i===Fe.INTERIOR&&o!==Fe.INTERIOR||i!==Fe.INTERIOR&&o===Fe.INTERIOR}return!1}};on.INTERSECTION=1;on.UNION=2;on.DIFFERENCE=3;on.SYMDIFFERENCE=4;var of=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Us,this._seg=new Ut;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};of.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=t._linework.getGeometryN(n),i=r.getCoordinateSequence(),o=0;o<i.size()-1;o++){i.getCoordinate(o,t._seg.p0),i.getCoordinate(o+1,t._seg.p1);var l=t._seg.distance(e);if(l<=t._boundaryDistanceTolerance)return!0}return!1};of.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?Fe.BOUNDARY:this._ptLocator.locate(e,this._g)};of.prototype.extractLinework=function(e){var t=new wy;e.apply(t);var n=t.getLinework(),r=hn.toLineStringArray(n);return e.getFactory().createMultiLineString(r)};of.prototype.interfaces_=function(){return[]};of.prototype.getClass=function(){return of};var wy=function(){this._linework=null,this._linework=new mt};wy.prototype.getLinework=function(){return this._linework};wy.prototype.filter=function(e){var t=this;if(e instanceof yi){var n=e;this._linework.add(n.getExteriorRing());for(var r=0;r<n.getNumInteriorRing();r++)t._linework.add(n.getInteriorRingN(r))}};wy.prototype.interfaces_=function(){return[kl]};wy.prototype.getClass=function(){return wy};var nd=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};nd.prototype.extractPoints=function(e,t,n){for(var r=this,i=e.getCoordinates(),o=0;o<i.length-1;o++)r.computeOffsetPoints(i[o],i[o+1],t,n)};nd.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t};nd.prototype.getPoints=function(e){for(var t=this,n=new mt,r=Ri.getLines(this._g),i=r.iterator();i.hasNext();){var o=i.next();t.extractPoints(o,e,n)}return n};nd.prototype.computeOffsetPoints=function(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,l=Math.sqrt(i*i+o*o),a=n*i/l,h=n*o/l,d=(t.x+e.x)/2,g=(t.y+e.y)/2;if(this._doLeft){var v=new Ne(d-h,g+a);r.add(v)}if(this._doRight){var b=new Ne(d+h,g-a);r.add(b)}};nd.prototype.interfaces_=function(){return[]};nd.prototype.getClass=function(){return nd};var Ba=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new mt;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new of(this._geom[0],this._boundaryDistanceTolerance),new of(this._geom[1],this._boundaryDistanceTolerance),new of(this._geom[2],this._boundaryDistanceTolerance)]},qG={TOLERANCE:{configurable:!0}};Ba.prototype.reportResult=function(e,t,n){Vi.out.println("Overlay result invalid - A:"+Fe.toLocationSymbol(t[0])+" B:"+Fe.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+Fe.toLocationSymbol(t[2]))};Ba.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t};Ba.prototype.checkValid=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=0;n<this._testCoords.size();n++){var r=e._testCoords.get(n);if(!e.checkValid(t,r))return e._invalidLocation=r,!1}return!0}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),Ba.hasLocation(this._location,Fe.BOUNDARY)?!0:this.isValidResult(i,this._location)}};Ba.prototype.addTestPts=function(e){var t=new nd(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};Ba.prototype.isValidResult=function(e,t){var n=on.isResultOfOp(t[0],t[1],e),r=t[2]===Fe.INTERIOR,i=!(n^r);return i||this.reportResult(e,t,n),i};Ba.prototype.getInvalidLocation=function(){return this._invalidLocation};Ba.prototype.interfaces_=function(){return[]};Ba.prototype.getClass=function(){return Ba};Ba.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1};Ba.computeBoundaryDistanceTolerance=function(e,t){return Math.min(Hr.computeSizeBasedSnapTolerance(e),Hr.computeSizeBasedSnapTolerance(t))};Ba.isValid=function(e,t,n,r){var i=new Ba(e,t,r);return i.isValid(n)};qG.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(Ba,qG);var Ma=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Ma.prototype.extractElements=function(e,t){var n=this;if(e===null)return null;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);n._skipEmpty&&i.isEmpty()||t.add(i)}};Ma.prototype.combine=function(){for(var e=this,t=new mt,n=this._inputGeoms.iterator();n.hasNext();){var r=n.next();e.extractElements(r,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)};Ma.prototype.interfaces_=function(){return[]};Ma.prototype.getClass=function(){return Ma};Ma.combine=function(){if(arguments.length===1){var e=arguments[0],t=new Ma(e);return t.combine()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new Ma(Ma.createList(n,r));return i.combine()}else if(arguments.length===3){var o=arguments[0],l=arguments[1],a=arguments[2],h=new Ma(Ma.createList(o,l,a));return h.combine()}};Ma.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()};Ma.createList=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new mt;return n.add(e),n.add(t),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],l=new mt;return l.add(r),l.add(i),l.add(o),l}};var ii=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,this._inputPolys===null&&(this._inputPolys=new mt)},WG={STRTREE_NODE_CAPACITY:{configurable:!0}};ii.prototype.reduceToGeometries=function(e){for(var t=this,n=new mt,r=e.iterator();r.hasNext();){var i=r.next(),o=null;Kt(i,Ns)?o=t.unionTree(i):i instanceof Xt&&(o=i),n.add(o)}return n};ii.prototype.extractByEnvelope=function(e,t,n){for(var r=new mt,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getEnvelopeInternal().intersects(e)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)};ii.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=Ma.combine(e,t);return i}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,o)};ii.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new MG(ii.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=e.itemsTree(),i=this.unionTree(r);return i};ii.prototype.binaryUnion=function(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=ii.getGeometry(t,n);return this.unionSafe(i,null)}else{if(r-n===2)return this.unionSafe(ii.getGeometry(t,n),ii.getGeometry(t,n+1));var o=Math.trunc((r+n)/2),l=this.binaryUnion(t,n,o),a=this.binaryUnion(t,o,r);return this.unionSafe(l,a)}}};ii.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t===null?t=r.copy():t=t.union(r)}return t};ii.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.copy():t===null?e.copy():this.unionOptimized(e,t)};ii.prototype.unionActual=function(e,t){return ii.restrictToPolygons(e.union(t))};ii.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n};ii.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new mt,i=this.extractByEnvelope(n,e,r),o=this.extractByEnvelope(n,t,r),l=this.unionActual(i,o);r.add(l);var a=Ma.combine(r);return a};ii.prototype.bufferUnion=function(){if(arguments.length===1){var e=arguments[0],t=e.get(0).getFactory(),n=t.buildGeometry(e),r=n.buffer(0);return r}else if(arguments.length===2){var i=arguments[0],o=arguments[1],l=i.getFactory(),a=l.createGeometryCollection([i,o]),h=a.buffer(0);return h}};ii.prototype.interfaces_=function(){return[]};ii.prototype.getClass=function(){return ii};ii.restrictToPolygons=function(e){if(Kt(e,xf))return e;var t=hc.getPolygons(e);return t.size()===1?t.get(0):e.getFactory().createMultiPolygon(hn.toPolygonArray(t))};ii.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)};ii.union=function(e){var t=new ii(e);return t.union()};WG.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(ii,WG);var AE=function(){};AE.prototype.interfaces_=function(){return[]};AE.prototype.getClass=function(){return AE};AE.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return on.createEmptyResult(on.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Oo.overlayOp(e,t,on.UNION)};function gd(){return new OE}function OE(){this.reset()}OE.prototype={constructor:OE,reset:function(){this.s=this.t=0},add:function(e){RF(mw,e,this.t),RF(this,mw.s,this.s),this.s?this.t+=mw.t:this.s=mw.t},valueOf:function(){return this.s}};var mw=new OE;function RF(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var kr=1e-6,Yn=Math.PI,sc=Yn/2,zF=Yn/4,bc=Yn*2,uh=180/Yn,hl=Yn/180,Eo=Math.abs,JAe=Math.atan,Sy=Math.atan2,hi=Math.cos,di=Math.sin,ev=Math.sqrt;function HG(e){return e>1?0:e<-1?Yn:Math.acos(e)}function kp(e){return e>1?sc:e<-1?-sc:Math.asin(e)}function B_(){}function ME(e,t){e&&BF.hasOwnProperty(e.type)&&BF[e.type](e,t)}var FF={Feature:function(e,t){ME(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ME(n[r].geometry,t)}},BF={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){rM(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)rM(n[r],t,0)},Polygon:function(e,t){jF(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)jF(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ME(n[r],t)}};function rM(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function jF(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)rM(e[n],t,1);t.polygonEnd()}function QAe(e,t){e&&FF.hasOwnProperty(e.type)?FF[e.type](e,t):ME(e,t)}gd();gd();function iM(e){return[Sy(e[1],e[0]),kp(e[2])]}function Ey(e){var t=e[0],n=e[1],r=hi(n);return[r*hi(t),r*di(t),di(n)]}function gw(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function $E(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function oP(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function yw(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function oM(e){var t=ev(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}gd();function XG(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function aM(e,t){return[e>Yn?e-bc:e<-Yn?e+bc:e,t]}aM.invert=aM;function eOe(e,t,n){return(e%=bc)?t||n?XG(VF(e),GF(t,n)):VF(e):t||n?GF(t,n):aM}function UF(e){return function(t,n){return t+=e,[t>Yn?t-bc:t<-Yn?t+bc:t,n]}}function VF(e){var t=UF(e);return t.invert=UF(-e),t}function GF(e,t){var n=hi(e),r=di(e),i=hi(t),o=di(t);function l(a,h){var d=hi(h),g=hi(a)*d,v=di(a)*d,b=di(h),I=b*n+g*r;return[Sy(v*i-I*o,g*n-b*r),kp(I*i+v*o)]}return l.invert=function(a,h){var d=hi(h),g=hi(a)*d,v=di(a)*d,b=di(h),I=b*i-v*o;return[Sy(v*i+b*o,g*n+I*r),kp(I*n-g*r)]},l}function tOe(e,t,n,r,i,o){if(n){var l=hi(t),a=di(t),h=r*n;i==null?(i=t+r*bc,o=t-h/2):(i=qF(l,i),o=qF(l,o),(r>0?i<o:i>o)&&(i+=r*bc));for(var d,g=i;r>0?g>o:g<o;g-=h)d=iM([l,-a*hi(g),-a*di(g)]),e.point(d[0],d[1])}}function qF(e,t){t=Ey(t),t[0]-=e,oM(t);var n=HG(-t[1]);return((-t[2]<0?-n:n)+bc-kr)%bc}function ZG(){var e=[],t;return{point:function(n,r){t.push([n,r])},lineStart:function(){e.push(t=[])},lineEnd:B_,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function nOe(e,t,n,r,i,o){var l=e[0],a=e[1],h=t[0],d=t[1],g=0,v=1,b=h-l,I=d-a,T;if(T=n-l,!(!b&&T>0)){if(T/=b,b<0){if(T<g)return;T<v&&(v=T)}else if(b>0){if(T>v)return;T>g&&(g=T)}if(T=i-l,!(!b&&T<0)){if(T/=b,b<0){if(T>v)return;T>g&&(g=T)}else if(b>0){if(T<g)return;T<v&&(v=T)}if(T=r-a,!(!I&&T>0)){if(T/=I,I<0){if(T<g)return;T<v&&(v=T)}else if(I>0){if(T>v)return;T>g&&(g=T)}if(T=o-a,!(!I&&T<0)){if(T/=I,I<0){if(T>v)return;T>g&&(g=T)}else if(I>0){if(T<g)return;T<v&&(v=T)}return g>0&&(e[0]=l+g*b,e[1]=a+g*I),v<1&&(t[0]=l+v*b,t[1]=a+v*I),!0}}}}}function Hw(e,t){return Eo(e[0]-t[0])<kr&&Eo(e[1]-t[1])<kr}function vw(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function KG(e,t,n,r,i){var o=[],l=[],a,h;if(e.forEach(function(T){if(!((P=T.length-1)<=0)){var P,$=T[0],O=T[P],k;if(Hw($,O)){for(i.lineStart(),a=0;a<P;++a)i.point(($=T[a])[0],$[1]);i.lineEnd();return}o.push(k=new vw($,T,null,!0)),l.push(k.o=new vw($,null,k,!1)),o.push(k=new vw(O,T,null,!1)),l.push(k.o=new vw(O,null,k,!0))}}),!!o.length){for(l.sort(t),WF(o),WF(l),a=0,h=l.length;a<h;++a)l[a].e=n=!n;for(var d=o[0],g,v;;){for(var b=d,I=!0;b.v;)if((b=b.n)===d)return;g=b.z,i.lineStart();do{if(b.v=b.o.v=!0,b.e){if(I)for(a=0,h=g.length;a<h;++a)i.point((v=g[a])[0],v[1]);else r(b.x,b.n.x,1,i);b=b.n}else{if(I)for(g=b.p.z,a=g.length-1;a>=0;--a)i.point((v=g[a])[0],v[1]);else r(b.x,b.p.x,-1,i);b=b.p}b=b.o,g=b.z,I=!I}while(!b.v);i.lineEnd()}}}function WF(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function YG(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rOe(e){return e.length===1&&(e=iOe(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function iOe(e){return function(t,n){return YG(e(t),n)}}rOe(YG);function JG(e){for(var t=e.length,n,r=-1,i=0,o,l;++r<t;)i+=e[r].length;for(o=new Array(i);--t>=0;)for(l=e[t],n=l.length;--n>=0;)o[--i]=l[n];return o}var j_=1e9,_w=-j_;function oOe(e,t,n,r){function i(d,g){return e<=d&&d<=n&&t<=g&&g<=r}function o(d,g,v,b){var I=0,T=0;if(d==null||(I=l(d,v))!==(T=l(g,v))||h(d,g)<0^v>0)do b.point(I===0||I===3?e:n,I>1?r:t);while((I=(I+v+4)%4)!==T);else b.point(g[0],g[1])}function l(d,g){return Eo(d[0]-e)<kr?g>0?0:3:Eo(d[0]-n)<kr?g>0?2:1:Eo(d[1]-t)<kr?g>0?1:0:g>0?3:2}function a(d,g){return h(d.x,g.x)}function h(d,g){var v=l(d,1),b=l(g,1);return v!==b?v-b:v===0?g[1]-d[1]:v===1?d[0]-g[0]:v===2?d[1]-g[1]:g[0]-d[0]}return function(d){var g=d,v=ZG(),b,I,T,P,$,O,k,R,j,F,U,G={point:Z,lineStart:fe,lineEnd:$e,polygonStart:oe,polygonEnd:ye};function Z(be,Te){i(be,Te)&&g.point(be,Te)}function ne(){for(var be=0,Te=0,Le=I.length;Te<Le;++Te)for(var Ee=I[Te],de=1,De=Ee.length,He=Ee[0],je,et,Et=He[0],zt=He[1];de<De;++de)je=Et,et=zt,He=Ee[de],Et=He[0],zt=He[1],et<=r?zt>r&&(Et-je)*(r-et)>(zt-et)*(e-je)&&++be:zt<=r&&(Et-je)*(r-et)<(zt-et)*(e-je)&&--be;return be}function oe(){g=v,b=[],I=[],U=!0}function ye(){var be=ne(),Te=U&&be,Le=(b=JG(b)).length;(Te||Le)&&(d.polygonStart(),Te&&(d.lineStart(),o(null,null,1,d),d.lineEnd()),Le&&KG(b,a,be,o,d),d.polygonEnd()),g=d,b=I=T=null}function fe(){G.point=ae,I&&I.push(T=[]),F=!0,j=!1,k=R=NaN}function $e(){b&&(ae(P,$),O&&j&&v.rejoin(),b.push(v.result())),G.point=Z,j&&g.lineEnd()}function ae(be,Te){var Le=i(be,Te);if(I&&T.push([be,Te]),F)P=be,$=Te,O=Le,F=!1,Le&&(g.lineStart(),g.point(be,Te));else if(Le&&j)g.point(be,Te);else{var Ee=[k=Math.max(_w,Math.min(j_,k)),R=Math.max(_w,Math.min(j_,R))],de=[be=Math.max(_w,Math.min(j_,be)),Te=Math.max(_w,Math.min(j_,Te))];nOe(Ee,de,e,t,n,r)?(j||(g.lineStart(),g.point(Ee[0],Ee[1])),g.point(de[0],de[1]),Le||g.lineEnd(),U=!1):Le&&(g.lineStart(),g.point(be,Te),U=!1)}k=be,R=Te,j=Le}return G}}var aP=gd();function aOe(e,t){var n=t[0],r=t[1],i=[di(n),-hi(n),0],o=0,l=0;aP.reset();for(var a=0,h=e.length;a<h;++a)if(g=(d=e[a]).length)for(var d,g,v=d[g-1],b=v[0],I=v[1]/2+zF,T=di(I),P=hi(I),$=0;$<g;++$,b=k,T=j,P=F,v=O){var O=d[$],k=O[0],R=O[1]/2+zF,j=di(R),F=hi(R),U=k-b,G=U>=0?1:-1,Z=G*U,ne=Z>Yn,oe=T*j;if(aP.add(Sy(oe*G*di(Z),P*F+oe*hi(Z))),o+=ne?U+G*bc:U,ne^b>=n^k>=n){var ye=$E(Ey(v),Ey(O));oM(ye);var fe=$E(i,ye);oM(fe);var $e=(ne^U>=0?-1:1)*kp(fe[2]);(r>$e||r===$e&&(ye[0]||ye[1]))&&(l+=ne^U>=0?1:-1)}}return(o<-kr||o<kr&&aP<-kr)^l&1}gd();function HF(e){return e}gd();gd();var Cy=1/0,kE=Cy,Lx=-Cy,NE=Lx,XF={point:sOe,lineStart:B_,lineEnd:B_,polygonStart:B_,polygonEnd:B_,result:function(){var e=[[Cy,kE],[Lx,NE]];return Lx=NE=-(kE=Cy=1/0),e}};function sOe(e,t){e<Cy&&(Cy=e),e>Lx&&(Lx=e),t<kE&&(kE=t),t>NE&&(NE=t)}gd();function QG(e,t,n,r){return function(i,o){var l=t(o),a=i.invert(r[0],r[1]),h=ZG(),d=t(h),g=!1,v,b,I,T={point:P,lineStart:O,lineEnd:k,polygonStart:function(){T.point=R,T.lineStart=j,T.lineEnd=F,b=[],v=[]},polygonEnd:function(){T.point=P,T.lineStart=O,T.lineEnd=k,b=JG(b);var U=aOe(v,a);b.length?(g||(o.polygonStart(),g=!0),KG(b,uOe,U,n,o)):U&&(g||(o.polygonStart(),g=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),b=v=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function P(U,G){var Z=i(U,G);e(U=Z[0],G=Z[1])&&o.point(U,G)}function $(U,G){var Z=i(U,G);l.point(Z[0],Z[1])}function O(){T.point=$,l.lineStart()}function k(){T.point=P,l.lineEnd()}function R(U,G){I.push([U,G]);var Z=i(U,G);d.point(Z[0],Z[1])}function j(){d.lineStart(),I=[]}function F(){R(I[0][0],I[0][1]),d.lineEnd();var U=d.clean(),G=h.result(),Z,ne=G.length,oe,ye,fe;if(I.pop(),v.push(I),I=null,!!ne){if(U&1){if(ye=G[0],(oe=ye.length-1)>0){for(g||(o.polygonStart(),g=!0),o.lineStart(),Z=0;Z<oe;++Z)o.point((fe=ye[Z])[0],fe[1]);o.lineEnd()}return}ne>1&&U&2&&G.push(G.pop().concat(G.shift())),b.push(G.filter(lOe))}}return T}}function lOe(e){return e.length>1}function uOe(e,t){return((e=e.x)[0]<0?e[1]-sc-kr:sc-e[1])-((t=t.x)[0]<0?t[1]-sc-kr:sc-t[1])}const ZF=QG(function(){return!0},cOe,hOe,[-Yn,-sc]);function cOe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,l){var a=o>0?Yn:-Yn,h=Eo(o-t);Eo(h-Yn)<kr?(e.point(t,n=(n+l)/2>0?sc:-sc),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&h>=Yn&&(Eo(t-r)<kr&&(t-=r*kr),Eo(o-a)<kr&&(o-=a*kr),n=fOe(t,n,o,l),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=l),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function fOe(e,t,n,r){var i,o,l=di(e-n);return Eo(l)>kr?JAe((di(t)*(o=hi(r))*di(n)-di(r)*(i=hi(t))*di(e))/(i*o*l)):(t+r)/2}function hOe(e,t,n,r){var i;if(e==null)i=n*sc,r.point(-Yn,i),r.point(0,i),r.point(Yn,i),r.point(Yn,0),r.point(Yn,-i),r.point(0,-i),r.point(-Yn,-i),r.point(-Yn,0),r.point(-Yn,i);else if(Eo(e[0]-t[0])>kr){var o=e[0]<t[0]?Yn:-Yn;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function dOe(e,t){var n=hi(e),r=n>0,i=Eo(n)>kr;function o(g,v,b,I){tOe(I,e,t,b,g,v)}function l(g,v){return hi(g)*hi(v)>n}function a(g){var v,b,I,T,P;return{lineStart:function(){T=I=!1,P=1},point:function($,O){var k=[$,O],R,j=l($,O),F=r?j?0:d($,O):j?d($+($<0?Yn:-Yn),O):0;if(!v&&(T=I=j)&&g.lineStart(),j!==I&&(R=h(v,k),(!R||Hw(v,R)||Hw(k,R))&&(k[0]+=kr,k[1]+=kr,j=l(k[0],k[1]))),j!==I)P=0,j?(g.lineStart(),R=h(k,v),g.point(R[0],R[1])):(R=h(v,k),g.point(R[0],R[1]),g.lineEnd()),v=R;else if(i&&v&&r^j){var U;!(F&b)&&(U=h(k,v,!0))&&(P=0,r?(g.lineStart(),g.point(U[0][0],U[0][1]),g.point(U[1][0],U[1][1]),g.lineEnd()):(g.point(U[1][0],U[1][1]),g.lineEnd(),g.lineStart(),g.point(U[0][0],U[0][1])))}j&&(!v||!Hw(v,k))&&g.point(k[0],k[1]),v=k,I=j,b=F},lineEnd:function(){I&&g.lineEnd(),v=null},clean:function(){return P|(T&&I)<<1}}}function h(g,v,b){var I=Ey(g),T=Ey(v),P=[1,0,0],$=$E(I,T),O=gw($,$),k=$[0],R=O-k*k;if(!R)return!b&&g;var j=n*O/R,F=-n*k/R,U=$E(P,$),G=yw(P,j),Z=yw($,F);oP(G,Z);var ne=U,oe=gw(G,ne),ye=gw(ne,ne),fe=oe*oe-ye*(gw(G,G)-1);if(!(fe<0)){var $e=ev(fe),ae=yw(ne,(-oe-$e)/ye);if(oP(ae,G),ae=iM(ae),!b)return ae;var be=g[0],Te=v[0],Le=g[1],Ee=v[1],de;Te<be&&(de=be,be=Te,Te=de);var De=Te-be,He=Eo(De-Yn)<kr,je=He||De<kr;if(!He&&Ee<Le&&(de=Le,Le=Ee,Ee=de),je?He?Le+Ee>0^ae[1]<(Eo(ae[0]-be)<kr?Le:Ee):Le<=ae[1]&&ae[1]<=Ee:De>Yn^(be<=ae[0]&&ae[0]<=Te)){var et=yw(ne,(-oe+$e)/ye);return oP(et,G),[ae,iM(et)]}}}function d(g,v){var b=r?e:Yn-e,I=0;return g<-b?I|=1:g>b&&(I|=2),v<-b?I|=4:v>b&&(I|=8),I}return QG(l,a,o,r?[0,-e]:[-Yn,e-Yn])}function eq(e){return function(t){var n=new sM;for(var r in e)n[r]=e[r];return n.stream=t,n}}function sM(){}sM.prototype={constructor:sM,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tq(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),QAe(n,e.stream(XF));var l=XF.result(),a=Math.min(r/(l[1][0]-l[0][0]),i/(l[1][1]-l[0][1])),h=+t[0][0]+(r-a*(l[1][0]+l[0][0]))/2,d=+t[0][1]+(i-a*(l[1][1]+l[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(a*150).translate([h,d])}function pOe(e,t,n){return tq(e,[[0,0],t],n)}var KF=16,mOe=hi(30*hl);function YF(e,t){return+t?yOe(e,t):gOe(e)}function gOe(e){return eq({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function yOe(e,t){function n(r,i,o,l,a,h,d,g,v,b,I,T,P,$){var O=d-r,k=g-i,R=O*O+k*k;if(R>4*t&&P--){var j=l+b,F=a+I,U=h+T,G=ev(j*j+F*F+U*U),Z=kp(U/=G),ne=Eo(Eo(U)-1)<kr||Eo(o-v)<kr?(o+v)/2:Sy(F,j),oe=e(ne,Z),ye=oe[0],fe=oe[1],$e=ye-r,ae=fe-i,be=k*$e-O*ae;(be*be/R>t||Eo((O*$e+k*ae)/R-.5)>.3||l*b+a*I+h*T<mOe)&&(n(r,i,o,l,a,h,ye,fe,ne,j/=G,F/=G,U,P,$),$.point(ye,fe),n(ye,fe,ne,j,F,U,d,g,v,b,I,T,P,$))}}return function(r){var i,o,l,a,h,d,g,v,b,I,T,P,$={point:O,lineStart:k,lineEnd:j,polygonStart:function(){r.polygonStart(),$.lineStart=F},polygonEnd:function(){r.polygonEnd(),$.lineStart=k}};function O(Z,ne){Z=e(Z,ne),r.point(Z[0],Z[1])}function k(){v=NaN,$.point=R,r.lineStart()}function R(Z,ne){var oe=Ey([Z,ne]),ye=e(Z,ne);n(v,b,g,I,T,P,v=ye[0],b=ye[1],g=Z,I=oe[0],T=oe[1],P=oe[2],KF,r),r.point(v,b)}function j(){$.point=O,r.lineEnd()}function F(){k(),$.point=U,$.lineEnd=G}function U(Z,ne){R(i=Z,ne),o=v,l=b,a=I,h=T,d=P,$.point=R}function G(){n(v,b,g,I,T,P,o,l,i,a,h,d,KF,r),$.lineEnd=j,j()}return $}}var vOe=eq({point:function(e,t){this.stream.point(e*hl,t*hl)}});function _Oe(e){return xOe(function(){return e})()}function xOe(e){var t,n=150,r=480,i=250,o,l,a=0,h=0,d=0,g=0,v=0,b,I,T=null,P=ZF,$=null,O,k,R,j=HF,F=.5,U=YF(ye,F),G,Z;function ne(ae){return ae=I(ae[0]*hl,ae[1]*hl),[ae[0]*n+o,l-ae[1]*n]}function oe(ae){return ae=I.invert((ae[0]-o)/n,(l-ae[1])/n),ae&&[ae[0]*uh,ae[1]*uh]}function ye(ae,be){return ae=t(ae,be),[ae[0]*n+o,l-ae[1]*n]}ne.stream=function(ae){return G&&Z===ae?G:G=vOe(P(b,U(j(Z=ae))))},ne.clipAngle=function(ae){return arguments.length?(P=+ae?dOe(T=ae*hl,6*hl):(T=null,ZF),$e()):T*uh},ne.clipExtent=function(ae){return arguments.length?(j=ae==null?($=O=k=R=null,HF):oOe($=+ae[0][0],O=+ae[0][1],k=+ae[1][0],R=+ae[1][1]),$e()):$==null?null:[[$,O],[k,R]]},ne.scale=function(ae){return arguments.length?(n=+ae,fe()):n},ne.translate=function(ae){return arguments.length?(r=+ae[0],i=+ae[1],fe()):[r,i]},ne.center=function(ae){return arguments.length?(a=ae[0]%360*hl,h=ae[1]%360*hl,fe()):[a*uh,h*uh]},ne.rotate=function(ae){return arguments.length?(d=ae[0]%360*hl,g=ae[1]%360*hl,v=ae.length>2?ae[2]%360*hl:0,fe()):[d*uh,g*uh,v*uh]},ne.precision=function(ae){return arguments.length?(U=YF(ye,F=ae*ae),$e()):ev(F)},ne.fitExtent=function(ae,be){return tq(ne,ae,be)},ne.fitSize=function(ae,be){return pOe(ne,ae,be)};function fe(){I=XG(b=eOe(d,g,v),t);var ae=t(a,h);return o=r-ae[0]*n,l=i+ae[1]*n,$e()}function $e(){return G=Z=null,ne}return function(){return t=e.apply(this,arguments),ne.invert=t.invert&&oe,fe()}}function nq(e){return function(t,n){var r=hi(t),i=hi(n),o=e(r*i);return[o*i*di(t),o*di(n)]}}function rq(e){return function(t,n){var r=ev(t*t+n*n),i=e(r),o=di(i),l=hi(i);return[Sy(t*o,r*l),kp(r&&n*o/r)]}}var bOe=nq(function(e){return ev(2/(1+e))});bOe.invert=rq(function(e){return 2*kp(e/2)});var iq=nq(function(e){return(e=HG(e))&&e/di(e)});iq.invert=rq(function(e){return e});function wOe(){return _Oe(iq).scale(79.4188).clipAngle(180-.001)}function JF(e,t){return[e,t]}JF.invert=JF;function SOe(e,t,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return _G(e,function(l){var a=Xw(l,t,r,i);a&&o.push(a)}),eM(o);case"FeatureCollection":return $F(e,function(l){var a=Xw(l,t,r,i);a&&$F(a,function(h){h&&o.push(h)})}),eM(o)}return Xw(e,t,r,i)}function Xw(e,t,n,r){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var l=[];return _G(e,function(P){var $=Xw(P,t,n,r);$&&l.push($)}),eM(l)}var a=EOe(o),h={type:o.type,coordinates:aq(o.coordinates,a)},d=new tN,g=d.read(h),v=MAe($Ae(t,n),"meters"),b=Bi.bufferOp(g,v,r),I=new AG;if(b=I.write(b),!oq(b.coordinates)){var T={type:b.type,coordinates:sq(b.coordinates,a)};return sC(T,i)}}function oq(e){return Array.isArray(e[0])?oq(e[0]):isNaN(e[0])}function aq(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return aq(n,t)})}function sq(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return sq(n,t)})}function EOe(e){var t=NAe(e).geometry.coordinates,n=[-t[0],-t[1]];return wOe().rotate(n).scale(Pa)}function COe(e,t){var n=EE(e),r=EE(t),i=e.properties||{},o=pG.difference(n.coordinates,r.coordinates);return o.length===0?null:o.length===1?gG(o[0],i):yG(o,i)}function QF(e){let t;for(const n of e)t&&n[0]-t[0]>=180?n[0]-=360:t&&n[0]-t[0]<-180&&(n[0]+=360),t=n}function e6(e,t){const n=COe({type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]},e);if(!n)return;n.properties={isMask:"y"};const r=SOe(e,0);if(r.geometry.type==="Polygon")for(const i of r.geometry.coordinates)QF(i);else for(const i of r.geometry.coordinates)for(const o of i)QF(o);t({type:"FeatureCollection",features:[r,n]})}let t6={type:"FeatureCollection",features:[]};function IOe(e,t,n=!0,r=!0,i={},o={},l={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}}){let a,h=[],d,g;function v(){(l!=null&&l.fill||l!=null&&l.line)&&e.addSource("full-geom",{type:"geojson",data:t6}),l!=null&&l.fill&&e.addLayer({...l==null?void 0:l.fill,id:"full-geom-fill",type:"fill",source:"full-geom"}),l!=null&&l.line&&e.addLayer({...l==null?void 0:l.line,id:"full-geom-line",type:"line",source:"full-geom"})}e.loaded()?v():e.once("load",()=>{v()});const b=T=>{a==null||a({type:"mapClick",coordinates:[T.lngLat.lng,T.lngLat.lat]})};function I(T=!1){if(!t)throw new Error;const P=document.createElement("div");return T&&P.classList.add("marker-interactive"),new RPe({props:{displayIn:"maplibre"},target:P}),new t.Marker({element:P,offset:[1,-13]})}return{setEventHandler(T){T?(a=T,e.on("click",b)):(a=void 0,e.off("click",b))},flyTo(T,P){e.flyTo({center:T,zoom:P,...i})},fitBounds(T,P,$){e.fitBounds([[T[0],T[1]],[T[2],T[3]]],{padding:P,maxZoom:$,...o})},indicateReverse(T){e.getCanvasContainer().style.cursor=T?"crosshair":""},setReverseMarker(T){!t||!n||(g?T?g.setLngLat(T):(g.remove(),g=void 0):T&&(g=(typeof n=="object"?new t.Marker(n):I()).setLngLat(T).addTo(e),g.getElement().classList.add("marker-reverse")))},setMarkers(T,P){if(!n)return;function $(O){var k;(k=e.getSource("full-geom"))==null||k.setData(O)}for(const O of h)O.remove();if(h.length=0,$(t6),!!t){if(P){let O=!1;if(P.geometry.type==="GeometryCollection"){const k=P.geometry.geometries.filter(R=>R.type==="Polygon"||R.type==="MultiPolygon");if(k.length>0){let R=k.pop();for(const j of k)R=kAe(R,j);e6({...P,geometry:R},$),O=!0}else{const R=P.geometry.geometries.filter(j=>j.type==="LineString"||j.type==="MultiLineString");R.length>0&&($({...P,geometry:{type:"GeometryCollection",geometries:R}}),O=!0)}}if(!O){if(P.geometry.type==="Polygon"||P.geometry.type==="MultiPolygon")e6(P,$);else if(P.geometry.type==="LineString"||P.geometry.type==="MultiLineString"){$(P);return}}n&&h.push((typeof n=="object"?new t.Marker(n):I()).setLngLat(P.center).addTo(e))}if(r)for(const O of T??[]){if(O===P)continue;const k=(typeof r=="object"?new t.Marker(r):I(!0)).setLngLat(O.center).setPopup(new t.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(O.place_type[0]==="reverse"?O.place_name:O.place_name.replace(/,.*/,""))).addTo(e),R=k.getElement();R.addEventListener("click",j=>{j.stopPropagation(),a==null||a({type:"markerClick",id:O.id})}),R.addEventListener("mouseenter",()=>{a==null||a({type:"markerMouseEnter",id:O.id}),k.togglePopup()}),R.addEventListener("mouseleave",()=>{a==null||a({type:"markerMouseLeave",id:O.id}),k.togglePopup()}),h.push(k)}}},setSelectedMarker(T){d&&d.getElement().classList.toggle("marker-selected",!1),d=T>-1?h[T]:void 0,d==null||d.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const T=e.getCenter();return[e.getZoom(),T.lng,T.lat]}}}var cl,Xm;class TOe extends EventTarget{constructor(t={}){super(),nF(this,cl,void 0),nF(this,Xm,void 0),tP(this,Xm,t)}onAdd(t){const n=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const{marker:r,showResultMarkers:i,flyTo:o,fullGeometryStyle:l,...a}=su(this,Xm),h=typeof o=="boolean"?{}:o,d=this.getExtraProps(t,n),g={mapController:IOe(t,this.getMapLibreGl(),r,i,h,h,l),flyTo:o===void 0?!0:!!o,apiKey:"",...d,...a};if(!g.apiKey)throw new Error("no apiKey provided");tP(this,cl,new sAe({target:n,props:g}));for(const v of["select","pick","featuresListed","featuresMarked","response","optionsVisibilityChange","reverseToggle","queryChange"])su(this,cl).$on(v,b=>this.dispatchEvent(b));return n}setOptions(t){var n;tP(this,Xm,t);const{marker:r,showResultMarkers:i,flyTo:o,fullGeometryStyle:l,...a}=su(this,Xm);(n=su(this,cl))==null||n.$set(a)}setQuery(t,n=!0){var r;(r=su(this,cl))==null||r.setQuery(t,n)}clearMap(){var t;(t=su(this,cl))==null||t.clearMap()}clearList(){var t;(t=su(this,cl))==null||t.clearList()}setReverseMode(t){var n;(n=su(this,cl))==null||n.$set({reverseActive:t})}focus(){var t;(t=su(this,cl))==null||t.focus()}blur(){var t;(t=su(this,cl))==null||t.blur()}onRemove(){var t;(t=su(this,cl))==null||t.$destroy()}}cl=new WeakMap,Xm=new WeakMap;class POe extends TOe{getMapLibreGl(){return YTe}getExtraProps(t,n){return{}}}function AOe(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function OOe(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n6(e[0])||!n6(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return AOe(r,t,n)}function n6(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function MOe(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $Oe(e){return e.type==="Feature"?e.geometry:e}function kOe(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var r=MOe(e),i=$Oe(t),o=i.type,l=t.bbox,a=i.coordinates;if(l&&NOe(r,l)===!1)return!1;o==="Polygon"&&(a=[a]);for(var h=!1,d=0;d<a.length&&!h;d++)if(r6(r,a[d][0],n.ignoreBoundary)){for(var g=!1,v=1;v<a[d].length&&!g;)r6(r,a[d][v],!n.ignoreBoundary)&&(g=!0),v++;g||(h=!0)}return h}function r6(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var l=t[i][0],a=t[i][1],h=t[o][0],d=t[o][1],g=e[1]*(l-h)+a*(h-e[0])+d*(e[0]-l)===0&&(l-e[0])*(h-e[0])<=0&&(a-e[1])*(d-e[1])<=0;if(g)return!n;var v=a>e[1]!=d>e[1]&&e[0]<(h-l)*(e[1]-a)/(d-a)+l;v&&(r=!r)}return r}function NOe(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function jo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var LOe=typeof Symbol=="function"&&Symbol.observable||"@@observable",i6=LOe,sP=()=>Math.random().toString(36).substring(7).split("").join("."),DOe={INIT:`@@redux/INIT${sP()}`,REPLACE:`@@redux/REPLACE${sP()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sP()}`},LE=DOe;function cN(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function lq(e,t,n){if(typeof e!="function")throw new Error(jo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(jo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(jo(1));return n(lq)(e,t)}let r=e,i=t,o=new Map,l=o,a=0,h=!1;function d(){l===o&&(l=new Map,o.forEach(($,O)=>{l.set(O,$)}))}function g(){if(h)throw new Error(jo(3));return i}function v($){if(typeof $!="function")throw new Error(jo(4));if(h)throw new Error(jo(5));let O=!0;d();const k=a++;return l.set(k,$),function(){if(O){if(h)throw new Error(jo(6));O=!1,d(),l.delete(k),o=null}}}function b($){if(!cN($))throw new Error(jo(7));if(typeof $.type>"u")throw new Error(jo(8));if(typeof $.type!="string")throw new Error(jo(17));if(h)throw new Error(jo(9));try{h=!0,i=r(i,$)}finally{h=!1}return(o=l).forEach(k=>{k()}),$}function I($){if(typeof $!="function")throw new Error(jo(10));r=$,b({type:LE.REPLACE})}function T(){const $=v;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(jo(11));function k(){const j=O;j.next&&j.next(g())}return k(),{unsubscribe:$(k)}},[i6](){return this}}}return b({type:LE.INIT}),{dispatch:b,subscribe:v,getState:g,replaceReducer:I,[i6]:T}}function ROe(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:LE.INIT})>"u")throw new Error(jo(12));if(typeof n(void 0,{type:LE.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jo(13))})}function zOe(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const l=t[o];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{ROe(n)}catch(o){i=o}return function(l={},a){if(i)throw i;let h=!1;const d={};for(let g=0;g<r.length;g++){const v=r[g],b=n[v],I=l[v],T=b(I,a);if(typeof T>"u")throw a&&a.type,new Error(jo(14));d[v]=T,h=h||T!==I}return h=h||r.length!==Object.keys(l).length,h?d:l}}function DE(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function FOe(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(jo(15))};const l={getState:i.getState,dispatch:(h,...d)=>o(h,...d)},a=e.map(h=>h(l));return o=DE(...a)(i.dispatch),{...i,dispatch:o}}}function BOe(e){return cN(e)&&"type"in e&&typeof e.type=="string"}var uq=Symbol.for("immer-nothing"),o6=Symbol.for("immer-draftable"),Gs=Symbol.for("immer-state");function gu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Iy=Object.getPrototypeOf;function rd(e){return!!e&&!!e[Gs]}function Af(e){var t;return e?cq(e)||Array.isArray(e)||!!e[o6]||!!((t=e.constructor)!=null&&t[o6])||bC(e)||wC(e):!1}var jOe=Object.prototype.constructor.toString();function cq(e){if(!e||typeof e!="object")return!1;const t=Iy(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===jOe}function Dx(e,t){xC(e)===0?Object.entries(e).forEach(([n,r])=>{t(n,r,e)}):e.forEach((n,r)=>t(r,n,e))}function xC(e){const t=e[Gs];return t?t.type_:Array.isArray(e)?1:bC(e)?2:wC(e)?3:0}function lM(e,t){return xC(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fq(e,t,n){const r=xC(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function UOe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function bC(e){return e instanceof Map}function wC(e){return e instanceof Set}function Zd(e){return e.copy_||e.base_}function uM(e,t){if(bC(e))return new Map(e);if(wC(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&cq(e))return Iy(e)?{...e}:Object.assign(Object.create(null),e);const n=Object.getOwnPropertyDescriptors(e);delete n[Gs];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const o=r[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Iy(e),n)}function fN(e,t=!1){return SC(e)||rd(e)||!Af(e)||(xC(e)>1&&(e.set=e.add=e.clear=e.delete=VOe),Object.freeze(e),t&&Dx(e,(n,r)=>fN(r,!0))),e}function VOe(){gu(2)}function SC(e){return Object.isFrozen(e)}var GOe={};function Np(e){const t=GOe[e];return t||gu(0,e),t}var Rx;function hq(){return Rx}function qOe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function a6(e,t){t&&(Np("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function cM(e){fM(e),e.drafts_.forEach(WOe),e.drafts_=null}function fM(e){e===Rx&&(Rx=e.parent_)}function s6(e){return Rx=qOe(Rx,e)}function WOe(e){const t=e[Gs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function l6(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Gs].modified_&&(cM(t),gu(4)),Af(e)&&(e=RE(t,e),t.parent_||zE(t,e)),t.patches_&&Np("Patches").generateReplacementPatches_(n[Gs].base_,e,t.patches_,t.inversePatches_)):e=RE(t,n,[]),cM(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==uq?e:void 0}function RE(e,t,n){if(SC(t))return t;const r=t[Gs];if(!r)return Dx(t,(i,o)=>u6(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return zE(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),Dx(o,(a,h)=>u6(e,r,i,a,h,n,l)),zE(e,i,!1),n&&e.patches_&&Np("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function u6(e,t,n,r,i,o,l){if(rd(i)){const a=o&&t&&t.type_!==3&&!lM(t.assigned_,r)?o.concat(r):void 0,h=RE(e,i,a);if(fq(n,r,h),rd(h))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Af(i)&&!SC(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;RE(e,i),(!t||!t.scope_.parent_)&&zE(e,i)}}function zE(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&fN(t,n)}function HOe(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:hq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=hN;n&&(i=[r],o=zx);const{revoke:l,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=l,a}var hN={get(e,t){if(t===Gs)return e;const n=Zd(e);if(!lM(n,t))return XOe(e,n,t);const r=n[t];return e.finalized_||!Af(r)?r:r===lP(e.base_,t)?(uP(e),e.copy_[t]=dM(r,e)):r},has(e,t){return t in Zd(e)},ownKeys(e){return Reflect.ownKeys(Zd(e))},set(e,t,n){const r=dq(Zd(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=lP(Zd(e),t),o=i==null?void 0:i[Gs];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(UOe(n,i)&&(n!==void 0||lM(e.base_,t)))return!0;uP(e),hM(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return lP(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,uP(e),hM(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Zd(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){gu(11)},getPrototypeOf(e){return Iy(e.base_)},setPrototypeOf(){gu(12)}},zx={};Dx(hN,(e,t)=>{zx[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});zx.deleteProperty=function(e,t){return zx.set.call(this,e,t,void 0)};zx.set=function(e,t,n){return hN.set.call(this,e[0],t,n,e[0])};function lP(e,t){const n=e[Gs];return(n?Zd(n):e)[t]}function XOe(e,t,n){var i;const r=dq(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function dq(e,t){if(!(t in e))return;let n=Iy(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Iy(n)}}function hM(e){e.modified_||(e.modified_=!0,e.parent_&&hM(e.parent_))}function uP(e){e.copy_||(e.copy_=uM(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ZOe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const l=this;return function(h=o,...d){return l.produce(h,g=>n.call(this,g,...d))}}typeof n!="function"&&gu(6),r!==void 0&&typeof r!="function"&&gu(7);let i;if(Af(t)){const o=s6(this),l=dM(t,void 0);let a=!0;try{i=n(l),a=!1}finally{a?cM(o):fM(o)}return a6(o,r),l6(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===uq&&(i=void 0),this.autoFreeze_&&fN(i,!0),r){const o=[],l=[];Np("Patches").generateReplacementPatches_(t,i,o,l),r(o,l)}return i}else gu(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...a)=>this.produceWithPatches(l,h=>t(h,...a));let r,i;return[this.produce(t,n,(l,a)=>{r=l,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Af(e)||gu(8),rd(e)&&(e=pq(e));const t=s6(this),n=dM(e,void 0);return n[Gs].isManual_=!0,fM(t),n}finishDraft(e,t){const n=e&&e[Gs];(!n||!n.isManual_)&&gu(9);const{scope_:r}=n;return a6(r,t),l6(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Np("Patches").applyPatches_;return rd(e)?r(e,t):this.produce(e,i=>r(i,t))}};function dM(e,t){const n=bC(e)?Np("MapSet").proxyMap_(e,t):wC(e)?Np("MapSet").proxySet_(e,t):HOe(e,t);return(t?t.scope_:hq()).drafts_.push(n),n}function pq(e){return rd(e)||gu(10,e),mq(e)}function mq(e){if(!Af(e)||SC(e))return e;const t=e[Gs];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=uM(e,t.scope_.immer_.useStrictShallowCopy_)}else n=uM(e,!0);return Dx(n,(r,i)=>{fq(n,r,mq(i))}),t&&(t.finalized_=!1),n}var qs=new ZOe,gq=qs.produce;qs.produceWithPatches.bind(qs);qs.setAutoFreeze.bind(qs);qs.setUseStrictShallowCopy.bind(qs);qs.applyPatches.bind(qs);qs.createDraft.bind(qs);qs.finishDraft.bind(qs);function KOe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function YOe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var c6=e=>Array.isArray(e)?e:[e];function JOe(e){const t=Array.isArray(e[0])?e[0]:e;return YOe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function QOe(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var eMe=class{constructor(e){this.value=e}deref(){return this.value}},tMe=typeof WeakRef<"u"?WeakRef:eMe,nMe=0,f6=1;function xw(){return{s:nMe,v:void 0,o:null,p:null}}function yq(e,t={}){let n=xw();const{resultEqualityCheck:r}=t;let i,o=0;function l(){let a=n;const{length:h}=arguments;for(let v=0,b=h;v<b;v++){const I=arguments[v];if(typeof I=="function"||typeof I=="object"&&I!==null){let T=a.o;T===null&&(a.o=T=new WeakMap);const P=T.get(I);P===void 0?(a=xw(),T.set(I,a)):a=P}else{let T=a.p;T===null&&(a.p=T=new Map);const P=T.get(I);P===void 0?(a=xw(),T.set(I,a)):a=P}}const d=a;let g;if(a.s===f6?g=a.v:(g=e.apply(null,arguments),o++),d.s=f6,r){const v=(i==null?void 0:i.deref())??i;v!=null&&r(v,g)&&(g=v,o!==0&&o--),i=typeof g=="object"&&g!==null||typeof g=="function"?new tMe(g):g}return d.v=g,g}return l.clearCache=()=>{n=xw(),l.resetResultsCount()},l.resultsCount=()=>o,l.resetResultsCount=()=>{o=0},l}function rMe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e;return(...i)=>{let o=0,l=0,a,h={},d=i.pop();typeof d=="object"&&(h=d,d=i.pop()),KOe(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const g={...n,...h},{memoize:v,memoizeOptions:b=[],argsMemoize:I=yq,argsMemoizeOptions:T=[],devModeChecks:P={}}=g,$=c6(b),O=c6(T),k=JOe(i),R=v(function(){return o++,d.apply(null,arguments)},...$),j=I(function(){l++;const U=QOe(k,arguments);return a=R.apply(null,U),a},...O);return Object.assign(j,{resultFunc:d,memoizedResultFunc:R,dependencies:k,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:I})}}function vq(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var iMe=vq(),oMe=vq,aMe=(...e)=>{const t=rMe(...e);return(...n)=>{const r=t(...n),i=(o,...l)=>r(rd(o)?pq(o):o,...l);return Object.assign(i,r),i}};aMe(yq);var sMe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?DE:DE.apply(null,arguments)};function Fx(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Cu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>BOe(r)&&r.type===e,n}var _q=class U_ extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,U_.prototype)}static get[Symbol.species](){return U_}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new U_(...t[0].concat(this)):new U_(...t.concat(this))}};function h6(e){return Af(e)?gq(e,()=>{}):e}function d6(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Cu(10));const r=n.insert(t,e);return e.set(t,r),r}function lMe(e){return typeof e=="boolean"}var uMe=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let l=new _q;return n&&(lMe(n)?l.push(iMe):l.push(oMe(n.extraArgument))),l},cMe="RTK_autoBatch",xq=e=>t=>{setTimeout(t,e)},fMe=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:xq(10),hMe=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,l=!1;const a=new Set,h=e.type==="tick"?queueMicrotask:e.type==="raf"?fMe:e.type==="callback"?e.queueNotification:xq(e.timeout),d=()=>{l=!1,o&&(o=!1,a.forEach(g=>g()))};return Object.assign({},r,{subscribe(g){const v=()=>i&&g(),b=r.subscribe(v);return a.add(g),()=>{b(),a.delete(g)}},dispatch(g){var v;try{return i=!((v=g==null?void 0:g.meta)!=null&&v[cMe]),o=!i,o&&(l||(l=!0,h(d))),r.dispatch(g)}finally{i=!0}}})},dMe=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new _q(e);return r&&i.push(hMe(typeof r=="object"?r:void 0)),i},pMe=!0;function mMe(e){const t=uMe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(cN(n))a=zOe(n);else throw new Error(Cu(1));let h;typeof r=="function"?h=r(t):h=t();let d=DE;i&&(d=sMe({trace:!pMe,...typeof i=="object"&&i}));const g=FOe(...h),v=dMe(g);let b=typeof l=="function"?l(v):v();const I=d(...b);return lq(a,o,I)}function bq(e){const t={},n=[];let r;const i={addCase(o,l){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(Cu(28));if(a in t)throw new Error(Cu(29));return t[a]=l,i},addMatcher(o,l){return n.push({matcher:o,reducer:l}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function gMe(e){return typeof e=="function"}function yMe(e,t){let[n,r,i]=bq(t),o;if(gMe(e))o=()=>h6(e());else{const a=h6(e);o=()=>a}function l(a=o(),h){let d=[n[h.type],...r.filter(({matcher:g})=>g(h)).map(({reducer:g})=>g)];return d.filter(g=>!!g).length===0&&(d=[i]),d.reduce((g,v)=>{if(v)if(rd(g)){const I=v(g,h);return I===void 0?g:I}else{if(Af(g))return gq(g,b=>v(b,h));{const b=v(g,h);if(b===void 0){if(g===null)return g;throw new Error(Cu(9))}return b}}return g},a)}return l.getInitialState=o,l}var vMe=Symbol.for("rtk-slice-createasyncthunk");function _Me(e,t){return`${e}/${t}`}function xMe({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[vMe];return function(i){const{name:o,reducerPath:l=o}=i;if(!o)throw new Error(Cu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(SMe()):i.reducers)||{},h=Object.keys(a),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase($,O){const k=typeof $=="string"?$:$.type;if(!k)throw new Error(Cu(12));if(k in d.sliceCaseReducersByType)throw new Error(Cu(13));return d.sliceCaseReducersByType[k]=O,g},addMatcher($,O){return d.sliceMatchers.push({matcher:$,reducer:O}),g},exposeAction($,O){return d.actionCreators[$]=O,g},exposeCaseReducer($,O){return d.sliceCaseReducersByName[$]=O,g}};h.forEach($=>{const O=a[$],k={reducerName:$,type:_Me(o,$),createNotation:typeof i.reducers=="function"};CMe(O)?TMe(k,O,g,t):EMe(k,O,g)});function v(){const[$={},O=[],k=void 0]=typeof i.extraReducers=="function"?bq(i.extraReducers):[i.extraReducers],R={...$,...d.sliceCaseReducersByType};return yMe(i.initialState,j=>{for(let F in R)j.addCase(F,R[F]);for(let F of d.sliceMatchers)j.addMatcher(F.matcher,F.reducer);for(let F of O)j.addMatcher(F.matcher,F.reducer);k&&j.addDefaultCase(k)})}const b=$=>$,I=new WeakMap;let T;const P={name:o,reducerPath:l,reducer($,O){return T||(T=v()),T($,O)},actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState(){return T||(T=v()),T.getInitialState()},getSelectors($=b){const O=d6(I,this,{insert:()=>new WeakMap});return d6(O,$,{insert:()=>{const k={};for(const[R,j]of Object.entries(i.selectors??{}))k[R]=bMe(this,j,$,this!==P);return k}})},selectSlice($){let O=$[this.reducerPath];return typeof O>"u"&&this!==P&&(O=this.getInitialState()),O},get selectors(){return this.getSelectors(this.selectSlice)},injectInto($,{reducerPath:O,...k}={}){const R=O??this.reducerPath;return $.inject({reducerPath:R,reducer:this.reducer},k),{...this,reducerPath:R}}};return P}}function bMe(e,t,n,r){function i(o,...l){let a=n.call(e,o);return typeof a>"u"&&r&&(a=e.getInitialState()),t(a,...l)}return i.unwrapped=t,i}var wMe=xMe();function SMe(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function EMe({type:e,reducerName:t,createNotation:n},r,i){let o,l;if("reducer"in r){if(n&&!IMe(r))throw new Error(Cu(17));o=r.reducer,l=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,l?Fx(e,l):Fx(e))}function CMe(e){return e._reducerDefinitionType==="asyncThunk"}function IMe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function TMe({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Cu(18));const{payloadCreator:o,fulfilled:l,pending:a,rejected:h,settled:d,options:g}=n,v=i(e,o,g);r.exposeAction(t,v),l&&r.addCase(v.fulfilled,l),a&&r.addCase(v.pending,a),h&&r.addCase(v.rejected,h),d&&r.addMatcher(v.settled,d),r.exposeCaseReducer(t,{fulfilled:l||bw,pending:a||bw,rejected:h||bw,settled:d||bw})}function bw(){}var dN="listenerMiddleware";Fx(`${dN}/add`);Fx(`${dN}/removeAll`);Fx(`${dN}/remove`);function Cu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const PMe={densityData:null},wq=wMe({name:"densityData",initialState:PMe,reducers:{setDensityData:(e,t)=>{e.densityData=t.payload}}}),{setDensityData:AMe}=wq.actions,OMe=wq.reducer,p6="4sE0MBX4XpmZocqe4c6z",MMe=qk.div`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 5px;
  height: 575px;
  width: calc(100% - 40px);
  border-radius: 5px;
  overflow: hidden;
`,$Me=qk.div`
  position: absolute;
  bottom: 20px;
  left: 20px;
  background-color: rgba(3, 7, 18, 0.9);
  color: #fff;
  border: 1px solid #ccc;
  padding: 5px;
  border-radius: 5px;
  opacity: 0.9;
  z-index: 9999;
  font-size: 12px;
  max-width: 250px;
  box-sizing: border-box;
`,kMe=({selectedYear:e,selectedAnimal:t})=>{const n=D.useRef(null),[r,i]=D.useState(null),o=qIe();return D.useEffect(()=>{if(!n.current)return;const l=new s0.Map({container:n.current,center:[2.209667,46.232193],zoom:4.5,style:`https://api.maptiler.com/maps/hybrid/style.json?key=${p6}`});return l.on("load",()=>{const a=new s0.NavigationControl({visualizePitch:!0});l.addControl(a,"top-left");const h=new POe({apiKey:p6,types:["municipality"],country:["fr"],fuzzyMatch:!0});l.on("click",async d=>{const g=OOe([d.lngLat.lng,d.lngLat.lat]);fetch("density_animal.geojson").then(v=>v.json()).then(v=>{let b=null;for(const I of v.features)if(kOe(g,I)){b=I;break}b?o(AMe(b)):console.log("Le point cliqu nest pas  lintrieur dune entit GeoJSON.")})}),l.addControl(h,"top-right"),i(l)}),()=>l.remove()},[]),D.useEffect(()=>{if(!r||!t||!e)return;const l="data-animal",a=`DENSITE_${t.toUpperCase()}_${e}`,h="density_animal.geojson",d=r.getSource(l);r.getSource(l)||r.addSource(l,{type:"geojson",data:h}),r.getLayer(l)?(d&&d.type=="geojson"&&(d.setData(h),r.setPaintProperty(l,"fill-color",["interpolate",["linear"],["get",a],0,"#ffffb2",74,"#feb751",291,"#f45629",1135,"#bd0026"])),r.setPaintProperty(l,"fill-color",["interpolate",["linear"],["get",a],0,"#ffffb2",74,"#feb751",291,"#f45629",1135,"#bd0026"])):r.addLayer({id:l,type:"fill",source:l,layout:{},paint:{"fill-color":["interpolate",["linear"],["get",a],0,"#ffffb2",74,"#feb751",291,"#f45629",1135,"#bd0026"],"fill-opacity":.7}});const g=v=>{const b=r.queryRenderedFeatures(v.point,{layers:[l]}),I=b.length>0?b[0].properties[a]:"Non disponible",T=b.length>0?b[0].properties.nom_comm_x:"Non disponible",P=b.length>0?b[0].properties.insee_com:"Non disponible",$=b.length>0?b[0].properties.superficie_km2:"Non disponible";new s0.Popup({closeOnClick:!0}).setLngLat([v.lngLat.lng,v.lngLat.lat]).setHTML(`<div>Commune : <b>${T}</b></br>
      Code Insee : <b>${P}</b></br>
      Densit (${t}/km2) : <b>${I&&I.toFixed(2)}</b></br>
      Superficie (km2) : <b>${$}</b></div>`).addTo(r)};return r.on("click",g),()=>{r.off("click",g)}},[r,e,t]),Pe.jsxs(Pe.Fragment,{children:[Pe.jsx("style",{children:`
      .maplibregl-popup-content {
        background-color: rgba(3, 7, 18, 0.9);
        color: #fff;
        border: 1px solid black;
        padding: 5px;
        border-radius: 5px;
        opacity: 0.9;
        z-index: 9999;
        width:200px;
        box-sizing: border-box;
      }
    `}),Pe.jsxs(MMe,{children:[Pe.jsx("div",{ref:n,style:{width:"100%",height:"100%",borderRadius:5}}),e&&t&&Pe.jsxs($Me,{children:[Pe.jsxs("h3",{style:{marginBottom:"10px"},children:["Densit de ",t," ",Pe.jsx("br",{}),"(",t,"/km)"]}),Pe.jsxs("div",{style:{marginBottom:"5px"},children:[Pe.jsx("div",{style:{backgroundColor:"#ffffb2",width:"20px",height:"20px",display:"inline-block",verticalAlign:"middle"}}),Pe.jsx("span",{style:{verticalAlign:"top"},children:" 0 - 74 "})]}),Pe.jsxs("div",{style:{marginBottom:"5px"},children:[Pe.jsx("div",{style:{backgroundColor:"#feb751",width:"20px",height:"20px",display:"inline-block",verticalAlign:"middle"}}),Pe.jsx("span",{style:{verticalAlign:"top"},children:" 74 - 291 "})]}),Pe.jsxs("div",{style:{marginBottom:"5px"},children:[Pe.jsx("div",{style:{backgroundColor:"#f45629",width:"20px",height:"20px",display:"inline-block",verticalAlign:"middle"}}),Pe.jsx("span",{style:{verticalAlign:"top"},children:" 291 - 1135"})]}),Pe.jsxs("div",{style:{marginBottom:"5px"},children:[Pe.jsx("div",{style:{backgroundColor:"#bd0026",width:"20px",height:"20px",display:"inline-block",verticalAlign:"middle"}}),Pe.jsx("span",{style:{verticalAlign:"top"},children:" 1135 et plus "})]})]})]})]})};function m6(e,[t,n]){return Math.min(n,Math.max(t,e))}function NMe(e){const t=D.useRef({value:e,previous:e});return D.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const LMe=D.forwardRef((e,t)=>D.createElement(Qn.span,lt({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),DMe=[" ","Enter","ArrowUp","ArrowDown"],RMe=[" ","Enter"],EC="Select",[CC,IC,zMe]=c$(EC),[tv,F$e]=$f(EC,[zMe,Ny]),pN=Ny(),[FMe,Xp]=tv(EC),[BMe,jMe]=tv(EC),UMe=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:o,value:l,defaultValue:a,onValueChange:h,dir:d,name:g,autoComplete:v,disabled:b,required:I}=e,T=pN(t),[P,$]=D.useState(null),[O,k]=D.useState(null),[R,j]=D.useState(!1),F=n2(d),[U=!1,G]=Mg({prop:r,defaultProp:i,onChange:o}),[Z,ne]=Mg({prop:l,defaultProp:a,onChange:h}),oe=D.useRef(null),ye=P?!!P.closest("form"):!0,[fe,$e]=D.useState(new Set),ae=Array.from(fe).map(be=>be.props.value).join(";");return D.createElement(b$,T,D.createElement(FMe,{required:I,scope:t,trigger:P,onTriggerChange:$,valueNode:O,onValueNodeChange:k,valueNodeHasChildren:R,onValueNodeHasChildrenChange:j,contentId:Bh(),value:Z,onValueChange:ne,open:U,onOpenChange:G,dir:F,triggerPointerDownPosRef:oe,disabled:b},D.createElement(CC.Provider,{scope:t},D.createElement(BMe,{scope:e.__scopeSelect,onNativeOptionAdd:D.useCallback(be=>{$e(Te=>new Set(Te).add(be))},[]),onNativeOptionRemove:D.useCallback(be=>{$e(Te=>{const Le=new Set(Te);return Le.delete(be),Le})},[])},n)),ye?D.createElement(Tq,{key:ae,"aria-hidden":!0,required:I,tabIndex:-1,name:g,autoComplete:v,value:Z,onChange:be=>ne(be.target.value),disabled:b},Z===void 0?D.createElement("option",{value:""}):null,Array.from(fe)):null))},VMe="SelectTrigger",GMe=D.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,o=pN(n),l=Xp(VMe,n),a=l.disabled||r,h=Cr(t,l.onTriggerChange),d=IC(n),[g,v,b]=Pq(T=>{const P=d().filter(k=>!k.disabled),$=P.find(k=>k.value===l.value),O=Aq(P,T,$);O!==void 0&&l.onValueChange(O.value)}),I=()=>{a||(l.onOpenChange(!0),b())};return D.createElement(w$,lt({asChild:!0},o),D.createElement(Qn.button,lt({type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Iq(l.value)?"":void 0},i,{ref:h,onClick:Zt(i.onClick,T=>{T.currentTarget.focus()}),onPointerDown:Zt(i.onPointerDown,T=>{const P=T.target;P.hasPointerCapture(T.pointerId)&&P.releasePointerCapture(T.pointerId),T.button===0&&T.ctrlKey===!1&&(I(),l.triggerPointerDownPosRef.current={x:Math.round(T.pageX),y:Math.round(T.pageY)},T.preventDefault())}),onKeyDown:Zt(i.onKeyDown,T=>{const P=g.current!=="";!(T.ctrlKey||T.altKey||T.metaKey)&&T.key.length===1&&v(T.key),!(P&&T.key===" ")&&DMe.includes(T.key)&&(I(),T.preventDefault())})})))}),qMe="SelectValue",WMe=D.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:l="",...a}=e,h=Xp(qMe,n),{onValueNodeHasChildrenChange:d}=h,g=o!==void 0,v=Cr(t,h.onValueNodeChange);return ls(()=>{d(g)},[d,g]),D.createElement(Qn.span,lt({},a,{ref:v,style:{pointerEvents:"none"}}),Iq(h.value)?D.createElement(D.Fragment,null,l):o)}),HMe=D.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return D.createElement(Qn.span,lt({"aria-hidden":!0},i,{ref:t}),r||"")}),XMe=e=>D.createElement(u2,lt({asChild:!0},e)),Ty="SelectContent",ZMe=D.forwardRef((e,t)=>{const n=Xp(Ty,e.__scopeSelect),[r,i]=D.useState();if(ls(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?Mf.createPortal(D.createElement(Sq,{scope:e.__scopeSelect},D.createElement(CC.Slot,{scope:e.__scopeSelect},D.createElement("div",null,e.children))),o):null}return D.createElement(KMe,lt({},e,{ref:t}))}),qc=10,[Sq,Zp]=tv(Ty),KMe=D.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:l,side:a,sideOffset:h,align:d,alignOffset:g,arrowPadding:v,collisionBoundary:b,collisionPadding:I,sticky:T,hideWhenDetached:P,avoidCollisions:$,...O}=e,k=Xp(Ty,n),[R,j]=D.useState(null),[F,U]=D.useState(null),G=Cr(t,St=>j(St)),[Z,ne]=D.useState(null),[oe,ye]=D.useState(null),fe=IC(n),[$e,ae]=D.useState(!1),be=D.useRef(!1);D.useEffect(()=>{if(R)return Wx(R)},[R]),o2();const Te=D.useCallback(St=>{const[Vt,...Qe]=fe().map(We=>We.ref.current),[dt]=Qe.slice(-1),vt=document.activeElement;for(const We of St)if(We===vt||(We==null||We.scrollIntoView({block:"nearest"}),We===Vt&&F&&(F.scrollTop=0),We===dt&&F&&(F.scrollTop=F.scrollHeight),We==null||We.focus(),document.activeElement!==vt))return},[fe,F]),Le=D.useCallback(()=>Te([Z,R]),[Te,Z,R]);D.useEffect(()=>{$e&&Le()},[$e,Le]);const{onOpenChange:Ee,triggerPointerDownPosRef:de}=k;D.useEffect(()=>{if(R){let St={x:0,y:0};const Vt=dt=>{var vt,We,Ot,Ct;St={x:Math.abs(Math.round(dt.pageX)-((vt=(We=de.current)===null||We===void 0?void 0:We.x)!==null&&vt!==void 0?vt:0)),y:Math.abs(Math.round(dt.pageY)-((Ot=(Ct=de.current)===null||Ct===void 0?void 0:Ct.y)!==null&&Ot!==void 0?Ot:0))}},Qe=dt=>{St.x<=10&&St.y<=10?dt.preventDefault():R.contains(dt.target)||Ee(!1),document.removeEventListener("pointermove",Vt),de.current=null};return de.current!==null&&(document.addEventListener("pointermove",Vt),document.addEventListener("pointerup",Qe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Vt),document.removeEventListener("pointerup",Qe,{capture:!0})}}},[R,Ee,de]),D.useEffect(()=>{const St=()=>Ee(!1);return window.addEventListener("blur",St),window.addEventListener("resize",St),()=>{window.removeEventListener("blur",St),window.removeEventListener("resize",St)}},[Ee]);const[De,He]=Pq(St=>{const Vt=fe().filter(vt=>!vt.disabled),Qe=Vt.find(vt=>vt.ref.current===document.activeElement),dt=Aq(Vt,St,Qe);dt&&setTimeout(()=>dt.ref.current.focus())}),je=D.useCallback((St,Vt,Qe)=>{const dt=!be.current&&!Qe;(k.value!==void 0&&k.value===Vt||dt)&&(ne(St),dt&&(be.current=!0))},[k.value]),et=D.useCallback(()=>R==null?void 0:R.focus(),[R]),Et=D.useCallback((St,Vt,Qe)=>{const dt=!be.current&&!Qe;(k.value!==void 0&&k.value===Vt||dt)&&ye(St)},[k.value]),zt=r==="popper"?g6:YMe,Yt=zt===g6?{side:a,sideOffset:h,align:d,alignOffset:g,arrowPadding:v,collisionBoundary:b,collisionPadding:I,sticky:T,hideWhenDetached:P,avoidCollisions:$}:{};return D.createElement(Sq,{scope:n,content:R,viewport:F,onViewportChange:U,itemRefCallback:je,selectedItem:Z,onItemLeave:et,itemTextRefCallback:Et,focusSelectedItem:Le,selectedItemText:oe,position:r,isPositioned:$e,searchRef:De},D.createElement(f2,{as:cf,allowPinchZoom:!0},D.createElement(a2,{asChild:!0,trapped:k.open,onMountAutoFocus:St=>{St.preventDefault()},onUnmountAutoFocus:Zt(i,St=>{var Vt;(Vt=k.trigger)===null||Vt===void 0||Vt.focus({preventScroll:!0}),St.preventDefault()})},D.createElement(i2,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:St=>St.preventDefault(),onDismiss:()=>k.onOpenChange(!1)},D.createElement(zt,lt({role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:St=>St.preventDefault()},O,Yt,{onPlaced:()=>ae(!0),ref:G,style:{display:"flex",flexDirection:"column",outline:"none",...O.style},onKeyDown:Zt(O.onKeyDown,St=>{const Vt=St.ctrlKey||St.altKey||St.metaKey;if(St.key==="Tab"&&St.preventDefault(),!Vt&&St.key.length===1&&He(St.key),["ArrowUp","ArrowDown","Home","End"].includes(St.key)){let dt=fe().filter(vt=>!vt.disabled).map(vt=>vt.ref.current);if(["ArrowUp","End"].includes(St.key)&&(dt=dt.slice().reverse()),["ArrowUp","ArrowDown"].includes(St.key)){const vt=St.target,We=dt.indexOf(vt);dt=dt.slice(We+1)}setTimeout(()=>Te(dt)),St.preventDefault()}})}))))))}),YMe=D.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,o=Xp(Ty,n),l=Zp(Ty,n),[a,h]=D.useState(null),[d,g]=D.useState(null),v=Cr(t,G=>g(G)),b=IC(n),I=D.useRef(!1),T=D.useRef(!0),{viewport:P,selectedItem:$,selectedItemText:O,focusSelectedItem:k}=l,R=D.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&d&&P&&$&&O){const G=o.trigger.getBoundingClientRect(),Z=d.getBoundingClientRect(),ne=o.valueNode.getBoundingClientRect(),oe=O.getBoundingClientRect();if(o.dir!=="rtl"){const vt=oe.left-Z.left,We=ne.left-vt,Ot=G.left-We,Ct=G.width+Ot,Tt=Math.max(Ct,Z.width),Tn=window.innerWidth-qc,yn=m6(We,[qc,Tn-Tt]);a.style.minWidth=Ct+"px",a.style.left=yn+"px"}else{const vt=Z.right-oe.right,We=window.innerWidth-ne.right-vt,Ot=window.innerWidth-G.right-We,Ct=G.width+Ot,Tt=Math.max(Ct,Z.width),Tn=window.innerWidth-qc,yn=m6(We,[qc,Tn-Tt]);a.style.minWidth=Ct+"px",a.style.right=yn+"px"}const ye=b(),fe=window.innerHeight-qc*2,$e=P.scrollHeight,ae=window.getComputedStyle(d),be=parseInt(ae.borderTopWidth,10),Te=parseInt(ae.paddingTop,10),Le=parseInt(ae.borderBottomWidth,10),Ee=parseInt(ae.paddingBottom,10),de=be+Te+$e+Ee+Le,De=Math.min($.offsetHeight*5,de),He=window.getComputedStyle(P),je=parseInt(He.paddingTop,10),et=parseInt(He.paddingBottom,10),Et=G.top+G.height/2-qc,zt=fe-Et,Yt=$.offsetHeight/2,St=$.offsetTop+Yt,Vt=be+Te+St,Qe=de-Vt;if(Vt<=Et){const vt=$===ye[ye.length-1].ref.current;a.style.bottom="0px";const We=d.clientHeight-P.offsetTop-P.offsetHeight,Ot=Math.max(zt,Yt+(vt?et:0)+We+Le),Ct=Vt+Ot;a.style.height=Ct+"px"}else{const vt=$===ye[0].ref.current;a.style.top="0px";const Ot=Math.max(Et,be+P.offsetTop+(vt?je:0)+Yt)+Qe;a.style.height=Ot+"px",P.scrollTop=Vt-Et+P.offsetTop}a.style.margin=`${qc}px 0`,a.style.minHeight=De+"px",a.style.maxHeight=fe+"px",r==null||r(),requestAnimationFrame(()=>I.current=!0)}},[b,o.trigger,o.valueNode,a,d,P,$,O,o.dir,r]);ls(()=>R(),[R]);const[j,F]=D.useState();ls(()=>{d&&F(window.getComputedStyle(d).zIndex)},[d]);const U=D.useCallback(G=>{G&&T.current===!0&&(R(),k==null||k(),T.current=!1)},[R,k]);return D.createElement(JMe,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:I,onScrollButtonChange:U},D.createElement("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},D.createElement(Qn.div,lt({},i,{ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),g6=D.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=qc,...o}=e,l=pN(n);return D.createElement(S$,lt({},l,o,{ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[JMe,mN]=tv(Ty,{}),y6="SelectViewport",QMe=D.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Zp(y6,n),o=mN(y6,n),l=Cr(t,i.onViewportChange),a=D.useRef(0);return D.createElement(D.Fragment,null,D.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),D.createElement(CC.Slot,{scope:n},D.createElement(Qn.div,lt({"data-radix-select-viewport":"",role:"presentation"},r,{ref:l,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:Zt(r.onScroll,h=>{const d=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=o;if(v!=null&&v.current&&g){const b=Math.abs(a.current-d.scrollTop);if(b>0){const I=window.innerHeight-qc*2,T=parseFloat(g.style.minHeight),P=parseFloat(g.style.height),$=Math.max(T,P);if($<I){const O=$+b,k=Math.min(I,O),R=O-k;g.style.height=k+"px",g.style.bottom==="0px"&&(d.scrollTop=R>0?R:0,g.style.justifyContent="flex-end")}}}a.current=d.scrollTop})}))))}),e$e="SelectGroup",[t$e,n$e]=tv(e$e),r$e=D.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Bh();return D.createElement(t$e,{scope:n,id:i},D.createElement(Qn.div,lt({role:"group","aria-labelledby":i},r,{ref:t})))}),i$e="SelectLabel",o$e=D.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=n$e(i$e,n);return D.createElement(Qn.div,lt({id:i.id},r,{ref:t}))}),pM="SelectItem",[a$e,Eq]=tv(pM),s$e=D.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...l}=e,a=Xp(pM,n),h=Zp(pM,n),d=a.value===r,[g,v]=D.useState(o??""),[b,I]=D.useState(!1),T=Cr(t,O=>{var k;return(k=h.itemRefCallback)===null||k===void 0?void 0:k.call(h,O,r,i)}),P=Bh(),$=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return D.createElement(a$e,{scope:n,value:r,disabled:i,textId:P,isSelected:d,onItemTextChange:D.useCallback(O=>{v(k=>{var R;return k||((R=O==null?void 0:O.textContent)!==null&&R!==void 0?R:"").trim()})},[])},D.createElement(CC.ItemSlot,{scope:n,value:r,disabled:i,textValue:g},D.createElement(Qn.div,lt({role:"option","aria-labelledby":P,"data-highlighted":b?"":void 0,"aria-selected":d&&b,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},l,{ref:T,onFocus:Zt(l.onFocus,()=>I(!0)),onBlur:Zt(l.onBlur,()=>I(!1)),onPointerUp:Zt(l.onPointerUp,$),onPointerMove:Zt(l.onPointerMove,O=>{if(i){var k;(k=h.onItemLeave)===null||k===void 0||k.call(h)}else O.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Zt(l.onPointerLeave,O=>{if(O.currentTarget===document.activeElement){var k;(k=h.onItemLeave)===null||k===void 0||k.call(h)}}),onKeyDown:Zt(l.onKeyDown,O=>{var k;((k=h.searchRef)===null||k===void 0?void 0:k.current)!==""&&O.key===" "||(RMe.includes(O.key)&&$(),O.key===" "&&O.preventDefault())})}))))}),ww="SelectItemText",l$e=D.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...o}=e,l=Xp(ww,n),a=Zp(ww,n),h=Eq(ww,n),d=jMe(ww,n),[g,v]=D.useState(null),b=Cr(t,O=>v(O),h.onItemTextChange,O=>{var k;return(k=a.itemTextRefCallback)===null||k===void 0?void 0:k.call(a,O,h.value,h.disabled)}),I=g==null?void 0:g.textContent,T=D.useMemo(()=>D.createElement("option",{key:h.value,value:h.value,disabled:h.disabled},I),[h.disabled,h.value,I]),{onNativeOptionAdd:P,onNativeOptionRemove:$}=d;return ls(()=>(P(T),()=>$(T)),[P,$,T]),D.createElement(D.Fragment,null,D.createElement(Qn.span,lt({id:h.textId},o,{ref:b})),h.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Mf.createPortal(o.children,l.valueNode):null)}),u$e="SelectItemIndicator",c$e=D.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Eq(u$e,n).isSelected?D.createElement(Qn.span,lt({"aria-hidden":!0},r,{ref:t})):null}),v6="SelectScrollUpButton",f$e=D.forwardRef((e,t)=>{const n=Zp(v6,e.__scopeSelect),r=mN(v6,e.__scopeSelect),[i,o]=D.useState(!1),l=Cr(t,r.onScrollButtonChange);return ls(()=>{if(n.viewport&&n.isPositioned){let d=function(){const g=h.scrollTop>0;o(g)};var a=d;const h=n.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[n.viewport,n.isPositioned]),i?D.createElement(Cq,lt({},e,{ref:l,onAutoScroll:()=>{const{viewport:a,selectedItem:h}=n;a&&h&&(a.scrollTop=a.scrollTop-h.offsetHeight)}})):null}),_6="SelectScrollDownButton",h$e=D.forwardRef((e,t)=>{const n=Zp(_6,e.__scopeSelect),r=mN(_6,e.__scopeSelect),[i,o]=D.useState(!1),l=Cr(t,r.onScrollButtonChange);return ls(()=>{if(n.viewport&&n.isPositioned){let d=function(){const g=h.scrollHeight-h.clientHeight,v=Math.ceil(h.scrollTop)<g;o(v)};var a=d;const h=n.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[n.viewport,n.isPositioned]),i?D.createElement(Cq,lt({},e,{ref:l,onAutoScroll:()=>{const{viewport:a,selectedItem:h}=n;a&&h&&(a.scrollTop=a.scrollTop+h.offsetHeight)}})):null}),Cq=D.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,o=Zp("SelectScrollButton",n),l=D.useRef(null),a=IC(n),h=D.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return D.useEffect(()=>()=>h(),[h]),ls(()=>{var d;const g=a().find(v=>v.ref.current===document.activeElement);g==null||(d=g.ref.current)===null||d===void 0||d.scrollIntoView({block:"nearest"})},[a]),D.createElement(Qn.div,lt({"aria-hidden":!0},i,{ref:t,style:{flexShrink:0,...i.style},onPointerDown:Zt(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:Zt(i.onPointerMove,()=>{var d;(d=o.onItemLeave)===null||d===void 0||d.call(o),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:Zt(i.onPointerLeave,()=>{h()})}))}),d$e=D.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return D.createElement(Qn.div,lt({"aria-hidden":!0},r,{ref:t}))});function Iq(e){return e===""||e===void 0}const Tq=D.forwardRef((e,t)=>{const{value:n,...r}=e,i=D.useRef(null),o=Cr(t,i),l=NMe(n);return D.useEffect(()=>{const a=i.current,h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(l!==n&&g){const v=new Event("change",{bubbles:!0});g.call(a,n),a.dispatchEvent(v)}},[l,n]),D.createElement(LMe,{asChild:!0},D.createElement("select",lt({},r,{ref:o,defaultValue:n})))});Tq.displayName="BubbleSelect";function Pq(e){const t=Tu(e),n=D.useRef(""),r=D.useRef(0),i=D.useCallback(l=>{const a=n.current+l;t(a),function h(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(a)},[t]),o=D.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return D.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function Aq(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let l=p$e(e,Math.max(o,0));i.length===1&&(l=l.filter(d=>d!==n));const h=l.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return h!==n?h:void 0}function p$e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const m$e=UMe,Oq=GMe,g$e=WMe,y$e=HMe,v$e=XMe,Mq=ZMe,_$e=QMe,x$e=r$e,$q=o$e,kq=s$e,b$e=l$e,w$e=c$e,Nq=f$e,Lq=h$e,Dq=d$e,S$e=m$e,E$e=x$e,C$e=g$e,Rq=D.forwardRef(({className:e,children:t,...n},r)=>Pe.jsxs(Oq,{ref:r,className:Vn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,Pe.jsx(y$e,{asChild:!0,children:Pe.jsx(Z8,{className:"h-4 w-4 opacity-50"})})]}));Rq.displayName=Oq.displayName;const zq=D.forwardRef(({className:e,...t},n)=>Pe.jsx(Nq,{ref:n,className:Vn("flex cursor-default items-center justify-center py-1",e),...t,children:Pe.jsx(EY,{className:"h-4 w-4"})}));zq.displayName=Nq.displayName;const Fq=D.forwardRef(({className:e,...t},n)=>Pe.jsx(Lq,{ref:n,className:Vn("flex cursor-default items-center justify-center py-1",e),...t,children:Pe.jsx(Z8,{className:"h-4 w-4"})}));Fq.displayName=Lq.displayName;const Bq=D.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>Pe.jsx(v$e,{children:Pe.jsxs(Mq,{ref:i,className:Vn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[Pe.jsx(zq,{}),Pe.jsx(_$e,{className:Vn("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),Pe.jsx(Fq,{})]})}));Bq.displayName=Mq.displayName;const jq=D.forwardRef(({className:e,...t},n)=>Pe.jsx($q,{ref:n,className:Vn("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));jq.displayName=$q.displayName;const mM=D.forwardRef(({className:e,children:t,...n},r)=>Pe.jsxs(kq,{ref:r,className:Vn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[Pe.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Pe.jsx(w$e,{children:Pe.jsx(d$,{className:"h-4 w-4"})})}),Pe.jsx(b$e,{children:t})]}));mM.displayName=kq.displayName;const I$e=D.forwardRef(({className:e,...t},n)=>Pe.jsx(Dq,{ref:n,className:Vn("-mx-1 my-1 h-px bg-muted",e),...t}));I$e.displayName=Dq.displayName;function T$e({setSelectedAnimal:e}){const{theme:t}=X8(),n=i=>{e(i)},r={backgroundColor:t==="dark"||t==="system"?"#09090b":"initial"};return Pe.jsxs(S$e,{onValueChange:n,children:[Pe.jsx(Rq,{className:"w-[215px]",style:r,children:Pe.jsx(C$e,{placeholder:"Chien"})}),Pe.jsx(Bq,{children:Pe.jsxs(E$e,{children:[Pe.jsx(jq,{children:"Animal"}),Pe.jsx(mM,{value:"chien",children:"Chien"}),Pe.jsx(mM,{value:"chat",children:"Chat"})]})})]})}const cP={2020:{chien:{nb_comm:34033,pop_max:28235,pop_min:1,pop_med:129},chat:{nb_comm:33569,pop_max:44302,pop_min:1,pop_med:49}},2019:{chien:{nb_comm:34225,pop_max:28549,pop_min:1,pop_med:127.5},chat:{nb_comm:33687,pop_max:42441,pop_min:1,pop_med:46}},2018:{chien:{nb_comm:33847,pop_max:28864,pop_min:1,pop_med:126},chat:{nb_comm:33288,pop_max:40581,pop_min:1,pop_med:43}},2017:{chien:{nb_comm:33821,pop_max:28917,pop_min:1,pop_med:124},chat:{nb_comm:33197,pop_max:38582,pop_min:1,pop_med:39}}},x6=(e,t)=>cP[e]&&cP[e][t]?cP[e][t]:{};function P$e(){const[e,t]=D.useState(""),[n,r]=D.useState(""),i=n,o=e,l=x6(i,o),a=x6((parseInt(i)-1).toString(),o),h=NV(v=>v.densityData.densityData);function d(v,b){return(b-v)/v*100}const g=i&&o&&h?`Nombre de ${o} dans la commune de ${h.properties.nom_comm_x} entre 2017 et 2020`:i&&o?`Nombre de ${o} en France entre 2017 et 2020`:"Nombre de chien en France entre 2017 et 2020";return Pe.jsx(Pe.Fragment,{children:Pe.jsx(xY,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:Pe.jsx("div",{className:"hidden flex-col md:flex",children:Pe.jsxs("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[Pe.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[Pe.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Tableau de bord - ICAD"}),Pe.jsxs("div",{className:"flex items-center space-x-2",children:[Pe.jsx(T$e,{setSelectedAnimal:t}),Pe.jsx(jne,{selectedYear:n,setSelectedYear:r}),Pe.jsx(kee,{})]})]}),Pe.jsx("div",{className:"border-b"}),Pe.jsxs(DK,{defaultValue:"overview",className:"space-y-4",children:[Pe.jsx("h5",{className:"text-lg text-muted-foreground font-medium tracking-tight",children:"Visualisation des donnes"}),Pe.jsxs(zK,{value:"overview",className:"space-y-4",children:[Pe.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[Pe.jsxs(jd,{children:[Pe.jsxs(Ud,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Pe.jsx(Vd,{className:"text-sm font-medium",children:"Nombre de communes enregistres"}),Pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 text-muted-foreground",strokeWidth:"2",children:[Pe.jsx("polyline",{points:"1,8 12,3 23,8"}),Pe.jsx("line",{x1:"4",y1:"8",x2:"4",y2:"21"}),Pe.jsx("line",{x1:"8",y1:"8",x2:"8",y2:"21"}),Pe.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"21"}),Pe.jsx("line",{x1:"16",y1:"8",x2:"16",y2:"21"}),Pe.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"21"}),Pe.jsx("line",{x1:"1",y1:"21",x2:"23",y2:"21"})]})]}),Pe.jsxs(Gd,{children:[Pe.jsx("div",{className:"text-2xl font-bold",children:l.nb_comm?l.nb_comm:34033}),Pe.jsx("p",{className:"text-xs text-muted-foreground",children:l.nb_comm?(d(a.nb_comm,l.nb_comm)>0?`+${d(a.nb_comm,l.nb_comm).toFixed(1)}`:d(a.nb_comm,l.nb_comm).toFixed(1))+"% depuis l'anne dernire":"+0.6% depuis l'anne dernire"})]})]}),Pe.jsxs(jd,{children:[Pe.jsxs(Ud,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Pe.jsxs(Vd,{className:"text-sm font-medium",children:["Population maximale ",l.pop_max?Pe.jsx("b",{children:"(Toulouse)"}):""]}),Pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"h-4 w-4 text-muted-foreground",children:[Pe.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),Pe.jsx("polyline",{points:"5,11 12,4 19,11"})]})]}),Pe.jsxs(Gd,{children:[Pe.jsx("div",{className:"text-2xl font-bold",children:l.pop_max?l.pop_max:28235}),Pe.jsx("p",{className:"text-xs text-muted-foreground",children:l.nb_comm?(d(a.pop_max,l.pop_max)>0?`+${d(a.pop_max,l.pop_max).toFixed(1)}`:d(a.pop_max,l.pop_max).toFixed(1))+"% depuis l'anne dernire":"-1.1% depuis l'anne dernire"})]})]}),Pe.jsxs(jd,{children:[Pe.jsxs(Ud,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Pe.jsx(Vd,{className:"text-sm font-medium",children:"Population minimale"}),Pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"h-4 w-4 text-muted-foreground",children:[Pe.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"20"}),Pe.jsx("polyline",{points:"5,13 12,20 19,13"})]})]}),Pe.jsxs(Gd,{children:[Pe.jsx("div",{className:"text-2xl font-bold",children:l.pop_min?l.pop_min:1}),Pe.jsx("p",{className:"text-xs text-muted-foreground",children:l.nb_comm?(d(a.pop_min,l.pop_min)>0?`+${d(a.pop_min,l.pop_min).toFixed(1)}`:d(a.pop_min,l.pop_min).toFixed(1))+"% depuis l'anne dernire":"0.0% depuis l'anne dernire"})]})]}),Pe.jsxs(jd,{children:[Pe.jsxs(Ud,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Pe.jsx(Vd,{className:"text-sm font-medium",children:"Population mdian"}),Pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"h-4 w-4 text-muted-foreground",children:[Pe.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),Pe.jsx("circle",{cx:"9",cy:"7",r:"4"}),Pe.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"})]})]}),Pe.jsxs(Gd,{children:[Pe.jsx("div",{className:"text-2xl font-bold",children:l.pop_med?l.pop_med:129}),Pe.jsx("p",{className:"text-xs text-muted-foreground",children:l.nb_comm?(d(a.pop_med,l.pop_med)>0?`+${d(a.pop_med,l.pop_med).toFixed(1)}`:d(a.pop_med,l.pop_med).toFixed(1))+"% depuis l'anne dernire":"+1.2% depuis l'anne dernire"})]})]})]}),Pe.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[Pe.jsxs(jd,{className:"col-span-4",children:[Pe.jsx(Ud,{children:Pe.jsxs(Vd,{children:["Densit de ",e||"chien"," par commune en ",n||"2020"]})}),Pe.jsx(Gd,{className:"flex justify-center items-center p-0",children:Pe.jsx(kMe,{selectedYear:i,selectedAnimal:o})})]}),Pe.jsxs(jd,{className:"col-span-3",children:[Pe.jsxs(Ud,{children:[Pe.jsx(Vd,{children:"Graphique"}),Pe.jsx(W8,{children:g})]}),Pe.jsx(Gd,{children:Pe.jsx(WIe,{selectedAnimal:o,selectedYear:i})})]})]})]})]})]})})})})}const A$e=mMe({reducer:{densityData:OMe}});fP.createRoot(document.getElementById("root")).render(Pe.jsx(Re.StrictMode,{children:Pe.jsx(UIe,{store:A$e,children:Pe.jsx(P$e,{})})}));
